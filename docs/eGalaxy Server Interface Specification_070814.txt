          eGalaxy Server Interface Specification
                                                                                          Version 7.8.14.0 (build 402)
                                                                                                        Mar 30, 2023




  This document contains confidential and proprietary information of Gateway Ticketing Systems
and may not be disclosed to any party without prior written consent of Gateway Ticketing Systems.

                    Copyright © 2002-2023 Gateway Ticketing Systems, Inc.
                                     All Rights Reserved.
                                                  Table of Contents
Table of Contents                                                      2
1 Revision History                                                     5
2 Introduction                                                        13
 2.1 eGalaxy Web Application                                           13
 2.2 eGalaxy Server                                                    13
3 Communications Interface                                            14
 3.1 Message Format                                                    14
 3.2 Data Types                                                        16
 3.3 Message Protocol                                                  17
 3.4 Response Status Codes                                             17
4 Message Types                                                       19
 4.1 Test and Diagnostic                                               19
 4.2 Authentication                                                    21
5 Item and Ticket Definition                                          24
 5.1 QueryCustomerItems                                                24
6 Order Processing                                                    28
 6.1 Overview                                                          28
 6.2 Order Data Format                                                 28
 6.3 Header Parameters                                                 28
 6.4 Modify Order Command                                              77
 6.5 UpdateHeader Order Command                                        79
 6.6 Cancel Order Command                                              80
 6.7 Append Order Command                                              81
 6.8 ResendConfirmation Order Command                                  82
 6.9 Online Order Processing                                           82
 6.10 Order File Import                                                88
7 Event Ticketing Messages                                            90
 7.1 Message Types                                                     90
 7.2 QueryEventDates Message                                           90
 7.3 QueryEvents Message                                               95
 7.4 GetEvents Message                                                108
 7.5 EventTicketHold Message                                          113
 7.6 EventTicketRelease                                               116
 7.7 QueryTicketsOnHold                                               118
 7.8 AbandonSession                                                   119
 7.9 EventTicketCommit                                                120
 7.10 EventTicketSale                                                 121
 7.11 EventTicketReturn                                               122
 7.12 CapacityManagement                                              123
 7.13 QueryRoster                                                     128
 7.14 QueryRosterContact                                              130
8 ActivateTicket Message                                              133
 8.1 Message Format                                                   133
9 QueryTicket Message                                                 145
 9.1 Package, Ticket or Pass Look up fields                           145
 9.2 Package, Ticket or Pass DataRequest fields                       146
 9.3 Status Request Fields                                            153
 9.4 Status Request Fields                                            153
 9.5 Message Format                                                   154
10 QueryTicket Message - Legacy Format                                179
 10.1 Legacy QueryTicket Request Format                               179
 10.2 Legacy QueryTicketResponse Message                              183
11 Common Element Formats                                             187
 11.1 <Pass> Element                                                  187
 11.2 <AddOn> Element                                                 189
 11.3 <Taxes> Element                                                 191
 11.4 <Contact> Element                               191
 11.5 <LogOns> Element                                193
 11.6 <LogOn> Element                                 193
 11.7 <PricingInfoList> Element                       193
 11.8 <JointMemberships> (or <Memberships>) Element   195
 11.9 <Members> Element                               195
 11.10 <IssuedBenefits> Element                       197
 11.11 <NonIssuedBenefits> Element                    198
 11.12 <PhoneNumbers> Element                         198
 11.13 <LoyaltyAccounts> Element                      199
 11.14 <PassRequiredInfo> Element                     200
 11.15 <DebitCardAuthData> Element                    201
 11.16 <RosterDataList> Element                       201
 11.17 <CreateTransactionResponse> Element            202
12 UpdatePass Message                                 214
 12.1 Message Format                                  214
13 Surveys Message                                    219
 13.1 Message Format                                  219
14 Authenticate Logon Message                         225
 14.1 Message Format                                  225
15 Customers Message                                  227
 15.1 Customers Message                               227
 15.2 QueryCustomer Message                           233
16 UpdateReplenishStatus Message                      240
 16.1 Message Format                                  240
17 Contact Message                                    242
 17.1 Contacts Message                                242
 17.2 QueryContact Message                            244
18 QueryContactHistory Message                        251
 18.1 Message Format                                  251
19 ReplenishTicket Message                            254
 19.1 Message Format                                  254
20 ImportPass Message                                 256
 20.1 Message Format                                  256
21 SendPasswordReminder Message                       259
 21.1 Message Format                                  259
22 CreateTickets Message                              261
 22.1 Message Format                                  261
23 EncryptionKey Message                              265
 23.1 Message Format                                  265
24 GetPaymentPlanSalesData Message                    267
 24.1 Message Format                                  267
25 CheckGroupSalesLimits Message                      269
 25.1 Message Format                                  269
26 User Message                                       272
 26.1 Message Format                                  272
27 Node Message                                       276
 27.1 Message Format                                  276
28 QueryReportData Message                            279
 28.1 Message Format                                  279
29 ImportDebitTransaction Message                     285
 29.1 Message Format                                  285
30 UpdateContractStatus Message                       288
 30.1 Message Format                                  288
31 QueryLockerTransaction Message                     290
 31.1 Message Format                                  290
32 PaymentAuth Message                   292
33 QueryGroupSalesCode Message           293
 33.1 Message Format                     293
34 ImportTicket Message                  295
 34.1 Message Format                     295
35 GetPaymentContractAccount Message     300
 35.1 Message Format                     300
36 QueryOrders Message                   302
 36.1 Message Format                     302
37 QueryOrder Message                    306
 37.1 Message Format                     306
38 QueryCustomerAccount Message          315
 38.1 Message Format                     315
39 UpdateTickets Message                 317
 39.1 Message Format                     317
40 QueryPrices Message                   326
 40.1 Message Format                     326
41 UpdateSystemLogon Message             328
 41.1 Message Format                     328
42 AddDeferredEntitlementAddOn Message   330
 42.1 Message Format                     330
43 StoredValuePayment Message            332
 43.1 Message Format                     332
44 QueryEntitlements Message             334
 44.1 Message Format                     334
45 QueryPayments Message                 337
 45.1 Message Format                     337
46 eGalaxy Server Error Codes            339
 46.1 Error Code Table                   339
eGalaxy Server Interface Specification                                                                          1 Revision History
1 Revision History
  <td>7.3.22</td>
  <td>
  <ul>
      <li>Add new field AlternateUpgradePrice to the QueryTicketResponse message UpgradePLUList Item element.
  </li>
      <li>Add new field UseAlternateUpgradePrice to the OrderLine element in Orders message.</li>
  </ul>
  </td>

 Document Version    Description

 7.8.12.2                 Issue 290662: Support ShipToContact identification in the QueryOrder request.


 7.8.12.0                 Project 281542: Add error codes 7906 and 7907 for new Order validation scenarios.
                          Project 281542: Add new field <UnlimitedQuantity> to <Benefit> element.
                          Project 281542: Add error code 268 for order line quantity errors.


 7.8.10.1                 Issue 292005: Support <SalesCategoryGroupID> in the EventTicketHold request.

 7.8.0.10014              Project 288228: Add Retry flag to SetOrderStatus response. Notify the calling client that it is suggested to
                          attempt another send of the failed order.


 7.8.10.x                 Project 272941: Added QueryEntitlements message type


 7.8.10.0                 Project 285099: Add <HostDataFields> element to payment order lines so these can be journalized with
                          the transaction.
                          Project 282774: Added new Order validation error for SalesChannelID mismatch (7905)
                          Project 282774: Added new CreateTransaction validation error for SalesChannelID mismatch (3432)
                          Project 282774: Added new event hold validation error for SalesChannelID and Session mismatch (1111)
                          Project 282774: Added new SalesChannelID field to EventTicketSale, Commit and Return requests
                          Project 282774: Added new SalesChannelID field to QueryCustomer response
                          Project 282774: Added new CustomerID field to all event messages for retrieval of SalesChannelID
                          Project 282774: Added new request validation error for CustomerID and SalesChannelID mismatch (1020)


 7.8.7.1                  Project 279900: Add <AuthToken> to handle authorization for all eGalaxy messages (when configured)
                          Project 279900: Added errors new token authorization (1016, 1017, 1018)

 7.8.0.8                  Project 281285: Added StoredValuePayment message type.

 7.8.7.0                  Project 278201: Added new Order validation errors for MustUseByDate passes (7405, 7601, 7602, 7701)
                          Project 278201: Added new Order validation errors for benefits with MustUseByDate passes (7702)
                          Project 278201: New QueryTicket field (MustUseByDateLapsed)

 7.8.6.0                  Project 277201: Added <PackageDetailResponseMode> element to the QueryTicket request message.
                          Project 277201: New error codes 1317, 1318, 1319.
                          Project 278201: New QueryTicket fields (MustUseByDate, MustUseByState and MustUseByStateText)


 7.8.4.0                  Project 272344: New error codes 264, 265, 266.

 7.8.0.7                  Project 272344: New error codes 264, 265, 266.

                                                                                                                                         5
eGalaxy Server Interface Specification                                                                          1 Revision History

          Issue 280742:
          Updated field
          definitions and
          validation error
          codes for
          EventTicketHold
          request related
          to time-linked
          packages.


 7.8.0.3                     Issue 238021: Updated documentation to include MediaType attribute and MediaMode and
                             HasAppleWalletData fields of QueryTicketResponse IssuedBenefits element.


 7.8.1.0                     Issue 254570: Added <EndOfLifeDate> element to the QueryTicket response message.
                             Issue 254570: Added <EndOfLifeDateStatus> element to the QueryTicket response message.
                             Issue 254570: Added <EndOfLifeLockStatus> element to the QueryTicket response message.
                             Issue 254570: Added <EndOfLifeLockDate> element to the QueryTicket response message.


 7.3.29.3                    264562: Update Customers: Allow locating of contacts by ContactGUID and GalaxyContactID in addition to
                             ExternalID. Allow updating the customer's contact's ExternalID and ContactGUID.


 7.3.29.2                    266423: Update QueryCustomer: Return 'EnforceCreditOnAdd' and 'EnforceCreditOnIssue' configuration
                             option settings when the 'UsedCreditAmount' data request field is given in the request


 7.3.20.21                   Issue 275763: Updated documentation to include new fields for QueryContactResponse.


 7.3.20.17                   Issue 272211: Updated documentation to include TicketCode as a required field of ImportTicket.

 7.3.20.14                   Issue 267260: Added Event information in the response of the <QueryOrder> for OrderLines.


 7.3.20.14011                Issue 269279: Added <ErrorWhenSystemLogonExistsForContact> element to the <UpdateSystemLogon>
                             message.
                             Issue 269279: Added <SystemLogonExistsForContact> as a DataRequest field to the <QueryTicket>
                             message.

 7.3.29                      259972: Update Source Config: Add settings for IdentificationNo visibility for messages that return the
                             value from the Contact record.
                             259972: Update QueryTicket: Removed the IdentificationNo request field from passes (added in 7.3.28).
                             To get the IdentificationNo from a pass, request the Contact field instead.


 7.3.28                      258784: Update eGalaxy ActivateTicket: New command ActivatePackageDetail - supports activating
                             package details that were sold as inactive.
                             258784: Update eGalaxy ActivateTicket and UpdatePass messaging to support activation of inactive
                             products and packages
                             258003: Update eGalaxy UpdatePass: When updating a pass to a valid status, enforce pass kind rules
                             258003: Update eGalaxy UpdatePass: When updating a pass, enforce blacklist
                             258003: Update eGalaxy UpdatePass: When updating a pass to a valid status, if the product is configured
                             to capture/store photos, enforce that a photo is provided
                             258003: Update eGalaxy UpdatePass: PassAcct can be used to query for the pass to update in addition to
                             VisualID. One of the two is required. Both can be provided.
                             258003: Update eGalaxy UpdatePass: Prevent updating an unissued pass to a different status.
                             258003: Update eGalaxy UpdatePass: Prevent updating a pass to a status of unissued.
                             258003: Update eGalaxy UpdatePass: Allow updating of Contact.IdentificationNo
                                                                                                                                       6
eGalaxy Server Interface Specification                                                                        1 Revision History
                        258003: Update eGalaxy UpdatePass: Accept a new field StrictValidation. This field determines how
                        UpdatePass handles duplicates. If it is true (default and legacy behavior) and a duplicate is encountered
                        the request will fail. If it is false and a duplicate is encountered processing will continue for any passes
                        that are not duplicates.
                        258003: Update eGalaxy Source Config: Remove checkbox for allowing updating to a status of unissued.
                        258003: Update eGalaxy Messages: Honor new pass kind identification number requirements if they are
                        set


 7.3.27                       <li>Issue 267563: Add new error code for QueryOrder message</li>
                          </ul>
                          <ul>

                        Issue 257500: Add a note in QueryTicket parameters section


 7.3.26                 Issue 254484: Add new eGalaxy error codes
                        Issue 247158: Add source config option to allow QueryOrders requests with only the group visit date
                        range.
                        Issue 247158: Add CustomerGUID field to customer records.
                        Issue 247158: Update eGalaxy Customers requests to allow CustomerGUID, generating a new GUID if one
                        is not provided.
                        Issue 247158: Update eGalaxy QueryCustomers responses to return the CustomerGUID, generating a new
                        GUID if one does not exist for a customer.
                        Issue 247158: Update eGalaxy QueryCustomers requests to allow requesting by CustomerGUID.


 7.3.25                 247896: Append message now available in eGalaxy for Connect use


 7.3.20.5               251885: Support the optional returning of CORS compliant HTTP headers for responses


 7.3                    Add new BookingReference and TravelDate fields to the CreatTransaction message
                        Add error codes when BookingReference and TravelDate data is missing from CreateTransact (when
                        required)
                        Update QueryCustomer documentation for info on UsedCreditAmount data request field.
                        Update QueryCustomer documentation for info on CustomerAttributes data request field.


 7.3.0.27               Issue 254111: Documentation updated to clarify version numbers and fix minor formatting problems.


 7.3.0.25               Update QueryCustomer documentation for info and examples of RemainingCredit data request field.
                        Update QueryContact to support the lookup of invalid passes/memberships that are associated with a
                        contact

 7.2.0.22               Issue 239114: Extra Associated tickets are added when Group Sales on Web order is edited.

 7.2                    Added documentation and error codes for the <UpdateSystemLogon> message.


 7.2.0.21               Issue 242218: eGalaxy Server time-out during GSOW guest logon when Contact is associated with
                        multiple customers

 6.5                    Issue 219888: Support 3D Secure via eGalaxy and Payment Server.
                        Issue 235289: Support Ticket to Ticket upgrades using <UpgradeFromVisualID>.
                        Issue 231294: Support Item effective date in eGalaxy Server.

 7.2.0.19               Issue 239222: Guests Renewing Passes Online Manually When They Are Set To Auto Renew

                                                                                                                                       7
eGalaxy Server Interface Specification                                                                    1 Revision History

 7.2.0.17               Issue 234249: Updated the QueryOrder message to support the returning of GroupVisit information
                        Issue 239196: Updated the UpdateTickets message to support the updating of the original order with new
                        event/date information


 6.5                    Issue 219888: Support 3D Secure via eGalaxy and Payment Server.
                        Issue 235289: Support Ticket to Ticket upgrades using <UpgradeFromVisualID>.
                        Issue 231294: Support Item effective date in eGalaxy Server.
                        Issue 238562: Added support for <ValidateAsNonScan> element in <QueryTicket> message
                        Issue 238562: Added <InitialUseDate> element to <QueryTicketResponse>


 6.5.12                 Issue 238175: Package Add-On ticket relationship. Add OwnerVisualID to the Product element of the
                        CreateTransactionResponse to show the relationship to the entitlement add on.
                        Issue 230195: ER: Block out guest by government ID.
                        Issue 199546: Add <UserFields> to response for Order Add response and QueryOrder response.
                        Issue 163471: Reserved Seating information for Orders request and QueryTicket response. New
                        QueryPrices message to get pricing for Reserved Seat Pricing Levels
                        Issue 160121: Allow QueryTicket to query multiple VisualIDs in a single request
                        Issue 198300: Add CustomerID and CategoryID to QueryOrder Response
                        Issue 183436: Add UpdateTickets message to allow a Picture to be added to an existing ticket. Update
                        QueryTicket message to display a picture on a ticket
                        Issue 189929: Add <SecureToken> to Order Add, QueryOrders and QueryOrder request response


 7.2                    Issue 217112: Support <Deceased> field.

 6.5                    Issue 167656: OE: Add package support to the Query Ticket message
                        Issue 183436: Associate a photo to a product when sold and scanned


 6.4                    Issue 137921: Support for batch requests for QueryEvents message and time linked packages


 6.2                    Issue 149586: Add Quantity node to response of CreateTransaction message
                        Issue 115208: Include SearchEndorsementValue in order response message
                        Issue 63051/145201/155113: Updates to QueryContact, QueryTicket and Orders with respect to the
                        formatting of pass related data (both individual and joint memberships). See Members/JointMembership
                        elements.
                        Issue 198887: Add Availabile, TotalCapacity and Status elements to the response for GetEvents
                        Issue 199356: Add FailedRemaining elements to the request for User
                        Issue 200008: Add PLU element to the request for QueryEventDates to support PLU-based RM holds
                        Issue 200038: Updated MessageID to support 64bit integer values


 5.6/6.1                Issue 110345: Support Event Holds when holding event tickets
                        Issue 123944: Add TranslationLanguageID to QueryEvents and QueryRoster. Add GetEvents message
                        Issue 146027: Change UpdatePass message to support multiple pass records
                        Issue 115208: Support for Search EndorsementValue in response for CreateTransaction
                        Issue 110345: PD: Add support for hold items to pull from the Hold capacity of an event
                        Support Event Holds when holding event tickets
                        Issue 123944: CE: Support Web Store translation for multiple languages
                        Add TranslationLanguageID to QueryEvents
                        Add TranslationLanguageID to QueryRoster
                        Add GetEvents message
                        Change UpdatePass message to support multiple pass records
                        Issue 115208
                        Support for Search EndorsementValue in response for CreateTransaction


 5.4                    Issue 113567: Add new fields to Survey XML
                        Issue 135373: Document ImportPass message format for file import
                                                                                                                                 8
eGalaxy Server Interface Specification                                                                    1 Revision History

 5.3                    Issue 117207: Add AllowEmail and AllowMailings fields to the <Contact> element and
                        <QueryContactResponse>. Also add PassRenewUpgradeMode, UpgradePLUList, and new fields on
                        RenewalPLUList for QueryTicket message. Also added pass picture, contract ID, and IsValid indicator to
                        the QueryTicket message. Added UpgradeValue to the QueryTicket response. Added
                        GetPaymentContractAccountData message. Added RenewalPassVisualID field to the QueryTicket
                        response message. Added IncludeRenewalPass field to QueryTicket request message and RenewalPass
                        element to QueryTicket response.
                        Issue 93690: Changes to Orders message to support GiftAid
                        Issue 56366: Addd support for Reserved Seating module
                        Make EventTypeID an optional field for QueryEventDates and QueryEvents messages.
                        Issue 127216: Move messages for Loyalty module in a separate document called
                        LoyaltyeGalaxyMessagesv5.3.doc
                        Add RelationshipTypeID under <JointMembership> element.
                        Return <PrivateEvent> field in QueryEvent response message.
                        Add RequirePasswordChange field to <LogOn> element.
                        Return Seats reserved when processing EventTicketHold message in EventTicketHoldResponse message
                        Return RSEventSeatMapID in QueryEventsResponse message


 5.2                    Issue 097720: Update Order Modify information to include new rules for allowing an update of the order
                        w/o giving <OrderLines>.
                        Issue 091043: Add description for new warning (with error code) for problem with acquiring SIAE fiscal
                        seals.


 5.1                    Issue 058849: Pass Required ticket limits – Add PassRequiredInfo to the QueryTicket message.


 5.0                    Issue 108049: Loyalty Program – Add new messages and changes to QueryTicket and QueryContact
                        Issue 108049: Loyalty Program – Add new LoyaltyRedemption message
                        Issue 108049: Loyalty Program – Add loyalty related <Order> and <OrderLine> elements, make loyalty
                        element names more consistent across loyalty messages
                        Issue 59086: Upsell – Add <Upsell> element to order line
                        Issue 120664: Add LinkLoyaltyAccount message


 4.11                   Issue 115689: Support inactive tickets with eGalaxy Ticket Activation
                        ActivateTicket, CreateTicket and CreateTransaction messages now supports creating inactive tickets.


 4.10                   Issue 103522 – Add support for <PhoneNumbers> element.
                        Issue 108161 – Add support for JointMemberships for Orders message
                        Issue 112423 – Add support for using the ImportDebitTransaction message with GTS Debit Cards (non-
                        RFID).

 4.8                    Issue 106065 – Add support for ValidFrom field under .
                        Issue 23344 - Add TaxUniqueID
                        Issue 102981 – Support Quantity element on QueryEventDates and QueryEvents messages. Support
                        returning SectionID on EventTicketHold message.
                        Issue 074775 – Changes for GroupSales on the Web project:
                        Make EventTypeID an optional field for QueryEventDates and QueryEvents messages.
                        Add RequirePasswordChange field to <LogOn> element.
                        Add CustomerStatus field in Customers message
                        Return RequirePasswordChange field in QueryContact response
                        Add QueryGroupSalesCode message
                        Add support for returning <PricingInfoList> in QueryContact response message
                        Issue 104664 – Add new support for pricing on QueryEvents message
                        Add new pricing elements to the request and response specifications.
                        Add new error messages
                        Issue 110947 – Add GroupSalesCode field to the <Order> element.
                        Update “Test” message example to document the <SessionID> in the header.

                                                                                                                                 9
eGalaxy Server Interface Specification                                                                    1 Revision History

 4.7                    Add missing IsPrepaymentAccount tag to Customers request Issue 102155.
                        Add error code for item delivery conversion invalid replacement PLU (Issue 99981)
                        Add PaymentAuth message specs (reference to proper API document for this message) – Issue 92198
                        Add descriptions for already supported fields: AgencyID, DiscAmt, RetailPrice, and ExternalPrice to
                        QueryTicket message (Issue 84397)
                        Add optional Picture Element for Pass Element (Issue 91721)
                        Add ImageData field for Picture Element
                        Add section for messages that are supported in ‘File” format.
                        Add fields and error messages for CMS points (Issue 92084)
                        Fix interface of EventTicketHold response msg in example
                        Add Status tag under Picture tag (Issue 103621)


 4.6                    Add account fields to QueryCustomerResponse message for prepayment (Issue 76472).
                        Update the ImportDebitTransactions message to update unprocessed locker transactions. Add
                        LockerTransactionTotal field. (Issue 83887)
                        Add QueryLockerTransaction message (Issue 83887)
                        Add CSV report formatting to QueryReportData message (Issue 88905)
                        Add DisbursementID field to <OrderLine> (Issue 75124)
                        Add QueryRoster and QueryRosterContact messages.
                        Add RosterData information to the Orders message.
                        Add Error codes for QueryRoster and QueryRosterContact


 4.5                    Add <StatusDescription> field to QueryTicketResponse (Issue 84838)
                        Add error code 177 to Error Code Table.(Issue 65514)
                        Add support for <Discounts> element under Ticket/Item/Pass Orderline (Issue 38013)
                        Issue 61388 – Add new messages for Reseller Web Store (User, Node)
                        Issue 81927 – Add ValidFrom field to UpdatePass request
                        Issue 71066 – Add ImportDebitTransaction message
                        Issue 70706 – Add support for packages
                        Issue 82886 – Add support for UpdateContractStatus message
                        Issue 86392 – Modify UpdateContractStatus message to process multiple updates in one message
                        Issue 86534 – Add ResetSecurityAnswer to User message
                        Issue 85870 – Support Stratus GiftCards


 4.0                    Enhancements to TicketActivation message for ClicknPrint Tickets ® interface (Issue 77345)


 3.8                    Add TotalPaymentContracts field to QueryContactResponse message (Issue 61240)
                        Add EncryptionKey message (Issue 71961)
                        Add GetPaymentPlanSalesData message (Issue 73256)
                        Add CreateDate to XML OrderLine (Issue 48082)
                        Add CheckGroupSalesLimits message (Issue 55851)
                        Add EnforceLimits, CustCategoryID, AccountID fields to QueryCustomerResponse (Issue 55851)
                        Add PO field to Orders message (Issue 55851)


 3.7                    Add ImportPass message (Issue 45989)
                        Add error code to UpdatePass message (Issue 45989)
                        Add formats for SendPasswordReminder message
                        Add CreateTickets message (Issue 56883)
                        Add Lineage Amount, Lineage Valid, Lineage RemainingUse, Lineage ExpirationDate, Lineage Status,
                        ReplenishmentStatus, TotalRemainingUse, IsAutoReplenish, and ExpirationDate new fields to QueryTicket
                        message (Issue 55877)
                        Add SeatAssignment fields to Orders, ActivateTicket, and CreateTickets message (Issue 56377)
                        Support lookup by <Lastname> in QueryTicket message (Issue 58166)
                        Correct document on Gift.SolicitationID type to be Integer
                        Add EventTicketCommit, EventTicketSale and EventTicketReturn messages
                        Add format changes for Payment Plans support in Orders message (Issue 61240). Add new error codes


                                                                                                                              10
eGalaxy Server Interface Specification                                                                     1 Revision History
 3.6.13                 Add <PassAccount> for Pass Lookup by Pass Account (Issue 52548)
                        Add <ExpirationDate> on OrderLine (Issue 55356)
                        Add Order line comment / LineNote (Issue 55355)


 3.6.12                 Allow configuring error code 1302 as a warning (Issue 54071)


 3.6.10                 Support <SalesProgram> element for Ticket or Item <OrderLine> (Issue 40330)
                        Changes to suppress payment info from QueryContactResponse message (Issue 53024)
                        Add new error code 1433 for ActivateTicket request processing (Issue 53206)
                        Add support for Name Titles/Suffixes to Contact messages (Issue 49117), remove Salutation references
                        and rename Title tag to JobTitle

 3.6.6                  Add <Gift> element on Order Line (Issue 46577)


 3.6                    Support IsPrimary field on <Pass> element (Issue 45465)
                        Support <Guest> element on pass order line (DetailType of 8) (Issue 45465)
                        Add new error codes for error checking related to The Raiser’s Edge ® interface (Issue 45465)


 3.5                    Support parameterized PickupOrders and PickupSurveys requests (Issue 46755)
                        Support ReplenishTicket message (Issue 37482)
                        Support <EchoData> tag in <Header> of ANY message (Issue 43003)
                        Support QueryContactHistory message (Issue 37482)
                        Support UpdateReplenishStatus message (Issue 37482)
                        Support Contacts, and QueryContact messages (Issue 37482)
                        Support Customers, and QueryCustomer messages (Issue 37482)
                        Support AuthenticateLogon message (Issue 37482)
                        Support returning Usage and Lineage information in QueryTicketResponse (Issue 38118)
                        Add optional <ResourceID> element for QueryEvents and QueryEventDates
                        Add DetailType 9 (Total Tax) to DetailType Values table
                        Add <PaymentName> field to <PaymentInfo> element


 3.0                    Change document version from Titan2 to 3.0
                        Add XML formats for PickupSurveys, SetSurveyStatus, GetRejectedSurveys, and ChangeSurveyStatus
                        messages
                        Add new error codes for Surveys message processing
                        Add XML for AbandonSession message
                        Support new error “Event not active currently” when importing an order (error code 151)
                        Support field “NewExpirationDate” in QueryTicket message
                        Support new error “Sales program is not valid to use on the given order date of OrderDate” when
                        importing an order (error code 152)
                        Add error codes 1431 and 1432

 Titan 2                Changes to support web store enhancements (Issue 31465)
                              Support <PromotionID>, <PromotionCode>, <SalesCategoryGroupID>, and <ExternalOrderStatus>
                              within <Order>
                              Support <Taxes>, <Guest>, <TaxAmount>, <DiscountAmount> and <SalesChannelDetailID> within
                              item <OrderLine>
                              Support <DeliveryMethodID> field under <Shipping> element
                              REMOVE field <TaxCode> from <OrderLine> as it was not supported at all and is not necessary
                              Add new error checks (error 144) to Orders message validation
                        XML changes to ActivateTicket message (32084 - daily ticket enhancement)
                              Support <SalesProgram> fields under <TicketActivation>
                              Support <EventID>, <DateSold>, and <ExpirationDate> fields under <Ticket> element
                              Add new error checks (error code 1421 to 1429) to Activate and Cancel command processing
                        Add more error checks (145 to 147) to Orders message validation (Issue 32192 - eGalaxy Import Orders
                        from third-party vendors)

                                                                                                                               11
eGalaxy Server Interface Specification                                                                  1 Revision History
 Titan 1                Change document version from 2.3 to Titan
                        Add fields RenewablePLUList, PassKindName, ExpireType, and ExpireValue to QueryTicket message
                        Add support for <StatusRequest> element in QueryTicket
                        Add format for <Pass> element
                        Add UpdatePass message
                        Add OrderLine with a DetailType of 8 (Pass) to Orders message
                        Add an example of Orders message with a Pass order line
                        Add new error codes for UpdatePass, QueryTicket and Orders messages
                        Modify description for SectionID field in EventTicketHold and EventTicketRelease messages. Remove “Use
                        1 for most events”


 2.3                    Change document version from 2.2 to 2.3
                        Add QueryTicket message
                        Add error codes for QueryTicket message
                        Add example for QueryTicketResponse with errors
                        Add new error codes (1419 & 1420) for ticket activation


 2.2                    Change document version from 2.1 to 2.2
                        Add ActivateTicket message
                        Add error codes for ActivateTicket message


 2.1                    Changed document version from 2.0.0 to 2.1
                        Add <Authorize> element to message header
                        Add AVS & CVN data fields to payment order line element
                        Add AuthCode, AVSResponseCode, and CVNResponseCode fields to SetOrderStatus message

 2.0.0                  Changed document version from 1.8.11 to 2.0.0
                        Add <PayOnIssuance> flag on the payment <OrderLine> element
                        Add <OrderReference> field to the <Order> element
                        Add error codes 130, 131, and 132


 1.8.10                 Added OrderCommand to the Order element to support Modify and Cancel commands
                        Added optional SalesProgram to the Order element.


 1.7.19                 Add Username and Password elements to the PickupOrders and SetOrderStatus messages to facilitate the
                        web site’s authentication of eGalaxy’s order retrieval messages
                        Added SessionID to <Order> element for event ticket orders
                        Added <GalaxyOrderID> element to <SetOrderStatus> message sent to website
                        Updated data type of the following elements to match with their Galaxy’s SQL tables’ column size:
                        OrderID in <Order> element
                        Phone, Fax, Cell, Email in <Contact> element

 1.7.18                 Changed document version to match corresponding eGalaxy software release version
                        Added SourceID to message header
                        Added Shipping, UserFields, and GroupVisit elements to <Order> element

 1.4                    Fixed the format of OrderDate element data for Orders example
                        Added SetOrderStatus example
                        Added EventTypeID to QueryEvents message




                                                                                                                             12
eGalaxy Server Interface Specification                                                                                      2 Introduction
2 Introduction
eGalaxy is a set of web technologies from Gateway Ticketing Systems that enable the sale of tickets and merchandise in a distributed
environment via the world wide web. With eGalaxy, an attraction expands its sales capability to multiple channels include front gate box
office, telephone sales center, and internet e-commerce.
eGalaxy consists primarily of two components: the eGalaxy Web application and the eGalaxy Server.




                                                                  Diagram

2.1 eGalaxy Web Application
eGalaxy Web application manages the shopping experience and product catalog and for selling tickets and merchandise on the Web. In
addition to providing shopping cart, credit card authorization, and checkout functions, eGalaxy Web also includes an interface allowing
remote management and order download.

2.2 eGalaxy Server
The eGalaxy Server provides a set of web services enabling an attraction to offer tickets and merchandise for sale on the Internet. Normally
the eGalaxy Server allows access to the event information to remotely located, yet closely related, web site hosted by an ISP or other third-
party on behalf of the attraction. However, this distributed configuration also allows the potential for access to the attraction's ticket
"inventory" by other securely authenticated parties who have been given permission by the attraction to draw from that inventory.




                                                                                                                                           13
eGalaxy Server Interface Specification                                                                  3 Communications Interface
3 Communications Interface
The eGalaxy Server supports the exchange of messages in real-time via Hyper Text Transport Protocol (HTTP). eGalaxy Server supports real-
time communication via a straightforward “web service” supported by an embedded web server contained within the eGalaxy Server service
application.
Clients transmit real-time request messages to eGalaxy Server in XML format via the HTTP POST command, and receive XML response
messages in return.
Another way to send a request message to eGalaxy Server is via an ASCII text file containing the message. The eGalaxy Server can be
configured to monitor a file folder situated on the network file server and periodically import files containing the messages from that
location. Not all messages can be sent via a file to the eGalaxy Server. At present following messages are supported in the file format:
      Orders
      ActivateTickets
      UpdateContractStatus

3.1 Message Format
Messaging in eGalaxy Server is based on the transmission of XML. An eGalaxy Server message consists of a XML framework with an
"envelope" element containing both a "header" and a "body" element.

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>Test</MessageType>
          <TimeStamp>2002-01-20 17:33</TimeStamp>
      </Header>
      <Body>
          <Test>This is a test message.</Test>
      </Body>
  </Envelope>

As you can see, the structure of eGalaxy Server messages is similar in structure to that of SOAP messages. If you are not familiar with
SOAP, the latest SOAP specification is available at http://www.w3.org/TR/SOAP.

3.1.1 Message Header
The message header consists of a Header element containing child elements for MessageID, MessageType, and TimeStamp fields.

 Field       Type               Description
 SourceID    Text               System Source identifier
 MessageID   Integer            Incrementing message number
             (64bit)
 MessageType Text               Description of message contents, or desired recipient action
 SessionID   Integer            Unique eGalaxy session identifier
 TimeStamp   DateTime           Date and time of message
 Authorize   Element            See Authorize
 EchoData    Text(128)          Contains echo data for a request. The data given in this field is returned by eGalaxy in the response for
                                the given request
 AuthToken       Text           See AuthToken below

The SourceID field is used to identify the message sender and is used in combination with the MessageID to uniquely identify the message.
The MessageID field in the header is used by the receiving application to prevent messages sent in duplicate from being processed more
than once (Note that this functionality is not yet implemented.) Both the sender and the receiver applications maintain their own
MessageID counter, which is incremented with each new message generated.
The MessageType field indicates the purpose of the message.

                                                                                                                                            14
eGalaxy Server Interface Specification                                                                    3 Communications Interface
The SessionID field specifies the client’s eGalaxy session. The SessionID is obtained by issuing an Authentication message to eGalaxy
before performing any other transaction. The SessionID field in an Authentication message is blank or zero. The SessionID is important
when reserving event tickets – all tickets placed on hold for an order must be held using the same SessionID.
The TimeStamp field is useful for diagnostic purposes to determine transmission times. It is set to the current time of the host from which
the message is originated.
The <Authorize> is an optional element, and it is added to support an extra layer of security between the website sending messages and
the eGalaxy server. Following is the format of the <Authorize> element:

 Field    Description      Type
 Username eGalaxy Username Text (24)
 Password eGalaxy Password Text (40)

If <Authorize> element is present within the <Header> element of the message, it contains the Username and Password fields, which is
validated against Galaxy’s users database (GxUsers table). All messages are rejected if the authorization fails. The <Authorize> is an
optional element; if it is not present (or empty), no authorization is performed and messages are processed.
The EchoData field is supported to facilitate the sender of the request to map a request sent to eGalaxy server with the response received.
The value for this field can be alphanumeric and a maximum of 128 characters are supported. If the value longer than 128 characters is
given in the request, the response only contains the first 128 characters.
The <AuthToken> is an optional element that validates a token against a 3rd party token validation server. When passed in the header, the
value provided will be passed along to the URL configured in eGalaxyConfig > Security Tab > Auth Token URL when eGalaxy is configured to
require token authorization.

3.1.2 HTTP CORS (Cross-Origin Resource Sharing) Compliant Headers
When configured at the Source level, eGalaxy Server supports receiving and responding with CORS compliant HTTP headers. If the client
sending the request will be including CORS headers in the request, the request header should also include the source value in the HTTP
header to allow eGalaxy Server to verify the use of the CORS headers for the response. The header used is 'x-egalaxy-source-id' in the form

  x-egalaxy-source-id: ABC Travels

in the HTTP header. Also needed would be the 'origin' HTTP header. When these values are received eGalaxy Server will compare the origin
given with the list of accepted domains configured at the eGalaxy source level. If the origin domain given is in the comma separated list
configured on the source, or if the accepted origins is '*', meaning all domains are accepted, the response message will include CORS
compliant HTTP headers. The list of accepted request headers and response headers are listed below.
To obtain information about what request methods and headers can be sent, a preflight request can be sent to eGalaxy Server using the
OPTIONS HTTP method. The response will contain the allowed origin as well as the allowed methods and headers.

3.1.2.1 HTTP Request Headers

 Field                 Description
 origin                Specifies the domain where the request is coming from
 x-egalaxy-source-     Contains the ExternalSourceID value of a valid eGalaxy source. This source should be configured to use CORS
 id                    headers

3.1.2.2 HTTP Response Headers

 Field      Description
 access-    If one of the configured allowed origins match the given origin from the request, this will be the given orgin value. Or '*' if this
 control-   is configured to be a public source and all domains are allowed access. | | access-control-allow-methods | The viable methods
 allow-     to call for eGalaxy Server. This will always return 'POST, GET, OPTIONS'. | | access-control-allow-headers | A comma
 origin     separated list of accepatable headers that eGalaxy Server will accept. | | access-control-max-age | The value, in seconds, for
            how long a browser can cache the a preflight request without having to send another preflight request. Currently 600 seconds.|

3.1.3 Message Body
The Body element of an eGalaxy message contains the actual message contents. The contents are formatted as child elements within the

                                                                                                                                               15
eGalaxy Server Interface Specification                                                                    3 Communications Interface
<body> element tag. The actual child elements found within the body are dependent upon the MessageType indicated in the message
Header.

3.2 Data Types
 Type         Description                                     Format                      Size
 Date         Full numeric date                               CCYY-MM-DD                  10
 Time         Full numeric time                               HH:MM:SS                    16
 DateTime     Full numeric date and time                      CCYY-MM-DD HH:MM            16
 Text         Set of characters                               Alphanumeric characters
 Numeric      Numeric value                                   NNNN                        Signed 32-bit
 Float        Real value                                      NNNN.xx                     8 Bytes
 Currency     Currency value                                  NNN.xx                      8 Bytes
 Boolean      Boolean represented by values “YES” or “NO”     3 Char

3.2.1 Date
The date data type contains a full numeric date and is 10 characters in length with dashes ("-") separating the year, month, and day
elements following the international standard date notation (ISO 8601).
The international standard date notation is
CCYY-MM-DD
where CCYY is the year in the usual Gregorian calendar, MM is the month of the year between 01 (January) and 12 (December), and DD is
the day of the month between 01 and 31. For example, the fourth day of February in the year 1995 is written in the standard notation as
1995-02-04.
Format yyyy-mm-dd Example 2002-01-17
Notes
        ISO 8601 Information Exchange - Representation of dates and times ftp://ftp.qsl.net/pub/g1smd/8601v03.pdf
        A Summary of the International Standard Date and Time Notation http://www.cl.cam.ac.uk/~mgk25/iso-time.html

3.2.2 DateTime
Format: CCYY-MM-DD HH:MM

3.2.3 Text
The Text data type defines a set of alphanumeric characters. The size of the Text is limited to the characters specified next to the data type.
For example, Text (20) means 20 characters are allowed for the given field.
The size is not specified when unlimited number of characters is permitted for a field.

3.2.4 Numeric
The Numeric data type represents a subset of the whole numbers. The range of values supported under this data type is -
2147483648..2147483647.

3.2.5 Float
Float data type defines a set of number that can be represented with floating-point notation. The range of values supported under this data
type is -5.0 x 10^324..1.7 x 10^308.

3.2.6 Currency
Currency data type defines a set of number that can be represented with floating-point notation. The range of values supported under this
data type is -922337203685477.5808.. 922337203685477.5807.

                                                                                                                                            16
eGalaxy Server Interface Specification                                                                  3 Communications Interface
 3.2.7 Boolean
Boolean data type represents the logical data type in form of characters. The permitted values under this data type are “YES” or “NO”.

3.3 Message Protocol
Communication between applications in an eGalaxy environment is accomplished by transmitting a request message to the recipient
application, and waiting for a response message in return. Both request and response messages follow the same message format.

3.3.1 Sending Messages via HTTP
Messages between the eGalaxy Attraction Server and the web site are sent via TCP/IP using HTTP and the POST command. Port 3051 is
used by eGalaxy to communicate with the web site.

3.3.2 Use of Persistent / Keep-Alive HTTP Connections
The HTTP protocol definition allows for the use of long-lived HTTP connections to eliminate the costly connect/disconnect phases of
communicating with a network based service. More information about this can be found here: https://developer.mozilla.org/en-
US/docs/Web/HTTP/Headers/Connection
eGalaxy Server supports clients connecting using the HTTP Connection header set to either Keep-Alive or Close. Which of these options the
client should use is determined by the architecture of that client. If an individual client instance/object will be sending many requests
sequentially, using the Keep-Alive option will provide performance improvements. However if the client application will be creating many
disparate connections to eGalaxy Server that are short lived, using the Keep-Alive option can result in a starvation of available threads that
eGalaxy Server has to service requests. This is because eGalaxy Server will leave connections open, waiting for additional requests from the
client. While waiting, those threads are unable to service any other requests.
An example of an application architecture that would not be recommended to use in conjunction with Keep-Alive connections is where a
separate thread is servicing each transaction/guest, and eGalaxy Server requests are sent from a connection created within each thread.
If you are unsure as to how your client connections are being created and re-used/pooled, it is recommended to NOT use Keep-Alive
connections when communicating with eGalaxy Server.

3.3.3 Sample HTTP Request
This is a sample eGalaxy Message embedded in an HTTP request:

  POST /eGalaxy.asp HTTP/1.1
  Host: localhost
  Content-Type: text/xml;
  Content-Length: nnnn
  <?xml version="1.0" ?>
  <Envelope>
      <Header/>
      <Body/>
  </Envelope>

3.3.4 Sample HTTP Response
Sample eGalaxy Message embedded in an HTTP response:

  HTTP/1.1 200 OK
  Content-Type: text/xml
  Content-Length: nnn

  <?xml version="1.0" ?>
  <Envelope>
    <Header>
    </Header>
    <Body>
    </Body>
  </Envelope>


3.4 Response Status Codes
                                                                                                                                            17
eGalaxy Server Interface Specification                                                       3 Communications Interface
Each response message contains a Status element indicating the disposition of the request.

 Field      Description                            Type
 StatusCode Status code indicating source of error Numeric
 StatusText Text description of status             Text

3.4.1 Status Code Table
See the Error Code Table section at the bottom of this document.

3.4.1.1 Request

  <?xml version="1.0" ?>
    <Envelope>
      <Header>
           . . .
      </Header>
      <Body>
        . . .
      </Body>
    </Envelope>

3.4.1.2 Response

  <?xml version="1.0" ?>
  <Envelope>
    <Header>
     . . .
    </Header>
    <Body>
      <Status>
        <StatusCode>0</StatusCode>
        <StatusText>OK</StatusText>
      </Status>
    </Body>
  </Envelope>




                                                                                                                    18
eGalaxy Server Interface Specification                                                                               4 Message Types
4 Message Types
Message types are divided into the following categories:
      Test and Diagnostic
      Data Definition
      Authentication
      Order Retrieval
      Event Ticketing

4.1 Test and Diagnostic
The following test and diagnostic messages are defined:

 MessageType          Description
 Test                 Simple communications message test
 QueryServerStatus    Server status request
 Error                Error response message

4.1.1 Test Message
The Test message allows the client to perform simple communications test, such as determining if a connection to the eGalaxy server is
possible. The body element of a test message contains a TestData element, the contents of which may be any text string.

4.1.1.1 Example Test Request without SessionID

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>8</MessageID>
      <MessageType>Test</MessageType>
      <TimeStamp>2009-06-25 14:33:09</TimeStamp>
    </Header>
    <Body>
      <TestData>123456789</TestData>
    </Body>
  </Envelope>

4.1.1.2 Example Test Request with SessionID

<SessionID> field in the <Header> is optional for Test message, if the purpose is to verify the connection with the eGalaxy Server. However,
by sending a <SessionID> within the Test message you can keep a session alive on eGalaxy Server.

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>8</MessageID>
      <MessageType>Test</MessageType>
      <SessionID>12345</SessionID>
      <TimeStamp>2009-06-25 14:33:09</TimeStamp>
    </Header>
    <Body>
      <TestData>123456789</TestData>
    </Body>
  </Envelope>

4.1.1.3 Example Test Response




                                                                                                                                          19
eGalaxy Server Interface Specification                                                                           4 Message Types
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>131</MessageID>
      <MessageType>Test</MessageType>
      <TimeStamp>2009-06-25 14:33:10</TimeStamp>
    </Header>
    <Body>
      <Time>200-06-25 14:33:10</Time>
    </Body>
  </Envelope>

4.1.2 QueryServerStatus Message
Retrieves general system status from the eGalaxy server. The Body of the QueryServerStatus message has no parameters and it is empty.

4.1.2.1 Example QueryServerStatus Request

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>9</MessageID>
      <MessageType>QueryServerStatus</MessageType>
      <SessionID>10</SessionID>
      <TimeStamp>2009-06-25 14:34:49</TimeStamp>
    </Header>
    <Body>
      <TestData>123456789</TestData>
    </Body>
  </Envelope>

4.1.2.2 Example QueryServerStatus Response




                                                                                                                                        20
eGalaxy Server Interface Specification                                                                                  4 Message Types
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>132</MessageID>
      <MessageType>QueryServerStatus</MessageType>
      <TimeStamp>2009-06-25 14:34:50</TimeStamp>
      <MessageType/>
    </Header>
    <Body>
      <Status>
        <StatusCode>0</StatusCode>
        <StatusText>OK</StatusText>
      </Status>
      <ServerStatus>
        <Computer>
          <ComputerName>eGalaxy Server</ComputerName>
          <User>ComputerUsername</User>
        </Computer>
        <Service>
          <Application>C:\Program files\Gateway Ticketing Systems\eGalaxy\eGalaxy2.exe</Application>
          <Version/>
        </Service>
        <Configuration>
          <GalaxyNode>82</GalaxyNode>
          <DatabaseServer>GalaxyProductionServer</DatabaseServer>
          <DatabaseName>Galaxy1</DatabaseName>
          <DatabaseUser>sa</DatabaseUser>
        </Configuration>
        <Performance>
          <Memory>1296180</Memory>
          <Requests>10</Requests>
          <Clients>2</Clients>
          <Sessions>2</Sessions>
        </Performance>
      </ServerStatus>
    </Body>
  </Envelope>


4.2 Authentication
Authentication is provided within eGalaxy Server to ensure that the application communicating with eGalaxy Server is a properly authorized
entity.

 MessageType          Description
 Authenticate         Request to authenticate
 AuthenticateResponse Response to Authentication

4.2.1 Authentication Request Message
An Authenticate message is sent by the Web Store application to the eGalaxy Server to obtain a Session ID to be used in the subsequent
transactions or requests being sent to the eGalaxy Server.
Upon receiving the Authenticate request, eGalaxy Server comapares the Username and Password provided in the request with the ones in
the GxUsers Galaxy database table and returns a unique SessionID back to the Web Store when they match. In case of a mismatch an error
is returned.
The resulting Session ID is valid for a period of time defined by an eGalaxy Server configuration setting. The default value is typically 20
minutes in duration.

4.2.1.1 Request Message Parameters

 Field        Description              Type
 Authenticate See <Authenticate> below Element

<Authenticate> Element


                                                                                                                                               21
eGalaxy Server Interface Specification                                                           4 Message Types
 Field               Description                                                       Type
 Username            A valid Galaxy username                                           Text
 Password            A valid Galaxy password                                           Text
 PasswordEncrypted   Defines whether or not Password is plain-text or one-way hashed   Boolean

4.2.2 Example Authenticate Message
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>131</MessageID>
      <MessageType>Authenticate</MessageType>
      <TimeStamp>2009-06-25 14:36:30</TimeStamp>
    </Header>
    <Body>
      <Authenticate>
        <Username>Username</Username>
        <Password>Password</Password>
        <PasswordEncrypted>NO</PasswordEncrypted>
      </Authenticate>
    </Body>
  </Envelope>

4.2.3 Example Authenticate Message (Encrypted Password)
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>132</MessageID>
      <MessageType>Authenticate</MessageType>
      <TimeStamp>2019-06-25 14:36:30</TimeStamp>
    </Header>
    <Body>
      <Authenticate>
        <Username>Username</Username>
        <Password>8Bat7QUHF70IBbggZjQVYzJ+EpJkczNVpiHelF47DkI=</Password>
        <PasswordEncrypted>YES</PasswordEncrypted>
      </Authenticate>
    </Body>
  </Envelope>

4.2.4 Example Successful Authenticate response Message
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>131</MessageID>
      <MessageType>Authenticate</MessageType>
      <TimeStamp>2009-06-25 14:36:32</TimeStamp>
    </Header>
    <Body>
      <AuthenticateResponse>
        <SessionID>4</SessionID>
      </AuthenticateResponse>
    </Body>
  </Envelope>

4.2.5 Example Error Authenticate response Message




                                                                                                             22
eGalaxy Server Interface Specification                  4 Message Types
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>131</MessageID>
      <MessageType>Authenticate</MessageType>
      <TimeStamp>2009-06-25 14:36:40</TimeStamp>
    </Header>
    <Body>
      <Status>
        <StatusCode>1001</StatusCode>
        <StatusText>Authentication Error</StatusText>
      </Status>
      <Error>
        <ErrorCode>1001</ErrorCode>
        <ErrorText>Authentication Error</ErrorText>
      </Error>
    </Body>
  </Envelope>




                                                                    23
eGalaxy Server Interface Specification                                                                   5 Item and Ticket Definition
5 Item and Ticket Definition
5.1 QueryCustomerItems
The QueryCustomerItems message is used by a client such as a web site or other external system to retrieve the list of item definitions for
a customer.
The client uses the QueryCustomerItems request to obtain the list of items (and their definitions) for a specific customer. To do so, the
client must provide the CustomerID, which is the Galaxy identification number of the customer.

5.1.1 Request Message Parameters
 Parameter              Description                                                                                                 Type
 CustomerID             Indicates the Galaxy customer number                                                                        Numeric
 UseSalesProgramPricing When set to YES, indicates that the SalesProgram pricing should be included in the price reporting.         Boolean
                        When this option is set to YES the package details are included in the output. (Optional)
 SalesProgramID         Specify a sales program for a customer that has multiple sales programs. If blank, the default              Numeric
                        customer sales program will be used. (Optional)
 IncludeItemAttributes  When set to YES, active item attributes are returned. (Optional)                                            Boolean

If the UseSalesProgramPricing parameter is included with a value of YES, package products will also be included with all of their details in
the response. Tickets or passes can have packages attached to them. In this scenario, the attached package details will be additionally
included underneath the ticket/pass item node.

5.1.2 Example QueryCustomerItems Request
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryCustomerItems</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2009-06-25 15:00:50</TimeStamp>
      </Header>
      <Body>
          <QueryCustomerItems>
              <CustomerID>154353</CustomerID>
              <SalesProgramID>11</SalesProgramID>
              <IncludeItemAttributes>YES</IncludeItemAttributes>
          </QueryCustomerItems>
      </Body>
  </Envelope>

5.1.3 QueryCustomerItemsResponse Message
QueryCustomerItemsResponse message is sent in response to the QueryCustomerItems message. QueryCustomerItemsResponse message
includes information on the customer's sales program and a list of items that are available under that sales program.
The <SalesProgram> element has the following fields:

 Field          Description                                                                                                        Type
 SalesProgramID The SalesProgramID. If no SalesProgramID is specified in the request, this is the customer's default sales         Numeric
                program.
 BeginDate      Date the sales program begins.                                                                                     DateTime
 EndDate        Date the sales program ends.                                                                                       DateTime

The <ItemList> element can contain multiple <Item> elements. The <Item> element has the following fields:

 Field             Description                                                                                                      Type
 PLU               Item PLU                                                                                                         Text

                                                                                                                                               24
eGalaxy Server Interface Specification                                                                      5 Item and Ticket Definition
 Name           Item Name                                                                                                              Text
 Description    Item description                                                                                                       Text
 Price          Item Price                                                                                                             Currency
 EventTypeID    Item EventType                                                                                                         Numeric
 EventID        Item EventID                                                                                                           Numeric
 SectionID      Item Section                                                                                                           Numeric
 Kind           Item kind.                                                                                                             Numeric
 PackagePLU     The package PLU that is associated with the ticket/pass item.                                                          Text
 Attributes     <Attributes> element. Returned if IncludeItemAttributes is set to 'YES' in the request and the item has a non          Element
                zero AttributeValueGroupID.
 PackageDetails <PackageDetails> element. Only returned if UseSalesProgramPricing is set to 'YES' in the request.                      Element

The <Attributes> element contains: | Field | Description | Type | |-------|-------------|------| | Name | The name of the attribute as defined in
AttributeDefinitions. | Text | | Value | Value of the attribute from AttributeValues. | Text |
If the item is a package or is a ticket/pass that has an associated package, the <Item> will contain a list of <PackageDetail> elements.
Fields specific to package details are:

 Field           Description                                                                                                           Type
 PackageDetailID Unique ID of the package detail.                                                                                      Numeric
 Quantity        Package detail quantity. If the issuance type is 'Deferred' or 'Sale or Deferred' then this is enforced as a          Numeric
                 Max Quantity.

5.1.4 Example QueryCustomerItems Response
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryCustomerItems</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2009-06-25 15:00:52</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <SalesProgram>
              <SalesProgramID>11</SalesProgramID>
              <BeginDate>2015-01-07T00:00:00.000-05:00</BeginDate>
              <EndDate>2021-12-31T00:00:00.000-05:00</EndDate>
          </SalesProgram>
          <ItemList>
              <Item>
                  <PLU>A649871</PLU>
                  <Name>Movie</Name>
                  <Description>Movie</Description>
                  <Price>4.99</Price>
                  <EventTypeID>1</EventTypeID>
                  <EventID>0</EventID>
                  <SectionID>1</SectionID>
                  <Kind>1</Kind>
                  <Attributes>
                      <Attribute>
                          <Name>Ticket Purpose</Name>
                          <Value>Recreation</Value>
                      </Attribute>
                  </Attributes>
              </Item>
          </ItemList>
      </Body>
  </Envelope>



                                                                                                                                               25
eGalaxy Server Interface Specification                                5 Item and Ticket Definition
 5.1.5 Example QueryCustomerItems Request with SalesProgram pricing
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryCustomerItems</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2009-06-25 15:00:50</TimeStamp>
      </Header>
      <Body>
          <QueryCustomerItems>
              <CustomerID>154353</CustomerID>
              <UseSalesProgramPricing>YES</UseSalesProgramPricing>
          </QueryCustomerItems>
      </Body>
  </Envelope>

5.1.6 Example QueryCustomerItems Response with SalesProgram pricing




                                                                                               26
eGalaxy Server Interface Specification                               5 Item and Ticket Definition
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryCustomerItems</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2009-06-25 15:00:52</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <SalesProgram>
              <SalesProgramID>3</SalesProgramID>
              <BeginDate>2015-01-07T00:00:00.000-05:00</BeginDate>
              <EndDate>2021-12-31T00:00:00.000-05:00</EndDate>
          </SalesProgram>
          <ItemList>
              <Item>
                  <PLU>A649871</PLU>
                  <Name>Movie</Name>
                  <Description>Movie</Description>
                  <Price>4.99</Price>
                  <EventTypeID>1</EventTypeID>
                  <EventID>0</EventID>
                  <SectionID>1</SectionID>
                  <Kind>1</Kind>
              </Item>
              <Item>
                  <PLU>1-PKG-IM</PLU>
                  <Name>PKG Ind Media</Name>
                  <Description>PKG Ind Media</Description>
                  <Price>10.00</Price>
                  <EventTypeID/>
                  <EventID>0</EventID>
                  <SectionID/>
                  <Kind>15</Kind>
                  <PackageDetails>
                      <PackageDetail>
                          <PLU>1</PLU>
                          <Name>1 - No Tax</Name>
                          <Description>No Tax</Description>
                          <Price>10.00</Price>
                          <EventTypeID/>
                          <EventID>0</EventID>
                          <SectionID/>
                          <Kind>1</Kind>
                          <Quantity>1</Quantity>
                      </PackageDetail>
                  </PackageDetails>
              </Item>
          </ItemList>
      </Body>
  </Envelope>




                                                                                              27
eGalaxy Server Interface Specification                                                                           6 Order Processing
6 Order Processing
6.1 Overview
6.2 Order Data Format
The Orders structure is used to convey order information to eGalaxy. Whether the response to an online PickupOrders request initiated by
eGalaxy, via a file-based import, or by sending Orders message to eGalaxy, the message body contains an Orders element.

6.3 Header Parameters
The header element in the Orders message requires the following fields:

 Field           Description                                     Type
 SourceID        The system source identifier                    Text
 MessageType     For this message, always Orders                 Text
 ValidateOnly    The message will be validated only (optional)   Empty

Note: See the section Message Header to see other supported header fields, all of which are optional for this message.

6.3.0.1 Example Orders Message Header for Validation Only

    <Header>
      <ValidateOnly/>
      <SourceID>TestSystem</SourceID>
      <MessageType>ORDERS</MessageType>
      <MessageID>133</MessageID>
      <TimeStamp>2016-06-16 10:35:53</TimeStamp>
    </Header>

Note: The <ValidateOnly> element will be present in the SetOrderStatus response message header to indicate that the request was
processed in the Validate Only mode.

    <Header>
      <MessageID>133</MessageID>
      <MessageType>SetOrderStatus</MessageType>
      <SourceID>TestSystem</SourceID>
      <TimeStamp>2016-06-16 10:38:57</TimeStamp>
      <EchoData/>
      <SystemFields/>
      <ValidateOnly/>
    </Header>

6.3.1 <Orders> Element
The Orders element appears in the Body element of a standard eGalaxy message. The Orders element contains one or more Order
elements.

  <Body>
    <Orders>
      <Order>
        Data for order 1
      </Order>
      <Order>
        Data for order 2
      </Order>
      . . .
      <Order>
        Data for order n
      </Order>
    </Orders>
  </Body>


                                                                                                                                           28
eGalaxy Server Interface Specification                                                                             6 Order Processing
6.3.1.1 <Order> Elements

Each Order element contains the data for a single order. An Order element contains the following child elements:

 Field                     Description                                                                                       Type
 OrderID                   Unique Order Number – Maps to Galaxy’s ExternalID                                                 Text (20)
 OrderCommand              Add (Default), Append, Modify, UpdateHeader, Cancel or ResendConfirmation. See                    Text
                           <OrderCommand> for details.
 SessionID                 eGalaxy Session ID used to hold event tickets                                                     Numeric
 CustomerID                Unique Galaxy customer number                                                                     Numeric
 OrderDate                 Date and time the customer placed the order                                                       DateTime
 OrderStatus               Indicates the status of an order. 1 – Quote 2 – Open 3 – Closed For new orders use value of 2     Numeric
                           (open).
 SalesProgram              Sales program to use for this order. Overrides the default Sales Program for the customer. For    Numeric
                           Virtual Sales Program value in this field should always be –2 (Optional)
 OrderNote                 Any notes the customer attached to the order                                                      Text
 OrderTotal                Total amount of the order                                                                         Currency
 OrderReference            Additional information about the order                                                            Text (40)
 OrderContact              See <OrderContact>                                                                                Element
 ShipToContact             See <ShipTo>                                                                                      Element
 OrderLines                See <OrderLines>                                                                                  Element
 UserFields                See <UserFields>                                                                                  Element
 Shipping                  See <Shipping>                                                                                    Element
 GroupVisit                See <GroupVisit>                                                                                  Element
 OrderDiscounts            See <OrderDiscounts>                                                                              Element
 SalesCategoryGroupID      ID of the sales category group used to select ticket(s) from in the web transaction (Optional)    Numeric
 PromotionID               ID of the Promotion used on the web transaction (Optional)                                        Numeric
 PromotionCode             Promotion code used to order tickets (Optional)                                                   Text (50)
 PO                        Purchase order number for this order (Optional)                                                   Text (20)
 OrderProcessing           See <OrderProcessing> (Optional)                                                                  Element
 GroupSalesCode            Group sales code that was used to place this order (Optional)                                     Text (30)
 LoyaltyAccountNo          Loyalty account used for this order                                                               Text(40)
 LoyaltyProgramID          Loyalty program associated to the account used on the order                                       Numeric
 PendingLoyaltyBonusPoints Bonus loyalty points that can be issued                                                           Numeric
 IssuedLoyaltyBonusPoints Bonus loyalty points that can have already been issued                                             Numeric
 RemoteAddress             The IP address of the client associated with the Order                                            Text(500)
 PersonalMessage           A field for a message to be sent in the confirmation email to the contact receiving the tickets   Text
                           (Optional)
 OrderHash                 Order hash portion of the Apple Wallet download link for the order (Optional)                     Text

6.3.1.2 <OrderCommand> Element

The <OrderCommand> element appears within the <Order> element and contains text specifying an order command.

 Value                 Description
 Add                   Add the order as a new order (Default)
 Append                Appends the order lines specified in the XML to an existing order (specified by <OrderID>)
 Modify                Modify the order specified by <OrderID>
 UpdateHeader          Update "header" metadata on the order specified by <OrderID>, without modifying the order lines themselves
 Cancel                Cancel the order specified by <OrderID>
 ResendConfirmation    Call to resend the confirmation email and attached PDFTickets for a requested order

                                                                                                                                       29
eGalaxy Server Interface Specification                                                                                 6 Order Processing
Order Command values are not case-sensitive i.e. eGalaxy treats both “Add” and “ADD” as the same command. The default command is
“Add” when the OrderCommand element is not present in the <Order> element. This provides compatibility with applications developed for
earlier versions of eGalaxy which did not implement the OrderCommand element and assumed all <Order> elements were new orders.

6.3.1.3 <SessionID> Element

The SessionID element must be present in the order whenever the web site has used eGalaxy’s Event Ticketing services to obtain event
tickets and place them on hold. The SessionID value is used by eGalaxy to retrieve held tickets and associate them with the order. eGalaxy
rejects orders for event tickets that do not have a corresponding session with the correct number of held tickets.

6.3.1.4 <SalesProgram> Element

The <SalesProgram> element appears within the <Order> element and specifies the ID number of a sales program to use when
processing/validating the order. If present, the value of this element overrides the default sales program defined within Galaxy for the
order’s cusotmer. For backwards compatibility, the customer’s ‘POS Default’ sales program will be used if the <SalesProgram> element is
not present in the imported order.
If the <SalesProgram> element is present but it is not found in the list of Sales Programs for the customer, the order is rejected. To find if
the given <SalesProgram> is valid for the given customer or not, first the sales programs defined on the customer are checked. If no sales
programs defined on the customer THEN ONLY sales programs on the customers’ category are checked. This is done to be consistent with
Order Entry. When creating a new order in Order Entry, the sales programs available to use in that order are loaded by using the same
process. If Virtual Sales Program is used for the given order, then value in the <SalesProgram> element is –2.

6.3.1.5 <Contact> Element

The <OrderContact> and <ShipToContact> elements contain a <Contact> element. For the format of the <Contact> element please refer to
sub section “<Contact> Element” under section “Common Element Formats”.

6.3.1.6 <OrderContact> Element

The OrderContact element contains the name and address information of the person responsible for placing the order. This is generally the
billing (purchaser) information.

 Field   Description                                                                                                                    Type
 Contact <Contact> element. See <Contact> element for details, described under sub section “<Contact> Element” of section               Element
         “Common Element Formats”

Since there are usage scenarios where third-parties generating the order data will not always provide complete contact information for the
guest holding the voucher, eGalaxy accepts an order where the order’s contact does not have an <Address> element.

6.3.1.7 <ShipToContact> Element

The ShipToContact element contains information about the order’s shipping address. A flag indicates if the order is to be shipped to the
same address as the order contact. If that flag is set, no other elements are required within the ShipToContact element. If bill-to and ship-to
information is the same it is recommended to always set the SameAsOrderContact field to YES rather than duplicate the information in the
ShipToContact. This will make it easier for the operations staff to review the order if needed. For will-call orders the ship-to contact should
not be included. Instead, pick-up date and name information should be sent in a GroupVisits element.

 Field              Description                                                                                                         Type
 SameAsOrderContact Set to 'YES' if the shipping contact is the same as the order contact.                                              Boolean
 Contact            <Contact> element. See <Contact> element for details, described under sub section “<Contact>                        Element
                    Element” of section “Common Element Formats”

6.3.1.8 <BillToContact> Element

The BillToContact element contains information about the order’s billing address. A flag indicates if the order is to be billed to the same
address as the order contact. If that flag is set, no other elements are required within the BillToContact element. If bill-to information is the
same as the order value, it is recommended to always set the SameAsOrderContact field to YES rather than duplicate the information in the
BillToContact element. This will make it easier for the operations staff to review the order if needed.

 Field                   Description                                                                                                    Type

                                                                                                                                                 30
eGalaxy Server Interface Specification                                                                                 6 Order Processing
 SameAsOrderContact Set to 'YES' if the billing contact is the same as the order contact.                                              Boolean
 Contact            <Contact> element. See <Contact> element for details, described under sub section “<Contact>                       Element
                    Element” of section “Common Element Formats”

6.3.1.9 <Shipping> Element

The Shipping element contains information about how the order is to be shipped. Please note that shipping charges must be passed
separately as an item in an <OrderLines> element.

 Field                   Description                                                                                                   Type
 DeliveryMethod          Delivery method for the order (see values below). Value given in this field corresponds to the value of the   Numeric
                         Kind column on the DeliveryMethods table in Galaxy database. See DeliveryMethod values below.
 DeliveryDetails         Specific delivery details used particularly when the Delivery Method is “Other.” This may be printed on       Text
                         the customer’s statement, and should be worded appropriately.
 TrackingNbr             Additional delivery information ex. UPS or FedEx                                                              Text
                                                                                                                                       (30)
 DeliveryMethodID   Represents the ID of the DeliveryMethod (Gateway counter) used for the order. Value given in this field            Numeric
                    corresponds to the value of the DeliveryMethodID column on the DeliveryMethods table in Galaxy
                    database. NOTE: When both <DeliveryMethod> and <DeliveryMethodID> fields are given in an XML
                    order, the value given in <DeliveryMethodID> takes precedence. See DeliveryMethodID values below.
 IncludeEntireOrder Determines if all valid tickets in the order should be printed                                                     Boolean

6.3.1.9.1 DeliveryMethodID values

The DeliveryMethodID values represent the ID of the DeliveryMethod used for an order. Typically DeliveryMethodID values are same as
what is listed in the table below. However an attraction can add, or remove DeliveryMethodIDs to the DeliveryMethods table in Galaxy
database and hence it is highly recommended to verify the values listed in the table below with the Galaxy administrator before developing
the interface to the eGalaxy server.

 Value    Description
 1        None
 2        Hold – will-call orders
 3        Mail – typically 1st class delivery
 4        Overnight
 5        Second Day
 6        Other
 7        Print at home
 8        Kiosk (pickup at the kiosk)
 9        Print on Web
 10       Custom

6.3.1.10 <GroupVisit> Element

The GroupVisit element is used to indicate information if the order is for a group. This element is optional for orders not related to group
visits. This element may be required for will-call orders if will-call orders will only be available for pickup within a predetermined range of
the visit date. The reference field can contain names of alternate guests authorized to pick up an order if so noted (please include
explanatory text such as ‘PICK UP AUTHORIZED BY:’)

 Field                     Description                                     Type
 VisitDate                 Scheduled time for the group’s arrival          DateTime
 Description               Name of description of the persons or group     Text (50)
 Reference                 Arbitrary reference text                        Text (40)
 ExpectedNumGuests         The total number of people expected to arrive   Numeric

6.3.1.11 <OrderDiscounts> Element

                                                                                                                                                  31
eGalaxy Server Interface Specification                                                                                       6 Order Processing
<OrderDiscounts> element contains data for POS discounts (DiscountKind of 2) applied to the given order.
<OrderDiscounts> element contains one or more <OrderDiscount> elements. An <OrderDiscount> element contains data about the discount
applied to this order.
<OrderDiscount> element contains following fields:

 Field      Description                         Type
 DiscountID Discount ID                         Numeric
 ApplyCount Number of times                     Most of the time this field should default to 1 unless the discount is configured so that it can be
            this discount is                    “used multiple times in one transaction” and if the Web store user applies discount multiple times
            applied.

6.3.1.12 <UserFields> Element

The UserFields element may be required at provide data for operational or reporting requirements

 Field              Description         Type
 UserField1         TBD by user         Text (255)
 UserField2         TBD by user         Text (255)
 UserField3         TBD by user         Text (255)
 UserField4         TBD by user         Text (255)
 UserField5         TBD by user         Text (255)
 UserField6         TBD by user         Text (255)
 UserField7         TBD by user         Text (255)
 UserField8         TBD by user         Text (255)

6.3.1.13 <OrderProcessing> Element

The OrderProcessing element is a collection of options that determine how an order should be processed in eGalaxy and OrderEntry

 Field             Description                                                                                                               Type
 PermitReturnsOnly This option is required to be set to YES for orders with a CMS points payment. This indicates to Order                    Boolean
                   Entry that returns are the only modification allowed to be performed on the order.

6.3.1.14 <OrderLines> Element

The OrderLines element contains only one or more <OrderLine> elements.
6.3.1.14.1 OrderLine

The order contains an order line element for each “line item” whether it is an item or a ticket, a sales tax charge, a fee, an order payment,
or a description/comment line (description /comment line not implemented).
6.3.1.14.1.1 Common Order Line Fields


 Field               Description                                Type
 ExternalReferenceID External reference ID for external systems Text (150)

6.3.1.14.1.2 Ticket Order Line


A ticket order line (DetailType=1) uses the following fields:

 Field                                   Description                                                                                        Type
 DetailType                              Value=1 (Item/ticket)                                                                              Numeric
 Description                             Text description of item or ticket                                                                 Text (40)

                                                                                                                                                      32
eGalaxy Server Interface Specification                                                                       6 Order Processing
 PLU                    Item’s Galaxy product lookup number i.e. item code                                                  Text (20)
 Qty                    Number of items ordered                                                                             Numeric
 Amount                 The value in <Amount> field MUST be the price of the Ticket (without any tax or discount) The       Currency
                        value in <Amount> field MUST be the price of a single ticket even if the OrderLine has multiple
                        quantities (<Qty> is > 1)
 Total                  Must be calculated based on the following formula: Total = ((Amount – Discount) + Tax +             Currency
                        GiftAidAmount) * Qty
 Guest(s)               <Guest> element. Can optionally specify multiple Guests on an OrderLine using <Guests>              Element
                        (Optional)
 Gift                   <Gift> element (Optional)                                                                           Element
 SalesChannelDetailID   ID of the sales channel detail from where this ticket was selected (Optional)                       Numeric
 DiscountAmount         Discount amount applied to the ticket. The value in <DiscountAmount> field MUST be the              Currency
                        discount amount of a single ticket even if the OrderLine has multiple quantities (<Qty> is > 1)
                        (Optional)
 TaxAmount              Tax amount applied to the ticket. The value in <TaxAmount> field MUST be the tax amount of a        Currency
                        single ticket even if the OrderLine has multiple quantities (<Qty> is > 1). Tax is calculated on
                        price of the Ticket less DiscountAmount. If gift aid is applied to this ticket then tax should be
                        calculated without the gift aid amount (price of the Ticket - DiscountAmount – GiftAid amount).
                        (Optional)
 Taxes                  <Taxes> element. See <Taxes> element for details, described under sub section “<Taxes>              Element
                        Element” of section “Common Element Formats” (Optional)
 SalesProgram           Sales program to use for this ticket order line. Only applicable when the order uses a Virtual      Numeric
                        Sales Program (Optional)
 EventID                This field is required when the PLU given in this order line is configured as a Capacity Managed    Numeric
                        Ticket. This field is returned by eGalaxy server in the QueryEvents message response under
                        <EventID> field. (Optional)
 ResourceID             This field is required when the PLU given in this order line is configured as a Capacity Managed    Numeric
                        Ticket. This field is returned by eGalaxy server in the QueryEvents message response under
                        <ResourceID> field for events with resources that don’t manage child resource capacity. If
                        resource of the event manages child resource capacity then ResourceID is determined where
                        the sale occurs (i.e. on the Web store) and hence the value returned by eGalaxy server in
                        QueryEvents message response is zero. (Optional)
 CapacityID             The CapacityID value used to allocate capacity for this orderline. This value is now returned in    Numeric
                        the EventTicketHold message. (Optional)
 TicketDate             Ticket date for a date specific ticket OR Start date for a date range ticket (Optional)             DateTime
 ExpirationDate         Store expiration date of a Date Range Ticket (Optional)                                             DateTime
 Section                Section of the ticket’s seat assignment data (Optional)                                             Text (40)
 Row                    Row of the ticket’s seat assignment data (Optional)                                                 Text (40)
 Seat                   Seat of the ticket’s seat assignment data (Optional)                                                Text (40)
 PaymentPlanID          ID of the PaymentPlan used for the given ticket (Optional)                                          Numeric
 CreateDate             Date and time that was used to determine price of the ticket using PriceSchedule. Required for      DateTime
                        Tickets sold with a price from PriceSchedule only (Optional)
 <Discounts>            <Discounts> element. Contains breakup of discounts applied to the given ticket order line.          Element
                        (Optional)
 Fees                   <Fees> element. Contains breakup of fees applied to the given ticket order line. (Optional)         Element
 DisbursementID         ID of the disbursement to apply when issuing this ticket. DisbursementID needs to be supplied       Numeric
                        when a Price Schedule with DisbursementID is applied to this ticket. (Optional)
 RosterDataList         Pleae see <RosterDataList> entry under the “Common Element Formats” section to find out the         Element
                        fields supported under <RosterDataList> element.
 RedeemedValue          The number of points redeemed to purchase the tickets in the order line                             Numeric
 LoyaltyAccountNo       Loyalty account used for this orderline                                                             Text(40)
 LoyaltyProgramID       Loyalty program associated to the account used on the orderline                                     Numeric
 PendingLoyaltyPoints   Loyalty points that can be issued                                                                   Numeric
 IssuedLoyaltyPoints    Loyalty points that can have already been issued                                                    Numeric
 Upsell                 <Upsell> element. Contains information about upsell if an upsell option was offered. (Optional)     Element
                                                                                                                                       33
eGalaxy Server Interface Specification                                                                                        6 Order Processing
 GiftAidType                             Type of the gift aid. (Optional)                                                                    Numeric
 GiftAidAmount            GiftAid amount applied to the ticket. This amount should be the gift aid amount for one ticket,                    Currency
                          regardless of the Quantity for the Order Line. (See how the Total element is calculated.)
                          (Optional)
 ExternalDiscountID       Promotion code that was used to get reduced pricing for this ticket. (Optional)                                    Text(20)
 ExternalDiscountName     Name of the promotion that was used to get reduced pricing for this ticket. (Optional)                             Text(80)
 EntitlementAddOnVisualID If adding an entitlement (a ticket or debit item) to a package, pass, or ticket, this is the visual ID             Text(40)
                          of the package, pass, or ticket the entitlement is being added to. (Optional)
 IsAssociatedTicket       Indicates that this ticket is an associated ticket for other tickets in the order. (Optional)                      Boolean
 PriceProgramID           The ID of the Price Program in effect for this item. (Optional)                                                    Integer
 UpgradeFromVisualID      When this element is present, it indicates that this order line is the purchase of an upgrade.                     Text
                          This element holds the visual ID of the item that is being upgraded. (Optional)
 UseAlternateUpgradePrice Use this element to override Upgrade Option Pricing setting on the upgrade item the Ticket is                      Boolean
                          being upgraded to. See QueryTicketResponse AlternateUpgradePrice element description.
                          (Optional)
 VisualIDs                <VisualIDs> element. Contains list of foreign media ticket IDs to be used when inserting foreign                   Element
                          media tickets. (Optional)
 AttributeValues          <AttributeValues> element. Contains list of answers for the given ticket order line. (Optional)                    Element
 PackageDetailID          If the EntitlementAddOnVisualID is not blank, then the provided PackageDetailID will be used                       Numeric
                          when generating package instance detail records.

6.3.1.14.2 GiftAidType values

The GiftAidType values represent the types of gift aid donations that be selected for the order line.

 Value       Description
 0           Item is not eligible for gift aid
 1           Gift aid amount is a fixed amount
 2           Gift aid amount is full ticket price
 3           Gift aid amount is a non-gift aid (donation) fixed amount
 4           Gift aid amount is a non-gift aid (donation) full ticket price
 5           Gift aid amount is a percentage of the ticket price
 6           Gift aid amount is a non-gift aid (donation) percentage of the ticket price

NOTE: For tax included items the <Amount> value is the price of the Ticket less <TaxAmount> e.g. for $10.00 tax included ticket with 15%
tax and 50% discount the <Amount> = 10.00 - 0.65 = 9.35 (where 0.65 is the 15% tax included in $5.00 (50% discount applied to $10.00). See
Orders XML example below for tax included ticket.
6.3.1.14.2.1 Retail Item Order Line


A retail item order line (DetailType=1) uses the following fields:

 Field                                Description                                                                                            Type
 DetailType                           Value=1 (Item/ticket)                                                                                  Numeric
 Description                          Text description of item or ticket                                                                     Text (40)
 PLU                                  Ticket’s Galaxy product lookup number i.e. ticket code                                                 Text (20)
 Qty                                  Number of items ordered                                                                                Numeric
 Amount                               Item price The value in <Amount> field MUST be the price of the Ticket (without any tax or discount)   Currency
                                      The value in <Amount> field MUST be the price of a single ticket even if the OrderLine has multiple
                                      quantities (<Qty> is > 1)
 Total                                Must be calculated based on the following formula: Total = ((Amount – Discount) + Tax ) * Qty          Currency
 Gift                                 <Gift> element (Optional)                                                                              Element
 SalesChannelDetailID                 ID of the sales channel detail, typically ID of the sales channel group the ticket was selected from   Numeric
                                      (Optional)

                                                                                                                                                        34
eGalaxy Server Interface Specification                                                                                      6 Order Processing
 DiscountAmount       Discount amount applied to the ticket. The value in <DiscountAmount> field MUST be the discount                       Currency
                      amount of a single ticket even if the OrderLine has multiple quantities (<Qty> is > 1) (Optional)
 TaxAmount            Tax amount applied to the ticket. The value in <TaxAmount> field MUST be the tax amount of a                          Currency
                      single ticket even if the OrderLine has multiple quantities (<Qty> is > 1) (Optional)
 Taxes                <Taxes> element. See <Taxes> element for details, described under sub section “<Taxes> Element”                       Element
                      of section “Common Element Formats”
 SalesProgram         Sales program to use for this retail item order line. Only applicable when the order uses a Virtual                   Numeric
                      Sales Program (Optional)
 PaymentPlanID        ID of the PaymentPlan used for the given retail item (Optional)                                                       Numeric
 CreateDate           Date and time that was used to determine price of the retail item using PriceSchedule. Required for                   DateTime
                      retail items sold with a price from PriceSchedule only (Optional)
 Discounts            <Discounts> element. Contains breakup of discounts applied to the given ticket order line.                            Element
                      (Optional)
 Fees                 <Fees> element. Contains breakup of fees applied to the given retail item order line. (Optional)                      Element
 Upsell               <Upsell> element. Contains information about upsell if an upsell option was offered. (Optional)                       Element
 ExternalDiscountID   Promotion code that was used to get reduced pricing for this item. (Optional)                                         Text(20)
 ExternalDiscountName Name of the promotion that was used to get reduced pricing for this item. (Optional)                                  Text(80)

6.3.1.14.2.2 Fee Order Line


A fee order line is used for order fees e.g. convenience fees for Web orders. A fee order line (DetailType=12) uses the following fields:

 Field                        Description                                                                                                   Type
 DetailType                   Value=12 (Fee)                                                                                                Numeric
 Description                  Text description of fee                                                                                       Text
                                                                                                                                            (40)
 PLU                          Fee’s Galaxy product lookup number i.e. fee code                                                              Text
                                                                                                                                            (20)
 Qty            Number of fees aplied                                                                                                       Numeric
 Amount         Fee amount. The value in <Amount> field MUST be the fee amount (without any tax, for Tax excluded fees                      Currency
                or discount) The value in <Amount> field MUST be the amount of a single fee even if the OrderLine has
                multiple quantities (<Qty> is > 1)
 Total          Must be calculated based on the following formula: Total = ((Amount – Discount) + Tax ) * Qty                               Currency
 DiscountAmount Discount amount applied to the fee. The value in <DiscountAmount> field MUST be the discount amount of                      Currency
                a single fee even if the OrderLine has multiple quantities (<Qty> is > 1) (Optional)
 TaxAmount      Tax amount applied to the fee. The value in <TaxAmount> field MUST be the tax amount of a single fee                        Currency
                even if the OrderLine has multiple quantities (<Qty> is > 1) (Optional)
 Taxes          <Taxes> element. See <Taxes> element for details, described under sub section “<Taxes> Element” of                          Element
                section “Common Element Formats”

6.3.1.14.2.3 Transportation Order Lines


A transportation order line (DetailType=13) uses the following fields:

 Field                             Description                                                                                              Type
 DetailType                        Value=13 (Transportation Ticket)                                                                         Numeric
 Description                       Text description of Destination                                                                          Text
                                                                                                                                            (40)
 PLU                               Galaxy product lookup number i.e. item code                                                              Text
                                                                                                                                            (20)
 Qty                               Number of tickets ordered                                                                                Numeric
 Amount                            Ticket price The value in <Amount> field MUST be the price of the Ticket (without any tax or discount)   Currency
                                   The value in <Amount> field MUST be the price of a single ticket even if the OrderLine has multiple
                                   quantities (<Qty> is > 1)
 Total                             Must be calculated based on the following formula: Total = ((Amount – Discount) + Tax ) * Qty            Currency
                                                                                                                                                       35
eGalaxy Server Interface Specification                                                                                   6 Order Processing
 Transportation       Transportation element. Contains the details about the Origin and Destination of the trip.                        Element
 SalesChannelDetailID ID of the sales channel detail from where this ticket was selected (Optional)                                     Numeric
 DiscountAmount       Discount amount applied to the ticket. The value in <DiscountAmount> field MUST be the discount                   Currency
                      amount of a single ticket even if the OrderLine has multiple quantities (<Qty> is > 1) (Optional)
 TaxAmount            Tax amount applied to the ticket. The value in <TaxAmount> field MUST be the tax amount of a single               Currency
                      ticket even if the OrderLine has multiple quantities (<Qty> is > 1) (Optional)
 Taxes                <Taxes> element. See <Taxes> element for details, described under sub section “<Taxes> Element” of                Element
                      section “Common Element Formats” (Optional)
 SalesProgram         Sales program to use for this ticket order line. Only applicable when the order uses a Virtual Sales              Numeric
                      Program (Optional)
 <Discounts>          <Discounts> element. Contains breakup of discounts applied to the given ticket order line. (Optional)             Element

6.3.1.14.2.4 Payment Order Line


A payment order line element indicates payments applied to the order. A payment line includes the following elements:

 Field                            Description                                                                                           Type
 DetailType                       Value=2 (Payment)                                                                                     Numeric
 Description                      Text description payment                                                                              Text (40)
 PaymentCode                      Galaxy Form of payment number (value 10-89)                                                           Numeric
 PaymentDate                      Date the payment was made, or authorized if credit card.                                              DateTime
 Amount                           Payment amount                                                                                        Currency
 Endorsement                      For credit cards, the credit card account number. For vouchers, the unique voucher number. When       Text (30)
                                  GxKeyID > 0, it is expected that this is an encrypted value. (Optional)
 EndorsementBIN                   The BIN (first 6 digits) of the card number used to make the payment. Note that if the "Collect       Text (6)
                                  Endorsement BINs" configuration option is not enabled in Galaxy (General Config ->
                                  Authorization), this field will be discarded and will not be saved. (Optional)
 ExpDate                          Credit Card expiration date, if credit card payment (Optional)                                        Numeric
                                                                                                                                        MMYY
 SearchEndorsementValue           Search value (typically last 4 digits) for Endorsement (Optional)                                     Text
 CardHolderName                   Name of credit card holder printed on the card                                                        Text
 AuthCode                         Authorization Code from payment processor (Optional)                                                  Text (8)
 TransID                          Transaction ID from payment processor (Optional)                                                      Text (15)
 ValidationCode                   Validation code from payment processor (Optional)                                                     Text (4)
 PSI                              Payment Service Indicator from payment processor (Optional)                                           Text (1)
 PayOnIssuance                    Set to apply payment when the order is issued (or pickup) (Optional)                                  Boolean
 BillingStreet                    Street address of the billing address, used for AVS verification (Optional)                           Text (30)
 BillingZIP                       Zip or postal code of the billing address, used for AVS verification (Optional)                       Text (16)
 CVN                              Card Verification Number, used to verify credit card (Optional)                                       Numeric
 GxKeyID                          Foreign key to GxKeys.GxKeyID, this element defines what GxKeyID to use to decrypt the                Numeric
                                  Endorsement element. If this value is non-zero, the system assumes the text in the Endorsement
                                  and the CardToken elements are encrypted
 ExternalKeyID                    Foreign key to GxKeys.ExternalKeyID. If a GxKeyID value is specified, it will always be used in       Text(100)
                                  place of this element. If ExternalKeyID is the only element defined, it will be used to look up the
                                  appropriate key in the GxKeys table in order to decrypt the Endorsement element. If this value is
                                  non-blank, the system assumes the text in the Endorsement element is encrypted
 TransID2                         The unique transaction identifier from the host system on a CMS points payment (Required only         Text(20)
                                  on CMS points payments)
 ECommerceIndicator               Electronic Commerce Indicator                                                                         Numeric
 CAVVFormat                       Cardholder Authentication Verification Format                                                         Text(1)
 CAVVValue                        Cardholder Authentication Verification Value                                                          Text(40)
 XID3DS                           Transaction identifier resulting from authentication processing                                       Text(40)
 CardToken                        The card token associated with the credit card used for this payment. When GxKeyID > 0, it is         Text(62)

                                                                                                                                                   36
eGalaxy Server Interface Specification                                                                                  6 Order Processing
                                     expected that this is an encrypted value.
 HostField1                          Holds field data from a credit card host system that must be journalized.                       Text(20)
 HostField2                          Holds field data from a credit card host system that must be journalized.                       Text(30)
 HostDataFields                      <HostDataFields> element. Holds host data field data from a credit card host system that must   Element
                                     be journalized.

6.3.1.14.2.5 Total Tax Order Lines


As per the revised implementation of Taxes in Order Entry (version 3.0), a Total Tax Order Line (with a DetailType of 9) is created for each
tax used so far in the transaction. To support this a new XML OrderLine with a DetailType of 9 is supported under the <OrderLines>
element. Total tax order line (DetailType=9) has following fields:

 Field               Description                          Type
 DetailType          Value=9 (Total Tax)                  Numeric
 Description         Description of the tax (Optional)    Text (40)
 TaxID               Galaxy Tax ID (1 thru 8)             Numeric
 Amount              Total Tax Amount for the order       Currency

6.3.1.14.2.6 Tax Order Lines


As per the revised implementation of Taxes in Order Entry (version 3.0), a Tax Order Line (with a DetailType of 6) is created for each tax
used in the ticket being issued. A Tax OrderLine is only required for the “issued” tickets and for only those taxes that are configured as
“Transactional” in the Galaxy (Method of the Tax is “Trans” under Data Maintenance> System Maintenance> General Config> Taxes). A tax
order line (DetailType=6) uses only the base order line fields defined above.

 Field               Description              Type
 DetailType          Value=6 (Tax record)     Numeric
 Description         Text description         Text (40)
 TaxID               Galaxy tax ID (1..8)     Numeric
 Amount              Tax amount               Currency

6.3.1.14.2.7 Pass Order Lines


A pass order line (DetailType=8) uses only the base order line fields defined above.

 Field               Description                                                                                                     Type
 DetailType          Value=8 (Pass)                                                                                                  Numeric
 Description         Text description                                                                                                Text (40)
 PLU                 Item’s Galaxy product lookup number i.e. item code                                                              Text (20)
 Qty                 Number of items ordered                                                                                         Numeric
 Amount              Item price                                                                                                      Currency
 Total               Extension of Amount * Qty                                                                                       Currency
 Pass                <Pass> element. See <Pass> element for details, described under sub section “<Pass> Element” of                 Element
                     section “Common Element Formats”
 Guest               <Guest> element. Used for print at home passes (Optional)                                                       Element
 Gift                <Gift> element (Optional)                                                                                       Element
 PaymentPlanID       ID of the PaymentPlan used for the given pass (Optional)                                                        Numeric
 CreateDate          Date and time that was used to determine price of the pass using PriceSchedule. Required for Passes             DateTime
                     sold with a price from PriceSchedule only (Optional)
 Discounts           <Discounts> element. Contains breakup of discounts applied to the given ticket order line. (Optional)           Element
 Fees                <Fees> element. Contains breakup of fees applied to the given pass order line. (Optional)                       Element
 Upsell              <Upsell> element. Contains information about upsell if an upsell option was offered. (Optional)                 Element
 UpgradeFromVisualID When this element is present, it indicates that this order line is the purchase of an upgrade. This             Text
                     element holds the visual ID of the item that is being upgraded. (Optional)

                                                                                                                                                37
eGalaxy Server Interface Specification                                                                              6 Order Processing
A pass order line may be for a new pass sale, a renewal, or a reissue product kind.
        For a reissue pass kind:
        The order line must include a <Pass> element with, at a minimum, a <VisualID> element. If other elements are specified inside the
        <Pass> element, they will update the pass that is being reissued. (For example, if <FirstName> is specified in the <Pass> element, the
        first name on the reissued pass will be set to the provided name.)
        The order line may include a <VisualIDs> element containing a single <VisualID> element, which specifies the visual ID that should
        be used on the reissued pass. Note that this requires the reissue PLU to be configured as "requires activation" with an activation
        method of "Validate Media" and the pass kind must be configured to generate a new visual ID or new record on reissue. See the
        "Pass Reissue Sale With Specified Visual ID" example in this section.

6.3.1.14.2.8 Joint Member add-on Order Lines


A joint member add-on order line (DetailType=15) uses the base order line fields defined above:

 Field       Description                                                                                                            Type
 DetailType Value=15 (Joint Member add-on)                                                                                          Numeric
 Description Text description                                                                                                       Text
                                                                                                                                    (40)
 PLU                Item’s Galaxy product lookup number i.e. item code                                                              Text
                                                                                                                                    (20)
 Qty                Number of items ordered                                                                                         Numeric
 Amount             Item price                                                                                                      Currency
 Total              Extension of Amount * Qty                                                                                       Currency
 AddOn              <AddOn> element. See <AddOn> element for details, described under sub section “<AddOn> Element” of              Element
                    section “Common Element Formats”

6.3.1.14.2.9 Line Note / Comment Order Line


A Line Note order line adds a comment or a note. A LineNote line includes the following elements:

 Field      Description                                                               Type
 DetailType Value=3 (LineNote / Comment)                                              Numeric
 LineNote A Comment to add. This is same as Comment button at the Order Entry screen. Text

6.3.1.14.2.10 Package Order Lines


A Package order line (DetailType=10) contains following fields:

 Field                     Description                                                                                              Type
 DetailType                Value=10 (Package order line)                                                                            Numeric
 Description               Text description of package                                                                              Text
                                                                                                                                    (40)
 PLU                       Package’s Galaxy product lookup number i.e. PLU                                                          Text
                                                                                                                                    (20)
 Qty            Number of Packages ordered                                                                                          Numeric
 Amount         Package price The value in <Amount> field MUST be the sum of each PackageDetail’s <Amount> (which                   Currency
                does not include any tax, for Tax excluded tickets or discount) The value in <Amount> field MUST be the
                sum of each price of single ticket within the PackageDetail even if the package has multiple quantities
                (<Qty> is > 1) (Optional, if not given eGalaxy server will calculate amount using Package Details provided
                within <Package> element)
 DiscountAmount Sum of each PackageDetail’s <DiscountAmount> (Optional, if not given eGalaxy server will calculate                  Currency
                amount using Package Details provided within <Package> element)
 TaxAmount      Sum of each PackageDetail’s <TaxAmount> (Optional, if not given eGalaxy server will calculate amount                Currency
                using Package Details provided within <Package> element)
 Total          Must be calculated based on the following formula: Total = ((Package’s Amount – Package’s                           Currency
                DiscountAmount) + Package’s TaxAmount ) * Package’s Qty (Optional, if not given eGalaxy server will

                                                                                                                                            38
eGalaxy Server Interface Specification                                                                                 6 Order Processing
                           calculate amount using Package Details provided within <Package> element)
 <Package>                 See <Package> element below                                                                               Element
 Fees                      <Fees> element. Contains breakup of fees applied to the given package order line. (Optional)              Element
 Upsell                    <Upsell> element. Contains information about upsell if an upsell option was offered. (Optional)           Element
 PackagePassID             The PassNo of an existing pass. Used as a group ID if processing member benefits or a new pass with a     Numeric
                           package sale.

<Package> Element
A <Package> element appears within a package <OrderLine> (with DetailType 10). A <Package> element contains one or more
<PackageDetail> elements based on number of items (PLUs) within a package’s definition. Packages are defined in the Package and
PackageDetails tables.
A <PackageDetail> element contains same data as an Order Line with Ticket, Retail item or a Pass. If the package detail is a regular ticket
then it contains same XML fields as described in the section “Ticket Order Lines” above. The PLU and PackageDetailID are used for order
validation.
6.3.1.14.2.11 PackageDetail Fields


 Field               Description                                                                                                     Type
 PackageDetailID     Used to validate package detail configuration. Foreign key to PackageDetails.PackageDetailID.                   Numeric
 PkgInstanceDetailID ID of an existing PkgInstanceDetail record. Used when redeeming member benefits. Must be unissued               Numeric
                     and single quantity.
 PackageVisualID     Visual ID of an existing member benefit package.                                                                Text

If the package detail is a retail item then it contais same XML fields as described in the section “Retail Item Order Line” above.
If the package detail is a pass then it contains same XML fields as described in the section “Pass Order Line” above.
Section “5.2.6 Package in Order Message” contains an example XML order with a <Package>.
6.3.1.14.2.12 DeliveryMethod Values


 Value       Description
 0           None
 1           Hold – will-call orders
 2           Mail – typically 1st class delivery
 3           Overnight
 4           Second Day
 5           Other
 6           Print at home
 7           Kiosk (pickup at the kiosk)

6.3.1.14.2.13 DetailType Values


DetailType is a numeric value (on each order line) indicating the type of the order line

 Value       Description
 1           Ticket/item detail record
 2           Payment detail record
 3           Comment/Description record (Not implemented)
 4           Reserved
 5           Reserved
 6           Tax record
 7           Void Tax record

                                                                                                                                            39
eGalaxy Server Interface Specification                                                                                6 Order Processing
 8         Pass detail record
 9         Used to store the total amount of tax on the order per TaxID. Amount is used to store the total non-transactional tax amount.
           TaxAmount is used to store the total transactional tax amount. Total is the sum of Amount & TaxAmount
 10        Package record
 11        Package detail record
 12        Fee detail record. Used for Order Fees or Item Fees
 13        Transportation record
 14        Donation record
 15        Joint Member add-on record

6.3.1.14.3 <Guest> element

The <Guest> element is used to include the guest information within an item or ticket order line. All fields are optional.

 Field                        Description                                                                                         Type
 FirstName                    First name of the guest                                                                             Text
 MiddleName                   Middle name of the guest                                                                            Text
 LastName                     Last name of the guest                                                                              Text
 IsLead                       Indicate if the guest is a lead guest                                                               Boolean
 NameTitleID                  Foreign key to NameTitles.NameTitleID, referencing an entry in the NameTitles table                 Numeric
 NameSuffixID                 Foreign key to NameSuffixes.NameSuffixID, referencing an entry in the NameSuffixes table            Numeric
 Phone                        Telephone number                                                                                    Text (30)
 Cell                         Mobile cell phone number                                                                            Text (30)
 Fax                          Fax number                                                                                          Text (30)
 Email                        Email Address                                                                                       Text
                                                                                                                                  (128)
 DOB                     Date of Birth of the Member. The JointMembership rules defined on the Pass Kind are enforced             DateTime
                         based on the current age of the Member.
 Gender                  Contact gender (Values: 0 = Unspecified, 1 = Male, 2 = Female)                                           Numeric
 JobTitle                Title or position                                                                                        Text (30)
 Street1                 Street address line 1                                                                                    Text (30)
 Street2                 Street address line 2                                                                                    Text (30)
 Street3                 Street address line 3                                                                                    Text (30)
 City                    City                                                                                                     Text (40)
 State                   State or province                                                                                        Text (40)
 ZIP                     ZIP or postal code                                                                                       Text (16)
 CountryCode             Country Code i.e. ‘US’ for United States                                                                 Text (2)
 AllowMailings           Set when the contact may be contacted via the mailing address                                            Boolean
 IdentificationNo        Identification No                                                                                        Text(64)
 ApplyToFullOrderLineQty If OrderLine Qty is greater than 1, then the guest info will copy down to each OrderLine product's
                         contact
 CustContactGUID or      GUID for the contact                                                                                     Text
 ContactGUID

6.3.1.14.4 <Gift> element

The <Gift> element is used to include the Appeal and Solicitation Gift information within an item, ticket, or pass order line.

 Field          Description                                 Type
 AppealID       Appeal ID from the Appeals table            Numeric
 SolicitationID Solicitation ID from the Solicitation table Numeric


                                                                                                                                           40
eGalaxy Server Interface Specification                                                                              6 Order Processing
6.3.1.14.5 <Discounts> element

<Discounts> element contains one or more of <Discount> element. Each <Discount> element contains details of a discount for a ticket or
item. Following fields are supported within <Discount> element:

 Field                  Description                                                                                              Type
 DiscountID             Galaxy Discount ID. Has a non zero value only for DiscountKind 2 (POS discount) (optional)               Numeric
 DiscountKind           Discount kind 0 – Price override 1 – Sales program changed the price of the ticket or item 2 – A         Numeric
                        POS/Coupon discount was applied to the ticket or item 3 – Item discount was applied 4 – Line
                        item discount was applied
 DiscountAmount         Actual discount amount                                                                                   Currency
 RequirementCount       Number of times this ticket was used as a requirement when applying this discount                        Numeric
 CanDiscountRequirement Set to YES when this discount has at least 1 requirement (RequirementCount>0) and when                   Boolean
                        requirement(s) can be discounted
 Replacement            <Replacement> element. Contains replacement fields to be use when journalizing the tickets. The          Element
                        replacement filelds are given when the discount is configured with replacements (Optional)

6.3.1.14.6 <Fees> element

<Fees> element contains one or more of <Fee> elements. Each <Fee> element contains details of a fee for a ticket or item. The fields
supported within <Fee> element are the same as those of the Fee Order Line described above.
6.3.1.14.7 <Replacement> element

<Replacement> element contains following fields:

 Field                Description                                                                              Type
 Company              Company to use when journalizing the ticket the discount is applied to (Optional)        Numeric
 Category             Category to use when journalizing the ticket the discount is applied to (Optional)       Numeric
 SubCategory          SubCategory to use when journalizing the ticket the discount is applied to (Optional)    Numeric
 Printer              Printer to use when journalizing the ticket the discount is applied to (Optional)        Numeric
 TicketSet            TicketSet to use when journalizing the ticket the discount is applied to (Optional)      Numeric
 DisbursementID       Disbursement to use when journalizing the ticket the discount is applied to (Optional)   Numeric
 AccessCode           AccessCode to use when journalizing the ticket the discount is applied to (Optional)     Numeric

6.3.1.14.8 <Seats> element

<Seats> element contains one or more <Seat> elements. Each <Seat> element contains reserved seat details for the current order line.
Following fields are supported within <Seat> element:

 Field              Description                                                                                                  Type
 RSEventSeatID      The ID of the reserved seat for a particular event. (Required)                                               Numeric
 RSSeatID           The ID of the reserved seat as defined in a seat map. (Required)                                             Numeric
 SectionName        The name of the section where the seat is located. (Required)                                                Text
 RowName            The name of the row where the seat is located. (Required)                                                    Text
 SeatName           The name of the seat location. (Required)                                                                    Text
 Session            Globally unique identifier representing the EMS (Event Management Service) session value used to reserve     Text
                    this seat. (Required)

6.3.1.15 <PaymentContracts> Element

The PaymentContracts element contains only one or more <PaymentContract> elements.
<PaymentContracts> is an optional element within <Order> element. If an XML order contains PaymentPlan tickets/items but no payment
contracts are given under <PaymentContracts> element, then eGalaxy server generates Payment Contracts using the Payment Plan given on
the ticket/pass order line.

                                                                                                                                         41
eGalaxy Server Interface Specification                                                                              6 Order Processing
6.3.1.15.1 PaymentContract

The <PaymentContract> element appears with in the <PaymentContracts> element. A <PaymentContract> element contains all the data
required to create a PaymentContract in Galaxy. The <PaymentContract> element can contain following fields:

 Field                         Description                                                                                     Type
 PaymentPlanID                 UniqueID of the PaymentPlan used for the Payment Contract                                       Numeric
 RenewContract                 1=Payment Plan renews. 0=Payment plan does not renew (Optional)                                 Boolean
 PaymentContractStatusID       StatusCode or StatusCode GroupID for the current status of this payment contract (Optional)     Numeric
 PaymentContractEffective      Effective date of payment plan (Optional)                                                       Datetime
 PaymentStart                  Date first payment is due, calculated based on criteria on payment plan (Optional)              Datetime
 NextPaymentdue                Date of next scheduled payment (Optional)                                                       Datetime
 PaymentContractRenew          Date the payment plan should renew, calculated based on criteria on payment plan (Optional)     Datetime
 DownPaymentAmount             Amount of first payment, based on the criteria on payment plan (Optional)                       Currency
 PaymentAmount                 Amount of regular payment (Optional)                                                            Currency
 RemainingPayments             Number of remaining payments left on payment contract (Optional)                                Numeric
 CurrentBalance                Current balance due on payment contract (Optional)                                              Currency
 Arrears                       Amount of missed payments (Optional)                                                            Currency
 BillingCycles                 Number of billing cycles, calculated based on payment plan duration, first payment offset and   Numeric
                               length of cycle (Optional)
 RecurrencePatternID           Link to billing Recurrence Pattern. UniqueID from RecurrencePatterns table (Optional)           Numeric
 RecurrencePattern             <RecurrencePattern> element (Optional)                                                          Element
 MissedPayments                Number of payment that are missed due to a problem Optional)                                    Numeric
 ContactMethod                 Method by which a contact will receive statements generated automatically by the automated      Numeric
                               processes. This can be either Mail or E-mail at the moment (Optional)
 ContractTotal                 Total amount of contract at activation time (Optional)                                          Currency

Following is the format of the <RecurrencePattern> element:

 Field               Description                                                                                  Type
 RecurrenceType      Recurrence type. 1 for Daily recurrence type and 4 for Monthly recurrence type (Optional)    Numeric
 DayOfMonth          Day of month. Value between 1 thru 31 (Optional)                                             Numeric
 Interval            Interval between recurrences (Optional)                                                      Numeric
 StartDate           Recurrence pattern start date (Optional)                                                     Datetime
 EndDate             Recurrence pattern end date (Optional)                                                       Datetime

6.3.1.16 <Transportation> Element

This element contains all the information about the trip.

 Field                  Description                                                                              Type
 OriginCode             Origin City Code                                                                         Numeric
 DestinationCode        Destination City Code                                                                    Numeric
 Description            Description of the trip                                                                  Text
 TripMode               One way or Round trip (0 or 1 respectively)                                              Numeric
 OWRT                   One way or Round trip ('OW', 'RT')                                                       Text
 DepartureDate          Date leaving                                                                             DateTime
 ReturnDate             Returning Date (Optional)                                                                DateTime
 TicketType             Type of trip selected                                                                    Element
 TariffID               Tariff Code(Optional)                                                                    Numeric
 TariffCarrier          Tariff Carrier - Refers to Tariffs.Carrier                                               Text
 TariffName             Tariff Name (Optional)                                                                   Text

                                                                                                                                         42
eGalaxy Server Interface Specification                                                                                    6 Order Processing
 Endorsement              (Optional)                                                                                  Text
 PassengerName            Name of the passenger (Optional)                                                            Text
 HasTariffMiles           Do we have Tariff Miles                                                                     Boolean
 TariffMiles              Number of Tariff Miles (Optional)                                                           Numeric
 FareMiles                Number of Fare Miles (Optional)                                                             Numeric
 SurchargeAmount          Surcharge Amount (Optional)                                                                 Currency
 FareID                   Fare Code (Optional)                                                                        Numeric
 Restrictions             Restriction codes for the Fare (Optional)                                                   Text
 OutboundItinerary        Outbound trip information which lists all the stops for the trip (Legs)                     Element
 InboundItinerary         Inbound trip information which lists all the inbound stops for the trip (Legs) (Optional)   Element
 OWLimit                  Number of days one way ticket is valid                                                      Numeric
 RTLimit                  Number of days round trip ticket is valid                                                   Numeric

6.3.1.16.1 <TicketType> element

Type of ticket selected

 Field              Description                                       Type
 Fare               Amount of the ticket                              Currency
 TemplateID         Id of the Template record (Optional)              Integer
 Description        Adult, Child, Senior, etc…                        Text
 FareClass          AD, CH, SR etc.                                   Text
 RouteType          OW or RT (One way or Round Trip)                  Text
 Percentage         Percent of base fare (Optional)                   Numeric
 Rounded            Up, down, or nearest (Optional)                   Text
 RoundTo            Cents 5 = .05, 10 = .10 25=.25 etc (Optional)     Numeric
 GalaxyItemID       PLU for the ticket selected                       Text
 ICWPLU             PLU for the ICW Item (Optional)                   Text

6.3.1.16.2 <OutboundItinerary> element & <InboundItinerary> element

Both elements contain the same information. The outbound will contain all the legs heading toward the destination, while the inbound will
contain all the legs for the return trip. The only difference is the XML tag which denotes outbound or inbound. Inbound itineraries are also
optional as they are only required for round trip tickets.

 Field                        Description                                        Type
 Modified                     True if edited by the user                         Boolean
 Carrier                      First carrier out                                  Text
 Schedule                     First Leg’s schedule                               Text
 Departs                      Departure time of the first leg                    Time
 Arrives                      Arrival time of the last leg                       Time
 Frequency                    Days this Itinerary operates (MTWTFSSH)            Text
 ElapsedTime                  Total elapsed time including layovers              Numeric
 Miles                        Total miles                                        Numeric
 Stops                        Total number of stops                              Numeric
 Breaks                       Number of schedule changes                         Numeric
 AveragePTP                   Average of PTP’s for the via points (Optional)     Float
 ItineraryDetails             List of all legs                                   Element
 FareRouteIndex               (Optional)                                         Numeric
 TariffMilesRouteIndex        (Optional)                                         Numeric

6.3.1.16.3 <ItineraryDetails> Element

                                                                                                                                           43
eGalaxy Server Interface Specification                                                                            6 Order Processing
The ItineraryDetails element only contains one or more <ItineraryDetail> elements

6.3.1.16.4 <ItineraryDetail> Element

Detail information about the current leg of the trip – origin, destination, time, etc…

 Field                  Description                                                  Type
 LegNo                  Order of legs (First leg is 1, second leg would be 2 etc…)   Numeric
 OriginCode             Origin City record code                                      Numeric
 DestinationCode        Destination City record code                                 Numeric
 CompanyNumber          Company number for the carrier                               Numeric
 Carrier                Carrier for this leg’s schedule                              Text
 Schedule               The carrier’s schedule number                                Text
 EffectiveDate          Schedule effective date                                      DateTime
 ExpirationDate         Schedule Expiration date                                     DateTime
 Departs                Time this leg departs                                        Time
 Arrives                Time this leg arrives                                        Time
 Layover                Layover time in minutes                                      Numeric
 ElapsedTime            Elapsed time from departs to arrives                         Numeric
 Stops                  Number of stops for this leg                                 Numeric
 Segment1               Segment number of the origin (Optional)                      Numeric
 Segment2               Segment number of the destination (Optional)                 Numeric
 Miles                  Schedule miles from origin to destination                    Numeric
 Frequency              Days schedule operates                                       Text
 ThruFrequency          Days we arrive at the next leg                               Text
 CouponValue            Coupon value (x 100) we use for this leg                     Numeric
 CVMiles                Miles used to calculate the coupon value                     Numeric
 SeatRecordID           Unique ID of the seat record in the TSA Journal (Optional)   Numeric
 SeatDesignator         The seat number (1A, 7B, etc…) (Optional)                    Text

6.3.1.16.5 <Upsell> Element

The <Upsell> element contains information about an upsell that was offered to the guest. This element is a sub-element of the <OrderLine>
element, and indicates that either the orderline resulted from an upsell or that an upsell option was offered, but rejected.

 Field           Description                                                                                                    Type
 PLU             The PLU of the item that was originally selected, but was upsold from. This value is blank if upsell options   Text
                 were offered, but rejected by the guest.
 PriceDifference For replacement upsell, this is the difference in price between the originally selected item, and the upsell   Currency
                 item that was chosen. For add-on upsell, this is the full price of the upsell item.
 UpsellType      The type of upsell this was. 0 = Replacement 1 = Add-on                                                        Numeric

6.3.1.16.6 <AttributeValues> Element

The <AttributeValues> contains answers used to set attributes for the given ticket order line.

 Field                  Description                                               Type
 ID                     The Defintion ID for the Attribute Value                  Numeric
 LookupAnswerID         The ID of the answer in the a multiple choice attribute   Numeric
 Value                  The answer provided in a free-form attribute              Text

6.3.1.16.7 <VisualIDs> Element



                                                                                                                                       44
eGalaxy Server Interface Specification                                                                             6 Order Processing
The <VisualIDs> element contains a list of foreign media ticket IDs to be used when creating foreign media tickets. The <VisualIDs>
element contains one or more <VisualID> elements, each of which contains a foreign media ticket ID to use when activating foreign media
tickets. Note that this requires the PLU to be configured as "requires activation" with an activation method of "Validate Media". See the
"Activate Foreign Media Tickets" example in this section.

6.3.1.16.8 <HostDataFields> element

The <HostDataFields> element contains one or more <HostDataField> elements. Each <HostDataField> element contains information about
a particular host data field that will be journalized to the JnlHostDataFields table for the transaction. The following fields are supported
within <HostDataField> element:

 Field     Description                                    Type
 FieldID   The ID of the host data field.                 Numeric
 FieldData The data associated with this host data field. Text

6.3.2 Example Orders Message – Regular tickets/items
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>133</MessageID>
      <TimeStamp>2009-06-25 13:35:45</TimeStamp>
      <MessageType>ORDERS</MessageType>
      <SourceID>Website1</SourceID>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>12292001-447</OrderID>
          <OrderCommand>ADD</OrderCommand>
          <CustomerID>167</CustomerID>
          <SalesProgram>201</SalesProgram>
          <OrderDate>2009-06-25 12:30:00</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderNote/>
      <OrderHash>ud1t41gf484u</OrderHash>
          <OrderTotal>250.00</OrderTotal>
          <OrderContact>
            <Contact>
              <FirstName>Michael</FirstName>
              <MiddleName/>
              <LastName>Andre</LastName>
              <Company>Gateway Ticketing Systems, Inc.</Company>
              <Street1>315 E. 2nd Street</Street1>
              <Street2/>
              <City>Boyertown</City>
              <State>PA</State>
              <Zip>19512</Zip>
              <Country>USA</Country>
              <Phone>610-987-4000</Phone>
              <Fax>610-987-4001</Fax>
              <Email>mandre@gatewayticketing.com</Email>
            </Contact>
          </OrderContact>
          <ShipToContact>
            <SameAsOrderContact>YES</SameAsOrderContact>
          </ShipToContact>
          <BillToContact>
            <SameAsOrderContact>YES</SameAsOrderToContact>
          </BillToContact>
          <Shipping>
            <DeliveryMethod>2</DeliveryMethod>
          </Shipping>
          <UserFields>
            <UserField1>Example User Field 1</UserField1>
            <UserField2>Example User Field 2</UserField2>
            <UserField3>Example User Field 3</UserField3>
          </UserFields>
          <PaymentContracts>
            <PaymentContract>
              <PaymentPlanID>1</PaymentPlanID>
                                                                                                                                          45
eGalaxy Server Interface Specification                                                   6 Order Processing
              <PaymentPlanID>1</PaymentPlanID>
              <RenewContract>0</RenewContract>
              <PaymentContractStatusID>1</PaymentContractStatusID>
              <PaymentContractEffective>2009-06-25 00:00:00</PaymentContractEffective>
              <PaymentStart>2009-06-25 00:00:00</PaymentStart>
              <NextPaymentdue>2009-06-25 00:00:00</NextPaymentdue>
              <PaymentContractRenew>2010-06-25 00:00:00</PaymentContractRenew>
              <DownPaymentAmount>10.00</DownPaymentAmount>
              <PaymentAmount>20.00</PaymentAmount>
              <RemainingPayments>12</RemainingPayments>
              <CurrentBalance>240.00</CurrentBalance>
              <Arrears>0</Arrears>
              <BillingCycles>12</BillingCycles>
              <RecurrencePatternID>1</RecurrencePatternID>
              <MissedPayments>0</MissedPayments>
              <ContactMethod>0</ContactMethod>
              <ContractTotal>250.00</ContractTotal>
            </PaymentContract>
          </PaymentContracts>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>10111012</PLU>
              <Description>1-Day Adult Ticket</Description>
              <TaxCode/>
              <Qty>1</Qty>
              <Amount>100.00</Amount>
              <Total>100.00</Total>
              <PaymentPlanID>1</PaymentPlanID>
              <ExternalDiscountID>ATPCAGA1123</ExternalDiscountID>
              <ExternalDiscountName>ALT30PERCENT</ExternalDiscountName>
            </OrderLine>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>10111013</PLU>
              <Description>1-Day Child Ticket</Description>
              <TaxCode/>
              <Qty>2</Qty>
              <Amount>75.00</Amount>
              <Total>150.00</Total>
              <PaymentPlanID>1</PaymentPlanID>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <PaymentCode>32</PaymentCode>
              <Description>Visa</Description>
              <PaymentDate>2009-06-25 12:30:00</PaymentDate>
              <Endorsement>40055500000000195</Endorsement>
              <Amount>10.00</Amount>
              <CardHolderName>Michael Andre</CardHolderName>
              <ExpDate>1202</ExpDate>
              <AuthCode>123456</AuthCode>
              <PSI>A</PSI>
              <PayOnIssuance>NO</PayOnIssuance>
              <BillingStreet>315 E. 2nd Street</BillingStreet>
              <BillingZIP>19512</BillingZIP>
              <CVN>000</CVN>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.3 Example Orders Message – Including Order and Item fees
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageType>Orders</MessageType>
          <TimeStamp>2017-01-03 11:41:25</TimeStamp>
          <SessionID/>
          <MessageID>0</MessageID>
          <EchoData/>
          <SystemFields/>
                                                                                                        46
eGalaxy Server Interface Specification                                           6 Order Processing
         <SystemFields/>
     </Header>
     <Body>
         <Orders>
             <Order>
                 <OrderID>20160630-004</OrderID>
                 <CustomerID>10</CustomerID>
                 <SessionID>0</SessionID>
                 <OrderDate>2017-01-03 11:41:25</OrderDate>
                 <OrderStatus>2</OrderStatus>
                 <SalesCategoryGroupID>19</SalesCategoryGroupID>
                 <SalesProgram>3</SalesProgram>
                 <OrderNote/>
                 <OrderTotal>8.0000</OrderTotal>
                 <OrderContact>
                     <Contact>
                         <FirstName>Michael</FirstName>
                         <MiddleName/>
                         <LastName>Andre</LastName>
                         <Company>Gateway Ticketing Systems, Inc.</Company>
                         <Street1>445 County Line Road</Street1>
                         <Street2/>
                         <City>Gilbertsville</City>
                         <State>PA</State>
                         <Zip>19525</Zip>
                         <Country>USA</Country>
                         <Phone>610-987-4000</Phone>
                         <Fax>610-987-4001</Fax>
                         <Email>mandre@gatewayticketing.com</Email>
                     </Contact>
                 </OrderContact>
                 <ShipToContact>
                     <SameAsOrderContact>YES</SameAsOrderContact>
                 </ShipToContact>
                 <Shipping>
                     <DeliveryMethodID>12</DeliveryMethodID>
                     <DeliveryDetails>1</DeliveryDetails>
                     <TrackingNBr/>
                 </Shipping>
                 <UserFields>
                     <UserField1>No</UserField1>
                 </UserFields>
                 <OrderDiscounts/>
                 <OrderLines>
                     <OrderLine>
                         <DetailType>2</DetailType>
                         <Description>Payment</Description>
                         <PaymentCode>32</PaymentCode>
                         <PaymentDate>2017-01-03 10:58:02</PaymentDate>
                         <OrderTransactionID>0</OrderTransactionID>
                         <Amount>8.0000</Amount>
                         <Endorsement>4111111111111111</Endorsement>
                         <CardHolderName>Roman Test</CardHolderName>
                         <ExpDate>Omitted</ExpDate>
                         <PayOnIssuance>NO</PayOnIssuance>
                         <AuthCode>501222</AuthCode>
                         <GxKeyID>1</GxKeyID>
                         <IssuedLoyaltyPoints>0</IssuedLoyaltyPoints>
                         <StoredValueBalance>0</StoredValueBalance>
                         <SearchEndorsementValue>1111</SearchEndorsementValue>
                     </OrderLine>
                     <OrderLine>
                         <DetailType>9</DetailType>
                         <Description>Sales</Description>
                         <Amount>0.4500</Amount>
                         <Total>0.4500</Total>
                         <TaxAmount>0.0000</TaxAmount>
                         <TaxID>1</TaxID>
                     </OrderLine>
                     <OrderLine>
                         <DetailType>1</DetailType>
                         <Amount>9.5500</Amount>
                         <CapacityID>0</CapacityID>
                         <CreateDate/>
                         <Description>No Tax Date</Description>
                         <DisbursementID>0</DisbursementID>
                         <DiscountAmount>5.0000</DiscountAmount>
                                                                                                47
eGalaxy Server Interface Specification                                         6 Order Processing
                          <EventID>0</EventID>
                          <ExpirationDate/>
                          <PaymentPlanID>0</PaymentPlanID>
                          <PLU>1-D</PLU>
                          <Qty>1</Qty>
                          <ResourceID>0</ResourceID>
                          <SalesChannelDetailID/>
                          <SalesProgram>0</SalesProgram>
                          <Total>5.0000</Total>
                          <TaxAmount>0.4500</TaxAmount>
                          <DateSold>2017-01-03 10:41:25</DateSold>
                          <TicketDate>2026-11-21 10:41:25</TicketDate>
                          <LoyaltyAccountNo/>
                          <LoyaltyProgramID>0</LoyaltyProgramID>
                          <PendingLoyaltyPoints>0</PendingLoyaltyPoints>
                          <IssuedLoyaltyPoints>0</IssuedLoyaltyPoints>
                          <Taxes>
                              <Tax>
                                  <TaxID>1</TaxID>
                                  <TaxTableID>-1</TaxTableID>
                                  <DisburseIndex>0</DisburseIndex>
                                  <UnitAmount>0.4500</UnitAmount>
                                  <Method>0</Method>
                                  <ReducePrice>YES</ReducePrice>
                              </Tax>
                          </Taxes>
                          <Fees>
                              <Fee>
                                  <DetailType>12</DetailType>
                                  <Amount>2.0000</Amount>
                                  <Description>Item Fee No Tax</Description>
                                  <DiscountAmount>1.0000</DiscountAmount>
                                  <PLU>ItemFeeNoTax</PLU>
                                  <Qty>1</Qty>
                                  <Total>1.0000</Total>
                                  <TaxAmount>0.0000</TaxAmount>
                                  <Taxes/>
                              </Fee>
                          </Fees>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>12</DetailType>
                          <Amount>2.0000</Amount>
                          <Description>Order Fee No Tax</Description>
                          <DiscountAmount>0.0000</DiscountAmount>
                          <PLU>OrderFeeNoTax</PLU>
                          <Qty>1</Qty>
                          <Total>2.0000</Total>
                          <TaxAmount>0.0000</TaxAmount>
                          <Taxes/>
                      </OrderLine>
                  </OrderLines>
                  <Surveys/>
              </Order>
          </Orders>
      </Body>
  </Envelope>

6.3.4 Example Orders Message – Regular tickets/items with tax included
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>133</MessageID>
          <TimeStamp>2009-06-25 13:35:45</TimeStamp>
          <MessageType>ORDERS</MessageType>
          <SourceID>Website1</SourceID>
      </Header>
      <Body>
          <Orders>
              <Order>
                  <OrderID>12292001-448</OrderID>
                  <OrderCommand>ADD</OrderCommand>
                  <CustomerID>167</CustomerID>
                                                                                              48
eGalaxy Server Interface Specification                                                   6 Order Processing
                <SalesProgram>201</SalesProgram>
                <OrderDate>2009-06-25 12:30:00</OrderDate>
                <OrderStatus>2</OrderStatus>
                <OrderNote/>
                <OrderTotal>5.00</OrderTotal>
                <OrderContact>
                    <Contact>
                        <FirstName>Michael</FirstName>
                        <MiddleName/>
                        <LastName>Andre</LastName>
                        <Company>Gateway Ticketing Systems, Inc.</Company>
                        <Street1>315 E. 2nd Street</Street1>
                        <Street2/>
                        <City>Boyertown</City>
                        <State>PA</State>
                        <Zip>19512</Zip>
                        <Country>USA</Country>
                        <Phone>610-987-4000</Phone>
                        <Fax>610-987-4001</Fax>
                        <Email>mandre@gatewayticketing.com</Email>
                    </Contact>
                </OrderContact>
                <ShipToContact>
                    <SameAsOrderContact>YES</SameAsOrderContact>
                </ShipToContact>
                <Shipping>
                    <DeliveryMethod>2</DeliveryMethod>
                </Shipping>
                <OrderLines>
                    <OrderLine>
                        <DetailType>1</DetailType>
                        <Amount>9.3500</Amount>
                        <CapacityID>0</CapacityID>
                        <CreateDate/>
                        <Description>1-Day Adult Ticket 15% tax included</Description>
                        <DisbursementID>0</DisbursementID>
                        <DiscountAmount>5.0000</DiscountAmount>
                        <PaymentPlanID>0</PaymentPlanID>
                        <PLU>10111010</PLU>
                        <Qty>1</Qty>
                        <SalesProgram>0</SalesProgram>
                        <Total>5.0000</Total>
                        <TaxAmount>0.6500</TaxAmount>
                        <Taxes>
                            <Tax>
                                <TaxID>1</TaxID>
                                <TaxTableID>-1</TaxTableID>
                                <DisburseIndex>0</DisburseIndex>
                                <UnitAmount>0.6500</UnitAmount>
                                <Method>0</Method>
                                <ReducePrice>YES</ReducePrice>
                            </Tax>
                        </Taxes>
                    </OrderLine>
                    <OrderLine>
                        <DetailType>9</DetailType>
                        <Description>Sales</Description>
                        <Amount>0.6500</Amount>
                        <Total>0.6500</Total>
                        <TaxAmount>0.0000</TaxAmount>
                        <TaxID>1</TaxID>
                    </OrderLine>
                    <OrderLine>
                        <DetailType>2</DetailType>
                        <PaymentCode>32</PaymentCode>
                        <Description>Visa</Description>
                        <PaymentDate>2009-06-25 12:30:00</PaymentDate>
                        <Endorsement>4111111111111111</Endorsement>
                        <Amount>5.00</Amount>
                        <CardHolderName>Michael Andre</CardHolderName>
                        <ExpDate>1202</ExpDate>
                        <AuthCode>123456</AuthCode>
                        <PSI>A</PSI>
                        <PayOnIssuance>NO</PayOnIssuance>
                        <BillingStreet>315 E. 2nd Street</BillingStreet>
                        <BillingZIP>19512</BillingZIP>
                        <CVN>000</CVN>
                                                                                                        49
eGalaxy Server Interface Specification                                                       6 Order Processing
                          <CVN>000</CVN>
                      </OrderLine>
                  </OrderLines>
              </Order>
          </Orders>
      </Body>
  </Envelope>

6.3.5 Example Order Message – Transportation Ticket
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>133</MessageID>
      <TimeStamp>2009-06-25 14:55:50</TimeStamp>
      <MessageType>ORDERS</MessageType>
      <SourceID>Website1</SourceID>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>12292001-447</OrderID>
          <OrderCommand>ADD</OrderCommand>
          <CustomerID>167</CustomerID>
          <OrderDate>2009-06-25 14:30:00</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderNote/>
          <OrderTotal>90.75</OrderTotal>
          <OrderContact>
            <Contact>
              <FirstName>Michael</FirstName>
              <MiddleName/>
              <LastName>Andre</LastName>
              <Company>Gateway Ticketing Systems, Inc.</Company>
              <Street1>315 E. 2nd Street</Street1>
              <Street2/>
              <City>Boyertown</City>
              <State>PA</State>
              <Zip>19512</Zip>
              <Country>USA</Country>
              <Phone>610-987-4000</Phone>
              <Fax>610-987-4001</Fax>
              <Email>mandre@gatewayticketing.com</Email>
            </Contact>
          </OrderContact>
          <ShipToContact>
            <SameAsOrderContact>YES</SameAsOrderContact>
          </ShipToContact>
          <Shipping>
            <DeliveryMethod>2</DeliveryMethod>
          </Shipping>
          <UserFields>
            <UserField1>Example User Field 1</UserField1>
            <UserField2>Example User Field 2</UserField2>
            <UserField3>Example User Field 3</UserField3>
          </UserFields>
          <OrderLines>
            <OrderLine>
              <DetailType>13</DetailType>
              <PLU>GLI10100101</PLU>
              <Description>Boston MA to Philadelphia PA Thu 04 Dec 08 OW ADULT</Description>
              <TaxCode/>
              <Qty>1</Qty>
              <Amount>55.00</Amount>
              <Total>55.00</Total>
              <Transportation>
                <OriginCode>40030</OriginCode>
                <DestinationCode>171127</DestinationCode>
                <Description>Boston MA to Philadelphia PA Thu 04 Dec 08 OW ADULT</Description>
                <TripMode>0</TripMode>
                <OWRT>OW</OWRT>
                <DepartureDate>2009-06-25 00:00:00</DepartureDate>
                <ReturnDate/>
                <TicketType>
                  <Fare>55.00</Fare>
                                                                                                            50
eGalaxy Server Interface Specification                                     6 Order Processing
                <Fare>55.00</Fare>
                <TemplateID>37</TemplateID>
                <Description>ADULT</Description>
                <FareClass>AD</FareClass>
                <RouteType>OW</RouteType>
                <Percentage>100</Percentage>
                <Rounded>U</Rounded>
                <RoundTo>5</RoundTo>
                <GalaxyItemID>GLI10100101</GalaxyItemID>
                <ICWPLU/>
              </TicketType>
              <TariffID>23</TariffID>
              <TariffCarrier>AAAA</TariffCarrier>
              <TariffName>MACP</TariffName>
              <Endorsement>MA City Pair Fares</Endorsement>
              <PassengerName/>
              <HasTariffMiles>FALSE</HasTariffMiles>
              <TariffMiles>312</TariffMiles>
              <FareMiles>0</FareMiles>
              <SurchargeAmount/>
              <FareID>2977</FareID>
              <Restrictions>PM,NRX</Restrictions>
              <OutboundItinerary>
                <Modified>FALSE</Modified>
                <Carrier>PPB</Carrier>
                <Schedule>1851</Schedule>
                <Departs>09:00:00</Departs>
                <Arrives>13:00:00</Arrives>
                <Frequency>YYYYYYYY</Frequency>
                <ElapsedTime>460</ElapsedTime>
                <Miles>313</Miles>
                <Stops>4</Stops>
                <Breaks>1</Breaks>
                <AveragePTP>10</AveragePTP>
                <ItineraryDetails>
                  <ItineraryDetail>
                    <LegNo>0</LegNo>
                    <OriginCode>40030</OriginCode>
                    <DestinationCode>151239</DestinationCode>
                    <CompanyNumber>18</CompanyNumber>
                    <Carrier>PPB</Carrier>
                    <Schedule>1851</Schedule>
                    <EffectiveDate>1980-01-01 00:00:00</EffectiveDate>
                    <ExpirationDate>2079-12-31 00:00:00</ExpirationDate>
                    <Departs>09:00:00</Departs>
                    <Arrives>10:00:00</Arrives>
                    <Layover>0</Layover>
                    <ElapsedTime>270</ElapsedTime>
                    <Stops>1</Stops>
                    <Segment1>1</Segment1>
                    <Segment2>4</Segment2>
                    <Miles>214</Miles>
                    <Frequency>YYYYYYYY</Frequency>
                    <ThruFrequency>YYYYYYYY</ThruFrequency>
                    <CouponValue>3825</CouponValue>
                    <CVMiles>215</CVMiles>
                    <SeatRecordID>0</SeatRecordID>
                    <SeatDesignator/>
                  </ItineraryDetail>
                  <ItineraryDetail>
                    <LegNo>1</LegNo>
                    <OriginCode>151239</OriginCode>
                    <DestinationCode>171127</DestinationCode>
                    <CompanyNumber>43</CompanyNumber>
                    <Carrier>GLI</Carrier>
                    <Schedule>2175</Schedule>
                    <EffectiveDate>1980-01-01 00:00:00</EffectiveDate>
                    <ExpirationDate>2079-12-31 00:00:00</ExpirationDate>
                    <Departs>11:00:00</Departs>
                    <Arrives>13:00:00</Arrives>
                    <Layover>60</Layover>
                    <ElapsedTime>130</ElapsedTime>
                    <Stops>1</Stops>
                    <Segment1>1</Segment1>
                    <Segment2>3</Segment2>
                    <Miles>299</Miles>
                    <Frequency>YYYYYYYY</Frequency>
                    <ThruFrequency>YYYYYYYY</ThruFrequency>
                                                                                          51
eGalaxy Server Interface Specification                                                      6 Order Processing
                     <ThruFrequency>YYYYYYYY</ThruFrequency>
                     <CouponValue>1675</CouponValue>
                     <CVMiles>95</CVMiles>
                     <SeatRecordID>0</SeatRecordID>
                     <SeatDesignator/>
                   </ItineraryDetail>
                 </ItineraryDetails>
                 <FareRouteIndex>1</FareRouteIndex>
                 <TariffMilesRouteIndex>0</TariffMilesRouteIndex>
               </OutboundItinerary>
               <InboundItinerary/>
             </Transportation>
           </OrderLine>
           <OrderLine>
             <DetailType>13</DetailType>
             <PLU>GLI10100103</PLU>
             <Description>Boston MA to Philadelphia PA Thu 04 Dec 08 OW CHILD</Description>
             <TaxCode/>
             <Qty>1</Qty>
             <Amount>35.75</Amount>
             <Total>35.75</Total>
             <Transportation>
               <OriginCode>40030</OriginCode>
               <DestinationCode>171127</DestinationCode>
               <Description>Boston MA to Philadelphia PA Thu 04 Dec 08 OW CHILD</Description>
               <TripMode>0</TripMode>
               <OWRT>OW</OWRT>
               <DepartureDate>2008-12-04 00:00:00</DepartureDate>
               <ReturnDate/>
               <TicketType>
                 <Fare>35.75</Fare>
                 <TemplateID>37</TemplateID>
                 <Description>CHILD</Description>
                 <FareClass>CH</FareClass>
                 <RouteType>OW</RouteType>
                 <Percentage>65</Percentage>
                 <Rounded>U</Rounded>
                 <RoundTo>5</RoundTo>
                 <GalaxyItemID>GLI10100103</GalaxyItemID>
                 <ICWPLU/>
               </TicketType>
               <TariffID>23</TariffID>
               <TariffCarrier>AAAA</TariffCarrier>
               <TariffName>MACP</TariffName>
               <Endorsement>MA City Pair Fares</Endorsement>
               <PassengerName/>
               <HasTariffMiles>FALSE</HasTariffMiles>
               <TariffMiles>312</TariffMiles>
               <FareMiles>0</FareMiles>
               <SurchargeAmount/>
               <FareID>2977</FareID>
               <Restrictions>PM,NRX</Restrictions>
               <OutboundItinerary>
                 <Modified>FALSE</Modified>
                 <DroppedBy>FALSE</DroppedBy>
                 <Carrier>PPB</Carrier>
                 <Schedule>1851</Schedule>
                 <Departs>09:00:00</Departs>
                 <Arrives>13:00:00</Arrives>
                 <Frequency>YYYYYYYY</Frequency>
                 <ElapsedTime>460</ElapsedTime>
                 <Miles>313</Miles>
                 <Stops>4</Stops>
                 <Breaks>1</Breaks>
                 <AveragePTP>10</AveragePTP>
                 <ItineraryDetails>
                   <ItineraryDetail>
                     <LegNo>0</LegNo>
                     <OriginCode>40030</OriginCode>
                     <DestinationCode>151239</DestinationCode>
                     <CompanyNumber>18</CompanyNumber>
                     <Carrier>PPB</Carrier>
                     <Schedule>1851</Schedule>
                     <EffectiveDate>1980-01-01 00:00:00</EffectiveDate>
                     <ExpirationDate>2079-12-31 00:00:00</ExpirationDate>
                     <Departs>09:00:00</Departs>
                     <Arrives>10:00:00</Arrives>
                                                                                                           52
eGalaxy Server Interface Specification                                       6 Order Processing
                      <Arrives>10:00:00</Arrives>
                      <Layover>0</Layover>
                      <ElapsedTime>270</ElapsedTime>
                      <Stops>1</Stops>
                      <Segment1>1</Segment1>
                      <Segment2>4</Segment2>
                      <Miles>214</Miles>
                      <Frequency>YYYYYYYY</Frequency>
                      <ThruFrequency>YYYYYYYY</ThruFrequency>
                      <CouponValue>2486</CouponValue>
                      <CVMiles>215</CVMiles>
                      <SeatRecordID>0</SeatRecordID>
                      <SeatDesignator/>
                    </ItineraryDetail>
                    <ItineraryDetail>
                      <LegNo>1</LegNo>
                      <OriginCode>151239</OriginCode>
                      <DestinationCode>171127</DestinationCode>
                      <CompanyNumber>43</CompanyNumber>
                      <Carrier>GLI</Carrier>
                      <Schedule>2175</Schedule>
                      <EffectiveDate>1980-01-01 00:00:00</EffectiveDate>
                      <ExpirationDate>2079-12-31 00:00:00</ExpirationDate>
                      <Departs>11:00:00</Departs>
                      <Arrives>13:00:00</Arrives>
                      <Layover>60</Layover>
                      <ElapsedTime>130</ElapsedTime>
                      <Stops>1</Stops>
                      <Segment1>1</Segment1>
                      <Segment2>3</Segment2>
                      <Miles>299</Miles>
                      <Frequency>YYYYYYYY</Frequency>
                      <ThruFrequency>YYYYYYYY</ThruFrequency>
                      <CouponValue>1089</CouponValue>
                      <CVMiles>95</CVMiles>
                      <SeatRecordID>0</SeatRecordID>
                      <SeatDesignator/>
                    </ItineraryDetail>
                  </ItineraryDetails>
                  <FareRouteIndex>1</FareRouteIndex>
                  <TariffMilesRouteIndex>0</TariffMilesRouteIndex>
                </OutboundItinerary>
                <InboundItinerary/>
              </Transportation>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <PaymentCode>32</PaymentCode>
              <Description>Visa</Description>
              <PaymentDate>2009-06-25 14:55:00</PaymentDate>
              <Endorsement>40055500000000195</Endorsement>
              <Amount>10.00</Amount>
              <CardHolderName>Michael Andre</CardHolderName>
              <ExpDate>1208</ExpDate>
              <AuthCode>123456</AuthCode>
              <PSI>A</PSI>
              <PayOnIssuance>NO</PayOnIssuance>
              <BillingStreet>315 E. 2nd Street</BillingStreet>
              <BillingZIP>19512</BillingZIP>
              <CVN>000</CVN>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.6 Example Orders Message – Pass renewal sale
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>133</MessageID>
      <TimeStamp>2009-06-25 16:25:05</TimeStamp>
      <MessageType>ORDERS</MessageType>
                                                                                            53
eGalaxy Server Interface Specification                                        6 Order Processing
      <MessageType>ORDERS</MessageType>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>12292001-447</OrderID>
          <OrderCommand>ADD</OrderCommand>
          <CustomerID>167</CustomerID>
          <SalesProgram>201</SalesProgram>
          <OrderDate>2009-06-25 16:25:00</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderNote/>
          <OrderTotal>75.00</OrderTotal>
          <OrderContact>
            <Contact>
              <FirstName>Michael</FirstName>
              <MiddleName/>
              <LastName>Andre</LastName>
              <Company>Gateway Ticketing Systems, Inc.</Company>
              <Street1>315 E. 2nd Street</Street1>
              <Street2/>
              <City>Boyertown</City>
              <State>PA</State>
              <Zip>19512</Zip>
              <Country>USA</Country>
              <Phone>610-987-4000</Phone>
              <Fax>610-987-4001</Fax>
              <Email>mandre@gatewayticketing.com</Email>
            </Contact>
          </OrderContact>
          <ShipToContact>
            <SameAsOrderContact>YES</SameAsOrderContact>
          </ShipToContact>
          <Shipping>
            <DeliveryMethod>2</DeliveryMethod>
          </Shipping>
          <OrderLines>
            <OrderLine>
              <DetailType>8</DetailType>
              <PLU>10111012</PLU>
              <Description>Season Pass</Description>
              <TaxCode/>
              <Qty>1</Qty>
              <Amount>75.00</Amount>
              <Total>75.00</Total>
              <ExternalDiscountID>ATPCAPASS1234</ExternalDiscountID>
              <ExternalDiscountName>ALT30PERCENTPASS</ExternalDiscountName>
              <Pass>
                <VisualID>200002586005601</VisualID>
              </Pass>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <PaymentCode>32</PaymentCode>
              <Description>Visa</Description>
              <PaymentDate>2009-06-25 16:25:00</PaymentDate>
              <Endorsement>40055500000000195</Endorsement>
              <Amount>75.00</Amount>
              <CardHolderName>Michael Andre</CardHolderName>
              <ExpDate>1202</ExpDate>
              <AuthCode>123456</AuthCode>
              <PSI>A</PSI>
              <PayOnIssuance>NO</PayOnIssuance>
              <BillingStreet>315 E. 2nd Street</BillingStreet>
              <BillingZIP>19512</BillingZIP>
              <CVN>000</CVN>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.7 Example Orders Message - Pass Reissue Sale

                                                                                             54
eGalaxy Server Interface Specification                                                                         6 Order Processing
  <Envelope>
      <Header>
      <SourceID>1</SourceID>
      <MessageID>1</MessageID>
      <MessageType>Orders</MessageType>
      <TimeStamp>2019-01-01 00:00:00</TimeStamp>
      </Header>
      <Body>
        <Orders>
          <Order>
            <OrderID>20190101-001</OrderID>
            <OrderCommand>Add</OrderCommand>
            <CustomerID>115</CustomerID>
            <OrderDate>2019-07-11 17:09:48</OrderDate>
            <OrderStatus>2</OrderStatus>
            <OrderTotal>0.00</OrderTotal>
            <OrderContact>
              <Contact>
                <FirstName>Order</FirstName>
                <LastName>Contact</LastName>
                <Phone>6104730000</Phone>
                <Email>OrderContact@GatewayTicketing.com</Email>
              </Contact>
            </OrderContact>
            <ShipToContact>
              <SameAsOrderContact>YES</SameAsOrderContact>
            </ShipToContact>
            <Shipping>
              <DeliveryMethodID>25</DeliveryMethodID>
            </Shipping>
            <OrderLines>
              <OrderLine>
                <DetailType>8</DetailType>
                <Description>Pass</Description>
                <Status>8</Status>
                <PLU>3GZ00599</PLU>
                <Qty>1</Qty>
                <Amount>0</Amount>
                <Total>0</Total>
                <TaxAmount>0.00</TaxAmount>
                <DiscountAmount>0.00</DiscountAmount>
                <PaymentPlanID>0</PaymentPlanID>
                <Pass>
                  <VisualID>15001000005448</VisualID>
                </Pass>
              </OrderLine>
              <OrderLine>
                <DetailType>2</DetailType>
                <PaymentCode>42</PaymentCode>
                <Description>MC</Description>
                <Amount>0.00</Amount>
              </OrderLine>
            </OrderLines>
          </Order>
        </Orders>
      </Body>
  </Envelope>

6.3.8 Example Orders Message - Pass Reissue Sale With Specified Visual ID
The following Orders message reissues a pass with visual ID 15001000005448, specifying that the visual ID of the new pass should be
1234567890.




                                                                                                                                      55
eGalaxy Server Interface Specification                             6 Order Processing
  <Envelope>
      <Header>
      <SourceID>1</SourceID>
      <MessageID>1</MessageID>
      <MessageType>Orders</MessageType>
      <TimeStamp>2019-01-01 00:00:00</TimeStamp>
      </Header>
      <Body>
        <Orders>
          <Order>
            <OrderID>20190101-001</OrderID>
            <OrderCommand>Add</OrderCommand>
            <CustomerID>115</CustomerID>
            <OrderDate>2019-07-11 17:09:48</OrderDate>
            <OrderStatus>2</OrderStatus>
            <OrderTotal>0.00</OrderTotal>
            <OrderContact>
              <Contact>
                <FirstName>Order</FirstName>
                <LastName>Contact</LastName>
                <Phone>6104730000</Phone>
                <Email>OrderContact@GatewayTicketing.com</Email>
              </Contact>
            </OrderContact>
            <ShipToContact>
              <SameAsOrderContact>YES</SameAsOrderContact>
            </ShipToContact>
            <Shipping>
              <DeliveryMethodID>25</DeliveryMethodID>
            </Shipping>
            <OrderLines>
              <OrderLine>
                <DetailType>8</DetailType>
                <Description>Pass</Description>
                <Status>8</Status>
                <PLU>3GZ00599</PLU>
                <Qty>1</Qty>
                <Amount>0</Amount>
                <Total>0</Total>
                <TaxAmount>0.00</TaxAmount>
                <DiscountAmount>0.00</DiscountAmount>
                <PaymentPlanID>0</PaymentPlanID>
                <VisualIDs>
                  <VisualID>1234567890</VisualID>
                </VisualIDs>
                <Pass>
                  <VisualID>15001000005448</VisualID>
                </Pass>
              </OrderLine>
              <OrderLine>
                <DetailType>2</DetailType>
                <PaymentCode>42</PaymentCode>
                <Description>MC</Description>
                <Amount>0.00</Amount>
              </OrderLine>
            </OrderLines>
          </Order>
        </Orders>
      </Body>
  </Envelope>

6.3.9 Example Orders Message – New Pass sale
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>133</MessageID>
      <TimeStamp>2012-05-25 14:25:05</TimeStamp>
      <MessageType>ORDERS</MessageType>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>12292001-987</OrderID>
                                                                                  56
eGalaxy Server Interface Specification                             6 Order Processing
          <OrderID>12292001-987</OrderID>
          <OrderCommand>ADD</OrderCommand>
          <CustomerID>167</CustomerID>
          <SalesProgram>201</SalesProgram>
          <OrderDate>2012-05-25 14:25:00</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderNote/>
          <OrderTotal>75.00</OrderTotal>
          <OrderContact>
            <Contact>
              <FirstName>Michael</FirstName>
              <MiddleName/>
              <LastName>Andre</LastName>
              <Company>Gateway Ticketing Systems, Inc.</Company>
              <Street1>315 E. 2nd Street</Street1>
              <Street2/>
              <City>Boyertown</City>
              <State>PA</State>
              <Zip>19512</Zip>
              <Country>USA</Country>
              <Phone>610-987-4000</Phone>
              <Fax>610-987-4001</Fax>
              <Email>mandre@gatewayticketing.com</Email>
            </Contact>
          </OrderContact>
          <ShipToContact>
            <SameAsOrderContact>YES</SameAsOrderContact>
          </ShipToContact>
          <Shipping>
            <DeliveryMethod>2</DeliveryMethod>
          </Shipping>
          <OrderLines>
            <OrderLine>
              <DetailType>8</DetailType>
              <PLU>10111012</PLU>
              <Description>Season Pass</Description>
              <TaxCode/>
              <Qty>1</Qty>
              <Amount>75.00</Amount>
              <Total>75.00</Total>
              <Pass>
                <LastName>Andre</LastName>
                <FirstName>Michael</FirstName>
                <DOB>1970-01-01</DOB>
                <IsPrimary>YES</IsPrimary>
                <Phone>610-987-4000</Phone>
                <Email>mandre@gatewayticketing.com</Email>
                <Street1>315 E 2nd St</Street1>
                <City>Boyertown</City>
                <State>PA</State>
                <ZIP>19512</ZIP>
              </Pass>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <PaymentCode>32</PaymentCode>
              <Description>Visa</Description>
              <PaymentDate>2012-05-25 14:25:00</PaymentDate>
              <Endorsement>40055500000000195</Endorsement>
              <Amount>75.00</Amount>
              <CardHolderName>Michael Andre</CardHolderName>
              <ExpDate>1202</ExpDate>
              <AuthCode>123456</AuthCode>
              <PSI>A</PSI>
              <PayOnIssuance>NO</PayOnIssuance>
              <BillingStreet>315 E. 2nd Street</BillingStreet>
              <BillingZIP>19512</BillingZIP>
              <CVN>000</CVN>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.10 Example Orders Message – Upgrade Ticket to Pass
                                                                                  57
eGalaxy Server Interface Specification                                                      6 Order Processing
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageType>Orders</MessageType>
          <TimeStamp>2017-05-11 11:41:25</TimeStamp>
          <MessageID>0</MessageID>
      </Header>
      <Body>
          <Orders>
              <Order>
                  <OrderID>20170511-001</OrderID>
                  <CustomerID>10</CustomerID>
                  <SessionID>0</SessionID>
                  <OrderDate>2017-05-11 11:41:25</OrderDate>
                  <OrderStatus>2</OrderStatus>
                  <SalesCategoryGroupID>19</SalesCategoryGroupID>
                  <SalesProgram>3</SalesProgram>
                  <OrderTotal>100.0000</OrderTotal>
                  <TranslationLanguageID>0</TranslationLanguageID>
                  <OrderContact>
                      <Contact>
                          <FirstName>Roman (Contact)</FirstName>
                          <MiddleName>K</MiddleName>
                          <LastName>Test (Contact)</LastName>
                          <State>FL</State>
                          <IdentificationNo/>
                          <Mobile>16107834233</Mobile>
                          <Email>rklimczewski@GatewayTicketing.com</Email>
                          <ContactGUID>eef3d8c7-11a0-4d8e-82c1-7b37c8cd306c</ContactGUID>
                      </Contact>
                  </OrderContact>
                  <ShipToContact>
                      <SameAsOrderContact>YES</SameAsOrderContact>
                  </ShipToContact>
                  <Shipping>
                      <DeliveryMethodID>12</DeliveryMethodID>
                  </Shipping>
                  <OrderLines>
                      <OrderLine>
                          <DetailType>2</DetailType>
                          <Description>Payment</Description>
                          <PaymentCode>32</PaymentCode>
                          <PaymentDate>2017-05-11 10:58:02</PaymentDate>
                          <Amount>100.0000</Amount>
                          <CardHolderName>Roman Test</CardHolderName>
                          <ExpDate>Omitted</ExpDate>
                          <AuthCode>501222</AuthCode>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>8</DetailType>
                          <UpgradeFromVisualID>14001000672</UpgradeFromVisualID>
                          <Amount>100.0000</Amount>
                          <Description>Annual Pass</Description>
                          <PLU>1-PASS</PLU>
                          <Qty>1</Qty>
                          <Total>100.0000</Total>
                          <Pass>
                              <SameAsOrderContact>YES</SameAsOrderContact>
                              <Members>
                                  <Member>
                                      <Primary>YES</Primary>
                                      <FirstName>Roman (Contact)</FirstName>
                                      <MiddleName>K</MiddleName>
                                      <LastName>Test (Contact)</LastName>
                                      <State>FL</State>
                                      <Mobile>16107834233</Mobile>
                                      <Email>rklimczewski@GatewayTicketing.com</Email>
                                  </Member>
                              </Members>
                          </Pass>
                      </OrderLine>
                  </OrderLines>
              </Order>
          </Orders>
      </Body>
  </Envelope>
                                                                                                           58
eGalaxy Server Interface Specification                                                                    6 Order Processing
  </Envelope>

6.3.11 Example Orders Message – Upgrade Ticket to Ticket
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageType>Orders</MessageType>
          <TimeStamp>2017-05-11 11:41:25</TimeStamp>
          <MessageID>0</MessageID>
      </Header>
      <Body>
          <Orders>
              <Order>
                  <OrderID>20170511-001</OrderID>
                  <CustomerID>10</CustomerID>
                  <SessionID>0</SessionID>
                  <OrderDate>2017-05-11 11:41:25</OrderDate>
                  <OrderStatus>2</OrderStatus>
                  <SalesCategoryGroupID>19</SalesCategoryGroupID>
                  <SalesProgram>3</SalesProgram>
                  <OrderTotal>100.0000</OrderTotal>
                  <TranslationLanguageID>0</TranslationLanguageID>
                  <OrderContact>
                      <Contact>
                          <FirstName>Roman (Contact)</FirstName>
                          <MiddleName>K</MiddleName>
                          <LastName>Test (Contact)</LastName>
                          <State>FL</State>
                          <IdentificationNo/>
                          <Mobile>16107834233</Mobile>
                          <Email>rklimczewski@GatewayTicketing.com</Email>
                          <ContactGUID>eef3d8c7-11a0-4d8e-82c1-7b37c8cd306c</ContactGUID>
                      </Contact>
                  </OrderContact>
                  <ShipToContact>
                      <SameAsOrderContact>YES</SameAsOrderContact>
                  </ShipToContact>
                  <Shipping>
                      <DeliveryMethodID>12</DeliveryMethodID>
                  </Shipping>
                  <OrderLines>
                      <OrderLine>
                          <DetailType>2</DetailType>
                          <Description>Payment</Description>
                          <PaymentCode>32</PaymentCode>
                          <PaymentDate>2017-05-11 10:58:02</PaymentDate>
                          <Amount>10.0000</Amount>
                          <CardHolderName>Roman Test</CardHolderName>
                          <ExpDate>Omitted</ExpDate>
                          <AuthCode>501222</AuthCode>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>1</DetailType>
                          <UpgradeFromVisualID>14001000672</UpgradeFromVisualID>
                          <Amount>10.0000</Amount>
                          <Description>General Admission</Description>
                          <PLU>0010101</PLU>
                          <Qty>1</Qty>
                          <Total>10.0000</Total>
                      </OrderLine>
                  </OrderLines>
              </Order>
          </Orders>
      </Body>
  </Envelope>

6.3.12 Example Orders Message - Partial Package Upgrade of Ticket to Annual Pass
In the example below, we are returning a $10.00 Adult ticket and upgrading it to a $150.00 Annual Pass.
Note that the pricing for the example Pass reflects the $10 return value of the Adult ticket.

                                                                                                                         59
eGalaxy Server Interface Specification                                                                              6 Order Processing
You must use DetailType=19 for Partial Package Upgrade orders. This type of order returns one package detail for credit and uses that
return value (if any) to purchase some other item.
The upgrade item must appear on the available upgrade list for the returned Detail. You can enumerate the list of all possible upgrades for
a given Package Detail by calling QueryTicket using the VisualID of the Package Detail you wish to upgrade or the VisualID of the package
itself. QueryTicket also returns the price of each possible upgrade after the return value of the original ticket is factored in.
The UpgradeFromVisualID string in this example is the VisualID of the Adult ticket found in the original Package.

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>Exchange</SourceID>
      <MessageID>1</MessageID>
      <MessageType>Orders</MessageType>
      <TimeStamp>2019-05-13 17:50:11</TimeStamp>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>20190513-47302</OrderID>
          <CustomerID>10</CustomerID>
          <SessionID>0</SessionID>
          <OrderDate>2019-05-13 17:50:11</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderReference/>
          <PromotionID>0</PromotionID>
          <PromotionCode/>
          <SalesCategoryGroupID>0</SalesCategoryGroupID>
          <SalesProgram>0</SalesProgram>
          <OrderNote/>
          <OrderTotal>$140.00</OrderTotal>
          <PO/>
          <GroupSalesCode/>
          <ViewOrderWebURL/>
          <LoyaltyAccountNo/>
          <LoyaltyProgramID>0</LoyaltyProgramID>
          <PendingLoyaltyBonusPoints>0</PendingLoyaltyBonusPoints>
          <IssuedLoyaltyBonusPoints>0</IssuedLoyaltyBonusPoints>
          <RemoteAddress>fe80::494a:3f21:1113:9210%3</RemoteAddress>
          <TranslationLanguageID>1</TranslationLanguageID>
          <OrderContact>
            <Contact>
              <GalaxyContactID>1</GalaxyContactID>
              <ExternalID/>
              <FirstName>Test (contact)</FirstName>
              <LastName>Guest (Contact)</LastName>
              <IdentificationNo/>
              <Cell>6105555555</Cell>
              <Mobile>6105555555</Mobile>
              <Phone>6105555555</Phone>
              <Email>test@gatewayticketing.local</Email>
              <DOB/>
            </Contact>
          </OrderContact>
          <ShipToContact>
            <SameAsOrderContact>YES</SameAsOrderContact>
            <Contact>
              <GalaxyContactID>1</GalaxyContactID>
              <ExternalID/>
              <FirstName>Test (shipping)</FirstName>
              <LastName>Guest (shipping)</LastName>
              <IdentificationNo/>
              <Cell>6105555555</Cell>
              <Mobile>6105555555</Mobile>
              <Phone>6105555555</Phone>
              <Email>test@gatewayticketing.local</Email>
              <DOB/>
            </Contact>
          </ShipToContact>
          <Shipping>
            <DeliveryMethodID>12</DeliveryMethodID>
            <TrackingNBr/>
          </Shipping>
          <UserFields>
                                                                                                                                          60
eGalaxy Server Interface Specification                                               6 Order Processing
            <UserField1>No</UserField1>
          </UserFields>
          <OrderDiscounts/>
          <OrderLines>
            <OrderLine>
              <DetailType>2</DetailType>
              <Description>Payment</Description>
              <PaymentCode>22</PaymentCode>
              <PaymentDate>2019-05-13 17:50:11</PaymentDate>
              <OrderTransactionID>0</OrderTransactionID>
              <Amount>$140.00</Amount>
              <Endorsement>XXXXXXXXXXXXXXXXXXXXXA==</Endorsement>
              <CardHolderName>Test Guest</CardHolderName>
              <ExpDate>Omitted</ExpDate>
              <PayOnIssuance>NO</PayOnIssuance>
              <AuthCode>550061</AuthCode>
              <TransID/>
              <ValidationCode/>
              <PSI/>
              <CVNResultCode/>
              <AVSResultCode/>
              <GxKeyID/>
              <HostTraceNumber/>
              <IssuedLoyaltyPoints>0</IssuedLoyaltyPoints>
              <StoredValueBalance>0</StoredValueBalance>
              <SearchEndorsementValue>1111</SearchEndorsementValue>
            </OrderLine>
            <OrderLine>
              <DetailType>19</DetailType>
              <Description>PPU from Adult Ticket to Annual Pass</Description>
              <PLU>70</PLU>
              <Qty>1</Qty>
              <Amount>$140.00</Amount>
              <Total>$140.00</Total>
              <TaxAmount>$0.00</TaxAmount>
              <DiscountAmount>0.00</DiscountAmount>
              <UpgradeFromVisualID>10455000090</UpgradeFromVisualID>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.13 Example Orders Message – Reserved Seat through the Event Management Service
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>133</MessageID>
          <TimeStamp>2015-12-25 14:25:05</TimeStamp>
          <MessageType>ORDERS</MessageType>
      </Header>
      <Body>
          <Orders>
              <Order>
                  <OrderID>20151225-001</OrderID>
                  <OrderCommand>ADD</OrderCommand>
                  <CustomerID>167</CustomerID>
                  <SalesProgram>201</SalesProgram>
                  <OrderDate>2015-12-25 14:25:00</OrderDate>
                  <OrderStatus>2</OrderStatus>
                  <OrderNote/>
                  <OrderTotal>150.00</OrderTotal>
                  <OrderContact>
                      <Contact>
                          <FirstName>Michael</FirstName>
                          <MiddleName/>
                          <LastName>Andre</LastName>
                          <Company>Gateway Ticketing Systems, Inc.</Company>
                          <Street1>445 County Line Rd.</Street1>
                          <Street2/>
                          <City>Gilbertsville</City>
                          <State>PA</State>
                                                                                                    61
eGalaxy Server Interface Specification                                                                         6 Order Processing
                          <Zip>19525</Zip>
                          <Country>USA</Country>
                          <Phone>610-987-4000</Phone>
                          <Fax>610-987-4001</Fax>
                          <Email>mandre@gatewayticketing.com</Email>
                          </Contact>
                      </OrderContact>
                  <ShipToContact>
                      <SameAsOrderContact>YES</SameAsOrderContact>
                      </ShipToContact>
                  <Shipping>
                      <DeliveryMethod>6</DeliveryMethod>
                      </Shipping>
                  <OrderLines>
                      <OrderLine>
                          <DetailType>2</DetailType>
                          <PLU>RS0010101</PLU>
                          <Description>Adult Balcony Seat</Description>
                          <TaxCode/>
                          <Qty>2</Qty>
                          <Amount>75.00</Amount>
                          <Total>150.00</Total>
                          <EventID>351</EventID>
                          <RSEventSeatMapID>2</RSEventSeatMapID>
                          <Seats>
                              <Seat>
                                  <SectionName>Balcony</SectionName>
                                  <RowName>CC</RowName>
                                  <SeatName>1</SeatName>
                                  <Session>1e9f2129-2a93-42e7-ac3b-5e7af9593ee5</Session>
                              </Seat>
                              <Seat>
                                  <SectionName>Balcony</SectionName>
                                  <RowName>CC</RowName>
                                  <SeatName>2</SeatName>
                                  <Session>1e9f2129-2a93-42e7-ac3b-5e7af9593ee5</Session>
                              </Seat>
                          </Seats>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>2</DetailType>
                          <PaymentCode>32</PaymentCode>
                          <Description>Visa</Description>
                          <PaymentDate>2015-12-25 14:25:00</PaymentDate>
                          <Endorsement>40055500000000195</Endorsement>
                          <Amount>150.00</Amount>
                          <CardHolderName>Michael Andre</CardHolderName>
                          <ExpDate>1202</ExpDate>
                          <AuthCode>123456</AuthCode>
                          <PSI>A</PSI>
                          <PayOnIssuance>NO</PayOnIssuance>
                          <BillingStreet>445 County Line Rd</BillingStreet>
                          <BillingZIP>19512</BillingZIP>
                          <CVN>000</CVN>
                      </OrderLine>
                  </OrderLines>
              </Order>
          </Orders>
      </Body>
  </Envelope>

6.3.14 Example Orders Message - Containing Reserved Seat Using Event Management Service
When using the Event Management Service to reserve seat capacities, the following information is required on the <OrderLines> element to
ensure eGalaxy has enough information to properly validate the seats on hold for this order. This information would have been obtained
through calls to the Event Management Service to place the seats in a reserved status before the order was completed.




                                                                                                                                      62
eGalaxy Server Interface Specification                                                                            6 Order Processing
  <OrderLine>
    . . .
    <EventID>789</EventID>
    <RSEventSeatMapID>200</RSEventSeatMapID>
    <Seats>
      <Seat>
        <SectionName>Balcony</SectionName>
        <RowName>CC</RowName>
        <SeatName>1</SeatName>
        <Session>1e9f2129-2a93-42e7-ac3b-5e7af9593ee5</Session>
      </Seat>
      <Seat>
        <SectionName>Balcony</SectionName>
        <RowName>CC</RowName>
        <SeatName>2</SeatName>
        <Session>1e9f2129-2a93-42e7-ac3b-5e7af9593ee5</Session>
      </Seat>
    </Seats>
  </OrderLine>

6.3.15 Example Orders Message - Containing Reserved Seat Using Event Management Service
When using the Event Management Service to reserve seat capacities, the following information is required on the <OrderLines> element to
ensure eGalaxy has enough information to properly validate the seats on hold for this order. This information would have been obtained
through calls to the Event Management Service to place the seats in a reserved status before the order was completed.

  <OrderLine>
    . . .
    <EventID>789</EventID>
    <RSEventSeatMapID>200</RSEventSeatMapID>
    <Seats>
      <Seat>
        <SectionName>Balcony</SectionName>
        <RowName>CC</RowName>
        <SeatName>1</SeatName>
        <Session>1e9f2129-2a93-42e7-ac3b-5e7af9593ee5</Session>
      </Seat>
      <Seat>
        <SectionName>Balcony</SectionName>
        <RowName>CC</RowName>
        <SeatName>2</SeatName>
        <Session>1e9f2129-2a93-42e7-ac3b-5e7af9593ee5</Session>
      </Seat>
    </Seats>
  </OrderLine>

6.3.16 Taxes in Orders message
Taxes were not supported in all of the earlier versions of eGalaxy, which means no tax information was stored when an order was imported
by eGalaxy. This is changed eGalaxy now supports taxes on the order processing, which means eGalaxy inserts the tax information given by
the web site in the Order Entry tables when it imports an order…
      Tax calculated by the web store for each ticket is given in the <Taxes> element. The <Tax> element within <Taxes> includes a TaxID
      and the tax Amount
      When importing order, eGalaxy populates the OrderLineTaxAmounts table with the taxes given for each order line
      For each tax type, a Tax order line with TotalTax is added to the OrderLines table for the given order
NOTE: For more information about the Table Taxes please refer to the POS functional specs for the Table Taxes.

6.3.16.1 Tax Calculation

Calculation of taxes must be done at the web site where the actual sale is completed. The reason eGalaxy cannot re-calculate taxes is
because “payment is already charged on the guest's credit card” before the sale is given to eGalaxy. One thing to remember about Tax
support in eGalaxy is “eGalaxy imports what the web site sends to eGalaxy, if there are any discrepancies, eGalaxy would not handle it”.

6.3.16.2 Example Orders message with one Tax per OrderLine

  <?xml version="1.0" ?>
  <Envelope>
                                                                                                                                           63
eGalaxy Server Interface Specification                             6 Order Processing
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>0</MessageID>
      <MessageType>Orders</MessageType>
      <TimeStamp>2009-06-25 16:45:15</TimeStamp>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>12292001-447</OrderID>
          <CustomerID>167</CustomerID>
          <OrderDate>2009-06-25 16:45:00</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderNote/>
          <OrderTotal>26.50</OrderTotal>
          <OrderContact>
            <Contact>
              <FirstName>Michael</FirstName>
              <MiddleName/>
              <LastName>Andre</LastName>
              <Company>Gateway Ticketing Systems, Inc.</Company>
              <Street1>315 E. 2nd Street</Street1>
              <Street2/>
              <City>Boyertown</City>
              <State>PA</State>
              <Zip>19512</Zip>
              <Country>USA</Country>
              <Phone>610-987-4000</Phone>
              <Fax>610-987-4001</Fax>
              <Email>mandre@gatewayticketing.com</Email>
            </Contact>
          </OrderContact>
          <ShipToContact>
            <SameAsOrderContact>YES</SameAsOrderContact>
          </ShipToContact>
          <Shipping>
            <DeliveryMethod>2</DeliveryMethod>
          </Shipping>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>10111012</PLU>
              <Description>ADULT Ticket</Description>
              <Qty>2</Qty>
              <Amount>10.00</Amount>
              <Total>21.20</Total>
              <TaxAmount>0.60</TaxAmount>
              <Taxes>
                <Tax>
                  <TaxID>1</TaxID>
                  <Description>Sales Tax (6%)</Description>
                  <UnitAmount>0.60</UnitAmount>
                  <TaxTableID/>
                  <DisburseIndex/>
                  <Method/>
                  <ReducePrice/>
                </Tax>
              </Taxes>
            </OrderLine>
            <OrderLine>
              <DetailType>1</DetailType>
              <Description>CHILD Ticket</Description>
              <PLU>10111011</PLU>
              <Qty>1</Qty>
              <Amount>5.00</Amount>
              <Total>5.30</Total>
              <TaxAmount>0.30</TaxAmount>
              <Taxes>
                <Tax>
                  <TaxID>1</TaxID>
                  <Description>Sales Tax (6%)</Description>
                  <UnitAmount>0.30</UnitAmount>
                </Tax>
              </Taxes>
            </OrderLine>
            <OrderLine>
              <DetailType>9</DetailType>
                                                                                  64
eGalaxy Server Interface Specification                            6 Order Processing
              <DetailType>9</DetailType>
              <TaxID>1</TaxID>
              <Description>Sales Tax</Description>
              <Amount>1.50</Amount>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <PaymentCode>32</PaymentCode>
              <Description>Visa</Description>
              <Endorsement>40055500000000195</Endorsement>
              <Amount>26.50</Amount>
              <CardHolderName>Michael Andre</CardHolderName>
              <ExpDate>1205</ExpDate>
              <AuthCode>123456</AuthCode>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.16.3 Example Orders Message with multiple Tax per OrderLine

  <?xml version="1.0"?>
  <Order>. . . Order Data

    <OrderLines>
      <OrderLine>
        <DetailType>1</DetailType>
        <PLU>10111012</PLU>
        <Description>ADULT Ticket</Description>
        <Qty>2</Qty>
        <Amount>10.00</Amount>
        <Total>21.40</Total>
        <TaxAmount>0.70</TaxAmount>
        <Taxes>
          <Tax>
            <TaxID>1</TaxID>
            <Description>Sales Tax (6%)</Description>
            <UnitAmount>0.60</UnitAmount>
            <TaxTableID/>
            <DisburseIndex/>
            <Method/>
            <ReducePrice/></Tax>
          <Tax>
            <TaxID>2</TaxID>
            <Description>Amusement Tax (1%)</Description>
            <UnitAmount>0.10</UnitAmount>
            <TaxTableID/>
            <DisburseIndex/>
            <Method/>
            <ReducePrice/>
          </Tax>
        </Taxes>
      </OrderLine>
      <OrderLine>
        <DetailType>1</DetailType>
        <Description>CHILD Ticket</Description>
        <PLU>10111011</PLU>
        <Qty>1</Qty>
        <Amount>5.00</Amount>
        <Total>5.35</Total>
        <TaxAmount>0.35</TaxAmount>
        <Taxes>
          <Tax>
            <TaxID>1</TaxID>
            <Description>Sales Tax (6%)</Description>
            <UnitAmount>0.30</UnitAmount>
          </Tax>
          <Tax>
            <TaxID>2</TaxID>
            <Description>Amusement Tax (1%)</Description>
            <UnitAmount>0.05</UnitAmount>
          </Tax>
        </Taxes>
      </OrderLine>
                                                                                 65
eGalaxy Server Interface Specification                                                                             6 Order Processing
      </OrderLine>
      <OrderLine>
        <DetailType>9</DetailType>
        <TaxID>1</TaxID>
        <Description>Sales Tax</Description>
        <Amount>1.50</Amount>
      </OrderLine>
      <OrderLine>
        <DetailType>9</DetailType>
        <TaxID>2</TaxID>
        <Description>Amusement Tax</Description>
        <Amount>0.25</Amount>
      </OrderLine>
      <OrderLine>
        <DetailType>2</DetailType>
        <PaymentCode>32</PaymentCode>
        <Description>Visa</Description>
        <Endorsement>40055500000000195</Endorsement>
        <Amount>26.75</Amount>
        <CardHolderName>Michael Andre</CardHolderName>
        <ExpDate>1205</ExpDate>
        <AuthCode>123456</AuthCode>
      </OrderLine>
    </OrderLines>
  </Order>

6.3.17 Discounts in Orders message
If discount breakup (<Discounts> element) is given for a Ticket/Item OR Pass orderline (DetailType 1 and 8), eGalaxy server will import the
order and populate the OrderLineDiscounts table properply.
If discount breakup is not given and <DiscountAmount> is non-zero, then eGalaxy server imports the order and adds a record into the
OrderLineDiscounts table with DiscountKind of “SalesProgram Discount” (DiscountKind=1). This is because prior to the change to support
POS discounts in eGalaxy server, DiscountAmount was always due to a sales program discount.

6.3.17.1 Example Orders Message with Discount breakup




                                                                                                                                          66
eGalaxy Server Interface Specification                                                                          6 Order Processing
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2009-06-25 16:50:46</TimeStamp>
      <MessageType>Orders</MessageType>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>4102008-100</OrderID>
          <OrderCommand>ADD</OrderCommand>
          <CustomerID>1</CustomerID>...

          <OrderDiscounts>
            <OrderDiscount>
              <DiscountID>1001</DiscountID>
              <ApplyCount>1</ApplyCount></OrderDiscount>
          </OrderDiscounts>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>0010101</PLU>
              <Description>1-Day Adult Ticket</Description>
              <TaxCode/>
              <Qty>1</Qty>
              <Amount>100.00</Amount>
              <DiscountAmount>10.00</DiscountAmount>
              <Total>90.00</Total>
              <Discounts>
                <Discount>
                  <DiscountID>0</DiscountID>
                  <DiscountKind>1</DiscountKind>
                  <DiscountAmount>5.00</DiscountAmount>
                  <RequirementCount>0</RequirementCount>
                  <CanDiscountRequirement>NO</CanDiscountRequirement>
                </Discount>
                <Discount>
                  <DiscountID>1001</DiscountID>
                  <DiscountKind>2</DiscountKind>
                  <DiscountAmount>5.00</DiscountAmount>
                  <RequirementCount>0</RequirementCount>
                  <CanDiscountRequirement>NO</CanDiscountRequirement>
                  <Replacement>
                    <Company>2</Company>
                    <Category>20</Category>
                    <SubCategory>1</SubCategory>
                    <Printer>0</Printer>
                    <TicketSet>0</TicketSet>
                    <DisbursementID>123</DisbursementID>
                    <AccessCode>11</AccessCode>
                  </Replacement>
                </Discount>
              </Discounts>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <PaymentCode>32</PaymentCode>
              <Description>Visa</Description>
              <Endorsement>40055500000000195</Endorsement>
              <Amount>90.00</Amount>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.18 Package in Orders message
A package PLU can be sent within an XML order as OrderLine with DetailType of 10. Following example shows a sample XML order with a
Package in it. The key is to include all Package details (within the <Package> XML element) within the OrderLine with DetailType of 10.


                                                                                                                                          67
eGalaxy Server Interface Specification                                6 Order Processing
6.3.18.1 Example Orders Message with Package

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2009-06-25 17:05:25</TimeStamp>
      <MessageType>Orders</MessageType>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>7292008-100</OrderID>
          <OrderCommand>ADD</OrderCommand>
          <CustomerID>1</CustomerID>...
          <OrderDiscounts>
            <OrderDiscount>
              <DiscountID>1</DiscountID>
              <ApplyCount>1</ApplyCount></OrderDiscount>
          </OrderDiscounts>
          <OrderLines>
            <OrderLine>
              <DetailType>10</DetailType>
              <Description>3-Day Vacation Package</Description>
              <PLU>PACKAGE0010102</PLU>
              <Qty>1</Qty>
              <Amount>20</Amount>
              <Total>29.85</Total>
              <TaxAmount>0.85</TaxAmount>
              <DiscountAmount>1.00</DiscountAmount>
              <Package>
                <PackageDetail>
                  <PLU>0010101</PLU>
                  <Qty>1</Qty>
                  <Amount>10</Amount>
                  <Total>10.85</Total>
                  <TaxAmount>0.85</TaxAmount>
                  <DiscountAmount>0</DiscountAmount>
                  <EventID>1234</EventID>
                  <ResourceID>1</ResourceID>
                  <Taxes>
                    <Tax>
                      <TaxID>1</TaxID>
                      <Description>Sales Tax (6%)</Description>
                      <UnitAmount>0.60</UnitAmount>
                    </Tax>
                    <Tax>
                      <TaxID>1</TaxID>
                      <Description>Amusement Tax (1%)</Description>
                      <UnitAmount>0.10</UnitAmount>
                    </Tax>
                    <Tax>
                      <TaxID>1</TaxID>
                      <Description>Hosp Tax (1.5%)</Description>
                      <UnitAmount>0.15</UnitAmount>
                    </Tax>
                  </Taxes>
                </PackageDetail>
                <PackageDetail>
                  <PLU>0010102</PLU>
                  <Qty>2</Qty>
                  <Amount>10.00</Amount>
                  <Total>19.00</Total>
                  <TaxAmount>0</TaxAmount>
                  <DiscountAmount>1.00</DiscountAmount>
                  <EventID>5678</EventID>
                  <ResourceID>1</ResourceID>
                  <Discounts>
                    <Discount>
                      <DiscountID>1</DiscountID>
                      <DiscountAmount>1.00</DiscountAmount>
                      <DiscountKind>2</DiscountKind>
                    </Discount>
                  </Discounts>
                </PackageDetail>
                                                                                     68
eGalaxy Server Interface Specification                       6 Order Processing
                </PackageDetail>
              </Package>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <PaymentCode>32</PaymentCode>
              <Description>Visa</Description>
              <Endorsement>40055500000000195</Endorsement>
              <Amount>90.00</Amount>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.19 Orders message with Roster data
  <?xml version="1.0" ?>
  <Envelope>
    <Header>
      <SourceID>Source</SourceID>
      <MessageType>Orders</MessageType>
      <TimeStamp>2009-06-25 13:30:05</TimeStamp>
      <SessionID>1</SessionID>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderContact>
            <Contact>
              <FirstName>Paul</FirstName>
              <LastName>Johnson</LastName>
              <ExternalID>PJohnson</ExternalID>
            </Contact>
          </OrderContact>
          <CustomerID>1</CustomerID>
          <OrderID>1</OrderID>
          <OrderDate>2009-06-25</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>0001E</PLU>
              <Description>Class</Description>
              <Qty>1</Qty>
              <Amount>10.0000</Amount>
              <Total>10.0000</Total>
              <TaxAmount/>
              <DiscountAmount/>
              <TicketDate/>
              <EventID>1</EventID>
              <RosterDataList>
                <RosterData>
                  <Contact>
                    <FirstName>John</FirstName>
                    <LastName>Smith</LastName>
                    <Street1>123 Lake Drive</Street1>
                    <Street2>Apartment 11</Street2>
                    <City>Boyertown</City>
                    <State>PA</State>
                    <ZIP>19512</ZIP>
                  </Contact>
                  <Answers>
                    <Answer>
                      <ID>2</ID>
                      <Value>Jane Smith</Value>
                    </Answer>
                    <Answer>
                      <ID>1</ID>
                      <LookUpAnswerID>1</LookUpAnswerID>
                    </Answer>
                  </Answers>
                </RosterData>
              </RosterDataList>
              <ResourceID/>
                                                                            69
eGalaxy Server Interface Specification                         6 Order Processing
              <ResourceID/>
              <SalesChannelDetailID>1</SalesChannelDetailID>
              <SalesProgram/>
              <ExpirationDate/>
              <PaymentPlanID>0</PaymentPlanID>
              <CreateDate/>
              <Guest>
                <FirstName>John</FirstName>
                <MiddleName/>
                <LastName>Smith</LastName>
                <IsLead>NO</IsLead>
              </Guest>
              <Taxes/>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.20 Orders message with Attribute Values




                                                                              70
eGalaxy Server Interface Specification                         6 Order Processing
  <?xml version="1.0" ?>
  <Envelope>
    <Header>
      <SourceID>Source</SourceID>
      <MessageType>Orders</MessageType>
      <TimeStamp>2009-06-25 13:30:05</TimeStamp>
      <SessionID>1</SessionID>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderContact>
            <Contact>
              <FirstName>Paul</FirstName>
              <LastName>Johnson</LastName>
              <ExternalID>PJohnson</ExternalID>
            </Contact>
          </OrderContact>
          <CustomerID>1</CustomerID>
          <OrderID>1</OrderID>
          <OrderDate>2009-06-25</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>0001E</PLU>
              <Description>Class</Description>
              <Qty>1</Qty>
              <Amount>10.0000</Amount>
              <Total>10.0000</Total>
              <TaxAmount/>
              <DiscountAmount/>
              <TicketDate/>
              <EventID>1</EventID>
              <AttributeValues>
                <Answers>
                  <Answer>
                    <ID>14</ID>
                    <LookUpAnswerID>0</LookUpAnswerID>
                    <Value>Hello World</Value>
                  </Answer>
                  <Answer>
                    <ID>5</ID>
                    <LookUpAnswerID>15</LookUpAnswerID>
                    <Value></Value>
                  </Answer>
                </Answers>
              </AttributeValues>
              <ResourceID/>
              <SalesChannelDetailID>1</SalesChannelDetailID>
              <SalesProgram/>
              <ExpirationDate/>
              <PaymentPlanID>0</PaymentPlanID>
              <CreateDate/>
              <Guest>
                <FirstName>John</FirstName>
                <MiddleName/>
                <LastName>Smith</LastName>
                <IsLead>NO</IsLead>
              </Guest>
              <Taxes/>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.21 Orders message with Attribute Values




                                                                              71
eGalaxy Server Interface Specification                                                                         6 Order Processing
  <?xml version="1.0" ?>
  <Envelope>
    <Header>
      <SourceID>Source</SourceID>
      <MessageType>Orders</MessageType>
      <TimeStamp>2009-06-25 13:30:05</TimeStamp>
      <SessionID>1</SessionID>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderContact>
            <Contact>
              <FirstName>Paul</FirstName>
              <LastName>Johnson</LastName>
              <ExternalID>PJohnson</ExternalID>
            </Contact>
          </OrderContact>
          <CustomerID>1</CustomerID>
          <OrderID>1</OrderID>
          <OrderDate>2009-06-25</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>0001E</PLU>
              <Description>Class</Description>
              <Qty>1</Qty>
              <Amount>10.0000</Amount>
              <Total>10.0000</Total>
              <TaxAmount/>
              <DiscountAmount/>
              <TicketDate/>
              <EventID>1</EventID>
              <AttributeValues>
                <Answers>
                  <Answer>
                    <ID>14</ID>
                    <LookUpAnswerID>0</LookUpAnswerID>
                    <Value>Hello World</Value>
                  </Answer>
                  <Answer>
                    <ID>5</ID>
                    <LookUpAnswerID>15</LookUpAnswerID>
                    <Value></Value>
                  </Answer>
                </Answers>
              </AttributeValues>
              <ResourceID/>
              <SalesChannelDetailID>1</SalesChannelDetailID>
              <SalesProgram/>
              <ExpirationDate/>
              <PaymentPlanID>0</PaymentPlanID>
              <CreateDate/>
              <Guest>
                <FirstName>John</FirstName>
                <MiddleName/>
                <LastName>Smith</LastName>
                <IsLead>NO</IsLead>
              </Guest>
              <Taxes/>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.22 Example Orders Message - Entitlement Add-On
This example message creates an order to purchase PLU 3GZ00101, an Adult General Admission ticket, and add this ticket on to an existing
ticket which has a visual ID of 301010001000002184.


                                                                                                                                      72
eGalaxy Server Interface Specification                                                  6 Order Processing
  <Envelope>
    <Header>
      <SourceID>1</SourceID>
      <MessageID>1</MessageID>
      <MessageType>Orders</MessageType>
      <TimeStamp>2016-05-20 07:00:00</TimeStamp>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>20160520-002</OrderID>
          <OrderCommand>Add</OrderCommand>
          <CustomerID>115</CustomerID>
          <OrderDate>2016-05-20 07:00:00</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderContact>
            <Contact>
              <FirstName>Test</FirstName>
              <LastName>Customer</LastName>
              <Phone>6105555555</Phone>
              <Email>testcustomer@gatewayticketing.com</Email>
            </Contact>
          </OrderContact>
          <ShipToContact>
            <SameAsOrderContact>YES</SameAsOrderContact>
          </ShipToContact>
          <Shipping>
            <DeliveryMethod>25</DeliveryMethod>
          </Shipping>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <Description>Adult General Admission</Description>
              <PLU>3GZ00101</PLU>
              <Qty>1</Qty>
              <Amount>19.00</Amount>
              <Total>19.00</Total>
              <TaxAmount>0.0</TaxAmount>
              <DiscountAmount>0.0</DiscountAmount>
              <EntitlementAddOnVisualID>301010001000002183</EntitlementAddOnVisualID>
              <Taxes/>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <Description>Mastercard</Description>
              <PaymentCode>42</PaymentCode>
              <PaymentDate>2016-05-20 07:00:00</PaymentDate>
              <Amount>19.00</Amount>
              <Endorsement>5454545454545454</Endorsement>
              <ExpDate>0125</ExpDate>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.23 Example Orders Message to activate foreign media tickets




                                                                                                       73
eGalaxy Server Interface Specification                                                                       6 Order Processing
  <Envelope>
    <Header>
      <MessageType>Orders</MessageType>
      <SourceID>Exchange</SourceID>
      <MessageID>0</MessageID>
      <TimeStamp>2018-11-06 15:57:10</TimeStamp>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderID>3750681430639</OrderID>
          <OrderCommand>ADD</OrderCommand>
          <CustomerID>10</CustomerID>
          <OrderDate>2018-11-06 15:57:10</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderContact>
            <Contact>
              <FirstName>Test</FirstName>
              <LastName>Customer</LastName>
              <Phone>6105555555</Phone>
              <Email>testcustomer@gatewayticketing.com</Email>
            </Contact>
          </OrderContact>
          <GroupVisit>
            <VisitDate>2018-11-06</VisitDate>
          </GroupVisit>
          <Shipping>
            <DeliveryMethod>10</DeliveryMethod>
            <DeliveryMethodID>17</DeliveryMethodID>
            <DeliveryDetails>PrintOnWeb</DeliveryDetails>
          </Shipping>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>1</PLU>
              <Qty>2</Qty>
              <VisualIDs>
                <VisualID>10002000179</VisualID>
                <VisualID>10002000180</VisualID>
              </VisualIDs>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <Description>Payment</Description>
              <PaymentCode>21</PaymentCode>
              <Endorsement>XXXXXXXXXXXX5454</Endorsement>
              <BillingStreet>Omitted</BillingStreet>
              <BillingZIP>Omitted</BillingZIP>
              <CVN>Omitted</CVN>
              <CardHolderName>First M Last</CardHolderName>
              <ExpDate>Omitted</ExpDate>
              <Amount>150.00</Amount>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.3.24 Example Orders message for a ticket with a package
This order will create a package with the following structure: * 1DayPackageOnTheFly * 1DayTicketwPackage * 1DayRidePass *
1DayParking

  <Envelope>
      <Header>
          <SourceID>Exchange</SourceID>
          <MessageID>-1</MessageID>
          <MessageType>Orders</MessageType>
          <TimeStamp>2022-01-24 11:41:16</TimeStamp>
      </Header>
      <Body>
          <Orders>
              <Order>
                  <OrderID>TestOrder</OrderID>
                                                                                                                             74
eGalaxy Server Interface Specification                                           6 Order Processing
                <OrderID>TestOrder</OrderID>
                <CustomerID>15</CustomerID>
                <OrderDate>2022-01-24 11:41:16</OrderDate>
                <OrderStatus>2</OrderStatus>
                <SalesCategoryGroupID>1</SalesCategoryGroupID>
                <SalesProgram>6</SalesProgram>
                <OrderTotal>140.00</OrderTotal>
                <OrderContact>
                <Contact>
                    <FirstName>Test</FirstName>
                    <LastName>Customer</LastName>
                    <Phone>6105555555</Phone>
                    <Email>testcustomer@gatewayticketing.com</Email>
                </Contact>
                </OrderContact>
                <ShipToContact>
                    <SameAsOrderContact>YES</SameAsOrderContact>
                </ShipToContact>
                <Shipping>
                    <DeliveryMethodID>12</DeliveryMethodID>
                </Shipping>
                <OrderLines>
                    <OrderLine>
                        <DetailType>2</DetailType>
                        <Description>Payment</Description>
                        <PaymentCode>32</PaymentCode>
                        <PaymentDate>2022-01-24 11:41:16</PaymentDate>
                        <OrderTransactionID>0</OrderTransactionID>
                        <Amount>140.00</Amount>
                        <Endorsement>4111111111111111</Endorsement>
                        <CardHolderName>Bundles test</CardHolderName>
                        <ExpDate>Omitted</ExpDate>
                        <PayOnIssuance>NO</PayOnIssuance>
                        <AuthCode>550061</AuthCode>
                        <IssuedLoyaltyPoints>0</IssuedLoyaltyPoints>
                        <StoredValueBalance>0</StoredValueBalance>
                        <SearchEndorsementValue>1111</SearchEndorsementValue>
                    </OrderLine>
                    <OrderLine>
                        <DetailType>1</DetailType>
                        <Amount>50.0000</Amount>
                        <Description>Ticket with Package</Description>
                        <PLU>1DayTicketwPackage</PLU>
                        <Qty>1</Qty>
                        <Total>50.0000</Total>
                        <TaxAmount>0.0000</TaxAmount>
                        <Package>
                            <DetailType>10</DetailType>
                            <Amount>90.0000</Amount>
                            <Description>1DayPackageOnTheFly</Description>
                            <PLU>1DayPackageOnTheFly</PLU>
                            <Qty>1</Qty>
                            <SalesChannelDetailID>0</SalesChannelDetailID>
                            <SalesProgram>0</SalesProgram>
                            <Total>90.0000</Total>
                            <TaxAmount>0.0000</TaxAmount>
                            <Discounts/>
                            <PackageDetail>
                                <Amount>50.00</Amount>
                                <Description>1 Day Ride Pass</Description>
                                <PLU>1DayRidePass</PLU>
                                <Qty>1</Qty>
                                <SalesChannelDetailID>0</SalesChannelDetailID>
                                <SalesProgram>0</SalesProgram>
                                <Total>50.0000</Total>
                                <TaxAmount>0.0000</TaxAmount>
                                <PackageDetailID>591</PackageDetailID>
                            </PackageDetail>
                            <PackageDetail>
                                <Amount>40.0000</Amount>
                                <Description>1 Day Parking</Description>
                                <PLU>1DayParking</PLU>
                                <Qty>1</Qty>
                                <SalesChannelDetailID>0</SalesChannelDetailID>
                                <SalesProgram>0</SalesProgram>
                                <Total>40.0000</Total>
                                <TaxAmount>0.0000</TaxAmount>
                                                                                                75
eGalaxy Server Interface Specification                                                                       6 Order Processing
                                  <TaxAmount>0.0000</TaxAmount>
                                  <PackageDetailID>592</PackageDetailID>
                              </PackageDetail>
                          </Package>
                      </OrderLine>
                  </OrderLines>
                  <Surveys/>
              </Order>
          </Orders>
      </Body>
  </Envelope>

6.3.25 Example Orders message for a Pass with optional details
This order will create a package with the following structure: * 1DayPassPkg * 1DayPackageOnTheFly * 1DayTicketwPackage *
1DayRidePass * 1DayParking

  <Envelope>
      <Header>
          <SourceID>Exchange</SourceID>
          <MessageID>1</MessageID>
          <MessageType>Orders</MessageType>
          <TimeStamp>2023-03-07 10:09:48</TimeStamp>
      </Header>
      <Body>
          <Orders>
              <Order>
                  <OrderID>TestOrder</OrderID>
                  <OrderCommand>Add</OrderCommand>
                  <CustomerID>10</CustomerID>
                  <OrderDate>2023-03-07 10:09:48</OrderDate>
                  <OrderStatus>2</OrderStatus>
                  <OrderTotal>140.00</OrderTotal>
                  <OrderContact>
                      <Contact>
                          <FirstName>Digital</FirstName>
                          <LastName>Bundles</LastName>
                          <Cell>16107809312</Cell>
                          <Mobile>16107809312</Mobile>
                          <Phone>16107809312</Phone>
                          <Email>test@GatewayTicketing.com</Email>
                      </Contact>
                  </OrderContact>
                  <ShipToContact>
                      <SameAsOrderContact>YES</SameAsOrderContact>
                  </ShipToContact>
                  <Shipping>
                      <DeliveryMethodID>12</DeliveryMethodID>
                  </Shipping>
                  <OrderLines>
                      <OrderLine>
                          <DetailType>8</DetailType>
                          <PLU>1DayPassPkg</PLU>
                          <Description>1 Day Pass with Pkg</Description>
                          <Qty>1</Qty>
                          <Amount>50.00</Amount>
                          <Total>50.00</Total>
                          <Pass>
                              <SameAsOrderContact>NO</SameAsOrderContact>
                              <PassID>999</PassID>
                              <Members>
                                  <Member>
                                      <Primary>YES</Primary>
                                      <FirstName>Primary</FirstName>
                                      <MiddleName>A</MiddleName>
                                      <LastName>Passholder</LastName>
                                      <Phone>5555555555</Phone>
                                      <Email>Passholder@Test.com</Email>
                                      <Street1>22 Main Street</Street1>
                                      <Street2>Apartment 6625</Street2>
                                      <City>Gilbertsville</City>
                                      <State>PA</State>
                                      <ZIP>19525</ZIP>
                                  </Member>
                              </Members>
                          </Pass>
                                                                                                                            76
eGalaxy Server Interface Specification                                                                          6 Order Processing
                          </Pass>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>10</DetailType>
                          <Amount>90.0000</Amount>
                          <CreateDate>2023-03-07 10:09:48</CreateDate>
                          <Description>1DayPackageOnTheFly</Description>
                          <PLU>1DayPackageOnTheFly</PLU>
                          <Qty>1</Qty>
                          <SalesChannelDetailID>0</SalesChannelDetailID>
                          <SalesProgram>0</SalesProgram>
                          <Total>90.0000</Total>
                          <TaxAmount>0.0000</TaxAmount>
                          <PackagePassID>999</PackagePassID>
                          <Package>
                              <PackageDetail>
                                  <DetailType>11</DetailType>
                                  <Amount>50.00</Amount>
                                  <CreateDate>2023-03-07 10:09:48</CreateDate>
                                  <Description>1 Day Ride Pass</Description>
                                  <PLU>1DayRidePass</PLU>
                                  <Qty>1</Qty>
                                  <Total>50.0000</Total>
                                  <TaxAmount>0.0000</TaxAmount>
                                  <PackageDetailID>591</PackageDetailID>
                              </PackageDetail>
                              <PackageDetail>
                                  <DetailType>11</DetailType>
                                  <Amount>40.0000</Amount>
                                  <CreateDate>2023-03-07 10:09:48</CreateDate>
                                  <Description>1 Day Parking</Description>
                                  <PLU>1DayParking</PLU>
                                  <Total>40.0000</Total>
                                  <TaxAmount>0.0000</TaxAmount>
                                  <PackageDetailID>592</PackageDetailID>
                              </PackageDetail>
                          </Package>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>2</DetailType>
                          <PaymentCode>22</PaymentCode>
                          <Description>MC</Description>
                          <Amount>140.00</Amount>
                          <PaymentDate>2023-03-07 10:09:48</PaymentDate>
                          <Endorsement>4111111111111111</Endorsement>
                          <CardholderName>Bundles test</CardholderName>
                          <ExpDate>1299</ExpDate>
                      </OrderLine>
                  </OrderLines>
              </Order>
          </Orders>
      </Body>
  </Envelope>


6.4 Modify Order Command
The Modify Order command replaces the tickets/items/payments in an order with new elements while retaining the original order.

6.4.1 Data Elements
 Field              Description                                                        Type
 OrderCommand       Value=”Modify”                                                     Text
 OrderID            The id number of the order to be modified                          Text
 [Order elements]   See eGalaxy Interface Specification for all other <Order> elements

The Modify Order command contains the OrderId of the order to be modified, and the “new” version of all other order elements.

6.4.2 Process
For reference, eGalaxy Server will process the Modify command as follows:

                                                                                                                                 77
eGalaxy Server Interface Specification                                                                              6 Order Processing
      Validate the order. If any of the validations fail, the order update is rejected and no further steps are executed.
      The order to update is retrieved from the Galaxy’s SQL database. The <OrderID> field in XML order is mapped to the ExternalID
      column in the Orders table.
      If there is no <OrderLines> element present in the XML, the OrderLines are not deleted and updated. No payments are voided. This
      would be used to just update a value in the Orders table such as changing the Locked status to False.
      All the Ticket and Item OrderLines are deleted. The OrderLines.DetailType = 1 indicates that the OrderLine is either a Ticket or an
      Item.
      A reverse payment record is created to balance the order. This must be the net payment of all the payments in the Order. It is
      possible that an order has been updated several times, thus, it could have more than one set of payments and reverse payments.
      Also, it is possible that an order does not have any payment at all (no need to create reverse payment record in this case).
      The order is updated with the new <OrderLines>.
      If payment exists in the XML order, it is applied to the order. A record is inserted in the OrderTransactions table. Two records are
      inserted in the OrderPayments table one with the FOP given in the XML order and the second with the Charge FOP (defined under the
      eGalaxy configurations). Also a record is inserted into the OrderDrafts table if the Authorize flag is set on the FOP record (with
      theFOP in the XML order). If the Authorize flag is not set on the FOP record (with the FOP in the XML order), the OrderDrafts table is
      not populated (same as any POS transaction).
      If any other information is supplied with the update such as <Contact>, <Shipping>, <GroupVisit>, etc and if such record exist for that
      order, it is updated to its respective record in its entirely. The update does not support a partial update of a record.
      The order is saved to the database
Following changes are done to the journal:
      If a reverse payment was created while saving the order to the Order Entry database, the reverse payment is journalized in the SQL
      journal tables.
      If payment exists in the XML order, it is journalized into SQL journal tables.

6.4.2.1 Errors

Possible errors are:
      The XML order does not have any order lines.
      An order with the <OrderID> in the XML order does not exists in the Galaxy’s database.
      The <CustomerID> in the XML order is different than what current orders’ CustomerID in Galaxy’s database.
      The order exists but it is closed.
      The <VisitDate> element under the <GroupVisit> has a past date.
      The order's tickets have already been printed.

6.4.3 Example Modify Order Message




                                                                                                                                           78
eGalaxy Server Interface Specification                                                                          6 Order Processing
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>133</MessageID>
      <TimeStamp>2009-06-25 17:35:10</TimeStamp>
      <MessageType>ORDERS</MessageType>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderCommand>MODIFY</OrderCommand>
          <OrderID>12292001-447</OrderID>
          <CustomerID>1</CustomerID>
          <OrderDate>2009-06-20 09:05:55</OrderDate>
          <OrderStatus>2</OrderStatus>
          <OrderTotal>150.00</OrderTotal>
          <OrderLines>
            <OrderLine>
              <DetailType>1</DetailType>
              <PLU>10111012</PLU>
              <Description>1-Day Adult Ticket</Description>
              <TaxCode/>
              <Qty>2</Qty>
              <Amount>75.00</Amount>
              <Total>150.00</Total>
            </OrderLine>
            <OrderLine>
              <DetailType>2</DetailType>
              <PaymentCode>32</PaymentCode>
              <Description>Visa</Description>
              <Endorsement>40055500000000195</Endorsement>
              <Amount>150.00</Amount>
              <CardHolderName>Michael Andre</CardHolderName>
              <ExpDate>1202</ExpDate>
              <AuthCode>123456</AuthCode>
            </OrderLine>
          </OrderLines>
        </Order>
      </Orders>
    </Body>
  </Envelope>


6.5 UpdateHeader Order Command
The UpdateHeader Order command updates information in the order's header metadata, without altering the order lines in any way.
Updates will only be saved to the Galaxy database for the supported Order elements listed below.
The OpenOrder field requires the Advanced eGalaxy Server module.

6.5.1 Data Elements
 Field            Description                                                                                                  Type
 OrderCommand     Value=”UpdateHeader”                                                                                         Text
 OrderID          The id number of the order to be modified                                                                    Text
 OpenOrder        Change the Order status from closed to open                                                                  Boolean
 [Order           See eGalaxy Interface Specification for all other <Order> elements. Only the <OrderNote>,
 elements]        <OrderReference>, <OrderContact>, <ShipToContact>, <GroupVisit>, and <PO> elements can be edited by
                  this message type.

6.5.2 Process
eGalaxy Server will process the UpdateHeader command as follows:
     Validate the order. If any of the validations fail, the order update is rejected and no further steps are executed.
     The order to update is retrieved from the Galaxy’s SQL database. The <OrderID> field in XML order is mapped to the ExternalID
     column in the Orders table.
     The order's header data is updated with the new information provided by the message.
                                                                                                                                     79
eGalaxy Server Interface Specification                                                                 6 Order Processing
      The order is saved to the database

6.5.2.1 Errors

Possible errors are:
      An order with the <OrderID> in the XML order does not exists in the Galaxy’s database.
      The order exists but it is closed.
      The <VisitDate> element under the <GroupVisit> has a past date.
      The order's tickets have already been printed.
      The message contains <OrderLine> elements.
      The eGalaxy Source does not allow updating an order status from closed to open.

6.5.3 Example UpdateHeader Order Message
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>133</MessageID>
      <TimeStamp>2009-06-25 17:35:10</TimeStamp>
      <MessageType>ORDERS</MessageType>
    </Header>
    <Body>
      <Orders>
       <Order>
        <OrderID>20160602-001</OrderID>
        <CustomerID>4</CustomerID>
        <OrderCommand>UpdateHeader</OrderCommand>
        <OrderNote>Attaching a note to this order.</OrderNote>
        <OrderReference>R#12345</OrderReference>
        <PO>PO#56789</PO>
        <OrderContact>
         <Contact>
          <ExternalID/>
          <JobTitle/>
          <FirstName>John</FirstName>
          <MiddleName>Q</MiddleName>
          <LastName>Person</LastName>
          <DOB/>
          <Street1>445 County Line Rd</Street1>
          <Street2/>
          <City>Gilbertsville</City>
          <State>PA</State>
          <Zip>19525</Zip>
          <Country>US</Country>
          <Phone>6103278656</Phone>
          <Cell>6103278656</Cell>
          <Fax/>
          <Email>jperson@gatewayticketing.com</Email>
          <AllowEmail>NO</AllowEmail>
          <AllowMailings>NO</AllowMailings>
          <Gender>0</Gender>
          <ContactGUID>a49a6a74-c249-4ae2-a9ab-870f6485b398</ContactGUID>
          <NameTitleID>0</NameTitleID>
          <NameSuffixID>0</NameSuffixID>
         </Contact>
        </OrderContact>
        <ShipToContact>
         <SameAsOrderContact>YES</SameAsOrderContact>
        </ShipToContact>
       </Order>
      </Orders>
    </Body>
  </Envelope>


6.6 Cancel Order Command
The Cancel Order command is used to cancel an order previously placed through the eGalaxy interface.


                                                                                                                      80
eGalaxy Server Interface Specification                                                                               6 Order Processing
 6.6.1 Data Elements
 Field        Description                                Type
 OrderCommand Value=”Cancel”                             Text
 OrderID      The ExternalID of the order to be canceled Text

6.6.2 Process
For reference, eGalaxy Server will process the Cancel command as follows:
      Validate the order. If any of the validations fail, the order cancel is rejected and no further steps are executed.
      The order to update is retrieved from the Galaxy’s SQL database. The <OrderID> field in XML order is mapped to the ExternalID
      column in the Orders table.
      If the "delete unissued orderlines when processing cancel order request" option is selected for this eGalaxy source, all the Ticket and
      Item OrderLines of the order are deleted. This includes any OrderLines that were voided in the previous step, if applicable. The
      OrderLines.DetailType = 1 indicates that the OrderLine is either a Ticket or an Item.
      A reverse payment record is created to balance the order.
      The order’s status is changed to Closed (Status = 3).
      The order is saved to the database.
Following changes are done to the journal:
      If a reverse payment was created while saving the order to the Order Entry database, the reverse payment is journalized in the SQL
      journal tables.

6.6.2.1 Errors

Possible errors are:
      An order with the <OrderID> in the XML order does not exist in the Galaxy database.
      The order exists but it is closed.

6.6.3 Example Cancel Order Message
The message in this example causes eGalaxy to cancel order number 12292001-447:

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>133</MessageID>
      <TimeStamp>2009-06-25 18:00:32</TimeStamp>
      <MessageType>ORDERS</MessageType>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderCommand>CANCEL</OrderCommand>
          <OrderID>12292001-447</OrderID>
        </Order>
      </Orders>
    </Body>
  </Envelope>


6.7 Append Order Command
The Append Order Command is used to add order lines to an existing order. The format of the Append XML message is the same as for an
"Add" message. Any information at the order level in the XML replaces the information on the existing order, and any order lines specified
in the XML are appended to the order.
Order lines may have a negative quantity, in which case the tickets on the order line are returned. If the system is configured for validated
returns, a <VisualID> element must be specified on the order line to return that specific visual ID (and each order line may only return a
single ticket).
This feature is only available if the Advanced eGalaxy module is enabled.
                                                                                                                                             81
eGalaxy Server Interface Specification                                                                               6 Order Processing
 6.7.1 Errors
Possible errors include:
      The XML order does not have any order lines
      An order with the <OrderID> in the XML order does not exist in the Galaxy database
      The <CustomerID> in the XML order is different than the CustomerID in the Galaxy database
      If an order line returns tickets, the tickets may be unable to be returned because they have been used, have previously been returned
      or voided, are expired, etc.

6.8 ResendConfirmation Order Command
The message causes eGalaxy to create a row in the OrderCommands table with an Action of 5 for the given order number. The order should
not be modified in any way during a resend.

6.8.1 Data Elements
 Field              Description                                      Type
 OrderCommand       Value=”ResendConfirmation”                       Text
 OrderID            The Order.ExternalID of the order to be resent   Text
 GalaxyOrderID      The Order.OrderID to be resent                   Integer

Either the OrderID or the GalaxyOrderID must be provided, but not both.

6.8.2 Example ResendConfirmation Order Message
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>133</MessageID>
      <TimeStamp>2009-06-25 18:00:32</TimeStamp>
      <MessageType>ORDERS</MessageType>
    </Header>
    <Body>
      <Orders>
        <Order>
          <OrderCommand>RESENDCONFIRMATION</OrderCommand>
          <OrderID>12292001-447</OrderID>
        </Order>
      </Orders>
    </Body>
  </Envelope>

6.8.3 Errors
Possible errors include: * ErrorCode=115 - Cannot resend. The order was not found in Galaxy's database. * ErrorCode=998 - Order Lines are
not expected in a resend request.

6.9 Online Order Processing
There are two ways to send orders to eGalaxy server, the first is configure eGalaxy to poll a web site (online order retrieval configuration) at
pre-defined intervals to request new order. Using the URL configured, eGalaxy server contacts the web site’s URL, POSTs a PickupOrders
message, receives an Orders response. The response will indicate how many orders is expects to send, but no orders will be included in the
actual Orders response. Instead, the response will include a <OrdersQueuedCount> with a count of how many to expect, <OrdersQueued>
with a list of the ExternalIDs to expect and <OrderUrl> that states the eGalaxy URL that the webs site will send the order messages to. Each
order will be sent separately and eGalaxy will process them by importing orders into the Galaxy database, and issuing a SetOrderStatus for
each received order.
The second way to send orders to eGalaxy server is to send an Orders message in real-time with a single order per request. When an
Orders message is received, eGalaxy server processes it by importing the order into the Galaxy database, and in response returns a
SetOrderStatus message indicating if the order was imported succefully or not.


                                                                                                                                             82
eGalaxy Server Interface Specification                                                                           6 Order Processing
 MessageType       Description
 PickupOrders      Request sent by eGalaxy server to a pre-configured URL to retrieve new orders not previously picked up.
 Orders            Response with order data OR An Orders message sent in real-time to eGalaxy server.
 OrdersResponse    Response to Orders message, sent only when authorization fails
 SetOrderStatus    Response returned by eGalaxy server for every new order imported. Response indicates if the order was imported
                   successfully or not.

6.9.1 PickupOrders Message
The PickupOrders message type is used to initiate transfer of orders from the web site to the Galaxy Server. Upon receipt of this message,
the web site transmits new orders that haven’t yet been sent to the Galaxy Attraction Server. The number of new orders returned should not
exceed the value in the MaxOrders field.

6.9.1.1 PickupOrders Message Format

 Field        Description                                Type
 Username     Web site username (optional)               Text
 Password     Web site password (optional)               Text
 MaxOrders    Maximum number of orders to download       Numeric

6.9.1.2 Example PickupOrders Request

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>4</MessageID>
      <MessageType>PickupOrders</MessageType>
      <TimeStamp>2009-06-25 19:06:38</TimeStamp>
    </Header>
    <Body>
      <Username>eGalaxyDemo</Username>
      <Password>Secret</Password>
      <MaxOrders>5</MaxOrders>
    </Body>
  </Envelope>

6.9.1.3 Order Response Message Format

 Field             Description                                                                                                  Type
 OrdersQueuedCount The number of orders that will be sent to eGalaxy Server                                                     Numeric
 OrdersQueued      A comma delimited list containing all the ExternalIDs of the orders to be sent. For logging and              Text
                   debugging purposes.
 OrderUrl          eGalaxy Server url, configured in Web Admin, where the web site will send the order requests                 Text

6.9.1.4 Example Orders Response Message (sent from web site as a response to PickupOrders)

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>4</MessageID>
      <MessageType>ORDERS</MessageType>
      <TimeStamp>2021-02-12 19:15:48</TimeStamp>
    </Header>
    <Body>
      <OrdersQueuedCount>3</OrdersQueuedCount>
      <OrdersQueued>20120212-001, 20120212-002, 20120212-003</OrdersQueued>
      <OrderUrl>https://eGalaxyOrders:443/</OrderUrl>
    </Body>
  </Envelope>


                                                                                                                                        83
eGalaxy Server Interface Specification                                                                                6 Order Processing
 6.9.2 Orders Message
The Orders message is used by a client (a web site) to send orders.

6.9.2.1 Orders Message Format

All parameters in the Orders request message are same as the Orders response message received in response of the PickupOrders
message.

6.9.2.2 Example Orders Request Message

  <?xml version="1.0" ?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>0</MessageID>
      <MessageType>ORDERS</MessageType>
      <Authorize>
        <Username>peter</Username>
        <Password>8888</Password>
      </Authorize>
      <TimeStamp>2009-06-25 19:15:45</TimeStamp>
    </Header>
    <Body>
      <Orders>
        <Order>Data for order 1 </Order>. . .
        <Order>Data for order n </Order>
      </Orders>
    </Body>
  </Envelope>

6.9.3 Orders Response Message
If authorization fails the Orders response is sent back to the website with the authorization error, all orders are rejected. The authorization
is performed, when a non-empty <Authorize> element is found within the header of the Orders message. NOTE: The Orders response
message is only sent if the authorization fails. In the case where authorization succeeds or no authorization is performed, no Orders
response is sent back to the website. Instead a separate SetOrderStatus message is sent with the status of the processed order.

6.9.3.1 Order Response Message Format

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>4</MessageID>
      <MessageType>ORDERS</MessageType>
      <TimeStamp>2009-06-25 19:15:48</TimeStamp>
    </Header>
    <Body>
      <Error>
        <ErrorCode>126</ErrorCode>
        <ErrorText>Authorization error. Username and password given in the authorize element not found in the
  users database.</ErrorText>
      </Error>
    </Body>
  </Envelope>

6.9.4 SetOrderStatus Message
SetOrderStatus message is returned in response to every order sent to eGalaxy server.
If eGalaxy server is configured to pick up orders from a Web site and if it downloads multiple orders in a single request, for each order in
the request the Web site will receive a SetOrderStatus message (as a request like PickupOrders) indicating if the order was imported
successfully or not. If the SetOrderStatus message indicates the order is imported successfully by eGalaxy server then that order should not
be transmitted again to eGalaxy server in any subsequent order pickup requests again.
If eGalaxy server receives new order within an Orders request in real-time, it returns the response with the same format as the

                                                                                                                                              84
eGalaxy Server Interface Specification                                                                               6 Order Processing
SetOrderStatus message indicating if the order was imported successfully by eGalaxy server or not.

6.9.4.1 SetOrderStatus Message Format

As eGalaxy server completes processing of each order, it returns a SetOrderStatus request back to the sender indicating the status of the
order in Galaxy database.

 Field                           Description                                                                                      Type
 OrderID                         Order number (confirmation no.) assigned by the Web site where the order is sold.                Text
                                                                                                                                  (20)
 GalaxyOrderID             Order number as assigned in the Galaxy database (Orders table).                                        Numeric
 SecureToken               Encoded string assigned to the order when Encoding OrderID is enabled on eGalaxy server                Text
                           Source (Orders table).                                                                                 (12)
 Status                    New status for Order. See <Status> element for details below.                                          Numeric
 Username                  Web site username (Optional)                                                                           Text
 Password                  Web site password (Optional)                                                                           Text
 AuthCode                  Authorization Code from payment processor (Optional)                                                   Text (8)
 AVSResponseCode           Response code for AVS verification. See <AVSResponseCode> element for details (Optional)               Char
 CVNResponseCode           Response code for CVN verification. See <CVNResponseCode> element for details (Optional)               Char
 CAVVResponseCode          Value provided by card associations indicating CAVV match results (Optional)                           Text (1)
 OrderStatusErrors         Contains errors explaining the reason for order rejection. Only present if the order is rejected       Element
                           with status of 3. (Optional)
 PaymentContracts          List of Payment Contract ID's included in order, see <PaymentContracts> element for details            Element
                           (Optional)
 CreateTransactionResponse Contains information of order issuance transaction along with tickets sold in the order. This          Element
                           element is only returned for orders sent with delivery method of PrintOnWeb. See
                           <CreateTransactionResponse> element for details, described under sub section
                           “<CreateTransactionResponse> Element” of section “Common Element Formats” (Optional)
 Retry                     When set to YES, this serves as a suggestion to tell the calling client to attempt to send the         Boolean
                           order again. The answer is based on the error codes that caused the import to fail. If the error is
                           database related such as 'unable to connect' or 'read timeout' it is reccomended to retry after a
                           slight wait period in case the database interruption was brief. 'Yes'

The <OrderStatusErrors> element contains one or more <OrderStatusError> elements. Each <OrderStatusError> element contains an
ErrorCode and Errortext XML fields.
6.9.4.1.1 Status

The <Status> element contains a numeric value indicating the current status of an order in the Galaxy database.

 Value Description
 2     Order Picked up successfully by eGalaxy server.
 3     Order is rejected by eGalaxy server. <OrderStatusErrors> element contains more information about the error.

6.9.4.1.2 AVSResponseCode

The <AVSResponseCode> element contains a character specifying the response code of the AVS verification.

 Value                      Description
 A                          Good address, bad ZIP code
 E                          Data error
 N                          Bad address, bad ZIP code
 R                          Retry request
 U                          Unavailable
 Y                          Good address, good ZIP code

                                                                                                                                            85
eGalaxy Server Interface Specification                                                                          6 Order Processing
 Z                      Bad address, good ZIP code
 G                      Valid transaction, AVS not accepted
 Empty – no applicable. Required on credit settlement record

6.9.4.1.3 CVNResponseCode

The <CVNResponseCode> element contains a character specifying the response code of the CVN verification.

 Value    Description
 M        Match (The CVN value was has expected and can be considered correct.)
 N        No match (The CVN value was not as expected. This can be taken as possible fraud.)
 P        CVN request not processed (The request must be resubmitted)
 S        CVN should be on the card but the cardholder indicated that it was not.
 U        Issuer does not support CVN

6.9.4.1.4 PaymentContracts

The <PaymentContracts> element contains a collection of the Payment Contract ID's that were created with this order.

 Field             Description         Type
 PaymentContractID Payment Contract ID Integer

6.9.4.2 Example SetOrderStatus Request (No Errors)

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>4</MessageID>
      <MessageType>SetOrderStatus</MessageType>
      <TimeStamp>2009-06-25 19:15:48</TimeStamp>
    </Header>
    <Body>
      <Username>eGalaxyDemo</Username>
      <Password>Secret</Password>
      <OrderID>11252002-107</OrderID>
      <GalaxyOrderID>1234</GalaxyOrderID>
      <SecureToken>7FJcBegOsWu9</SecureToken>
      <Status>2</Status>
      <AuthCode>12345678</AuthCode>
      <AVSResponseCode>Y</AVSResponseCode>
      <CVNResponseCode>M</CVNResponseCode>
      <CAVVResponseCode>3</CAVVResponseCode>
      <Retry>NO</Retry>
      <PaymentContracts>
        <PaymentContractID>105</PaymentContractID>
      </PaymentContracts>
    </Body>
  </Envelope>

6.9.4.3 Example SetOrderStatus Request (Error)




                                                                                                                               86
eGalaxy Server Interface Specification                                                       6 Order Processing
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>4</MessageID>
      <MessageType>SetOrderStatus</MessageType>
      <TimeStamp>2009-06-25 19:15:55</TimeStamp>
    </Header>
    <Body>
      <Username>eGalaxyDemo</Username>
      <Password>Secret</Password>
      <OrderID>02222003-178</OrderID>
      <GalaxyOrderID>5678</GalaxyOrderID>
      <Status>3</Status>
      <AuthCode/>
      <AVSResponseCode>N</AVSResponseCode>
      <CVNResponseCode>M</CVNResponseCode>
      <Retry>NO</Retry>
      <OrderStatusErrors>
        <OrderStatusError>
          <ErrorCode>101</ErrorCode>
          <ErrorText>Invalid customer ID 178</ErrorText>
        </OrderStatusError>
      </OrderStatusErrors>
    </Body>
  </Envelope>

6.9.4.4 Example SetOrderStatus Request (Upgrade Request Errors)

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <MessageType>SetOrderStatus</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2017-05-11 11:41:25</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <OrderID>20170511-001</OrderID>
          <Status>3</Status>
          <Retry>NO</Retry>
          <OrderStatusErrors>
              <OrderStatusError>
                  <ErrorCode>245</ErrorCode>
                  <ErrorText>Upgrade to Pass is only available for a Ticket. Visual ID "14001000672" is not a
  Ticket.</ErrorText>
              </OrderStatusError>
              <OrderStatusError>
                  <ErrorCode>247</ErrorCode>
                  <ErrorText>Upgrade from a Ticket is not available for the Detail Type 1.</ErrorText>
              </OrderStatusError>
              <OrderStatusError>
                  <ErrorCode>246</ErrorCode>
                  <ErrorText>PLU "1-PASS" is not a valid upgrade option for Ticket "1" with Visual ID
  "10001000689".</ErrorText>
              </OrderStatusError>
              <OrderStatusError>
                  <ErrorCode>258</ErrorCode>
                  <ErrorText>Upgrade of PLU "1-ADULT" to "1-NOTANUPGRADE" is not a valid upgrade.
  UpgradeFromVisualID="10001000777".</ErrorText>
              </OrderStatusError>
          </OrderStatusErrors>
      </Body>
  </Envelope>

6.9.5 SetOrderStatusResponse Message
6.9.5.0.1 Example SetOrderStatusResponse (No errors)




                                                                                                                87
eGalaxy Server Interface Specification                                                                             6 Order Processing
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>4</MessageID>
      <MessageType>SetOrderStatusResponse</MessageType>
      <TimeStamp>2009-06-25 19:15:59</TimeStamp>
    </Header>
    <Body>
      <OrderID>11252002-107</OrderID>
      <Status>0</Status>
      <Retry>NO</Retry>
      <OrderStatusResponseErrors/>
    </Body>
  </Envelope>

6.9.5.0.2 Example SetOrderStatusResponse (Errors)

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>4</MessageID>
      <MessageType>SetOrderStatusResponse</MessageType>
      <TimeStamp>2009-06-25 19:16:05</TimeStamp>
    </Header>
    <Body>
      <OrderID>11252002-107</OrderID>
      <Status>1</Status>
      <Retry>NO</Retry>
      <OrderStatusResponseErrors>
        <OrderStatusResponseError>
          <ErrorCode>201</ErrorCode>
          <ErrorText>Cannot find order 11252002-107</ErrorText>
        </OrderStatusResponseError>
      </OrderStatusResponseErrors>
    </Body>
  </Envelope>

6.9.5.0.3 Example SetOrderStatusResponse (Errors - Suggested Retry)

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>5</MessageID>
      <MessageType>SetOrderStatusResponse</MessageType>
      <TimeStamp>2022-06-27 19:16:05</TimeStamp>
    </Header>
    <Body>
      <OrderID>11252022-107</OrderID>
      <Status>1</Status>
      <Retry>YES</Retry>
      <OrderStatusResponseErrors>
        <OrderStatusResponseError>
          <ErrorCode>996</ErrorCode>
          <ErrorText>The system has lost its connection to the database server.</ErrorText>
        </OrderStatusResponseError>
      </OrderStatusResponseErrors>
    </Body>
  </Envelope>


6.10 Order File Import
One of the many ways to import an order into Galaxy database using eGalaxy Server is by using “File Import” feature in eGalaxy server. If
you place a file containing the orders message into the location being monitored by the eGalaxy server for file import, then the file gets
picked up for processing by eGalaxy server and the order in the file is imported into the Galaxy database.

6.10.1 File Format

                                                                                                                                             88
eGalaxy Server Interface Specification                                                                                 6 Order Processing
The format of a file containing eGalaxy orders is defined in the Order Data Format section of this document. The same format is used for
both online order pickup and file-based order import. The use of the ‘.XML’ file extension is recommended when naming the order file.

6.10.2 Error files
For each file submitted for import, the eGalaxy Server creates Error Description and Error Data File if errors are found while importing orders
from that file. The Error Description File is created to facilitate the user making corrections to the orders by looking at the errors reported in
the Error Description File. The Error Data File has the same format as the Orders message. User can make the corrections to the Error Data
File itself, and submit it for the reprocessing by moving that file to the import directory.

6.10.2.1 Error Description File

Following is the format of an Error Description File:

  Order error(s)
  **************
  Order: 11262002-143
  ErrorID ErrorText
  ------- ---------
  101 Invalid customer ID 143
  103 Invalid PLU TICKET1010401
  102 Invalid form of payment 88
  Order: 12052002-150
  ErrorID ErrorText
  ------- ---------
  104 PLU TICKET1010402, not available in customer's sales program
  105 Order line item price(6) does not match Galaxy's price(8) for same item

6.10.2.2 Error Data File

The format of the Error Data File is same as the Orders message.




                                                                                                                                                89
eGalaxy Server Interface Specification                                                                    7 Event Ticketing Messages
7 Event Ticketing Messages
7.1 Message Types
 Request Message         Response Message Type(s)          Description
 Type
 QueryEventDates                               Requests a list of calendar dates that have available events within a specified
                         QueryEventDatesResponse
                                               date range
 QueryEvents        QueryEventsResponse        Requests a list of all available events within a date range specified.
 EventTicketHold    EventTicketHoldResponse    Places a quantity of tickets on hold for an event
 EventTicketRelease EventTicketReleaseResponse Releases tickets that have been on hold for an event.
 QueryTicketsOnHold QueryTicketsOnHoldResponse Requests a list of all tickets placed on hold by the session
 AbandonSession     AbandonSessionResponse     Release all event ticket(s) put on hold for a session
 EventTicketCommit EventTicketCommitResponse Moves tickets previously put on Hold to Sold.
 EventTicketSale    EventTicketSaleResponse    Moves tickets directly from Available to Sold.
 EventTicketReturn  EventTicketReturnResponse  Moves tickets directly from Sold to Available.
 QueryRoster        QueryRosterResponse        Determines if the event requires roster information.
 QueryRosterContact QueryRosterContactResponse Determines if the contact has already been used on a roster for the event
 QueryPrices        QueryPricesResponse        Request pricing information for the PLUs in a particular Reserved Seating event.
                                               Price, discount amount, and tax amount will be returned.

7.2 QueryEventDates Message
The QueryEventDates message obtains a list of dates with available events within the specified date range. The following fields are
supported:

 Field                     Description                                                                                                Type
 EventRangeBeginDate       Start Date/Time for event search                                                                           Date
 EventRangeEndDate         Stop Date/Time for event search                                                                            Date
 EventTypeID               Event type to filter event search (Optional – Version 4.8 forward)                                         Numeric
 ResourceID                Resource type to filter event search (Optional)                                                            Numeric
 Quantity                  Minimum available quantity for event (Optional)                                                            Numeric
 PLU                       The selected PLU associated to this QueryEvents message (Optional, see description below)                  Text
 Quantity                  Minimum available quantity for event (Optional)                                                            Numeric
 ShowSoldOutEvents         Specifies if events with insufficient quantity or zero available tickets should be included in the         Boolean
                           response (Optional)
 EventGroupID              This element is only used when multiple EventDateGroup elements are provided. This unique                  Text
                           identifier must be different for each of the EventDateGroup elements, and will be used in the
                           response message to differentiate the event data returned for each set of EventDateGroup
                           parameters.
 CustomerID                The Customer used for some filtering, for example, MaxPrice or Sales Channel determination                 Numeric
                           (Optional)
 MinPrice                  The minimum price that an event can cost without being filtered out. The CustomerID is factored into       Currency
                           this price if it is given. A PLU must be given with the MinPrice. If EventDateGroups are used, the
                           MinPrice and PLU must be provided in each relevant group. (Optional)
 MaxPrice                  The maximum price that an event can cost without being filtered out. The CustomerID is factored into       Currency
                           this price if it is given. A PLU must be given with the MaxPrice. If EventDateGroups are used, the
                           MaxPrice and PLU must be provided in the relevant groups. (Optional)
 SalesChannelID            The SalesChannel used for the event query. If it is not provided in the request and CustomerID does        Numeric
                           not provide one, the sales channel configured on the source will be used. (Optional)

If the optional PLU parameter is specified, eGalaxy Server will check each event date to see if there are any holds associated to the
specified PLU. If there is availability in any holds associated to this PLU, this availability is taken into account when determining the dates

                                                                                                                                                  90
eGalaxy Server Interface Specification                                                               7 Event Ticketing Messages
that have one or more available events. So normally an event would show as sold out if general capacity was sold out but held capacity was
available. Now you can pass a PLU associated to one of those holds and get back that the date has an available event which previously
would not have been returned.




                                                                Diagram

7.2.1 Example QueryEventDates Request
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventDates</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-07-10 10:51:00</TimeStamp>
      </Header>
      <Body>
          <QueryEventDates>
              <EventRangeBeginDate>2010-07-01 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2010-07-31 00:00:00</EventRangeEndDate>
              <EventTypeID>1</EventTypeID>
              <ResourceID>1</ResourceID>
              <Quantity>1</Quantity>
          </QueryEventDates>
      </Body>
  </Envelope>

7.2.2 Example QueryEventDates Request – No EventTypeID




                                                                                                                                        91
eGalaxy Server Interface Specification                                                             7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventDates</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-07-10 11:25:45</TimeStamp>
      </Header>
      <Body>
          <QueryEventDates>
              <EventRangeBeginDate>2010-07-01 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2010-07-31 00:00:00</EventRangeEndDate>
          </QueryEventDates>
      </Body>
  </Envelope>

7.2.3 Example QueryEventDates Response
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventDatesResponse</MessageType>
          <TimeStamp>2010-07-10 10:51:05</TimeStamp>
      </Header>
      <Body>
          <QueryEventDatesResponse>
              <EventDateList>
                  <EventDate>2010-07-10 00:00:00</EventDate>
                  <EventDate>2010-07-11 00:00:00</EventDate>
                  <EventDate>2010-07-12 00:00:00</EventDate>
                  <EventDate>2010-07-13 00:00:00</EventDate>
                  <EventDate>2010-07-14 00:00:00</EventDate>
                  <EventDate>2010-07-15 00:00:00</EventDate>
                  <EventDate>2010-07-16 00:00:00</EventDate>
                  <EventDate>2010-07-17 00:00:00</EventDate>
                  <EventDate>2010-07-18 00:00:00</EventDate>
                  <EventDate>2010-07-19 00:00:00</EventDate>
                  <EventDate>2010-07-20 00:00:00</EventDate>
                  <EventDate>2010-07-21 00:00:00</EventDate>
                  <EventDate>2010-07-22 00:00:00</EventDate>
                  <EventDate>2010-07-23 00:00:00</EventDate>
                  <EventDate>2010-07-24 00:00:00</EventDate>
                  <EventDate>2010-07-25 00:00:00</EventDate>
                  <EventDate>2010-07-26 00:00:00</EventDate>
                  <EventDate>2010-07-27 00:00:00</EventDate>
                  <EventDate>2010-07-28 00:00:00</EventDate>
                  <EventDate>2010-07-29 00:00:00</EventDate>
                  <EventDate>2010-07-30 00:00:00</EventDate>
              </EventDateList>
          </QueryEventDatesResponse>
      </Body>
  </Envelope>

7.2.4 Example QueryEventDates Response – No matching events
If there aren’t any events matching the request’s criteria, eGalaxy responds with the standard QueryEventDatesResponse having an empty
“EventDateList” element.




                                                                                                                                     92
eGalaxy Server Interface Specification                                                   7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventDatesResponse</MessageType>
          <TimeStamp>2010-07-10 10:51:02</TimeStamp>
      </Header>
      <Body>
          <QueryEventDatesResponse>
              <EventDateList/>
          </QueryEventDatesResponse>
      </Body>
  </Envelope>

7.2.5 Example QueryEventDates Request – Multiple EventDateGroup requests
Multiple sets of EventDateGroup requests can be sent with different PLUs and Quantity.

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventDates</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2020-10-06 09:00:00</TimeStamp>
      </Header>
      <Body>
          <QueryEventDates>
              <EventRangeBeginDate>2020-10-07 09:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2020-10-09 23:00:00</EventRangeEndDate>
              <EventTypeID>1</EventTypeID>
              <ShowSoldOutEvents>YES</ShowSoldOutEvents>
              <EventDateGroups>
                  <EventDateGroup>
                      <EventDateGroupID>123</EventDateGroupID>
                      <Quantity>2</Quantity>
                      <PLU>100</PLU>
                  </EventDateGroup>
                  <EventDateGroup>
                      <EventDateGroupID>456</EventDateGroupID>
                      <Quantity>1</Quantity>
                      <PLU>200</PLU>
                  </EventDateGroup>
              </EventDateGroups>
          </QueryEventDates>
      </Body>
  </Envelope>

7.2.6 Example QueryEventDates Response – Multiple EventDateGroup requests
Multiple sets of EventDateGroup requests can be sent with different PLUs and Quantity.




                                                                                                                93
eGalaxy Server Interface Specification                                                               7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventDatesResponse</MessageType>
          <TimeStamp>2020-10-06 09:00:00</TimeStamp>
      </Header>
      <Body>
          <QueryEventDatesResponse>
              <EventDateGroups>
                  <EventDateGroup>
                      <EventDateGroupID>123</EventDateGroupID>
                      <EventDateList>
                          <EventDate>2020-10-07 00:00:00</EventDate>
                          <EventDate>2020-10-08 00:00:00</EventDate>
                          <EventDate>2020-10-09 00:00:00</EventDate>
                      </EventDateList>
                  </EventDateGroup>
                  <EventDateGroup>
                      <EventDateGroupID>456</EventDateGroupID>
                      <EventDateList>
                          <EventDate>2020-10-07 00:00:00</EventDate>
                          <EventDate>2020-10-09 00:00:00</EventDate>
                      </EventDateList>
                  </EventDateGroup>
              </EventDateGroups>
          </QueryEventDatesResponse>

      </Body>
  </Envelope>

7.2.7 Example QueryEventDates Request – Max and Min Price Filtering
Only events that cost between $35 and $45 inclusive for PLU EVENT_TICKET_ADULT will be considered when determining valid dates

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventDates</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-07-10 11:25:45</TimeStamp>
      </Header>
      <Body>
          <QueryEventDates>
              <EventRangeBeginDate>2010-07-01 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2010-07-31 00:00:00</EventRangeEndDate>
              <CustomerID>10</CustomerID>
              <PLU>EVENT_TICKET_ADULT</PLU>
              <MaxPrice>45</MaxPrice>
              <MinPrice>35</MinPrice>
          </QueryEventDates>
      </Body>
  </Envelope>

7.2.8 Example QueryEventDates Request – Max Price Filtering in EventDateGroups
Multiple sets of EventDateGroup requests can be sent with different PLUs and MaxPrices. Only events that cost $45 or less for PLU 100 will
be considered as valid for EventDateGroup with ID 123 Only events that cost $40 or less for PLU 200 will be considered as valid for
EventDateGroup with ID 456




                                                                                                                                        94
eGalaxy Server Interface Specification                                                                  7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventDates</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2020-10-06 09:00:00</TimeStamp>
      </Header>
      <Body>
          <QueryEventDates>
              <EventRangeBeginDate>2020-10-07 09:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2020-10-09 23:00:00</EventRangeEndDate>
              <EventTypeID>1</EventTypeID>
              <ShowSoldOutEvents>YES</ShowSoldOutEvents>
              <CustomerID>
              <EventDateGroups>
                  <EventDateGroup>
                      <EventDateGroupID>123</EventDateGroupID>
                      <Quantity>1</Quantity>
                      <PLU>100</PLU>
                      <MaxPrice>45</MaxPrice>
                  </EventDateGroup>
                  <EventDateGroup>
                      <EventDateGroupID>456</EventDateGroupID>
                      <Quantity>1</Quantity>
                      <PLU>200</PLU>
                      <MaxPrice>40</MaxPrice>
                  </EventDateGroup>
              </EventDateGroups>
          </QueryEventDates>
      </Body>
  </Envelope>


7.3 QueryEvents Message
The QueryEvents message obtains a list of available events for the specified date range.




                                                                  Diagram
A QueryEvents message is sent by the web site to the eGalaxy Attraction Server to request a list of events for a specified date range. The
eGalaxy Attraction Server returns a list of matching events. The list contains every event with an Event Start Date within the date range
requested.
Specifying the optional ResourceID element will further filter the result set by both EventTypeID and ResourceID. If the specified resource is
a “child” resource, any event associated with its “parent” resource will be returned, assuming it passes the rest of the criteria.


                                                                                                                                             95
eGalaxy Server Interface Specification                                                                      7 Event Ticketing Messages
Specifying the optional Quantity element will even further filter the result set for events that have at least the specified quantity available.
In addition, the QueryEvents message can request the information for multiple sets of event parameters. This is done by using one or more
QueryEvent elements (each containing the standard set of QueryEvent request message parameters) in the request, placed within a
QueryEventGroup element under QueryEvents. Each of the QueryEvent elements is required to have an additional element called
EventGroupID, which allows the response to the message associate returned event information with the appropriate portion of the request.
Examples of using this multiple event querying is described below.

7.3.1 Request Message Parameters
 Field                Description                                                                                                        Type
 EventRangeBeginDate  Specifies earliest event in requested date range                                                                   Date
 EventRangeEndDate    Specifies latest event in requested date range                                                                     Date
 EventTypeID          Specifies the Galaxy event type (Optional – Version 4.8 forward)                                                   Numeric
 ResourceID           Specifies the Galaxy resource id/section (Optional)                                                                Numeric
 Quantity             Minimum available quantity for event (Optional)                                                                    Numeric
 ReturnAttributes     Specifies whether Attribute Values should be returned (Optional)                                                   Boolean
 Pricing              Contains information related to a pricing request, including a Customer ID and a list of Tickets                   Element
 PLU                  The selected PLU associated to this QueryEvents message (Optional, see description below)                          Text
 TranslationLanguageIDThe language to translate the EventName into, if the system is configured for multiple languages                   Numeric
                      (Optional)
 EventGroupID         This element is only used when multiple QueryEvent elements are provided. This unique identifier                   Text
                      must be different for each of the QueryEvent elements, and will be used in the response message to
                      differentiate the event data returned for each set of QueryEvent parameters.
 GroupEventsByEventID Specifies whether events will be grouped by EventID when including multiple QueryEvent elements.                   Boolean
                      Default behavior sorts and groups the events by EventGroupID (Optional)
 CustomerID           The Customer used for some filtering, for example, MaxPrice, MinPrice or Sales Channel ID                          Numeric
                      determination when specified outside of Pricing element (Optional)
 MinPrice             The minimum price that an event can cost without being filtered out. The CustomerID is factored                    Currency
                      into this price if it is given. A PLU must be given with the MinPrice. If QueryEventGroups are used,
                      the MinPrice, PLU, and CustomerID must be provided in the relevant groups. (Optional)
 MaxPrice             The maximum price that an event can cost without being filtered out. The CustomerID is factored                    Currency
                      into this price if it is given. A PLU must be given with the MaxPrice. If QueryEventGroups are used,
                      the MaxPrice, PLU, and CustomerID must be provided in the relevant groups. (Optional)
 SalesChannelID       The SalesChannel used for the event query. If it is not provided in the request and CustomerID does                Numeric
                      not provide one, the sales channel configured on the source will be used. (Optional)

If the optional PLU parameter is specified, eGalaxy Server will check each event to see if there are any holds associated to the specified
PLU. If there is availability in any holds associated to this PLU, this availability is added into the total available for the event. So normally an
event would show as sold out if general capacity was sold out but held capacity was available. Now you can pass a PLU associated to one
of those holds and get back a valid event which previously would not have been returned.

7.3.2 Request Message Pricing Node
 Field          Description                                                                            Type
 Customer ID    Specifies the ID of the customer the pricing should apply to                           Numeric
 Tickets        Contains a list of Ticket Nodes, which will specify the PLUs to return pricing for     Element
 Ticket         Contains the PLU of the ticket to return pricing for                                   Element
 PLU            The PLU of the ticket to return pricing for                                            Text

7.3.3 Response Message Fields
 Field   Description                                                                                                                      Type
 Events A collection of Event elements that match the given request criteria - see Response Event Element                                 Element
 Pricing An element that describes the pricing information that was requested (if any) - see Response Pricing Element                     Element
         (Optional)

                                                                                                                                                  96
eGalaxy Server Interface Specification                                                                     7 Event Ticketing Messages
 7.3.4 Response Event Element
 Field                 Description                                                                                                  Type
 EventID               Unique Event ID                                                                                              Numeric
 EventName             Name of event                                                                                                Text
 StartDateTime         Date/time when event starts                                                                                  DateTime
 EndDateTime           Date/time when event is over                                                                                 DateTime
 OnSaleDateTime        Date/Time when event tickets go “on sale”                                                                    DateTime
 OffSaleDateTime       Date/time when event tickets go “off sale”                                                                   DateTime
 ResourceID            Event location                                                                                               Numeric
 UserEventNumber       Venue-assigned event identifier                                                                              Text
 Available             Number of tickets available (optional)                                                                       Numeric
 Pending               Number of tickets pending (optional)                                                                         Numeric
 Sold                  Number of tickets sold (optional)                                                                            Numeric
 TotalCapacity         Total original capacity (optional)                                                                           Numeric
 Status                Event status (see table below)                                                                               Numeric
 HasRoster             Determines if the event requires roster information                                                          Boolean
 RSEventSeatMapID      ID of the SeatMap associated with the event                                                                  Numeric
 PrivateEvent          Indicates if the event is private                                                                            Boolean
 HasHolds              Indicates whether or not this event has any holds associated to it                                           Boolean
 AttributeValues       Contains details about the AttributeValues                                                                   Element
 AvailableBucketID     Unique identifier for the bucket of availability. This field should only be used for the interpretation of   Numeric
                       the response data and not persisted or used beyond that. This will only be shown in the
                       EventGroups/EventGroup element of the response.

7.3.5 Response AttributeValues Element
 Field               Description                                                Type
 ID                  The Defintion ID for the Attribute Value                   Numeric
 LookupAnswerID      The ID of the answer in the a multiple choice attribute    Numeric
 Value               The answer provided in a free-form attribute               Text

7.3.6 Response Pricing Element
 Field          Description                                                                                                          Type
 SalesProgramID The sales program applied for the pricing. Note: If a customer is configured for multiple (virtual) sales            Numeric
                programs the id will be -2 and SalesProgramIDs can be found on each Ticket element - see below. (Optional)
 CustomerID     The customer that the pricing in the response applies to. (Optional)                                                 Numeric
 Tickets        A collection of Ticket elements that contain pricing information per given PLU                                       Element

7.3.7 Response Pricing Ticket Element
 Field          Description                                                                                                          Type
 SalesProgramID This value will be available for each PLU which applies a Sales Program if a sales program was applied on a          Numeric
                "Multiple Sales Program" customer. (Optional)
 PLU            The PLU for the ticket being priced                                                                                  Numeric
 Price          The price of the ticket or the event                                                                                 Numeric
 Events         A collection of Event elements for the ticket being priced                                                           Element

7.3.8 Response Pricing Ticket Event Element
 Field               Description                                                   Type
                                                                                                                                           97
eGalaxy Server Interface Specification                                                                      7 Event Ticketing Messages
 EventID             The ID of the event in the Event element                       Numeric
 Price               The price of the event                                         Numeric
 DisbursementID      The ID of any disbursements applied to a particular event      Numeric
 DiscountAmount      The amount discounted as part of a sales program               Numeric

If the optional PLU parameter is specified, eGalaxy Server will check each event to see if there are any holds associated to the specified
PLU. If there is availability in any holds associated to this PLU, this availability is added into the total available for the event. So normally an
event would show as sold out if general capacity was sold out but held capacity was available. Now you can pass a PLU associated to one
of those holds and get back a valid event which previously would not have been returned.

7.3.9 Event Status Values
 Value    Description
 0        Event is available for sale
 1        Event is not on sale
 2        Event is sold out – no tickets available

7.3.10 Request Message SelectedEvents Node
The SelectedEvents node is a list of SelectedEvent nodes. Each SelectedEvent node can have the following fields provided.

 Field               Description                                                                                    Type
 PackageDetailID     The ID of a PackageDetail that has an event already associated with it.                        Numeric
 EventID             The ID of the event associated with the package detail.                                        Numeric
 CapacityID          The ID of the capacity record associated with the event selection of the package detail.       Numeric

7.3.11 Request Message CurrentEventSelection Node
The QueryEvents message is searching for events that will be associated with a packaged PLU, and that package is configured for time-
linked events, the message will require the use of the CurrentEventSelection and PackageDetailID elements, placed under the QueryEvent
element as shown below. The numeric value within the PackageDetailID element is the Package Detail ID of the detail that the request is
attempting to find event options for.

  <QueryEvent>
      <CurrentEventSelection>
          <PackageDetailID>594</PackageDetailID>
      </CurrentEventSelection>
  </QueryEvent>

7.3.12 Example QueryEvents Request




                                                                                                                                                  98
eGalaxy Server Interface Specification                                                          7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEvents</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <EventRangeBeginDate>2010-07-10 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2010-07-11 00:00:00</EventRangeEndDate>
              <EventTypeID>1</EventTypeID>
              <ResourceID>1</ResourceID>
              <Quantity>1</Quantity>
              <ReturnAttributes>YES</ReturnAttributes>
              <Pricing>
                  <CustomerID>0</CustomerID>
                  <Tickets>
                      <Ticket>
                          <PLU>100</PLU>
                      </Ticket>
                  </Tickets>
              </Pricing>
          </QueryEvents>
      </Body>
  </Envelope>

7.3.13 Example QueryEvents Request – No EventTypeID
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEvents</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <EventRangeBeginDate>2002-07-10 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2002-07-11 00:00:00</EventRangeEndDate>
              <Pricing>
                  <CustomerID>0</CustomerID>
                  <Tickets>
                      <Ticket>
                          <PLU>100</PLU>
                      </Ticket>
                  </Tickets>
              </Pricing>
          </QueryEvents>
      </Body>
  </Envelope>

7.3.14 Example QueryEvents Request (Multiple)
Below is an example of a QueryEvents message where multiple event queries are included in a single message. For this case, multiple
QueryEvent elements are included under the QueryEvents element. Each of these QueryEvent elements must have a EventGroupID element
that contains a value that is unique within the message. This value will be used in the response.




                                                                                                                                 99
eGalaxy Server Interface Specification                                                                7 Event Ticketing Messages
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <SourceID/>
          <MessageID/>
          <MessageType>QueryEvents</MessageType>
          <SessionID/>
          <TimeStamp>2013-11-18</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <GroupEventsByEventID>NO</GroupEventsByEventID>
              <QueryEventGroup>
                  <QueryEvent>
                      <EventRangeBeginDate>2013-11-18</EventRangeBeginDate>
                      <EventRangeEndDate>2013-11-19</EventRangeEndDate>
                      <EventTypeID>1</EventTypeID>
                      <ResourceID/>
                      <Quantity/>
                      <ReturnAttributes/>
                      <EventGroupID>111</EventGroupID>
                  </QueryEvent>
                  <QueryEvent>
                      <EventRangeBeginDate>2013-11-18</EventRangeBeginDate>
                      <EventRangeEndDate>2013-11-19</EventRangeEndDate>
                      <EventTypeID>5</EventTypeID>
                      <ResourceID/>
                      <Quantity/>
                      <ReturnAttributes/>
                      <EventGroupID>222</EventGroupID>
                  </QueryEvent>
              </QueryEventGroup>
              <TranslationLanguageID/>
          </QueryEvents>
      </Body>
  </Envelope>

7.3.15 Example QueryEvents Response (Multiple)
Below is an example response for the preceding request. All of the collected events are included as Event elements within the Events
element. The set of QueryEvent parameters that caused that event to be identified is referenced via the EventGroupID attribute of the Event
element. If an event is identified by more than one set of parameters, it will be included in the response multiple times (once per set of
parameters that selected it).




                                                                                                                                       100
eGalaxy Server Interface Specification                                     7 Event Ticketing Messages
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>-1</MessageID>
          <MessageType>QueryEventsResponse</MessageType>
          <SourceID/>
          <TimeStamp>2013-11-18 08:57:07</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Events>
              <Event EventGroupID="111">
                  <EventID>137</EventID>
                  <EventName>20131118c</EventName>
                  <StartDateTime>2013-11-18 16:00:00</StartDateTime>
                  <EndDateTime>2013-11-18 17:00:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2013-11-18 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2013-11-18 16:00:00</OffSaleDateTime>
                  <ResourceID>1</ResourceID>
                  <UserEventNumber>0</UserEventNumber>
                  <Available>100</Available>
                  <TotalCapacity>100</TotalCapacity>
                  <Status>0</Status>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMapID>0</RSEventSeatMapID>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>NO</HasHolds>
              </Event>
              <Event EventGroupID="111">
                  <EventID>135</EventID>
                  <EventName>20131118a</EventName>
                  <StartDateTime>2013-11-18 17:00:00</StartDateTime>
                  <EndDateTime>2013-11-18 18:00:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2013-11-18 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2013-11-18 17:00:00</OffSaleDateTime>
                  <ResourceID>1</ResourceID>
                  <UserEventNumber>0</UserEventNumber>
                  <Available>100</Available>
                  <TotalCapacity>100</TotalCapacity>
                  <Status>0</Status>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMapID>0</RSEventSeatMapID>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>NO</HasHolds>
              </Event>
              <Event EventGroupID="222">
                  <EventID>136</EventID>
                  <EventName>20131118b</EventName>
                  <StartDateTime>2013-11-18 17:00:00</StartDateTime>
                  <EndDateTime>2013-11-18 18:00:00</EndDateTime>
                  <EventTypeID>5</EventTypeID>
                  <OnSaleDateTime>2013-11-18 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2013-11-18 17:00:00</OffSaleDateTime>
                  <ResourceID>11</ResourceID>
                  <UserEventNumber>0</UserEventNumber>
                  <Available>20</Available>
                  <TotalCapacity>20</TotalCapacity>
                  <Status>0</Status>
                  <HasRoster>YES</HasRoster>
                  <RSEventSeatMapID>0</RSEventSeatMapID>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>NO</HasHolds>
              </Event>
          </Events>
      </Body>
  </Envelope>

7.3.16 Example QueryEvents Request - Selected Events



                                                                                                 101
eGalaxy Server Interface Specification                                         7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEvents</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <EventRangeBeginDate>2010-07-10 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2010-07-11 00:00:00</EventRangeEndDate>
              <EventTypeID>1</EventTypeID>
              <ResourceID>1</ResourceID>
              <Quantity>1</Quantity>
              <SelectedEvents>
                  <SelectedEvent>
                      <PackageDetailID>123</PackageDetailID>
                      <EventID>456</EventID>
                      <CapacityID>789</CapacityID>
                  </SelectedEvent>
              </SelectedEvents>
              <ReturnAttributes>YES</ReturnAttributes>
              <Pricing>
                  <CustomerID>0</CustomerID>
                  <Tickets>
                      <Ticket>
                          <PLU>100</PLU>
                      </Ticket>
                  </Tickets>
              </Pricing>
          </QueryEvents>
      </Body>
  </Envelope>

7.3.17 Example QueryEvents Response




                                                                                                     102
eGalaxy Server Interface Specification                                        7 Event Ticketing Messages
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventsResponse</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-07-10 17:50:15</TimeStamp>
      </Header>
      <Body>
          <Events>
              <Event>
                  <EventID>1967</EventID>
                  <EventName>PANDA EXHIBIT</EventName>
                  <StartDateTime>2002-07-10 11:00:00</StartDateTime>
                  <EndDateTime>2002-07-10 11:45:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2002-07-08 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2002-07-10 11:00:00</OffSaleDateTime>
                  <ResourceID>1</ResourceID>
                  <UserEventNumber>22</UserEventNumber>
                  <Available>150</Available>
                  <Status>0</Status>
                  <HasRoster>NO</HasRoster>
                  <PrivateEvent>NO</PrivateEvent>
                  <AttributeValues>
                      <Answers>
                          <Answer>
                              <ID>3</ID>
                              <LookUpAnswerID>4</LookUpAnswerID>
                              <Value/>
                          </Answer>
                      </Answers>
                  </AttributeValues>
              </Event>
              <Event>
                  <EventID>1968</EventID>
                  <EventName>PANDA EXHIBIT</EventName>
                  <StartDateTime>2002-07-10 12:00:00</StartDateTime>
                  <EndDateTime>2002-07-10 12:45:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2002-07-08 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2002-07-10 12:00:00</OffSaleDateTime>
                  <ResourceID>1</ResourceID>
                  <UserEventNumber>23</UserEventNumber>
                  <Available>150</Available>
                  <Status>0</Status>
                  <HasRoster>NO</HasRoster>
                  <PrivateEvent>YES</PrivateEvent>
              </Event>
          </Events>
          <Pricing>
              <Tickets>
                  <Ticket>
                      <PLU>100</PLU>
                      <Price>1.00</Price>
                      <Events>
                          <Event>
                              <EventID>1</EventID>
                              <Price>1.00</Price>
                              <DisbursementID>0</DisbursementID>
                              <DiscountAmount>0.00</DiscountAmount>
                          </Event>
                      </Events>
                  </Ticket>
              </Tickets>
          </Pricing>
      </Body>
  </Envelope>

7.3.18 Example QueryEvents Request - Consolidate Events using GroupEventsByEventID



                                                                                                    103
eGalaxy Server Interface Specification                                                             7 Event Ticketing Messages
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEvents</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2020-10-08 14:56:01</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <QueryEventGroup>
                  <QueryEvent>
                      <EventRangeBeginDate>2020-10-08</EventRangeBeginDate>
                      <EventRangeEndDate>2020-10-09</EventRangeEndDate>
                      <EventTypeID>1</EventTypeID>
                      <ResourceID/>
                      <Quantity/>
                      <ReturnAttributes/>
                      <EventGroupID>111</EventGroupID>
                  </QueryEvent>
                  <QueryEvent>
                      <EventRangeBeginDate>2020-10-08</EventRangeBeginDate>
                      <EventRangeEndDate>2020-10-11</EventRangeEndDate>
                      <EventTypeID>1</EventTypeID>
                      <ResourceID/>
                      <Quantity/>
                      <ReturnAttributes/>
                      <EventGroupID>444</EventGroupID>
                  </QueryEvent>
              </QueryEventGroup>
              <TranslationLanguageID/>
          </QueryEvents>
      </Body>
  </Envelope>

7.3.19 Example QueryEvents Response - Consolidate Events using GroupEventsByEventID
Below is an example using GroupEventsByEventID = YES in the QueryEvents request. The availability under each EventGroup is the
availability and the AvailableBucketID for the Event specified above it.

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEventsResponse</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2020-10-08 14:56:01</TimeStamp>
      </Header>
      <Body>
          <Events>
              <Event EventID="1618">
                  <EventID>1618</EventID>
                  <EventName>Bambi</EventName>
                  <StartDateTime>2020-10-08 23:00:00</StartDateTime>
                  <EndDateTime>2020-10-08 23:30:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2016-05-24 13:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2020-10-08 23:00:00</OffSaleDateTime>
                  <ResourceID>5</ResourceID>
                  <UserEventNumber>1598</UserEventNumber>
                  <Available>150</Available>
                  <Pending>0</Pending>
                  <Sold>0</Sold>
                  <TotalCapacity>150</TotalCapacity>
                  <Status>0</Status>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMapID>0</RSEventSeatMapID>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>NO</HasHolds>
                  <EventGroups>
                      <EventGroup>
                          <EventGroupID>111</EventGroupID>
                          <Available>150</Available>
                                                                                                                                 104
eGalaxy Server Interface Specification                                         7 Event Ticketing Messages
                          <Available>150</Available>
                          <AvailableBucketID>5153</AvailableBucketID>
                      </EventGroup>
                      <EventGroup>
                          <EventGroupID>444</EventGroupID>
                          <Available>150</Available>
                          <AvailableBucketID>5153</AvailableBucketID>
                      </EventGroup>
                  </EventGroups>
              </Event>
              <Event EventID="1619">
                  <EventID>1619</EventID>
                  <EventName>Bambi</EventName>
                  <StartDateTime>2020-10-09 23:00:00</StartDateTime>
                  <EndDateTime>2020-10-09 23:30:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2016-05-24 13:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2020-10-09 23:00:00</OffSaleDateTime>
                  <ResourceID>5</ResourceID>
                  <UserEventNumber>1599</UserEventNumber>
                  <Available>150</Available>
                  <Pending>0</Pending>
                  <Sold>0</Sold>
                  <TotalCapacity>150</TotalCapacity>
                  <Status>0</Status>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMapID>0</RSEventSeatMapID>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>NO</HasHolds>
                  <EventGroups>
                      <EventGroup>
                          <EventGroupID>444</EventGroupID>
                          <Available>150</Available>
                      </EventGroup>
                  </EventGroups>
              </Event>
              <Event EventID="1620">
                  <EventID>1620</EventID>
                  <EventName>Bambi</EventName>
                  <StartDateTime>2020-10-10 23:00:00</StartDateTime>
                  <EndDateTime>2020-10-10 23:30:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2016-05-24 13:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2020-10-10 23:00:00</OffSaleDateTime>
                  <ResourceID>5</ResourceID>
                  <UserEventNumber>1600</UserEventNumber>
                  <Available>150</Available>
                  <Pending>0</Pending>
                  <Sold>0</Sold>
                  <TotalCapacity>150</TotalCapacity>
                  <Status>0</Status>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMapID>0</RSEventSeatMapID>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>NO</HasHolds>
                  <EventGroups>
                      <EventGroup>
                          <EventGroupID>444</EventGroupID>
                          <Available>150</Available>
                      </EventGroup>
                  </EventGroups>
              </Event>
          </Events>
      </Body>
  </Envelope>

7.3.20 Example QueryEvents Request - SelectedEvents and CurrentEventSelection (Package)




                                                                                                     105
eGalaxy Server Interface Specification                                                                 7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEvents</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2019-10-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <EventRangeBeginDate>2019-12-01 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2019-12-31 00:00:00</EventRangeEndDate>
              <EventTypeID>1</EventTypeID>
              <ResourceID>1</ResourceID>
              <Quantity>1</Quantity>
              <SelectedEvents>
                  <SelectedEvent>
                      <PackageDetailID>123</PackageDetailID>
                      <EventID>456</EventID>
                      <CapacityID>789</CapacityID>
                  </SelectedEvent>
              </SelectedEvents>
              <CurrentEventSelection>
                  <PackageDetailID>124</PackageDetailID>
              </CurrentEventSelection>
              <ReturnAttributes>YES</ReturnAttributes>
          </QueryEvents>
      </Body>
  </Envelope>

7.3.21 Example QueryEvents Request - Multiple SelectedEvents and CurrentEventSelection (Package)
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEvents</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2019-10-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <EventRangeBeginDate>2019-12-01 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2019-12-31 00:00:00</EventRangeEndDate>
              <EventTypeID>1</EventTypeID>
              <ResourceID>1</ResourceID>
              <Quantity>1</Quantity>
              <SelectedEvents>
                  <SelectedEvent>
                      <PackageDetailID>123</PackageDetailID>
                      <EventID>456</EventID>
                      <CapacityID>789</CapacityID>
                  </SelectedEvent>
                  <SelectedEvent>
                      <PackageDetailID>124</PackageDetailID>
                      <EventID>500</EventID>
                      <CapacityID>555</CapacityID>
                  </SelectedEvent>
              </SelectedEvents>
              <CurrentEventSelection>
                  <PackageDetailID>125</PackageDetailID>
              </CurrentEventSelection>
              <ReturnAttributes>YES</ReturnAttributes>
          </QueryEvents>
      </Body>
  </Envelope>

7.3.22 Example QueryEvents Request - MinPrice and MaxPrice Filtering
Only events that cost between $25 and $45 for PLU 100 will be returned in the response (after also accounting for other filtering)

                                                                                                                                     106
eGalaxy Server Interface Specification                                                                  7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryEvents</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <EventRangeBeginDate>2010-07-10 00:00:00</EventRangeBeginDate>
              <EventRangeEndDate>2010-07-11 00:00:00</EventRangeEndDate>
              <EventTypeID>1</EventTypeID>
              <ResourceID>1</ResourceID>
              <Quantity>1</Quantity>
              <ReturnAttributes>YES</ReturnAttributes>
              <CustomerID>10</CustomerID>
              <PLU>100</PLU>
              <MinPrice>25</MinPrice>
              <MaxPrice>45</MaxPrice>
          </QueryEvents>
      </Body>
  </Envelope>

7.3.23 Example QueryEvents Request (Multiple) - MaxPrice Filtering
Below is an example of a QueryEvents message where multiple event queries are included in a single message. Only events that cost $45
or less for PLU 100 will be returned in the response (after also accounting for other filtering) for EventGroup 111 Only events that cost $40
or less for PLU 200 will be returned in the response (after also accounting for other filtering) for EventGroup 222

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <SourceID/>
          <MessageID/>
          <MessageType>QueryEvents</MessageType>
          <SessionID/>
          <TimeStamp>2013-11-18</TimeStamp>
      </Header>
      <Body>
          <QueryEvents>
              <GroupEventsByEventID>NO</GroupEventsByEventID>
              <QueryEventGroup>
                  <QueryEvent>
                      <EventRangeBeginDate>2013-11-18</EventRangeBeginDate>
                      <EventRangeEndDate>2013-11-19</EventRangeEndDate>
                      <EventTypeID>1</EventTypeID>
                      <ResourceID/>
                      <Quantity/>
                      <ReturnAttributes/>
                      <EventGroupID>111</EventGroupID>
                      <CustomerID>10</CustomerID>
                      <PLU>100</PLU>
                      <MaxPrice>45</MaxPrice>
                  </QueryEvent>
                  <QueryEvent>
                      <EventRangeBeginDate>2013-11-18</EventRangeBeginDate>
                      <EventRangeEndDate>2013-11-19</EventRangeEndDate>
                      <EventTypeID>5</EventTypeID>
                      <ResourceID/>
                      <Quantity/>
                      <ReturnAttributes/>
                      <EventGroupID>222</EventGroupID>
                      <CustomerID>10</CustomerID>
                      <PLU>200</PLU>
                      <MaxPrice>40</MaxPrice>
                  </QueryEvent>
              </QueryEventGroup>
              <TranslationLanguageID/>
          </QueryEvents>
      </Body>
  </Envelope>

                                                                                                                                           107
eGalaxy Server Interface Specification                                                                    7 Event Ticketing Messages
7.4 GetEvents Message
The GetEvents message obtains the information related events specified by a provided list of Event ID’s.
A GetEvents message is sent by the web site to the eGalaxy Attraction Server to request the current information related to the provided list
of Event ID’s. The eGalaxy Attraction Server returns the information for each of the matching events, or an error message for each provided
Event ID that could not be located.
If the optional PLU parameter is specified, eGalaxy Server will check an event to see if there are any holds associated to the specified PLU.
If there is availability in any holds associated to this PLU, this availability is added into the total available for the event. So normally an
event would show as sold out if general capacity was sold out but held capacity was available. Now you can pass a PLU associated to one
of those holds and get back a valid event which previously would not have been returned.

7.4.1 Request Message Parameters
 Field                 Description                                                                                                    Type
 EventIDs              Parent element for one of more EventID elements                                                                Element
 TranslationLanguageID The language to translate the EventName into, if the system is configured for multiple languages               Numeric
                       (Optional)
 SalesChannelID        The SalesChannel used for the event query. If it is not provided in the request and CustomerID does            Numeric
                       not provide one, the sales channel configured on the source will be used. (Optional)
 CustomerID            The Customer to use to retrieve configured SalesChannel used for the event query. (Optional)                   Numeric

EventIDs Node

 Field   Description                                                                                                                  Type
 EventID Event ID to look up. Must be an integer value and match an existing RMEvents record in the Galaxy database.                  Numeric
 PLU     Product PLU that will be associated with all EventIDs in the request to provide accurate event capacity details when         Text
         event has holds associated with that product. Optional.
 Event   Element to provide means of associating individual event with a product PLU. Optional.                                       Element

Event Node

 Field   Description                                                                                                                  Type
 EventID Event ID to look up. Must be an integer value and match an existing RMEvents record in the Galaxy database.                  Numeric
 PLU     Product PLU that will be associated with EventID above to provide accurate event capacity details when event has             Text
         holds associated with that product. Optional.

At least one of the EventID elements must be specified in the request.

7.4.2 Response Message Fields
 Field                 Description                                                                                                   Type
 ResponseCode          Status value that indicates the result of looking up the Event ID in the Galaxy database                      Numeric
 EventID               Unique Event ID                                                                                               Numeric
 EventName             Name of event. If an optional TranslationLanguageID value is provided in the request, this element will       Text
                       include an attribute reflecting the language that the EventName is being represented in. This is for
                       future support of returning back ranslations of multiple languages in the same request.
 StartDateTime         Date/time when event starts                                                                                   DateTime
 EndDateTime           Date/time when event is over                                                                                  DateTime
 EventTypeID           ID of the Event Type associated with the event                                                                Numeric
 OnSaleDateTime        Date/Time when event tickets go “on sale”                                                                     DateTime
 OffSaleDateTime       Date/time when event tickets go “off sale”                                                                    DateTime
 ResourceID            Event location                                                                                                Numeric
 UserEventNumber       Venue-assigned event identifier                                                                               Text
 Available             Number of tickets available. Relative to the product PLU associated with the event in this request, if        Numeric

                                                                                                                                            108
eGalaxy Server Interface Specification                                                 7 Event Ticketing Messages
                  any.
 TotalCapacity    Total original capacity                                                               Numeric
 Status           Event status (see table below)                                                        Numeric
 HasRoster        Determines if the event requires roster information                                   Boolean
 RSEventSeatMapID ID of the SeatMap associated with the event                                           Numeric
 PrivateEvent     Indicates if the event is private                                                     Boolean
 HasHolds         Indicates whether or not this event has any holds associated to it                    Boolean

7.4.3 Event ResponseCode Values
 Value   Description
 0       Event was successfully loaded
 1       Event ID was an integer, but no matching event could be found
 2       Event ID was not a valid integer value

7.4.4 Example GetEvents Request
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <MessageType>GetEvents</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2012-12-04 09:10:05</TimeStamp>
      </Header>
      <Body>
          <GetEvents>
              <EventIDs>
                  <EventID>243</EventID>
              </EventIDs>
          </GetEvents>
      </Body>
  </Envelope>

7.4.5 Example GetEvents Response




                                                                                                              109
eGalaxy Server Interface Specification                                     7 Event Ticketing Messages
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>3</MessageID>
          <MessageType>GetEventsResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2012-12-06 14:28:00</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Events>
              <Event>
                  <ResponseCode>0</ResponseCode>
                  <EventID>243</EventID>
                  <StartDateTime>2012-12-18 14:00:00</StartDateTime>
                  <EndDateTime>2012-12-18 15:00:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2012-01-18 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2012-12-18 14:00:00</OffSaleDateTime>
                  <ResourceID>34</ResourceID>
                  <UserEventNumber>0</UserEventNumber>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMap>0</RSEventSeatMap>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>NO</HasHolds>
                  <EventName>Reseller Event</EventName>
              </Event>
          </Events>
      </Body>
  </Envelope>

7.4.6 Example GetEvents Request with global and individual PLU
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <MessageType>GetEvents</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2012-12-04 09:10:05</TimeStamp>
      </Header>
      <Body>
          <GetEvents>
              <EventIDs>
                  <PLU>TICKET_01</PLU>
                  <EventID>243</EventID>
                  <EventID>245</EventID>
                  <Event>
                      <EventID>244</EventID>
                      <PLU>TICKET_02</PLU>
                  </Event>
              </EventIDs>
          </GetEvents>
      </Body>
  </Envelope>

7.4.7 Example GetEvents Response with global and individual PLU




                                                                                                 110
eGalaxy Server Interface Specification                                     7 Event Ticketing Messages
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>3</MessageID>
          <MessageType>GetEventsResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2012-12-06 14:28:00</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Events>
              <Event>
                  <ResponseCode>0</ResponseCode>
                  <EventID>243</EventID>
                  <StartDateTime>2012-12-18 14:00:00</StartDateTime>
                  <EndDateTime>2012-12-18 15:00:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2012-01-18 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2012-12-18 14:00:00</OffSaleDateTime>
                  <ResourceID>34</ResourceID>
                  <Available>21</Available>
                  <UserEventNumber>0</UserEventNumber>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMap>0</RSEventSeatMap>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>YES</HasHolds>
                  <EventName>Reseller Event</EventName>
              </Event>
              <Event>
                  <ResponseCode>0</ResponseCode>
                  <EventID>245</EventID>
                  <StartDateTime>2012-12-19 14:00:00</StartDateTime>
                  <EndDateTime>2012-12-19 15:00:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2012-01-18 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2012-12-18 14:00:00</OffSaleDateTime>
                  <ResourceID>34</ResourceID>
                  <Available>113</Available>
                  <UserEventNumber>0</UserEventNumber>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMap>0</RSEventSeatMap>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>YES</HasHolds>
                  <EventName>Reseller Event</EventName>
              </Event>
              <Event>
                  <ResponseCode>0</ResponseCode>
                  <EventID>244</EventID>
                  <StartDateTime>2012-12-18 14:00:00</StartDateTime>
                  <EndDateTime>2012-12-18 15:00:00</EndDateTime>
                  <EventTypeID>2</EventTypeID>
                  <OnSaleDateTime>2012-01-18 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2012-12-18 14:00:00</OffSaleDateTime>
                  <ResourceID>35</ResourceID>
                  <Available>250</Available>
                  <UserEventNumber>0</UserEventNumber>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMap>0</RSEventSeatMap>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>YES</HasHolds>
                  <EventName>Reseller Event</EventName>
              </Event>
          </Events>
      </Body>
  </Envelope>

7.4.8 Example GetEvents Request, Translated




                                                                                                 111
eGalaxy Server Interface Specification                                                                7 Event Ticketing Messages
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <MessageType>GetEvents</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2012-12-04 09:10:05</TimeStamp>
      </Header>
      <Body>
          <GetEvents>
              <TranslationLanguageID>2</TranslationLanguageID>
              <EventIDs>
                  <EventID>243</EventID>
                  <EventID>999</EventID>
                  <EventID>ABC</EventID>
              </EventIDs>
          </GetEvents>
      </Body>
  </Envelope>

7.4.9 Example GetEvents Response, Translated
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>2</MessageID>
          <MessageType>GetEventsResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2012-12-06 14:24:12</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Events>
              <Event>
                  <ResponseCode>0</ResponseCode>
                  <EventID>243</EventID>
                  <StartDateTime>2012-12-18 14:00:00</StartDateTime>
                  <EndDateTime>2012-12-18 15:00:00</EndDateTime>
                  <EventTypeID>1</EventTypeID>
                  <OnSaleDateTime>2012-01-18 00:00:00</OnSaleDateTime>
                  <OffSaleDateTime>2012-12-18 14:00:00</OffSaleDateTime>
                  <ResourceID>34</ResourceID>
                  <UserEventNumber>0</UserEventNumber>
                  <HasRoster>NO</HasRoster>
                  <RSEventSeatMap>0</RSEventSeatMap>
                  <PrivateEvent>NO</PrivateEvent>
                  <HasHolds>NO</HasHolds>
                  <EventName TranslationLanguageID="2">Reseller Event (Spanish)</EventName>
              </Event>
              <Event>
                  <ResponseCode>1</ResponseCode>
                  <EventID>999</EventID>
              </Event>
              <Event>
                  <ResponseCode>2</ResponseCode>
                  <EventID>ABC</EventID>
              </Event>
          </Events>
      </Body>
  </Envelope>

7.4.10 Example GetEvents Request, Error
This example demonstrates the result of providing an EventIDs element with no EventID elements. A similar error will occur if the EventIDs
element is omitted entirely.




                                                                                                                                        112
eGalaxy Server Interface Specification                                                                7 Event Ticketing Messages
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <MessageType>GetEvents</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2012-12-04 09:10:05</TimeStamp>
      </Header>
      <Body>
          <GetEvents>
              <TranslationLanguageID>3</TranslationLanguageID>
              <EventIDs/>
          </GetEvents>
      </Body>
  </Envelope>

7.4.11 Example GetEvents Response, Error
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>7</MessageID>
          <MessageType>GetEventsResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2012-12-06 14:35:13</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Status>
              <StatusCode>5700</StatusCode>
              <StatusText>GetEvents request error</StatusText>
          </Status>
          <Errors>
              <Error>
                  <ErrorCode>998</ErrorCode>
                  <ErrorText>No EventID elements found in the request</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>


7.5 EventTicketHold Message
The EventTicketHold message is used to place event tickets “on hold” for a customer. The tickets are not considered sold yet, but are
reserved for the customer until the completion of their order.
The EventTicketHold response message includes SectionID. In the case of sequenced capacity-managed events, the SectionID specified in
the Request message may or may not be the one actually used in the hold. The caller needs to honor whatever SectionID is returned in the
response message.

7.5.1 Request Message Fields
 Field                 Description                                                                                                Type
 EventID               Unique Event ID                                                                                            Numeric
 SectionID             ResourceID (for the given EventID). ResourceID is returned by eGalaxy in the QueryEventsResponse           Numeric
                       message
 Qty                   Number of tickets to hold                                                                                  Numeric
 PLU                   The PLU associated to the tickets being held. If specified, eGalaxy Server will see if there are any       Text
                       holds for the event based on this PLU. If holds are available and the hold has enough availability, the
                       Hold capacity will be used. Otherwise, eneral capacity will be used. (Optional)
 CurrentEventSelection Package related information. See description below. (Optional)                                             Numeric
 SelectedEvents        Package related information. See description below. (Optional)                                             Numeric
 SalesChannelID        The SalesChannel used for the event query. If it is not provided in the request and CustomerID does        Numeric
                       not provide one, the sales channel configured on the source will be used. (Optional)

                                                                                                                                        113
eGalaxy Server Interface Specification                                                                 7 Event Ticketing Messages
 CustomerID           The Customer to use to retrieve configured SalesChannel used for the event query. (Optional)                 Numeric
 SalesCategoryGroupID ID of the sales category group being used during the hold request from a web transaction. (Optional)         Numeric

7.5.2 Request Message SelectedEvents Node
The SelectedEvents node is a list of SelectedEvent nodes. Each SelectedEvent node can have the following fields provided.

 Field           Description                                                             Type
 PackageDetailID The ID of a PackageDetail that has an event already associated with it. Numeric
 EventID         The ID of the event associated with the package detail.                 Numeric

7.5.3 Request Message CurrentEventSelection Node
 Field           Description                                                                Type
 PackagePLU      The PLU of a Package that we request the hold of the event for. (Optional) Text
 PackageDetailID The ID of a PackageDetail that we request the hold of the event for.       Numeric

The PackagePLU, if present, is used to recover values of the PackageEventWindow configuration options EnforcePackageEventWindow and
PackageEventWindow. If PackagePLU is not present the EnforcePackageEventWindow is set to False and PackageEventWindow is set to 0;
The EvenTicketHold request will validate events associated with a packaged PLU, if both the CurrentEventSelection and the SelectedEvents
elements are placed under the EventTicketHold element as shown below. This feature is provided to support packages that are configured
for time-linked events.

  <EventTicketHold>
      <EventID>3672</EventID>
      <SectionID>5</SectionID>
      <Qty>1</Qty>
      <PLU/>
      <CurrentEventSelection>
          <PackagePLU>1-PKG-SM-T-LINK</PackagePLU>
          <PackageDetailID>587</PackageDetailID>
      </CurrentEventSelection>
      <SelectedEvents>
          <SelectedEvent>
              <EventID>3674</EventID>
              <PackageDetailID>588</PackageDetailID>
          </SelectedEvent>
          <SelectedEvent>
              <EventID>677</EventID>
              <PackageDetailID>589</PackageDetailID>
          </SelectedEvent>
      </SelectedEvents>
  </EventTicketHold>

If the events do not support the time-linked restraints the EventTicketHold message will fail with appropriate status and error message.

7.5.3.1 Example EventTicketHold Request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketHold</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2011-08-03 20:55:45</TimeStamp>
      </Header>
      <Body>
          <EventTicketHold>
              <EventID>1971</EventID>
              <SectionID>1</SectionID>
              <Qty>2</Qty>
          </EventTicketHold>
      </Body>
  </Envelope>

                                                                                                                                           114
eGalaxy Server Interface Specification                                                            7 Event Ticketing Messages
 7.5.4 Response Message Fields
 Field                   Description                            Type
 EventTicketHoldResponse Contains EventTicketHold resposne data Element

<EventTicketHoldResponse> element contains following fields:

 Field        Description                                                          Type
 SectionID    Actual ResourceID used by eGalaxy server to put the ticket on hold   Numeric
 CapacityID   The specific CapacityID that was used to hold the ticket(s).         Numeric
 Seats        Contains Reserved Seats information                                  Element

<Seats> element contains one or more <Seat> elements. <Seat> element contains following fields:

 Field           Description                            Type
 RSEventSeatID   ID of the seat in RSEventSeats table   Numeric
 RSSeatID        ID of the seat in RSSeats table        Numeric
 SectionName     Name of the section of the seat        Text
 RowName         Name of the row of the seat            Text
 SeatName        Seat name                              Text

7.5.4.1 Example EventTicketHold success response

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketHoldResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2010-07-11 20:55:49</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <EventTicketHoldResponse>
              <SectionID>1</SectionID>
              <CapacityID>1240</CapacityID>
          </EventTicketHoldResponse>
      </Body>
  </Envelope>

7.5.4.2 Example EventTicketHold success response with reserved seats




                                                                                                                        115
eGalaxy Server Interface Specification                                                                7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketHoldResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2010-07-11 20:55:49</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <EventTicketHoldResponse>
              <SectionID>1</SectionID>
              <Seats>
                  <Seat>
                      <RSEventSeatID>12345</RSEventSeatID>
                      <RSSeatID>5</RSSeatID>
                      <SectionName>MAIN</SectionName>
                      <RowName>A</RowName>
                      <SeatName>5</SeatName>
                  </Seat>
                  <Seat>
                      <RSEventSeatID>12346</RSEventSeatID>
                      <RSSeatID>6</RSSeatID>
                      <SectionName>MAIN</SectionName>
                      <RowName>A</RowName>
                      <SeatName>6</SeatName>
                  </Seat>
              </Seats>
          </EventTicketHoldResponse>
      </Body>
  </Envelope>

7.5.4.3 Example EventTicketHold error response for time-linked package

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <MessageID>-1</MessageID>
          <MessageType>EventTicketHold</MessageType>
          <SessionID>1</SessionID>
          <SourceID>Exchange</SourceID>
          <TimeStamp>2021-05-16 03:41:18</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>223</StatusCode>
              <StatusText>Validation of Time-Linked Package Failed (1-PKG-SM-T-LINK)</StatusText>
          </Status>
          <Error>
              <ErrorCode>601</ErrorCode>
              <ErrorText>Validation of Time-Linked Package failed with reason: First event validation
  failed</ErrorText>
          </Error>
      </Body>
  </Envelope>


7.6 EventTicketRelease
The EventTicketRelease message is used to free event tickets previously placed “on hold” for a session. After being released, the
previously held released tickets are then available for sale again.
The tickets must have previously been placed on hold for the transaction to complete successfully.

7.6.0.1 Request Message Fields


                                                                                                                                    116
eGalaxy Server Interface Specification                                                             7 Event Ticketing Messages
 Field          Description                                                                                               Type
 EventID        Unique Event ID                                                                                           Numeric
 SectionID      ResourceID (for the given EventID). ResourceID is returned by eGalaxy in the QueryEventsResponse          Numeric
                message
 Qty            Number of tickets to release                                                                              Numeric
 CapacityID     The specific CapacityID that was used to hold the ticket(s). (Optional)                                   Numeric
 SalesChannelID The SalesChannel used for the event query. If it is not provided in the request and CustomerID does not   Numeric
                provide one, the sales channel configured on the source will be used. (Optional)
 CustomerID     The Customer to use to retrieve configured SalesChannel used for the event query. (Optional)              Numeric

7.6.0.2 Example EventTicketRelease Request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketRelease</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2011-08-05 11:18:55</TimeStamp>
      </Header>
      <Body>
          <EventTicketRelease>
              <EventID>1971</EventID>
              <SectionID>1</SectionID>
              <Qty>2</Qty>
          </EventTicketRelease>
      </Body>
  </Envelope>

7.6.0.3 Example EventTicketRelease success response

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketRelease</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2011-08-08 11:19:00</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

7.6.0.4 Example EventTicketRelease error response




                                                                                                                               117
eGalaxy Server Interface Specification                                                                7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketRelease</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2011-08-08 11:23:23</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>1104</StatusCode>
              <StatusText>Qty 2 exceeds tickets on hold</StatusText>
          </Status>
          <Error>
              <ErrorCode>1104</ErrorCode>
              <ErrorText>Qty 2 exceeds tickets on hold</ErrorText>
          </Error>
      </Body>
  </Envelope>


7.7 QueryTicketsOnHold
The QueryTicketsOnHold message is used to retrieve the list of event tickets previously placed “on hold” for the session.

7.7.0.1 Request Message Parameters

 Field     Description                                                                                                      Type
 SessionID Indicates the session number for which the list of held tickets is to be retrieved. Note: Must match             Numeric
           Header.SessionID

7.7.0.2 Response Message Fields

 Field         Description             Type
 TicketsOnHold List of tickets on hold Element

The <TicketsOnHold> element contains one or more <TicketHold> elements, which each contain the following fields:

 Field            Description                                            Type
 UniqueHoldID     Unique ID of the hold from the RMCapacityHold table    Numeric
 EventID          Event ID associated to the held tickets                Numeric
 ResourceID       Resource ID associated to the held tickets             Numeric
 HoldQuantity     Number of ticket held                                  Numeric
 CapacityID       Capacity ID associated to the held tickets             Numeric
 DateTimeHeld     Date/Time the tickets were held                        DateTime

7.7.0.3 Example QueryTicketsOnHold Request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryTicketsOnHold</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2010-07-11 20:56:19</TimeStamp>
      </Header>
      <Body>
          <QueryTicketsOnHold>
              <SessionID>9507</SessionID>
          </QueryTicketsOnHold>
      </Body>
  </Envelope>

                                                                                                                                 118
eGalaxy Server Interface Specification                                                             7 Event Ticketing Messages
7.7.0.4 Example QueryTicketsOnHold Response

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryTicketsOnHoldResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2010-07-11 20:56:24</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <TicketsOnHold/>
      </Body>
  </Envelope>


7.8 AbandonSession
A real time message AbandonSession is supported in eGalaxy. Using the new message a web site can release all event tickets put on hold
for a particular web session.

7.8.0.1 Request Message Parameters

 Field     Description                                                                                                 Type
 SessionID The session ID (number) for which the tickets on hold need to be released Note: Must match Header.SessionID Numeric

7.8.0.2 AbandonSession Request example

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>AbandonSession</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-07-11 20:57:30</TimeStamp>
      </Header>
      <Body>
          <AbandonSession>
              <SessionID>1234</SessionID>
          </AbandonSession>
      </Body>
  </Envelope>

7.8.0.3 AbandonSession Response example – no error(s)

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>AbandonSessionResponse</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-07-11 20:57:34</TimeStamp>
      </Header>
      <Body>
          <Status>OK</Status>
      </Body>
  </Envelope>

7.8.0.4 AbandonSession Response example – with error(s)


                                                                                                                                    119
eGalaxy Server Interface Specification                                                               7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>AbandonSessionResponse</MessageType>
          <SessionID>1234</SessionID>
          <TimeStamp>2010-07-11 20:57:32</TimeStamp>
      </Header>
      <Body>
          <Error>
              <ErrorCode>1106</ErrorCode>
              <ErrorText>No ticket holds found to release for the session 1234</ErrorText>
          </Error>
      </Body>
  </Envelope>


7.9 EventTicketCommit
The EventTicketCommit message is used to move tickets that were put “on hold” (from the EventTicketHold message) to “Sold”.
The tickets must have previously been placed on hold using the same session ID for the transaction to complete successfully.
NOTE: A SessionID is required in the header of this message.

7.9.0.1 Request Message Parameters

 Field          Description                                                                                                    Type
 EventID        Unique Event ID                                                                                                Numeric
 SectionID      ResourceID (for the given EventID). ResourceID is returned by eGalaxy in the QueryEventsResponse               Numeric
                message
 Qty            Number of tickets to commit                                                                                    Numeric
 CapacityID     The specific CapacityID that was used to hold the ticket(s). (Optional)                                        Numeric
 SalesChannelID The SalesChannel used for the event query. If it is not provided in the request and CustomerID does not        Numeric
                provide one, the sales channel configured on the source will be used. (Optional)
 CustomerID     The Customer to use to retrieve configured SalesChannel used for the event query. (Optional)                   Numeric

7.9.0.2 Example EventTicketCommit Request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketCommit</MessageType>
          <SessionID>9510</SessionID>
          <TimeStamp>2010-07-15 10:10:41</TimeStamp>
      </Header>
      <Body>
          <EventTicketCommit>
              <EventID>1971</EventID>
              <SectionID>1</SectionID>
              <Qty>2</Qty>
          </EventTicketCommit>
      </Body>
  </Envelope>

7.9.0.3 Example EventTicketCommit Response




                                                                                                                                   120
eGalaxy Server Interface Specification                                                                7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketCommit</MessageType>
          <SessionID>9510</SessionID>
          <TimeStamp>2010-07-15 10:10:46</TimeStamp>
      </Header>
      <Body>
          <Status>OK</Status>
      </Body>
  </Envelope>

7.9.0.4 Potential Error Messages

 Error Code Description                                        Message Type(s)                                    Severity
 1011       SessionID given in the message header is not valid TicketHold, TicketCommit, TicketSale, TicketReturn Error
 1104       Event EventID quantity Quantity not available      TicketHold, TicketCommit                           Error

7.10 EventTicketSale
The EventTicketSale message is used to move event tickets directly from “Available” to “Sold”.
NOTE: A SessionID is required in the header of this message.

7.10.0.1 Request Message Parameters

 Field          Description                                                                                                      Type
 EventID        Unique Event ID                                                                                                  Numeric
 SectionID      ResourceID (for the given EventID). ResourceID is returned by eGalaxy in the QueryEventsResponse                 Numeric
                message
 Qty            Number of tickets to sell                                                                                        Numeric
 PLU            The PLU associated to the tickets being held. If specified, eGalaxy Server will see if there are any holds for   Text
                the event based on this PLU. If holds are available and the hold has enough availability, the Hold capacity
                will be used. Otherwise, General capacity will be used. (Optional)
 SalesChannelID The SalesChannel used for the event query. If it is not provided in the request and CustomerID does not          Numeric
                provide one, the sales channel configured on the source will be used. (Optional)
 CustomerID     The Customer to use to retrieve configured SalesChannel used for the event query. (Optional)                     Numeric

7.10.0.2 Response Message Parameters

 Field                     Description                       Type
 <EventTicketSaleResponse> Response element for this message Element

The following fields are supported within the <EventTicketSaleResponse> element:

 Field      Description                                                  Type
 CapacityID The specific CapacityID that was used to hold the ticket(s). Numeric

7.10.0.3 Example EventTicketSale Request




                                                                                                                                     121
eGalaxy Server Interface Specification                                                                  7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketSale</MessageType>
          <SessionID>9511</SessionID>
          <TimeStamp>2010-07-15 10:12:05</TimeStamp>
      </Header>
      <Body>
          <EventTicketSale>
              <EventID>1971</EventID>
              <SectionID>1</SectionID>
              <Qty>3</Qty>
          </EventTicketSale>
      </Body>
  </Envelope>

7.10.0.4 Example EventTicketSale Response

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketSaleResponse</MessageType>
          <SessionID>9511</SessionID>
          <TimeStamp>2010-07-15 10:12:10</TimeStamp>
      </Header>
      <Body>
          <Status>OK</Status>
      </Body>
  </Envelope>

7.10.0.5 Potential Error Messages

 Error Code   Description                                                  Message Type(s)                                       Severity
 1011         SessionID given in the message header is not valid           TicketHold, TicketCommit, TicketSale, TicketReturn    Error
 1101         Event EventID not valid                                      TicketHold, TicketSale                                Error
 1102         Event EventID not active                                     TicketHold, TicketSale                                Error
 1103         Event EventID not on sale                                    TicketHold, TicketSale                                Error
 1104         Event EventID quantity Quantity not available                TicketHold, TicketSale                                Error
 1105         Event EventID quantity Quantity cannot be negative           TicketHold, TicketSale                                Error
 1107         Cannot find and/or update capacity record for ticket sale.   TicketSale                                            Error

7.11 EventTicketReturn
The EventTicketReturn message is used to move event tickets from “Sold” to “Available”. The specified Qty must meet the following
criteria:
      Qty value cannot be higher than the number of tickets currently sold for the specified event.
      Qty value cannot be higher than the total capacity allocated to the sales channel being used by the eGalaxy Source, if utilizing the
      Event Capacities by Sales Channel feature.
NOTE: A SessionID is required in the header of this message.

7.11.0.1 Request Message Parameters

 Field             Description                                                                                                      Type
 EventID           Unique Event ID                                                                                                  Numeric
 SectionID         ResourceID (for the given EventID). ResourceID is returned by eGalaxy in the QueryEventsResponse                 Numeric
                   message

                                                                                                                                             122
eGalaxy Server Interface Specification                                                                  7 Event Ticketing Messages
 Qty            Number of tickets to return                                                                                      Numeric
 CapacityID     The specific CapacityID that was used to hold the ticket(s). (Optional)                                          Numeric
 PLU            The PLU associated to the tickets being held. If specified, eGalaxy Server will see if there are any holds for   Text
                the event based on this PLU. If holds are available and the hold has enough availability, the Hold capacity
                will be used. Otherwise, general capacity will be used. (Optional)
 SalesChannelID The SalesChannel used for the event query. If it is not provided in the request and CustomerID does not          Numeric
                provide one, the sales channel configured on the source will be used. (Optional)
 CustomerID     The Customer to use to retrieve configured SalesChannel used for the event query. (Optional)                     Numeric

7.11.0.2 Example EventTicketReturn Request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketReturn</MessageType>
          <SessionID>9511</SessionID>
          <TimeStamp>2010-07-15 10:12:36</TimeStamp>
      </Header>
      <Body>
          <EventTicketReturn>
              <EventID>1971</EventID>
              <SectionID>1</SectionID>
              <Qty>2</Qty>
          </EventTicketReturn>
      </Body>
  </Envelope>

7.11.0.3 Example EventTicketReturn Response

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EventTicketReturn</MessageType>
          <SessionID>9511</SessionID>
          <TimeStamp>2010-07-15 10:12:39</TimeStamp>
      </Header>
      <Body>
          <Status>OK</Status>
      </Body>
  </Envelope>

7.11.0.4 Potential Error Messages

 Error Code Description                                                  Message Type(s)                                    Severity
 1011       SessionID given in the message header is not valid           TicketHold, TicketCommit, TicketSale, TicketReturn Error
 1108       Cannot find and/or update capacity record for ticket return. TicketReturn                                       Error

7.12 CapacityManagement
The CapacityManagement message is used to perform capacity management with event tickets in the Galaxy database. This message can
be used to put tickets on hold, to release tickets put on hold previously, or to commit tickets put on hold previously.
This message allows sender to send multiple events in one request facilitating the sale of a package.
NOTE: A SessionID is required in the header of this message.

7.12.1 CapacityManagement Request
This section describes the format of the CapacityManagement request with examples.

                                                                                                                                     123
eGalaxy Server Interface Specification                                                                7 Event Ticketing Messages
7.12.1.1 Request Message Parameters

 Field    Description             Type
 Action   See Action Values below Numeric
 <Events> <Events> element        Element

Each <Events> element contains one or more <Event> element. Following fields are supported within the <Event> element:

 Field          Description                                                                                                      Type
 EventID        Unique Event ID                                                                                                  Numeric
 SectionID      ResourceID (for the given EventID). ResourceID is returned by eGalaxy in the QueryEventsResponse                 Numeric
                message
 Qty            Number of tickets                                                                                                Numeric
 PLU            The PLU associated to the tickets being held. If specified, eGalaxy Server will see if there are any holds for   Text
                the event based on this PLU. If holds are available and the hold has enough availability, the Hold capacity
                will be used. Otherwise, eneral capacity will be used. (Optional, only used when Action = 0)
 CapacityID     The specific CapacityID that was used to hold the ticket(s). (Optional, only used when Action = 1)               Numeric
 SalesChannelID The SalesChannel used for the event query. If it is not provided in the request and CustomerID does not          Numeric
                provide one, the sales channel configured on the source will be used. (Optional)
 CustomerID     The Customer to use to retrieve configured SalesChannel used for the event query. (Optional)                     Numeric

Action Values:

 Value   Description
 0       Ticket Hold
 1       Ticket Release
 2       Ticket Commit

7.12.1.2 Example CapacityManagement Request – to add Tickets Hold

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>CapacityManagement</MessageType>
          <SessionID>9512</SessionID>
          <TimeStamp>2010-07-16 14:40:21</TimeStamp>
      </Header>
      <Body>
          <Action>0</Action>
          <Events>
              <Event>
                  <EventID>10</EventID>
                  <SectionID>1</SectionID>
                  <Qty>2</Qty>
              </Event>
          </Events>
      </Body>
  </Envelope>

7.12.1.3 Example CapacityManagement Request – to release Tickets on-hold




                                                                                                                                     124
eGalaxy Server Interface Specification                                                            7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>CapacityManagement</MessageType>
          <SessionID>9512</SessionID>
          <TimeStamp>2010-07-16 14:40:21</TimeStamp>
      </Header>
      <Body>
          <Action>1</Action>
          <Events>
              <Event>
                  <EventID>10</EventID>
                  <SectionID>1</SectionID>
                  <Qty>2</Qty>
              </Event>
          </Events>
      </Body>
  </Envelope>

7.12.1.4 Example CapacityManagement Request – to commit Tickets on-hold

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>CapacityManagement</MessageType>
          <SessionID>9512</SessionID>
          <TimeStamp>2010-07-16 14:40:21</TimeStamp>
      </Header>
      <Body>
          <Action>2</Action>
          <Events>
              <Event>
                  <EventID>10</EventID>
                  <SectionID>1</SectionID>
                  <Qty>2</Qty>
              </Event>
          </Events>
      </Body>
  </Envelope>

7.12.2 CapacityManagement Response
This section describes the format of the CapacityManagement response returned by eGalaxy server with examples.

7.12.2.1 Response Message Parameters

 Field            Description              Type
 Action           See action values below  Numeric
 <EventsResponse> <EventsResponse> element Element

Action Values:

 Value     Description
 0         Ticket Hold
 1         Ticket Release
 2         Ticket Commit

Each <EventsResponse> element contains one or more <EventResponse> element. Following fields are supported within the
<EventResponse> element:

 Field            Description                                                                                           Type
 EventID          Unique Event ID                                                                                       Numeric
                                                                                                                            125
eGalaxy Server Interface Specification                                                                 7 Event Ticketing Messages
 SectionID       ResourceID sent by the sender in the request                                                                      Numeric
 Qty             Quantity of the actual tickets put on hold                                                                        Numeric
 HoldSectionID   ResourceID of the section actually used by eGalaxy server to put tickets on hold                                  Numeric
 Result          Result of the request (to hold, release or commit tkts) for this event. See values below.                         Numeric
 <Seats>         <Seats> element. If Event is a Reserved Seat event then this element contains information of the seats            Element
                 reserved.
 <Errors>        <Errors> element. Present only when Result is 1 (unsuccessful request)                                            Numeric

Request result Values:

 Value Description
 0     Request was successful
 1     Request was not successful

<Seats> element contains one or more <Seat> elements. <Seat> element contains following fields:

 Field            Description                            Type
 RSEventSeatID    ID of the seat in RSEventSeats table   Numeric
 RSSeatID         ID of the seat in RSSeats table        Numeric
 SectionName      Name of the section of the seat        Text
 RowName          Name of the row of the seat            Text
 SeatName         Seat name                              Text

Each <Errors> element contains one or more <Error> element. Following fields are supported within the <Error> element:

 Field     Description                                                    Type
 ErrorCode Error number                                                   Numeric
 ErrorText Error text describing the reason why request is being rejected Text

A list of possible errors for all different actions (Hold, Release and Commit) supports in CapacityManagement is provided in the “Potential
Error Messages” section below.

7.12.2.2 Example CapacityManagement Response – for request to add Ticket Hold




                                                                                                                                         126
eGalaxy Server Interface Specification                                                      7 Event Ticketing Messages
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>CapacityManagementResponse</MessageType>
          <SessionID>9512</SessionID>
          <TimeStamp>2010-07-16 14:40:26</TimeStamp>
      </Header>
      <Body>
          <Action>0</Action>
          <EventsResponse>
              <EventResponse>
                  <EventID>10</EventID>
                  <SectionID>1</SectionID>
                  <Qty>2</Qty>
                  <Result>0</Result>
                  <Seats>
                      <Seat>
                          <RSEventSeatID>12345</RSEventSeatID>
                          <RSSeatID>5</RSSeatID>
                          <SectionName>MAIN</SectionName>
                          <RowName>A</RowName>
                          <SeatName>5</SeatName>
                      </Seat>
                      <Seat>
                          <RSEventSeatID>12345</RSEventSeatID>
                          <RSSeatID>6</RSSeatID>
                          <SectionName>MAIN</SectionName>
                          <RowName>A</RowName>
                          <SeatName>6</SeatName>
                      </Seat>
                  </Seats>
              </EventResponse>
              <EventResponse>
                  <EventID>21</EventID>
                  <SectionID>1</SectionID>
                  <Qty>2</Qty>
                  <Result>1</Result>
                  <Errors>
                      <Error>
                          <ErrorCode>1104</ErrorCode>
                          <ErrorText>Event 21 quantity 2 not available</ErrorText>
                      </Error>
                  </Errors>
              </EventResponse>
          </EventsResponse>
      </Body>
  </Envelope>

7.12.2.3 Example CapacityManagement Response – Entire request rejected due to an unexpected Error

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>CapacityManagementResponse</MessageType>
          <SessionID>9512</SessionID>
          <TimeStamp>2010-07-16 14:40:26</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>3800</StatusCode>
              <StatusText>CapacityManagement request error</StatusText>
          </Status>
          <CapacityManagementErrors>
              <CapacityManagementError>
                  <ErrorCode>1011</ErrorCode>
                  <ErrorText>Session 9507 is not valid</ErrorText>
              </CapacityManagementError>
          </CapacityManagementErrors>
      </Body>
  </Envelope>

                                                                                                                  127
eGalaxy Server Interface Specification                                                                7 Event Ticketing Messages
7.12.2.4 Potential Error Messages

 Error Code   Description                                           Action                        Severity
 1011         SessionID given in the message header is not valid    Hold, Release, and Commit     Error
 999          Unexpected error occurred Error Message               Hold, Release, and Commit     Error
 1101         Event EventID not valid                               Hold                          Error
 1102         Event EventID not active                              Hold                          Error
 1103         Event EventID not on sale                             Hold                          Error
 1104         Event EventID quantity Quantity not available         Hold, Release, Commit         Error
 1105         Event EventID quantity Quantity cannot be negative    Hold, Release                 Error
 1109         Event is private                                      Hold                          Error

7.13 QueryRoster
The QueryRoster message is used to determine if the event requires the user to enter roster information before purchasing the event ticket.
NOTE: A SessionID is not required in the header of this message.

7.13.1 QueryRoster Request
This section describes the format of the QueryRoster request with examples.

7.13.1.1 Request Message Parameters

 Field         Description           Type
 <QueryRoster> <QueryRoster> element Element

The <QueryRoster> element contains the following fields.

 Field                 Description                                                                                               Type
 EventID               Unique Event ID                                                                                           Numeric
 TranslationLanguageID The language to translate the roster information into, if the system is configured for multiple           Numeric
                       languages (Optional)

7.13.1.2 Example QueryRoster Request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>5</MessageID>
          <MessageType>QueryRoster</MessageType>
          <SessionID>0</SessionID>
          <SourceID>Source</SourceID>
          <TimeStamp>2008-12-16 09:45:39</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <QueryRoster>
              <EventID>1</EventID>
          </QueryRoster>
      </Body>
  </Envelope>

7.13.2 QueryRoster Response
This section describes the format of the QueryRoster response returned by eGalaxy server with examples.

7.13.2.1 Response Message Parameters

                                                                                                                                       128
eGalaxy Server Interface Specification                                                                 7 Event Ticketing Messages
 Field      Description          Type
 RosterData <RosterData> element Element

The <RosterData> element contains the following fields:

 Field     Description         Type
 Questions <Questions> element Element

The <Questions> element contains the following fields:

 Field    Description        Type
 Question <Question> element Element

The <Question> element contains the following fields:

 Field               Description                                                                           Type
 ID                  The AttributeDefinitionID of the question to ask.                                     Numeric
 Type                See values below                                                                      Numeric
 Name                The question being asked.                                                             Text
 Required            Determines if the question must have an answer .                                      Boolean
 Sequence            The one based number of what order the question should be displayed in.               Numeric
 <LookUpAnswers>     <LookUpAnswers> element will be available if the question type is 1 (Lookup table).   Element

Question Type Values:

 Value Description
 0     Lookup table question
 1     Free form question

The <LookUpAnswers> element contains the following fields:

 Field              Description                                                                         Type
 LookUpAnswerID     The answer ID to use if the LookUp table question is answered using this answer.    Numeric
 Value              The name of the lookup table answer.                                                Text
 Sequence           The one based number of what order the answer should be displayed in.               Numeric

7.13.2.2 Example QueryRoster Response




                                                                                                                             129
eGalaxy Server Interface Specification                                                               7 Event Ticketing Messages
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>4</MessageID>
          <MessageType>QueryRosterResponse</MessageType>
          <SourceID>0</SourceID>
          <TimeStamp>2009-02-02 13:11:18</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <RosterData>
              <Questions>
                  <Question>
                      <ID>2</ID>
                      <Type>2</Type>
                      <Name>Emergency Contact</Name>
                      <Required>NO</Required>
                      <Sequence>1</Sequence>
                  </Question>
                  <Question>
                      <ID>1</ID>
                      <Type>1</Type>
                      <Name>Language</Name>
                      <Required>YES</Required>
                      <Sequence>2</Sequence>
                      <LookUpAnswers>
                          <LookUpAnswer>
                              <LookUpAnswerID>3</LookUpAnswerID>
                              <Value>English</Value>
                              <Sequence>1</Sequence>
                          </LookUpAnswer>
                          <LookUpAnswer>
                              <LookUpAnswerID>4</LookUpAnswerID>
                              <Value>Spanish</Value>
                              <Sequence>2</Sequence>
                          </LookUpAnswer>
                      </LookUpAnswers>
                  </Question>
              </Questions>
          </RosterData>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

7.13.2.3 Potential Error Messages

 Error Code   Description                 Severity
 4200         QueryRoster request error   Error
 4201         EventID is not valid        Error
 4202         Event is off sale           Error
 4203         Event is over               Error

7.14 QueryRosterContact
The QueryRosterContact message is used to determine if the contact has already been used for a roster in the event.
NOTE: A SessionID is not required in the header of this message.

7.14.1 QueryRosterContact Request
This section describes the format of the QueryRosterContact request with examples.

7.14.1.1 Request Message Parameters


                                                                                                                           130
eGalaxy Server Interface Specification                                                             7 Event Ticketing Messages
 Field                Description                  Type
 <QueryRosterContact> <QueryRosterContact> element Element

The <QueryRosterContact> element contains the following fields.

 Field     Description                                                       Type
 EventID   EventID to determine if a roster exists for the given ContactID   Numeric
 ContactID ContactID to determine if the roster exists for the given EventID Numeric

7.14.1.2 Example QueryRosterContact Request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>5</MessageID>
          <MessageType>QueryRosterContact</MessageType>
          <SessionID>0</SessionID>
          <SourceID>Source</SourceID>
          <TimeStamp>2008-12-16 09:45:39</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <QueryRosterContact>
              <EventID>1</EventID>
              <ContactID>1</ContactID>
          </QueryRosterContact>
      </Body>
  </Envelope>

7.14.2 QueryRosterContact Response
This section describes the format of the QueryRosterContact response returned by eGalaxy server with examples.

7.14.2.1 Response Message Parameters

 Field        Description                                                                                  Type
 UseContactID YES or NO depending on if the ContactID given can be used on a roster for the given EventID. Boolean

7.14.2.2 Example QueryRosterContact Response

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <MessageID>2</MessageID>
          <MessageType>QueryRosterContact</MessageType>
          <SourceID/>
          <TimeStamp>2009-02-03 08:17:16</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <UseContactID>YES</UseContactID>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

7.14.2.3 Potential Error Messages

 Error Code Description                                             Severity
 4300       QueryRosterContact request error                        Error

                                                                                                                         131
eGalaxy Server Interface Specification                                     7 Event Ticketing Messages
 4301      This contact has already been selected for this event   Error
 4302      EventID is not valid                                    Error
 4303      Event is off sale                                       Error
 4304      Event is over                                           Error
 4305      ContactID is not valid                                  Error
 4306      Event does not have a roster                            Error




                                                                                                 132
eGalaxy Server Interface Specification                                                                          8 ActivateTicket Message
8 ActivateTicket Message
ActivateTicket message allows you to…
         Activate a ticket that was previously sold as an inactive ticket.
         Activate a ticket that was produced outside of Galaxy (a foreign media ticket).
         Create a ticket with the status of Inactive by sending the ticket as a foreign media ticket. To do this you have to set the status of the
         PLU to Inactive on item definition in Galaxy.
         Cancel an active or valid ticket.
         Activate package details of a package which was sold with inactive package details.

8.1 Message Format
8.1.1 Request Message Fields
The TicketActivation element appears in the Body element of a standard eGalaxy message. The TicketActivation element contains
Command, CustomerID, and Tickets elements.

8.1.1.1 <TicketActivation> Element

 Field        Description                                                                                                                Type
 Command      Command indicating the action to take on the tickets provided in the request. Possible values are: Activate,               Text
              ActivatePackageDetail, or Cancel
 CustomerID   Galaxy CustomerID                                                                                                          Numeric
 SalesProgram Sales program to use in the activation transaction                                                                         Numeric
 <Tickets>    Tickets (and stratus GiftCards) to be activated or cancelled.                                                              Element

The ‘Activate’ command is used to activate a currently inactive ticket or activate a foreign media ticket. Activation of stratus GiftCards is
also supported.
The ‘ActivatePackageDetail’ is used to activate one or more currently inactive package details. No foreign media activation is handled
within this command. The ActivatePackageDetail command will return an error if the package details are already active.
The ‘Cancel’ command is used to ‘void’ a previously activated ticket. Once an activated ticket is cancelled, the ticket cannot be activated
again. The Cancel command will return an error if the ticket is inactive or already cancelled.
The TicketActivation element contains CustomerID. This CustomerID applies to all tickets under the TicketActivation element. The system
does not allow multiple TicketActivation elements in the ActivateTicket message.

8.1.1.2 <Tickets> Element

The <Tickets> element contains one or more of the <Ticket> elements for tickets that are to be activated or cancelled.
Note: Since the command applies to all tickets in the request, the response will indicate an error if the command fails for one of the tickets
and NONE of the tickets will be processed. The error response will indicate which ticket(s) caused the error(s).
This applies only if you are activating a pre-existing inactive ticket.

8.1.1.3 <Ticket> Element

The ticket element indicates the specific ticket to be activated, what ItemCode it will be, and its price.

 Field                    Description                                                                                Command /       Type
                                                                                                                     Usage
 VisualID                 Identification number of ticket to be activated                                            Activate/Cancel Text(40)
 ItemCode or PLU          Ticket’s Galaxy item code or PLU. PLU is a required field when sending cancellation        Activate/Cancel Text(20)
                          for stratus GiftCards
 Price                    Price of the activated ticket (Optional)                                                   Activate           Currency
 TicketDate               Date the ticket is valid for use (Optional)                                                Activate           DateTime

                                                                                                                                                133
eGalaxy Server Interface Specification                                                                   8 ActivateTicket Message
 EventID           EventID to use for the capacity managed ticket(s) (Optional)                              Activate/Cancel Numeric
 DateSold          Date and time when the ticket was originally sold (Optional)                              Activate        DateTime
 ExpirationDate    Expiration or Thru Expiration Date. Overrides any expiration information specified in     Activate        DateTime
                   the ticket’s Access record (referenced by AccessCode). (Optional)
 Section           Section of the ticket’s seat assignment data (Optional)                                   Activate          Text (40)
 Row               Row of the ticket’s seat assignment data (Optional)                                       Activate          Text (40)
 Seat              Seat of the ticket’s seat assignment data (Optional)                                      Activate          Text (40)
 ResourceID        ResourceID to use for the capacity managed ticket(s)                                      Activate/Cancel   Numeric
 SessionID         SessionID to use when moving capacity for the capacity managed ticket(s)                  Activate          Numeric
 ActivateDebitCard Flag indicating if the DebitCard to activate also needs to be Authorized with Galaxy’s    Activate          Boolean
                   Payment Processor. Currently only Stratus GiftCards are supported that are pre-
                   authorized by third-party system
 DebitCardAuthData Contains debit card authorization fields                                                  Activate/Cancel Element
 VoidReason        For SIAE-enabled systems only. Required field that provides the SIAE Void Reason          Cancel          Text
                   code to be associated with the void transaction.

8.1.1.4 <DebitCardAuthData> Element

The <DebitCardAuthData> element contains authorization data of the Debit Card to be activated in Galaxy. Authorization data given in this
element is used to journalize a draft record in Galaxy. <DebitCardAuthData> element contains following fields:

 Field            Description                                                                                                    Type
 AuthCode         Authorization Code from payment processor                                                                      Numeric
 ValidationCode   Validation code from payment processor (Optional)                                                              Text (4)
 TransID          Transaction ID from payment processor (Optional)                                                               Text
                                                                                                                                 (15)
 ExpDate          Credit Card expiration date, if credit card payment (Optional)                                                 Numeric
                                                                                                                                 MMYY
 PSI              Payment Service Indicator from payment processor (Optional)                                                    Text(1)
 GxKeyID          Foreign key to GxKeys.GxKeyID, this element defines what GxKeyID to use to decrypt the Endorsement             Numeric
                  element. If this value is non-zero, the system assumes the text in the Endorsement element is encrypted

8.1.1.5 <Payments> Element

The <Payments> element contains one or more <Payment> elements. A Payment indicates payments applied to the activation. A payment
element includes the following elements:

 Field              Description                                                                                                Type
 PaymentCode        Galaxy Form of payment number (value 10-89) (Optional)                                                     Numeric
 Description        Text description payment (Optional)                                                                        Text (40)
 Amount             Payment amount (Optional)                                                                                  Currency
 PaymentDate        Date the payment was made, or authorized if credit card. (Optional)                                        DateTime
 Endorsement        For credit cards, the credit card account number. For vouchers, the unique voucher number (Optional)       Text (30)
 ExpDate            Credit Card expiration date, if credit card payment (Optional)                                             Numeric
                                                                                                                               MMYY
 CardHolderName     Name of credit card holder printed on the card                                                             Text
 AuthCode           Authorization Code from payment processor (Optional)                                                       Text (8)
 TransID            Transaction ID from payment processor (Optional)                                                           Text (15)
 ValidationCode     Validation code from payment processor (Optional)                                                          Text (4)
 PSI                Payment Service Indicator from payment processor (Optional)                                                Text (1)
 PayOnIssuance      Set to apply payment when the order is issued (or pickup) (Optional)                                       Boolean
 BillingStreet      Street address of the billing address, used for AVS verification (Optional)                                Text (30)
 BillingZIP         Zip or postal code of the billing address, used for AVS verification (Optional)                            Text (16)

                                                                                                                                       134
eGalaxy Server Interface Specification                                                                      8 ActivateTicket Message
 CVN                 Card Verification Number, used to verify credit card (Optional)                                               Numeric
 GxKeyID             Foreign key to GxKeys.GxKeyID, this element defines what GxKeyID to use to decrypt the Endorsement            Numeric
                     element. If this value is non-zero, the system assumes the text in the Endorsement element is encrypted
 ExternalKeyID       Foreign key to GxKeys.ExternalKeyID. If a GxKeyID value is specified, it will always be used in place of      Text(100)
                     this element. If ExternalKeyID is the only element defined, it will be used to look up the appropriate key in
                     the GxKeys table in order to decrypt the Endorsement element. If this value is non-blank, the system
                     assumes the text in the Endorsement element is encrypted

Note: Same field list as Order Payment Line.
The payment element is not used for the Cancel command. The original payment will be reversed and journalized. The endorsement field
will be applied only if the eGalaxy source is configured to do so.

8.1.2 Response Message Fields
 Field                  Description                                                                              Type
 Status                 Standard eGalaxy status element                                                          <Status> element
 TicketActivationErrors List of TicketActivationError elements (Optional - only present if one or more errors    TicketActivationErrors
                        occurred)                                                                                element

The <Status> element will indicate if any errors occurred during the processing of the ticket activation request. If a non-zero <StatusCode>
(1400 for ActivateTicket request).
The TicketActivationErrors element will only be present in the response if errors occurred while processing individual tickets.

8.1.2.1 <TicketActivationError> Element

For each ticket that the indicated command was unsuccessful, the <TicketActivationErrors> element contains a <TicketActivationError>
element with the specifics of each error.
Each <TicketActivationError> element contains the VisualID of the rejected ticket, and StatusCode and StatusText elements describing the
type of error.

 Field         Description                                                    Type
 VisualID      Identification number of ticket having error when processed    Text(40)
 StatusCode    Code indicating reason for error                               Numeric
 StatusText    Text description of error code                                 Text

8.1.3 Example Activate Transaction
8.1.3.1 Example ActivateTicket Request to activate an inactive ticket and set contact information




                                                                                                                                          135
eGalaxy Server Interface Specification                                8 ActivateTicket Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicket</MessageType>
          <TimeStamp>2019-10-14 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketActivation>
              <Command>Activate</Command>
              <CustomerID>123456</CustomerID>
              <Tickets>
                  <Ticket>
                      <VisualID>400011231101010</VisualID>
                      <PLU>101010</PLU>
                      <Price>39.95</Price>
                      <Contact>
                          <FirstName>Inactive</FirstName>
                          <MiddleName>Ticket</MiddleName>
                          <LastName>Activation</LastName>
                          <Email>example@gmail.com</Email>
                          <Street1>123 Gateway</Street1>
                          <Street2>Apt 3</Street2>
                          <State>PA</State>
                          <City>Gilbertsville</City>
                          <Zip>19525</Zip>
                          <DOB>1990-10-31</DOB>
                          <Phone>1234567890</Phone>
                          <CountryCode>US</CountryCode>
                          <AllowEmail>YES</AllowEmail>
                      </Contact>
                  </Ticket>
              </Tickets>
          </TicketActivation>
          <Payments>
              <Payment>
                  <PaymentCode>79</PaymentCode>
                  <Description>Activation</Description>
                  <Amount>39.95</Amount>
              </Payment>
          </Payments>
      </Body>
  </Envelope>

8.1.3.2 Example ActivateTicket Request to activate inactive tickets




                                                                                          136
eGalaxy Server Interface Specification                                     8 ActivateTicket Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicket</MessageType>
          <TimeStamp>2004-02-04 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketActivation>
              <Command>Activate</Command>
              <CustomerID>123456</CustomerID>
              <Tickets>
                  <Ticket>
                      <VisualID>400011231101010</VisualID>
                      <PLU>101010</PLU>
                      <Price>39.95</Price>
                  </Ticket>
                  <Ticket>
                      <VisualID>400011241101011</VisualID>
                      <PLU>101012</PLU>
                      <Price>19.95</Price>
                      <EventID>1001</EventID>
                      <SessionID>9507</SessionID>
                      <Section>Section A</Section>
                      <Row>10</Row>
                      <Seat>5</Seat>
                  </Ticket>
              </Tickets>
          </TicketActivation>
          <Payments>
              <Payment>
                  <PaymentCode>42</PaymentCode>
                  <Description>Charge</Description>
                  <Endorsement>123456789</Endorsement>
                  <Amount>59.90</Amount>
              </Payment>
          </Payments>
      </Body>
  </Envelope>

8.1.3.3 Example ActivateTicket Request to activate foreign media tickets

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicket</MessageType>
          <TimeStamp>2004-02-04 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketActivation>
              <Command>Activate</Command>
              <CustomerID>123456</CustomerID>
              <SalesProgram>123</SalesProgram>
              <Tickets>
                  <Ticket>
                      <VisualID>400011231101014</VisualID>
                      <PLU>101010</PLU>
                      <Price>39.95</Price>
                  </Ticket>
                  <Ticket>
                      <VisualID>400011241101015</VisualID>
                      <PLU>101012</PLU>
                      <Price>19.95</Price>
                      <EventID>1001</EventID>
                      <SessionID>9507</SessionID>
                  </Ticket>
              </Tickets>
          </TicketActivation>
      </Body>
  </Envelope>


                                                                                               137
eGalaxy Server Interface Specification                                              8 ActivateTicket Message
8.1.3.4 Example ActivateTicket Request to activate stratus GiftCards

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicket</MessageType>
          <TimeStamp>2004-02-04 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketActivation>
              <Command>Activate</Command>
              <CustomerID>123456</CustomerID>
              <SalesProgram>123</SalesProgram>
              <Tickets>
                  <Ticket>
                      <VisualID>400011231101017</VisualID>
                      <PLU>148883</PLU>
                      <Price>50</Price>
                      <ActivateDebitCard>NO</ActivateDebitCard>
                      <DebitCardAuthData>
                          <AuthCode>12345</AuthCode>
                          <ValidationCode>0118</ValidationCode>
                          <TransID>123</TransID>
                          <ExpDate>1210</ExpDate>
                          <PSI>P</PSI>
                      </DebitCardAuthData>
                  </Ticket>
                  <Ticket>
                      <VisualID>400011241101018</VisualID>
                      <PLU>148883</PLU>
                      <Price>19.95</Price>
                      <ActivateDebitCard>NO</ActivateDebitCard>
                      <DebitCardAuthData>
                          <AuthCode>12346</AuthCode>
                          <ValidationCode>0119</ValidationCode>
                          <TransID>124</TransID>
                          <ExpDate>1210</ExpDate>
                          <PSI>P</PSI>
                      </DebitCardAuthData>
                  </Ticket>
              </Tickets>
          </TicketActivation>
      </Body>
  </Envelope>

8.1.3.5 Example ActivateTicket Response

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicketResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2002-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

8.1.3.6 Example ActivateTicket Response with Errors

This is an example response message when an error has occurred during activation:



                                                                                                        138
eGalaxy Server Interface Specification                                    8 ActivateTicket Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicketResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2002-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>1400</StatusCode>
              <StatusText>Ticket activation request error</StatusText>
          </Status>
          <TicketActivationErrors>
              <TicketActivationError>
                  <VisualID>400011231101010</VisualID>
                  <StatusCode>1401</StatusCode>
                  <StatusText>Ticket does not exist</StatusText>
              </TicketActivationError>
          </TicketActivationErrors>
      </Body>
  </Envelope>

8.1.4 Example Cancel Transaction
8.1.4.1 Example ActivateTicket Request to Cancel an activated ticket

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicket</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2004-02-041 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketActivation>
              <Command>Cancel</Command>
              <CustomerID>123456</CustomerID>
              <Tickets>
                  <Ticket>
                      <VisualID>400011231101010</VisualID>
                  </Ticket>
              </Tickets>
          </TicketActivation>
      </Body>
  </Envelope>

8.1.4.2 Example ActivateTicket Request to Cancel an activated DebitCard




                                                                                              139
eGalaxy Server Interface Specification                            8 ActivateTicket Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicket</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2004-02-041 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketActivation>
              <Command>Cancel</Command>
              <CustomerID>123456</CustomerID>
              <Tickets>
                  <Ticket>
                      <VisualID>400011231101017</VisualID>
                      <PLU>148883</PLU>
                      <DebitCardAuthData>
                          <AuthCode>12347</AuthCode>
                          <ValidationCode>0120</ValidationCode>
                          <TransID>125</TransID>
                          <ExpDate>1210</ExpDate>
                          <PSI>P</PSI>
                      </DebitCardAuthData>
                  </Ticket>
              </Tickets>
          </TicketActivation>
      </Body>
  </Envelope>

8.1.4.3 Example ActivateTicket Response for a Cancel

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicketResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2002-02-11
  17:50:09</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

8.1.4.4 Example ActivateTicket Cancel Response with Errors




                                                                                      140
eGalaxy Server Interface Specification                                            8 ActivateTicket Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicketResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2002-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>1400</StatusCode>
              <StatusText>Ticket activation request error</StatusText>
          </Status>
          <TicketActivationErrors>
              <TicketActivationError>
                  <VisualID>400011231101010</VisualID>
                  <StatusCode>1404</StatusCode>
                  <StatusText>Ticket does not exist</StatusText>
              </TicketActivationError>
          </TicketActivationErrors>
      </Body>
  </Envelope>

8.1.5 Example ActivatePackageDetail Transaction
8.1.5.1 Example ActivateTicket Request to activate all inactive package details

  <Envelope>
      <Header>
          <SourceID>Exchange</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicket</MessageType>
          <TimeStamp>2019-10-15 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketActivation>
              <Command>ActivatePackageDetail</Command>
              <CustomerID>10</CustomerID>
              <Tickets>
                  <Ticket>
                      <VisualID>60001000038</VisualID>
                      <PLU>1-PKGINACTIVEEVENTS</PLU>
                      <Price>50</Price>
                      <Package>
                          <PackageDetail>
                              <PLU>E0020101-INACTIVE</PLU>
                              <VisualID>88001000039</VisualID>
                              <Price>10</Price>
                              <EventID>1213</EventID>
                              <CapacityID>1264</CapacityID>
                              <SessionID>26</SessionID>
                              <Contact>
                                  <FirstName>Inactive</FirstName>
                                  <MiddleName>Ticket</MiddleName>
                                  <LastName>Activation</LastName>
                                  <Email>example@gmail.com</Email>
                                  <Street1>123 Gateway</Street1>
                                  <Street2>Apt 3</Street2>
                                  <State>PA</State>
                                  <City>Gilbertsville</City>
                                  <Zip>19525</Zip>
                                  <DOB>1990-10-31</DOB>
                                  <Phone>1234567890</Phone>
                                  <CountryCode>US</CountryCode>
                                  <AllowEmail>YES</AllowEmail>
                              </Contact>
                          </PackageDetail>
                          <PackageDetail>
                              <PLU>E0020101-INACTIVE</PLU>
                              <VisualID>88001000040</VisualID>
                              <Price>10</Price>
                              <EventID>1213</EventID>
                              <CapacityID>1264</CapacityID>
                                                                                                      141
eGalaxy Server Interface Specification                                          8 ActivateTicket Message
                              <CapacityID>1264</CapacityID>
                              <SessionID>26</SessionID>
                              <Contact>
                                  <FirstName>Inactive</FirstName>
                                  <MiddleName>Ticket</MiddleName>
                                  <LastName>Activation</LastName>
                                  <Email>example@gmail.com</Email>
                                  <Street1>123 Gateway</Street1>
                                  <Street2>Apt 3</Street2>
                                  <State>PA</State>
                                  <City>Gilbertsville</City>
                                  <Zip>19525</Zip>
                                  <DOB>1990-10-31</DOB>
                                  <Phone>1234567890</Phone>
                                  <CountryCode>US</CountryCode>
                                  <AllowEmail>YES</AllowEmail>
                              </Contact>
                          </PackageDetail>
                          <PackageDetail>
                              <PLU>E0020101-INACTIVE</PLU>
                              <VisualID>88001000041</VisualID>
                              <Price>10</Price>
                              <EventID>1213</EventID>
                              <CapacityID>1264</CapacityID>
                              <SessionID>26</SessionID>
                              <Contact>
                                  <FirstName>Inactive</FirstName>
                                  <MiddleName>Ticket</MiddleName>
                                  <LastName>Activation</LastName>
                                  <Email>example@gmail.com</Email>
                                  <Street1>123 Gateway</Street1>
                                  <Street2>Apt 3</Street2>
                                  <State>PA</State>
                                  <City>Gilbertsville</City>
                                  <Zip>19525</Zip>
                                  <DOB>1990-10-31</DOB>
                                  <Phone>1234567890</Phone>
                                  <CountryCode>US</CountryCode>
                                  <AllowEmail>YES</AllowEmail>
                              </Contact>
                          </PackageDetail>
                      </Package>
                  </Ticket>
              </Tickets>
          </TicketActivation>
          <Payments>
              <Payment>
                  <PaymentCode>79</PaymentCode>
                  <Description>Activation</Description>
                  <Amount>50</Amount>
              </Payment>
          </Payments>
      </Body>
  </Envelope>

8.1.5.2 Example ActivateTicket Request to activate one detail of two packages




                                                                                                    142
eGalaxy Server Interface Specification                                                         8 ActivateTicket Message
  <Envelope>
      <Header>
          <SourceID>Exchange</SourceID>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicket</MessageType>
          <TimeStamp>2019-10-15 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketActivation>
              <Command>ActivatePackageDetail</Command>
              <CustomerID>10</CustomerID>
              <Tickets>
                  <Ticket>
                      <VisualID>60001000038</VisualID>
                      <PLU>1-PKGINACTIVEEVENTS</PLU>
                      <Price>50</Price>
                      <Package>
                          <PackageDetail>
                              <PLU>E0020101-INACTIVE</PLU>
                              <VisualID>88001000039</VisualID>
                              <Price>10</Price>
                              <EventID>1250</EventID>
                              <CapacityID>1270</CapacityID>
                              <SessionID>33</SessionID>
                          </PackageDetail>
                      </Package>
                  </Ticket>
                  <Ticket>
                      <VisualID>60001000045</VisualID>
                      <PLU>1-PKGINACTIVEEVENTS</PLU>
                      <Price>50</Price>
                      <Package>
                          <PackageDetail>
                              <PLU>E0020101-INACTIVE</PLU>
                              <VisualID>88001000046</VisualID>
                              <Price>10</Price>
                              <EventID>1260</EventID>
                              <CapacityID>1300</CapacityID>
                              <SessionID>33</SessionID>
                          </PackageDetail>
                      </Package>
                  </Ticket>
              </Tickets>
          </TicketActivation>
          <Payments>
              <Payment>
                  <PaymentCode>79</PaymentCode>
                  <Description>Activation</Description>
                  <Amount>100</Amount>
              </Payment>
          </Payments>
      </Body>
  </Envelope>

8.1.5.3 Example ActivateTicket ActivatePackageDetail Response with Errors (Event activation)




                                                                                                                   143
eGalaxy Server Interface Specification                                                8 ActivateTicket Message
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <MessageType>ActivateTicketResponse</MessageType>
          <SessionID>2</SessionID>
          <SourceID>Exchange</SourceID>
          <TimeStamp>2019-10-17 11:44:20</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>1400</StatusCode>
              <StatusText>Ticket activation request error</StatusText>
          </Status>
          <TicketActivationErrors>
              <TicketActivationError>
                  <VisualID>88001000172</VisualID>
                  <StatusCode>1405</StatusCode>
                  <StatusText>Ticket already active</StatusText>
              </TicketActivationError>
              <TicketActivationError>
                  <VisualID>88001000142</VisualID>
                  <StatusCode>1450</StatusCode>
                  <StatusText>This product is not a detail of package with VisualID 60001000171</StatusText>
              </TicketActivationError>
          </TicketActivationErrors>
      </Body>
  </Envelope>




                                                                                                               144
eGalaxy Server Interface Specification                                                                       9 QueryTicket Message
9 QueryTicket Message
The QueryTicket message is used to lookup a package, ticket, stored value (debit) card, or a pass, as well as its usage and its lineage. To
look up a package, ticket, stored value, or a pass, the VisualID (typically the "barcode number") is provided in the QueryTicket request.
When RFID media is associated with those entitlements the RFID media details may be provided in the QueryTicket request instead of the
VisualID. The QueryTicket message also returns the data for the requested fields. The purpose of the QueryTicket message is to look up a
package, package detail, ticket, stored value, or a pass, and because of that QueryTicket messages can be sent in real-time only. Message
QueryTicket cannot be sent within a File to eGalaxy, the file will be rejected with error "Unknown message type".
Following sections describes the QueryTicket message in detail.

9.1 Package, Ticket or Pass Look up fields
The following elements are supported to use within the QueryTicket message for package, ticket or pass look up. The required <Queries>
element can contain one or many <Query> elements. All the specified tickets will be looked up and the message may return data for each,
or error information if there was a problem finding or returning any tickets.

 Field                 Description                                                                                                 Type
 VisualID              Scan code or barcode as read from scanner; combination of AccessCode and ID (Ticket or Pass)                Text (40)
                       (Required for <Query> otherwise optional) Note: This is optional if <PassAccount> was given.
                       Note that querying a Package Detail VisualID will return information all the entire package.
 PassAccount           Specified the Pass Account (Passes.PassAcct) to lookup a pass record. This is an optional                   Text(24)
                       element under <Query>. This is an alternate way to lookup a pass record. If <VisualID > above
                       was not given, this field is used to lookup a pass record. If both <VisualID> and <PassAccount>
                       were given, the <VisualID> VisualID and the Pass record retrieved from <PassAccount> VisualID
                       must match.
 PassRenewUpgradeMode Indicates the mode for returning renewal and upgrade options for passes. If this value is 0 or not           Numeric
                       found, the options for renewals are returned based on the pass kind of the original pass. This is
                       the original, default behavior. If this value is 1, it returns renewal and upgrade items based on
                       the renewal and upgrade options from the pass item record. If the value is 1, Upgradable is YES if
                       the pass item allows upgrades and the pass is valid. Renewable is YES if the pass is valid. (Pass
                       only) (Optional)
 IncludePassPicture    Indicates if the image data from the pass picture should be returned in the response if the lookup          Boolean
                       is for a pass. (Pass only) (Optional) (Prefer use of IncludePicture, seen below starting in version
                       6.5.12)
 IncludeContractData   Indicates if the ID of the payment contract that the pass belongs to should be returned if the              Boolean
                       lookup is for a pass. (Pass only) (Optional)
 IncludeIsValid        Indicates if an indicator of whether the pass or ticket is currently valid should be returned in the        Boolean
                       response. (Pass and Ticket only) (Optional)
 IncludeRenewalPass    Indicates if information about a renewal pass should be included in the response for a pass that            Boolean
                       has been renewed but is still valid until it expires. (Pass only) (Optional)
 RenewalPassVisualID   For a ticket request, this indicates that this is an exchange for a pass renewal in pass portal. The        Text(40)
                       visual ID is for the pass that the ticket is being exchanged for. If this field is not blank, the list of
                       available renewal options configured on the ticket item record will be returned in the response (if
                       the Renewable and RenewablePLUList fields are requested). (Ticket only) (Optional)
 IncludePicture        Indicates if the image data from the picture should be returned in the response. This can be used           Boolean
                       for tickets or passes.(Optional)
 ReturnAttributes      Indicates if the product attributes should be returned in the response. (Optional)                          Boolean
 Contact               Returns data about the contact associated with this ticket. For the format, refer to the <Contact>          Element
                       section under "Common Element Formats". (Pass or ticket) (Optional)
 IncludePendingPicture Indicates if the image data from the pass's picture that is pending approval should be returned in          Boolean
                       the response. (Pass only) (Optional)
 RenewalPassVisualID   For a ticket request, this indicates that this is an exchange for a pass renewal in pass portal. The        Text(40)
                       visual ID is for the pass that the ticket is being exchanged for. If this field is not blank, the list of
                       available renewal options onfigured on the ticket item record will be returned in the response (if
                       the Renewable and RenewablePLUList fields are requested). (Ticket only) (Optional)
 IncludePicture        Indicates if the image data from the picture should be returned in the response. This can be used           Boolean
                       for tickets or passes.(Optional)

                                                                                                                                          145
eGalaxy Server Interface Specification                                                                            9 QueryTicket Message
 ValidateAsNonScan            Indicates if the item requested should be treated as if it were scanned before being looked up.             Boolean
 UsageDateStart               Indicates the start date when requesting usage. If this field is specified by itself, only usage            DateTime
                              whose UseTime occurs after (and including) the start date will be returned. If this field is
                              specified with a UsageEndDate, only usage records whose UseTime falls between the two dates
                              will be returned. This can be used for tickets or passes.(Optional)
 UsageDateEnd                 Indicates the end date when requesting usage. If this field is specified by itself, only usage              DateTime
                              whose UseTime occurs before (and including) the end date will be returned. If this field is
                              specified with a UsageStartDate, only usage records whose UseTime falls between the two dates
                              will be returned. This can be used for tickets or passes.(Optional)
 MaxUsageRecords              Indicates the maximum number of usage records to return when usage is requested. Specifying                 Numeric
                              zero or omitting this field returns all usage records. This can be used for tickets or passes.
                              (Optional)
 LineageDateStart             Indicates the start date when requesting lineage. If this field is specified by itself, only lineage        DateTime
                              that occurs after (and including) the start date will be returned. If this field is specified with a
                              LineageEndDate, only lineage records that occur between the two dates will be returned. This
                              can be used for tickets or passes.(Optional)
 LineageDateEnd               Indicates the end date when requesting lineage. If this field is specified by itself, only lineage          DateTime
                              that occurs before (and including) the end date will be returned. If this field is specified with a
                              LineageStartDate, only lineage records that occur between the two dates will be returned. This
                              can be used for tickets or passes.(Optional)
 MaxLineageRecords            Indicates the maximum number of lineage records to return when lineage is requested.                        Numeric
                              Specifying zero or omitting this field returns all lineage records. This can be used for tickets or
                              passes.(Optional)
 ValidateAsNonScan            Indicates if the item requested should be treated as if it were scanned before being looked up.             Boolean

9.2 Package, Ticket or Pass DataRequest fields
The following fields can be requested in the <DataRequest> element. When multiple lookups are requested, each one will return the data
specified here. Fields are grouped according to the significance of the data in those fields for better readability.
Following fields represent the data specific to a package, ticket, stored value card, or a pass:

 Field                            Description                                                                                              Type
 VisualID                         Scan code or barcode as read from scanner; combination of AccessCode and ID (Ticket or                   Text
                                  Pass) (Required for <Query> otherwise optional) Note: This is optional if <PassAccount> was              (40)
                                  given. . Note that querying a Package Detail VisualID will return information all the entire
                                  package.
 PassAccount                      Specified the Pass Account (Passes.PassAcct) to lookup a pass record. This is an optional                Text(24)
                                  element under <Query>. This is an alternate way to lookup a pass record. If <VisualID > above
                                  was not given, this field is used to lookup a pass record. If both <VisualID> and <PassAccount>
                                  were given, the <VisualID> VisualID and the Pass record retrieved from <PassAccount>
                                  VisualID must match.
 ItemKind                         Specifies the kind of the item by looking at the Items.Kind using the PLU on the ticket record.          Numeric
                                  Currently four values are supported: 1- Regular/Ticket, 2- Pass, 3- Package, and 4- Debit Card.
                                  (Optional)
 Status                           For a ticket, represents the current status of the ticket (0-Valid, 1-Voided, 2-Returned, 3-             Numeric
                                  Inactive, 4-Activated, 5-Upgraded, 6-Replaced, 7-Reprinted) For a pass, represents the current
                                  status of the pass (0- Valid, 1- Voided, 2- Returned, 3- Replaced, 4- Purchaser, 5- Expired, 6-
                                  Upgraded, 7-Reprinted, 8-Blocked, 9-UnIssued) (Ticket or Pass) (Optional)
 StatusDescription                Data in this field represents the current status of the ticket or pass in plain text. For example if     Text
                                  Status of a Ticket is 0 in Tickets table, this field will return “Valid”. (Ticket or Pass) (Optional)
 Exchangeable                     Set if the ticket is exchangeable (Ticket Only) (Optional)                                               Boolean
 Returnable                       Set if the ticket is returnable (Ticket or Pass) (Optional)                                              Boolean
 Upgradeable                      Set if the ticket or pass is upgradeable (Optional)                                                      Boolean
 Renewable                        Set if the pass is renewable (Pass or Ticket if the ticket is an exchange for a pass renewal)            Boolean
                                  (Optional)
 PaymentContractAutoRenew         Set if the pass is on Payment Contract and the Contract is set to Auto-Renew (Pass only)                 Boolean
                                  (Optional)
                                                                                                                                                  146
eGalaxy Server Interface Specification                                                                        9 QueryTicket Message
 ProductNo                   Product number from which the pass was sold (Ticket or Pass) (Optional)                                  Numeric
 FKeyNo                      For ticket, combination of the ticket type’s level and FKey numbers within the product: FKeyNo           Numeric
                             = (Level * 100) + FKey. For pass, function key number from which the pass was sold (Ticket or
                             Pass) (Optional)
 PassRenewUpgradeMode        Indicates the mode for returning renewal and upgrade options for passes. If this value is 0 or           Numeric
                             not found, the options for renewals are returned based on the pass kind of the original pass.
                             This is the original, default behavior. If his value is 1, it returns renewal and upgrade items
                             based on the renewal and upgrade options from the pass item record. If the value is 1,
                             Upgradable is YES if the pass item allows upgrades and the pass is valid. Renewable is YES if
                             the pass is valid. (Pass only) (Optional)
 IncludePassPicture          Indicates if the image data from the pass picture should be returned in the response if the              Boolean
                             lookup is for a pass. (Pass only) (Optional)
 IncludeContractData         Indicates if the ID of the payment contract that the pass belongs to should be returned if the           Boolean
                             lookup is for a pass. (Pass only) (Optional)
 IncludeIsValid              Indicates if the response should include information regarding whether the pass or ticket is             Boolean
                             currently valid. (Pass and Ticket only) (Optional)
 IncludeRenewalPass          Indicates if information about a renewal pass should be included in the response for a pass              Boolean
                             that has been renewed but is still valid until it expires. (Pass only) (Optional)
 RenewalPassVisualID         For a ticket request, this indicates that this is an exchange for a pass renewal in pass portal.         Text(40)
                             The visual ID is for the pass that the ticket is being exchanged for. If this field is not blank, the
                             list of available renewal options onfigured on the ticket item record will be returned in the
                             response (if the Renewable and RenewablePLUList fields are requested). (Ticket only)
                             (Optional)
 HasPicture                  Set if the product has a picture attached (Optional)                                                     Boolean
 ProductAttributes           The product attribute list. This will only be returned if <ReturnAttributes> was set to YES in the       Element
                             request. (Optional)
 HasPendingPicture           Set if the pass has a picture pending approval (Pass only) (Optional)                                    Boolean
 SVBalance                   Used only with stored value (Debit) cards, giving the current amount remaining on the stored             Element
                             value card.
 SVIsValid                   Used only with stored value (Debit) cards, set to True if card is valid, False otherwise.                Element
 SVIsLockedOut               Used only with stored value (Debit) cards, set to True if the card is currently locked out, False        Element
                             otherwise.
 SystemLogonExistsForContact Indicates if the response should include information regarding whether the assigned contact is           Boolean
                             associated with a SystemLogon record. (Ticket or Pass) (Optional)
 EligibleAddons              Optional products that can be added onto an existing ticket, pass or package.                            Element

NOTE: “SystemLogonExistsForContact” is only supported in the DataRequest element and NOT in the VerifyFields element. Additionally, this
field must be specifically requested and is NOT included in the wildcard.
Following field represents the AppleWallet data of a package, ticket or a pass:

 Field           Description                                                                                                             Type
 AppleWalletData Turns on the option to return resolved AppleWallet template data. This option is enabled by default for a wild          N/A
                 card field request. (Optional)

Following fields represents the Accounting details of a package, ticket or a pass:

 Field                    Description                                                                                                Type
 PLU                      This is the PLU for the package, ticket or pass (Package, Ticket or Pass) (Optional)                       Text (20)
 ItemName                 This is the Name for the package, ticket or pass (Package, Ticket or Pass) (Optional)                      Text (40)
 ItemDescription          This is the Description for the package, ticket or pass (Package, Ticket or Pass) (Optional)               Text (60)
 Price                    Price of the package, ticket or a pass (Package, Ticket or Pass)                                           Currency
 RemainingPrice           Remaining Price on the ticket (Ticket only) (Optional)                                                     Currency
 Tax                      Tax amount of the package, ticket or a pass (Package, Ticket or Pass) (Optional)                           Currency
 RemainingTax             Remaining Tax amount on the ticket (Ticket only) (Optional)                                                Currency
 TaxMethods               The TaxMethods is an 8-character string, with each character being a ‘0’, ‘1’ or ‘2’. These eight          Text (8)

                                                                                                                                            147
eGalaxy Server Interface Specification                                                                         9 QueryTicket Message
                      characters refer to the eight possible taxes (similar to the Taxes column), and how each tax is
                      applied to this ticket (Package, Ticket or Pass) (Optional)
 Company              Company this package, ticket or pass was sold from (Package, Ticket or Pass) (Optional)                        Numeric
 TaxFlags             An 8-character string containing an array of Y/N flags indicating which of the 8 possible taxes were           Text (8)
                      applied when purchasing this package, ticket or pass (Package, Ticket or Pass) (Optional)
 DiscountID           Foreign key to Discounts.DiscountID, specifying the discount applied to this ticket, or 0 for no               Numeric
                      discount. (Package, Ticket or Pass) (Optional)
 RetailPrice          Price at which the ticket was sold to the guest by the reseller Web store. Supported for tickets sold          Currency
                      on the Reseller Web store only. Value of zero is returned when looking up tickets that were not sold
                      on the Reseller Web store. (Package, Ticket or Pass) (Optional)
 ExternalPrice        Price at which the ticket was sold to the reseller. Supported for tickets sold on the Reseller Web             Currency
                      store only. Value of zero is returned when looking up tickets that were not sold on the Reseller Web
                      store. (Package, Ticket or Pass) (Optional)
 AgencyID             AgencyID of the node where the ticket was sold originally (Ticket or Pass) (Optional)                          Numeric
 DiscAmt              Total discount applied to the ticket when it was sold (Ticket or Pass) (Optional)                              Currency
 UpgradeValue         Upgrade value on the item record (Ticket or Pass) (Optional)                                                   Currency
 OnlineExchangeStatus The value indicating if a ticket event/date change can occur, or the reason it cannot. See table               Numeric
                      below of statues. (Ticket or Package) (Optional)
 ActivateByDate       The last date that the product can be activated (Optional)                                                     DateTime
 EndOfLifeDate        The end of life date of a ticket. (Ticket or Package) (Optional)                                               DateTime
 EndOfLifeLockDate    The date when the ticket will be locked once it has reached its end of life date, calculated as the            DateTime
                      ticket's end of life date plus the lock window. If the lock window is disabled, there will not be a lock
                      date (Ticket or Package)
 EndOfLifeLockStatus  The lock status of a ticket related to its end of life date. A ticket is locked if the current date is past    Text (8)
                      the end of life date including the lock window. A ticket that is locked will be heavily limited as to
                      what actions can be performed on it. (Ticket or Package) (Optional)
 EndOfLifeDateStatus 0 - default, 1- indicates that the EndOfLifeDate was overriden. (Ticket or Package)                             Numeric
 SalesChannelID       The ID of the sales channel that the ticket or pass was originally sold under. (Ticket or Pass)                Numeric
 OnlineExchangeStatus Values       Description
 0                                 Valid for event/date change
 1                                 PLU is not configured for event/date change
 2                                 Ticket or Package event/date has been changed the max number of times
 3                                 Ticket or Package has a VisitDate within the restricted event/date change window
 4                                 Ticket or Package has been used
 5                                 Ticket or Package has an invalid status

Following fields represents the Access Control specific data of a package, ticket or a pass:

 Field                 Description                                                                                                  Type
 AccessCode            Access code of the package, ticket or a pass (Package, Ticket or Pass) (Optional)                            Numeric
 AccessCodeName        Name of the AccessCode (Package, Ticket or Pass) (Optional)                                                  Text (30)
 TicketDate            Date when the ticket is valid for use (Date specific ticket) (Ticket only) (Optional)                        DateTime
 LockedOut             Set when the package, ticket or pass is locked out (Package, Ticket or Pass) (Optional)                      Boolean
 LockoutReason         Reason if the package, ticket or pass is locked out (Lockouts.LockoutMsg) (Package, Ticket or                Text (80)
                       Pass) (Optional)
 UseCount              Number of times the ticket or pass is used (Ticket or Pass) (Optional)                                       Numeric
 RemainingUse          Remaining uses left as recorded on the ticket or a pass (Ticket or Pass) (Optional)                          Numeric
 ValidatedRemainingUse Remaining uses as calculated by the ACS Validator for tickets and passes. Note: This is an                   Numeric
                       estimated number as facility and operations do matter when calculating remaining uses. (Ticket
                       or Pass) (Optional)
 UpdateStatus          Update Status represented by the Ticket.UpdateCode (Ticket only) (Optional)                                  Text
 ReplenishmentStatus   Replenish status for the current ticket in the chain. See replenish status values in the table               Numeric
                       below. (Ticket only) (Optional)

                                                                                                                                              148
eGalaxy Server Interface Specification                                                                               9 QueryTicket Message
 TotalRemainingUse       Total usage remaining for the replenished tickets in the chain that may be possible for use. If                 Numeric
                         the ticket is not an Auto Replenished ticket, remaining use is the usage available for the ticket.
                         Note: The remaining usage will not work or multi-park tickets. Usage calculations assume all
                         operations are active. Actual usage available may vary when scanned at specific facilities with
                         only limited operations active (Ticket only) (Optional)
 IsAutoReplenish         Indicates if the ticket is auto replenishable. To determine if a ticket is auto replenishable, the              Boolean
                         AutoReplenish flag on the AccessCode of the ticket is checked (Ticket only) (Optional)
 ExpirationDate          Expiration date from the ticket record(Ticket only) (Optional)                                                  DateTime
 InitialUseDate          First date that the entitlement was used. Will be blank if the entitlement has never been used.                 DateTime
 ValidatedExpirationDate Expiration date of the ticket or pass, as determined by the ACS Validator. Note: This is an                     DateTime
                         estimated number as facility and operations do matter when calculating remaining uses. (Ticket
                         or Pass) (Optional)
 Picture                 The raw image data from the picture on a ticket. This will only be returned if <IncludePicture>                 String
                         was set to YES in the request. (Ticket only) (Optional)                                                         (bin.base64
                                                                                                                                         format)
 LastUsedDate                 The last date which the entitlement was used (Optional)                                                    DateTime
 IsValid                      Indicates if the pass or ticket is currently valid using status, expiration date, and any calendars        Boolean
                              on the access code or banks. This will only be returned if <IncludeIsValid> was set to YES in the
                              request. (Pass and Ticket only) (Optional)
 IsValidText                  Returns text corresponding to the value of the <IsValid> field above. This will only be returned if        Boolean
                              <IncludeIsValid> was set to YES in the request. (Pass and Ticket only) (Optional)

Below are the values for replenish status:

 Replenish Status Values      Description
 0                            Replenish is not applicable
 1                            Replenish is active
 2                            Replenish is used
 3                            Replenish is cancelled
 4                            Replenish is suspended

Following fields represents the Transaction specific data of a package, ticket or a pass:

 Field      Description                                                                                                                    Type
 NodeNo     POS node number where the ticket or pass was sold (Ticket only) (Optional)                                                     Numeric
 TransNo    The sequential ID number of the transaction (for a given NodeNo) from which the ticket belongs (Ticket only)                   Numeric
            (Optional)
 DateSold   Date when ticket or pass was sold (Ticket only) (Optional)                                                                     DateTime
 OrderID    Order ID if ticket was sold in Order Entry (Ticket only) (Optional)                                                            Numeric
 CustomerID Customer ID of the Order for which ticket was sold (Ticket only) (Optional)                                                    Numeric
 CustNo     A string containing the account number of the customer that purchased this ticket. This column is blank if the                 Text (10)
            ticket was not purchased by a customer with an account in the system, or if the ticket was added dynamically
            at the time of its first can. ( Ticket only) (Optional)

Following fields represents the Event specific data of a ticket or a pass:
| Field | Description | Type | |-------|-------------|------| | EventNo | Event ID of the event if ticket is an event ticket (Ticket only) (Optional) |
Numeric | | EventName | Name of the event (Ticket only) (Optional) | Text (25) | | EventTypeID | RMEvents.EventTypeID associated with
the event recorded on the ticket record | Numeric | | EventTypeName | EventTypes.Name associated with the event recorded on the ticket
record | Numeric | | StartDateTime | Date/time when event starts (Ticket only) (Optional) | DateTime | | EndDateTime | Date/time when
event is over (Ticket only) (Optional) | DateTime | | RSEventSectionName | Section name for a reserved seat ticket (Optional) | Text(10) | |
RSEventRowName | Row name for a reserved seat ticket (Optional) | Text(10) | | RSEventSeatName | Seat name for a reserved seat ticket
(Optional) | Text(10) | | RSEventSeatMapID | Unique identifier of the event seat map this ticket was purchased from (Optional) | Numeric |
| ItemEventTypeID | The current Items.EventType | Numeric | | ItemEventTypeName | If the Item record has an EventType configured, this
refers to the RMEventTypes.Name | Text | Following fields represent the specific option of a Package data request:

 Field                  Description                                                                                                             Type

                                                                                                                                                   149
eGalaxy Server Interface Specification                                                                       9 QueryTicket Message
 PackageDetailData Turns on the option to return requested fields of the package details as well as the package itself. This         N/A
                   option is enabled by default for a wild card field request. (Package only) (Optional)

The PackageDetailResponseMode element controls how package details are returned in the response.

 Element                   Description                                                                                      Type
 PackageDetailResponseMode Overrides setting of 'Default to single package detail in response' option on 'Query Ticket' tab Numeric
                           of the eGalaxy Source Configuration form. (Package only) (Optional)

Below are the values for PackageDetailResponseMode

 PackageDetailResponseMode Values         Description
 0                                        Use mode as defined on the eGalaxy Source
 1                                        Include only single detail in the response corresponding to the Query VisualID
 2                                        Include all package details in the response

NOTE: The <PackageDetailResponseMode> can only be specified in the <DataRequest> element directly under the <QueryTicket> element.
When the <PackageDetailResponseMode> is 1 no <DataRequest> elements are allowed under <Query> elements.
Following fields represents the data of a Pass:

 Field                     Description                                                                                         Type
 PassID                    Indicates the Galaxy pass ID value (Passes.PassNo) (Pass only) (Optional)                           Numeric
 PassAcct                  Pass account (Pass only) (Optional)                                                                 Text (24)
 FirstName                 Pass holder’s first name (Pass only) (Optional)                                                     Text (30)
 MiddleName                Pass holder’s middle name/initial (Pass only) (Optional)                                            Text (30)
 LastName                  Pass holder’s last name (Pass only) (Optional)                                                      Text (30)
 Street1                   Street address line 1 (Pass only) (Optional)                                                        Text (30)
 Street2                   Street address line 2 (Pass only) (Optional)                                                        Text (30)
 City                      Pass holder’s city (Pass only) (Optional)                                                           Text (40)
 State                     Pass holder’s state (Pass only) (Optional)                                                          Text (40)
 ZIP                       Pass holder’s ZIP/postal code (Pass only) (Optional)                                                Text (16)
 CountryCode               Pass holder’s country code (Pass only) (Optional)                                                   Text (2)
 Phone                     Pass holder’s telephone number (Pass only) (Optional)                                               Text (30)
 Email                     Pass holder’s e-mail address (Pass only) (Optional)                                                 Text (128)
 DOB                       Pass holders’ date of birth (Pass only) (Optional)                                                  DateTime
 DateOpened                Date when pass was opened (first issued) (Pass only) (Optional)                                     DateTime
 ValidDays                 Number of days the pass is valid (Pass only) (Optional)                                             Numeric
 Kind                      PassKind ID (Pass only) (Optional)                                                                  Numeric
 ValidUntil                The pass is valid until this day (Pass only) (Optional)                                             DateTime
 DateUsed                  Last date the pass was used (Pass only) (Optional)                                                  DateTime
 MasterPassID              ID of the primary pass of this pass (Pass only) (Optional)                                          Numeric
 PurchaserPassID           ID of the purchaser pass of this pass (Pass only) (Optional)                                        Numeric
 MaxParty                  Max number of people that can be admitted with this pass (Pass only) (Optional)                     Numeric
 ReissueCount              Number of times this pass was reissued (Pass only) (Optional)                                       Numeric
 User01                    User definable field #1 (Pass only) (Optional)                                                      Text (255)
 User02                    User definable field #2 (Pass only) (Optional)                                                      Text (255)
 User03                    User definable field #3 (Pass only) (Optional)                                                      Text (255)
 User04                    User definable field #4 (Pass only) (Optional)                                                      Text (255)
 User05                    User definable field #5 (Pass only) (Optional)                                                      Text (255)
 User06                    User definable field #6 (Pass only) (Optional)                                                      Text (255)
 User07                    User definable field #7 (Pass only) (Optional)                                                      Text (255)

                                                                                                                                        150
eGalaxy Server Interface Specification                                                                        9 QueryTicket Message
 User08                  User definable field #8 (Pass only) (Optional)                                                           Text (255)
 User09                  User definable field #9 (Pass only) (Optional)                                                           Text (255)
 User10                  User definable field #10 (Pass only) (Optional)                                                          Text (255)
 LimitCount              The number of times this pass was used to buy a pass-required ticket (Pass only) (Optional)              Numeric
 Category                Category number this pass belongs to (Pass only) (Optional)                                              Numeric
 SubCat                  Sub category number this pass belongs to (Pass only) (Optional)                                          Numeric
 ValueKind               Meaning of the value in the “Value” column (0- Currency or Money, 1- Points) (Pass only)                 Numeric
                         (Optional)
 Value                   Value on the pass (Pass only) (Optional)                                                                 Currency
 FKeyFlags               Function key options 1 to 8 (Y/N) (Pass only) (Optional)                                                 Text (8)
 FKeyKind                Function key kind (2-Pass, 6-Reissue, 7-Renewal, 13-Upgrade) (Pass only) (Optional)                      Numeric
 PriorPassAcct           Pass account number prior to upgrade/downgrade, renewal or reissue (Pass only) (Optional)                Text (24)
 PriorPassKind           Pass kind prior to upgrade/downgrade, renewal or reissue (Pass only) (Optional)                          Numeric
 PassNote                Any notes attached to the pass (Pass only) (Optional)                                                    Text
 MaxUses                 Maximum number of times the pass can be used (Pass only) (Optional)                                      Numeric
 RenewablePLUList        <RenewablePLUList> element (Pass or Ticket if the ticket is an exchange for a pass renewal)              Element
                         (Optional)
 UpgradePLUList          <UpgradePLUList> element (Optional)                                                                      Element
 IssuedBenefits          <IssuedBenefits> element. See the common element section of the API specification for more               Element
                         information (Pass only) (Optional)
 NonIssuedBenefits       <NonIssuedBenefits> element. See the common element section of the API specification for more            Element
                         information (Pass only) (Optional)
 NewExpirationDate       New expiration date for the pass being renewed (Pass only) (Optional) Note: The date has a valid         DateTime
                         value ONLY when the pass is currently renewable, if the pass is not renewable right now the field
                         may return incorrect value
 LoyaltyAccounts         <LoyaltyAccounts> element (Pass only) (Optional)                                                         Element
 PassRequiredInfo        <PassRequiredInfo> element is for information for the pass that relate to pass required ticket           Element
                         limits. (optional)
 PassPicture             The raw image data from the pass picture. This will only be returned if <IncludePassPicture> or          String
                         <IncludePicture≷ was set to YES in the request. (Pass only) (Optional)                                   (bin.base64
                                                                                                                                  format)
 ContractID              The ID of the payment contract that the pass belongs to. This will only be returned if                   Numeric
                         <IncludeContractData> was set to YES in the request. (Pass only) (Optional)
 IsValid                 Indicates if the pass or ticket is currently valid using status, expiration date, and any calendars on   Boolean
                         the access code or banks. This will only be returned if <IncludeIsValid> was set to YES in the
                         request. (Pass and Ticket only) (Optional)
 RenewalPass             <RenewalPass> element Contains data about a pass renewal for a pass that has been renewed,               Element
                         but is still valid until it expires. (Pass only) (Optional)
 JointMemberData         This Field Request will return back a Members collection, displaying all data for each member            Element
                         within the joint membership. See the common element section of the API specification for more
                         information on the Members element (Pass only, Joint Membership Only) (Optional)
 PendingPicture          The raw image data from the pass's picture that is pending approval. This will only be returned if       String
                         <IncludePendingPicture> was set to YES in the request. (Pass only) (Optional)                            (bin.base64
                                                                                                                                  format)
 MustUseByDate           The date the pass must be used by. (Pass only) (Optional)                                                DateTime
 MustUseByDateLapsed     The date the pass must be used by has lapsed. (Pass only) (Optional)                                     Boolean
 MustUseByState          Indicates the first use state. (Pass only) (Optional)                                                    Numeric
 MustUseByStateText      Description of the first use state. (Pass only) (Optional)                                               Text

NOTE: “RenewablePLUList” is only supported in DataRequest element and NOT in the VerifyFields element. Also field “RenewablePLUList”
when returned in the QueryTicketResponse message it has a different format than other fields please see section “QueryTicketResponse
Message> Response Message Element> <DataRequestResponse> Element” for more information.
The LoyaltyAccounts element is also only supported in the DataRequest element. See the <LoyaltyAccounts> under the “Common Elements
Format” section.
                                                                                                                                              151
eGalaxy Server Interface Specification                                                                       9 QueryTicket Message
The PassRequiredInfo element is only supported in the DataRequest element.
The “IssuedBenefits” and “NonIssuedBenefits” fields are only supported in DataRequest element and NOT in the VerifyFields element. Both
fields must be specifically requested and are NOT included in the wildcard..
Following fields represents the data of a Pass Kind:

 Field                      Description                                                                                            Type
 PassKindName               Name of the given pass’s pass kind (Pass only) (Optional)                                              Text (30)
 ExpireType                 Type of expiration configured on the given pass’s pass kind (Pass only) (Optional)                     Numeric
 ExpireValue                Expiration value configured on the given pass’s pass kind If ExpireType = 0, 2, 4 then ExpireValue     Numeric
                            is number of days (Pass.ValidDays) If ExpireType = 1 then ExpireValue is a date (Pass.ValidUntil)      or
                            (Pass only) (Optional)                                                                                 DateTime
 ExpireValueDays,           If ExpireType = 3, then the ExpireValueDays, ExpireValueMonths and ExpireValueYears elements           Numeric
 ExpireValueMonths,         will contain the values configured on the pass kind. (Pass only) (Optional)
 ExpireValueYears

The possible values for the Status of a super ticket as shown below.

 Pass Kind Expiry Type    Description
 0                        Pass will expire in a set number of days
 1                        Pass will expire on a set date
 2                        Pass will expire a set number of days from first use
 3                        Pass will expire based on a specific interval from the date the pass is issued to the end of the month
 4                        Pass will expire in a set number of days from the pass sale date

To request usage the UsageRecords element must be contained within the DataRequest element. UsageRecords are only supported in the
DataRequest Element. The rest of the fields listed in this table are supported within the UsageRecords element.
To request the usage records for individual package details the PackageDetailData field needs to be included in the <DataRequest>
element and the VisualID field needs to be included in the <UsageRecords> element.

 Field          Description                                                                                                        Type
 UsageRecords   <UsageRecords> - Can only be used in the data request element. (Optional)                                          Element
 *              Requests all usage fields                                                                                          Text
 UseTime        Date and time ticket was used.                                                                                     Datetime
 VisualID       Scan code or barcode as read from scanner                                                                          Text(40)
 AccessCode     Access code of the ticket or a pass                                                                                Numeric
 IDNo           The barcode as read from the scanner, same as VisualID.                                                            Text(40)
 Code           The type of activity                                                                                               Numeric
 ACP            The ID number of the Access Control Point at which the activity took place.                                        Numeric
 ACPName        The name of the Access Control Point at which the activity took place.                                             Text
 Status         The result of the activity.                                                                                        Text
 Qty            The number of guests admitted or value redeemed.                                                                   Numeric
 UseNo          The number of time the ticket or pass was used.                                                                    Numeric
 Operator       The user logged on at the time the Usage record was created. This value is 0 if nobody was logged-on.              Numeric
 EntryMethod    A number representing the method used to enter the barcode into the system which in-turn generated the             Numeric
                Usage record.
 SerialNo       The ID portion of the ticket which was scanned to produce the Usage record.                                        Text(20)
 Override       If the operator overrides an invalid ticket and lets the guest into the park, this field stores the original       Numeric
                reason the ticket was rejected.
 UsageCondition A number representing the condition of TCon32 when the ticket was scanned.                                         Numeric
 OriginalStatus A number representing the value of the Usage Status, before running the Offline Recategorization program,          Numeric
                “ResetUse”.
 BankNo         The bank detail number validated by ACS2. In other words, the bank detail that was valid and allowed the           Numeric

                                                                                                                                         152
eGalaxy Server Interface Specification                                                                           9 QueryTicket Message
                 admission. This bank number is sent to TCON32 which uses it to determine the correct ticket bank detail to
                 remove uses from.
 BiometricStatus Status of Biometric activity performed during this usage                                                              Text
 OperationID     Operation that was used                                                                                               Numeric
 FacilityID      Facility where the ticket, pass or package activity was performed                                                     Numeric
 AttractionID    Attraction where the ticket, pass or package activity was performed                                                   Numeric

To request lineage the LineageRecords element must be contained within the DataRequest element. LineageRecords are only supported in
the DataRequest Element. The rest of the fields listed in this table are supported within the LineageRecords element.

 Field             Description                                                                                                      Type
 LineageRecords    <LineageRecords> - Can only be used in the data request element. (Optional)                                      Element
 *                 Requests all lineage fields                                                                                      Text
 VisualID          Scan code or barcode as read from scanner                                                                        Text(40)
 DateSold          Date the ticket was sold                                                                                         DateTime
 Description       PLU description of the ticket                                                                                    Text
 Amount            Amount paid for this ticket                                                                                      Currency
 Valid             Indicates if the super ticket in the lineage is valid                                                            Boolean
 RemainingUse      Remaining uses left for the super ticket. If the super ticket is not valid then this field has a value of zero   Numeric
 ExpirationDate    Expiration date of the super ticket. If the super ticket is not valid then this field has no data (is empty)     DateTime
 NodeNo            Node number where the ticket, pass or package was sold                                                           Numeric
 Status            Status of the super ticket.                                                                                      Numeric

The possible values for the Status of a super ticket as shown below.

 Super Ticket Status    Description
 0                      Ticket is Active
 1                      Ticket is Inactive
 2                      Ticket is De-activated
 3                      Ticket is Replaced
 4                      Ticket is Upgraded
 5                      Ticket is Returned
 6                      Ticket is Voided
 7                      Ticket is Reprinted

9.3 Status Request Fields
Following elements are supported to use within the <StatusRequest> element of the QueryTicket message for getting the current Status on
the fields.

9.4 Status Request Fields
 Field              Description                                                                Type
 FirstName          Pass holder’s first name (Optional)                                        Text (30)
 MiddleName         Pass holder’s middle name/initial (Optional)                               Text (30)
 LastName           Pass holder’s last name (Optional)                                         Text (30)
 Street1            Street address line 1 (Optional)                                           Text (30)
 Street2            Street address line 2 (Optional)                                           Text (30)
 City               Pass holder’s city (Optional)                                              Text (40)
 State              Pass holder’s state (Optional)                                             Text (40)
 ZIP                Pass holder’s ZIP/postal code (Optional)                                   Text (16)
 CountryCode        Pass holder’s country code (Optional)                                      Text (2)
                                                                                                                                               153
eGalaxy Server Interface Specification                                                                          9 QueryTicket Message
 Phone               Pass holder’s telephone number (Optional)                                 Text (30)
 Email               Pass holder’s e-mail address (Optional)                                   Text (128)
 DOB                 Pass holders’ date of birth (Optional)                                    DateTime
 MasterPassID        ID of the primary pass of this pass (Optional)                            Numeric
 PurchaserPassID     ID of the purchaser pass of this pass (Optional)                          Numeric
 MaxParty            Max number of people that can be admitted with this pass (Optional)       Numeric
 MaxUses             Maximum number of times the pass can be used (Optional)                   Numeric
 User01              User definable field #1 (Optional)                                        Text (255)
 User02              User definable field #2 (Optional)                                        Text (255)
 User03              User definable field #3 (Optional)                                        Text (255)
 User04              User definable field #4 (Optional)                                        Text (255)
 User05              User definable field #5 (Optional)                                        Text (255)
 User06              User definable field #6 (Optional)                                        Text (255)
 User07              User definable field #7 (Optional)                                        Text (255)
 User08              User definable field #8 (Optional)                                        Text (255)
 User09              User definable field #9 (Optional)                                        Text (255)
 User10              User definable field #10 (Optional)                                       Text (255)

9.5 Message Format
Using the fields described in the “Package, Ticket or Pass DataRequest Fields” section, a source can look up the details of a package, ticket
or a pass from the eGalaxy Attraction Server. For this the source needs to send a QueryTicket message to the eGalaxy Server.

9.5.1 QueryTicket Message
The QueryTicket message is sent by the web site to eGalaxy Server to request the data specific to a package, ticket or a pass. This message
can also be used to verify the package, ticket or pass data. The eGalaxy Server returns the value of the data field requested and also returns
the result of the match for the data to be verified.

9.5.1.1 Request Message Parameters

The QueryTicket message consists of the following parameters:

 Field             Description                                          Type
 Queries           <Queries> element                                    Element
 DataRequest       <DataRequest> element                                Element
 VerifyFields      <VerifyFields> element (Optional)                    Element
 StatusRequest     <StatusRequest> element (Optional)(Passes Only)      Element

Note: The DataRequest, VerifyFields, and StatusRequest elements can appear outside of the Queries element or inside a specific Query
element. The fields under these elements will be read and used from the Query element first, if it does not exist there, it is read from the
element outside of the Queries element.
Note: For products that are not date or event specific but have Visit Date based price schedules it is necessary to specifiy the visit date in
the TimeStamp field of the QueryTicket message Header element. This will assure the correct return of the product Upgrade Value and
realted Upgrade prices of the product Upgrade list prices.

  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2019-08-17 17:00:05</TimeStamp> <!-- USE THIS FOR VISIT DATE -->
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          ...
      </Body>
  </Envelope>

                                                                                                                                            154
eGalaxy Server Interface Specification                                                                     9 QueryTicket Message
When all of the lookups require the same information, the best way to request data is with these elements outside of the Queries element.
When some lookups required different data, it is best to add this inside the Query element. See example, ’Example QueryTicket Request –
Regular DataRequest & VerifyFields in the <Query> element’ below.
The system does not return the requested information (fields in DataRequest, VerifyFields, or StatusRequest element) in the same order as
given in the QueryTicket request.

9.5.1.1.1 <Queries> Element

A Queries element contains one or many <Query> elements which contain fields that are used to find the entitlement in the Galaxy’s SQL
database. Multipl <Query> elements can be contained in the message to facilitate multiple lookups in a single message:

 Field         Description                                                                                                       Type
 VisualID      Specifies the VisualID of the ticket or pass for which details are requested                                      Text
 PassAccount   Pass account of the pass holder. The pass account given here is compared with the pass account on the Pass        Text
               record in Galaxy when request is processed by eGalaxy server(Optional)
 LastName      Last name of the pass holder. The last name given here is compared with the Last name on the Pass record in       Text
               Galaxy when request is processed by eGalaxy server. The comparison is case insensitive (Optional)
 DataRequest <DataRequest> element                                                                                               Element
 VerifyFields  <VerifyFields> element (Optional)                                                                                 Element
 StatusRequest <StatusRequest> element (Optional)(Passes Only)                                                                   Element

When looking up ticket or pass only by VisualID the <Query> element in the QueryTicket request is populated with data for <VisualID>
element only:

  <Queries>
      <Query>
          <VisualID>123456789</VisualID>
      </Query>
  </Queries>

When looking up a pass by VisualID and Pass Account the <Query> element in the QueryTicket request is populated with data for
<VisualID> and <PassAccount> elements:

  <Queries>
      <Query>
          <VisualID>123456789</VisualID>
          <PassAccount>8256789</PassAccount>
      </Query>
  </Queries>

When looking up a pass by Pass Account the <Query> element in the QueryTicket request is populated with data for <PassAccount>
element only:

  <Queries>
      <Query>
          <PassAccount>8256789</PassAccount>
      </Query>
  </Queries>

You can also lookup a pass by VisualID and LastName. To do this you need to send the <Query> element in the QueryTicket request
populated with data for both <VisualID> and <LastName> elements:

  <Queries>
      <Query>
          <PassAccount>8256789</PassAccount>
          <LastName>Smith</LastName>
      </Query>
  </Queries>

9.5.1.1.2 <DataRequest> Element

All fields listed under the section “Package, Ticket or Pass DataRequest Fields” section are supported under DataRequest element.

                                                                                                                                        155
eGalaxy Server Interface Specification                                                                        9 QueryTicket Message
A DataRequest element contains one or more of the Field elements:

 Field Description                             Type
 Field Field for which data is being requested Text

For example if the source is requesting the ItemKind, Status, and RemainingUse for a VisualID, following would be the structure of the
DataRequest element within the QueryTicket message:

  <DataRequest>
      <Field>ItemKind</Field>
      <Field>Status</Field>
      <Field>RemainingUse</Field>
  </DataRequest>

Wildcard * can be used in the DataRequest element to return data for all fields applicable to the VisualID (based on the Item Kind of the
ticket). If DataRequest element is missing in the QueryTicket message, eGalaxy reads it as a wildcard, and returns all applicable fields for
the given VisualID (based on the ItemKind of the VisualID).
For example, if the VisualID in the QueryTicket request is a Pass and if the DataRequest element has a field with wildcard (*), the
QueryTicketResponse message from eGalaxy server contains data for all fields that are related to a Pass.
For packages, the special <PackageDetailResponseMode> element is allowed in <DataRequest> element to override the eGalaxy Source
setting of the 'Default to single package detail in response' option. The <DataRequest> must be directly under te <QueryTicket> element.
See 'specific option of a Package data request' section above for more details.

  <DataRequest>
      <PackageDetailResponseMode>1</PackageDetailResponseMode>
      <Field>Status</Field>
      <Field>RemainingUse</Field>
  </DataRequest>

9.5.1.2 Example QueryTicket Request – Multiple Lookups




                                                                                                                                          156
eGalaxy Server Interface Specification                            9 QueryTicket Message
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2015-10-27 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                  </Query>
                  <Query>
                      <VisualID>123456790</VisualID>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>Price</Field>
                  <Field>EventNo</Field>
                  <Field>CustomerID</Field>
                  <Field>AccessCode</Field>
                  <Field>UseCount</Field>
                  <Field>RemainingUse</Field>
                  <UsageRecords>
                      <Field>UseTime</Field>
                  </UsageRecords>
                  <LineageRecords>
                      <Field>DateSold</Field>
                      <Field>Description</Field>
                  </LineageRecords>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.3 Example QueryTicketResponse – Multiple Lookups Response




                                                                                   157
eGalaxy Server Interface Specification                                           9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="" PassAccount="">
                      <DataRequestResponse>
                          <ItemKind>1</ItemKind>
                          <Status>0</Status>
                          <PLU>0010102</PLU>
                          <Price>50.00</Price>
                          <EventNo>0</EventNo>
                          <CustomerID>0</CustomerID>
                          <AccessCode>11</AccessCode>
                          <UseCount>0</UseCount>
                          <RemainingUse>5</RemainingUse>
                          <UsageRequestResponse>
                              <UsageRecords/>
                          </UsageRequestResponse>
                          <LineageRequestResponse>
                              <LineageRecords>
                                  <LineageRecord>
                                      <DateSold>2015-09-30 08:05:00</DateSold>
                                      <Description>Child GA</Description>
                                  </LineageRecord>
                                  <LineageRecord>
                                      <DateSold>2015-09-30 08:05:00</DateSold>
                                      <Description>Child GA</Description>
                                  </LineageRecord>
                              </LineageRecords>
                          </LineageRequestResponse>
                      </DataRequestResponse>
                  </Product>
                  <Product VisualID="" PassAccount="">
                      <DataRequestResponse>
                          <ItemKind>1</ItemKind>
                          <Status>0</Status>
                          <PLU>0010102</PLU>
                          <Price>50.00</Price>
                          <EventNo>0</EventNo>
                          <CustomerID>0</CustomerID>
                          <AccessCode>11</AccessCode>
                          <UseCount>2</UseCount>
                          <RemainingUse>3</RemainingUse>
                          <UsageRequestResponse>
                              <UsageRecord>
                                  <UseTime>2015-10-26 10:09:54</UseTime>
                              </UsageRecord>
                              <UsageRecord>
                                  <UseTime>2015-10-26 11:10:07</UseTime>
                              </UsageRecord>
                          </UsageRequestResponse>
                          <LineageRequestResponse>
                              <LineageRecords/>
                          </LineageRequestResponse>
                      </DataRequestResponse>
                  </Product>
              </Products>
          </QueryTicketResponse>
      </Body>
  </Envelope>

9.5.1.4 Example QueryTicket Request – Regular DataRequest & VerifyFields


                                                                                                  158
eGalaxy Server Interface Specification                                                                    9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>Price</Field>
                  <Field>EventNo</Field>
                  <Field>CustomerID</Field>
                  <Field>AccessCode</Field>
                  <Field>UseCount</Field>
                  <Field>RemainingUse</Field>
                  <UsageRecords>
                      <Field>UseTime</Field>
                  </UsageRecords>
                  <LineageRecords>
                      <Field>DateSold</Field>
                      <Field>Description</Field>
                  </LineageRecords>
              </DataRequest>
              <VerifyFields>
                  <DOB>1975-07-19 00:00:00</DOB>
                  <ZIP>19512</ZIP>
              </VerifyFields>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.5 Example QueryTicket Request – Regular DataRequest & VerifyFields in the <Query> element

In the example below, the second <Query> element is looking up a Pass. The <VerifyFields> element is placed right in the <Query> element
so that each lookup can verify fields relevant to the item type.




                                                                                                                                     159
eGalaxy Server Interface Specification                            9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                      <VerifyFields>
                          <EventNo>3251</EventNo>
                      </VerifyFields>
                  </Query>
                  <Query>
                      <PassAccount>12345</PassAccount>
                      <VerifyFields>
                          <DOB>1975-07-19 00:00:00</DOB>
                          <ZIP>19512</ZIP>
                      </VerifyFields>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>Price</Field>
                  <Field>EventNo</Field>
                  <Field>CustomerID</Field>
                  <Field>AccessCode</Field>
                  <Field>UseCount</Field>
                  <Field>RemainingUse</Field>
                  <UsageRecords>
                      <Field>UseTime</Field>
                  </UsageRecords>
                  <LineageRecords>
                      <Field>DateSold</Field>
                      <Field>Description</Field>
                  </LineageRecords>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.6 Example QueryTicket Request – DataRequest with wildcard




                                                                                   160
eGalaxy Server Interface Specification                                          9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>*</Field>
                  <UsageRecords>
                      <Field>*</Field>
                  </UsageRecords>
                  <LineageRecords>
                      <Field>*</Field>
                  </LineageRecords>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.7 Example QueryTicket Request – DataRequest for Package

Request for a set of data fields from the package header only:

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>AccessCode</Field>
                  <UsageRecords>
                      <Field>*</Field>
                  </UsageRecords>
              </DataRequest>
         </QueryTicket>
      </Body>
  </Envelope>

Request for a set of data fields from the package header and package details:




                                                                                                 161
eGalaxy Server Interface Specification                                                                       9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>PackageDetailData</Field>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>AccessCode</Field>
              </DataRequest>
         </QueryTicket>
      </Body>
  </Envelope>

Request for a usage records from the package header and package details:
Note: If the wild card field is not used in UsageRecords element then VisualID field must be included for the usages to show in
PackageDetail elements.

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>PackageDetailData</Field>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>AccessCode</Field>
                  <Field>VisualID</Field>
                  <UsageRecords>
                      <Field>VisualID</Field>
                      <Field>UseTime</Field>
                  </UsageRecords>
              </DataRequest>
         </QueryTicket>
      </Body>
  </Envelope>

9.5.1.8 Example QueryTicket Request - DataRequest with PassAccount




                                                                                                                                  162
eGalaxy Server Interface Specification                                       9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-11-16 11:01:50</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <PassAccount>82000039</PassAccount>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>*</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.9 Example QueryTicket Request – DataRequest with VisualID & LastName

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-11-16 11:02:55</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>50082000039</VisualID>
                      <LastName>Smith</LastName>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>*</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.10 Example QueryTicket Request – DataRequest with PassRequiredInfo

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-11-16 11:02:55</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>50082000039</VisualID>
                      <LastName>Smith</LastName>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>PassRequiredInfo</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>


                                                                                              163
eGalaxy Server Interface Specification                                                                           9 QueryTicket Message
9.5.1.11 Example QueryTicket Request – DataRequest for Picture

Below is an example to request that the Picture data be returned for a ticket and a pass. The <IncludePicture> must be set to 'Yes' and the
PassPicture and Picture fields must be requested in the data request.

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2012-01-18 14:50:32</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>50082000039</VisualID>
                      <LastName>Smith</LastName>
                      <IncludePicture>YES</IncludePicture>
                  </Query>
                  <Query>
                      <PassAccount>290120</PassAccount>
                      <IncludePicture>YES</IncludePicture>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>Status</Field>
                  <Field>DateSold</Field>
                  <Field>PassPicture</Field>
                  <Field>Picture</Field>
                  . . .
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.11.1 <VerifyFields> Element

The VerifyFields element is used for the verification of the ticket or pass data. A VerifyFields element could contain all fields listed in the
“Package, Ticket or Pass DataRequest Fields” section. The data to verify is given in the VerifyFields element and eGalaxy returns the result
of the match (data matched or not) in the QueryTicketResponse message.

  <VerifyFields>
      <DOB>1975-07-19 00:00:00</DOB>
      <ZIP>19512</ZIP>
  </VerifyFields>

9.5.1.11.2 <StatusRequest> Element

The <StatusRequest> element is supported within the <QueryTicket> element message (same as <DataRequest> or <VerifyFields>
elements). A <StatusRequest> element is supported for a Pass only;. All fields listed under the section “Status Request Fields” section are
supported under StatusRequest element.
A StatusRequest element contains one or more of the Field elements:

 Field Description                               Type
 Field Field for which status is being requested Text

For example, if the source wants to get the Status of fields address fields Street1, Street2, City, State, and ZIP it will need to send the
following StatusRequest element of QueryTicket request.




                                                                                                                                              164
eGalaxy Server Interface Specification                                                                        9 QueryTicket Message
  <StatusRequest>
      <Field>Street1</Field>
      <Field>Street2</Field>
      <Field>City</Field>
      <Field>State</Field>
      <Field>ZIP</Field>
  </StatusRequest>

Wildcard * can be used in the StatusRequest element to return data for all fields supported under the StatusRequest element. If
StatusRequest element is not present in the QueryTicket request or is present but empty (</StatusRequest>), eGalaxy will not return any
error or data and the element will be ignored.
The response for the fields within StatusRequest element is a text “Editable”, “Viewable”, or “Restricted”. To find the status of a field,
eGalaxy uses the Data Entry restrictions defined on the pass kind. Following table explains when a field is Editable, Viewable or Restricted.

 Field            Description
 Status
 Editable   “User Privilege Required for Editing” is unchecked OR Option “User Privilege Required for Editing” (under the DataEntry tab
 Option     of the Pass kind edit screen) is checked and the user (user logged on to the eGalaxy which is defined under the General tab
            of the eGalaxy Configurations) has the privilege to view the given field
 Viewable “User Privilege Required for Viewing” is unchecked OR Option “User Privilege Required for Viewing” is checked and the user
 Option     has the privilege to view the given field
 Restricted If a field is not Editable and not Viewable then it is Restricted

Following is the response for the StatusRequest element:

  <StatusRequestResponse>
      <Street1>Editable</Street1>
      <Street2>Editable</Street2>
      <City>Editable</City>
      <State>Viewable</State>
      <ZIP>Restricted</ZIP>
  </StatusRequestResponse>

Following are some of the examples of QueryTicket request with <StatusRequest> element:
9.5.1.11.2.1 Example QueryTicket message with <StatusRequest> in Request




                                                                                                                                          165
eGalaxy Server Interface Specification                                                                   9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
              </DataRequest>
              <VerifyFields>
                  <PassAcct>123456</PassAcct>
              </VerifyFields>
              <StatusRequest>
                  <Field>FirstName</Field>
                  <Field>LastName</Field>
                  <Field>Street1</Field>
                  <Field>Street2</Field>
                  <Field>City</Field>
                  <Field>State</Field>
                  <Field>ZIP</Field>
                  <Field>Email</Field>
              </StatusRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.11.2.2 Example QueryTicket message with wild card (*) in request


  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
              </DataRequest>
              <VerifyFields>
                  <PassAcct>123456</PassAcct>
              </VerifyFields>
              <StatusRequest>
                  <Field>*</Field>
              </StatusRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.1.11.2.3 Example QueryTicket message with <ReturnAttributes>, <ProductAttributes> and <HasPicture>




                                                                                                                          166
eGalaxy Server Interface Specification                                                                      9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2017-05-02 09:23:57</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Queries>
                  <Query>
                      <VisualID>123456789</VisualID>
                      <ReturnAttributes>123456789</ReturnAttributes>
                  </Query>
              </Queries>
              <DataRequest>
                  <Field>HasPicture</Field>
                  <Field>ProductAttributes</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

9.5.2 QueryTicketResponse Message
The QueryTicketResponse message is sent by the eGalaxy Attraction Server in response of the QueryTicket message. The
QueryTicketResponse message returns the data for the fields requested in the DataRequest element as well as the result of the match of
the data requested in the VerificationRequest element.

9.5.2.1 Response Message elements

The body of the message contains the following fields:

 Field               Description                                                                                           Type
 Status              <Status> containing the overall status of the message. In the case of multiple lookups, some may have Element
                     failed and some may have succeeded
 QueryTicketResponse <QueryTicketResponse> contains the response data for all of the lookups                               Element

The QueryTicketResponse message consists of a <Products> element that contains one or many <Product> elements depending on the
number of <Query> elements contained in the request. Each <Product> contains a <DataRequestResponse> as well as attributes for
VisualID and PassAccount to denote the product that it corresponds to in the request, provided they are not restricted by the eGalaxy Source
configuration.

9.5.2.1.1 <DataRequestResponse> Element

The DataRequestResponse element is used to return the data requested in the DataRequest element of the QueryTicket message. A
DataRequestResponse element could contain all fields explained in the “Package, Ticket or Pass DataRequest Fields” section. If usage or
lineage was also requested, those elements will appear within the DataRequestResponse.

  <DataRequestResponse>
      <ItemKind>1</ItemKind>
      <Status>0</Status>. . .
      <UsageRequestResponse>
          <UsageRecords>
              <UsageRecord>- - </UsageRecord>
              <UsageRecord>- - </UsageRecord>
          </UsageRecords>
      </UsageRequestResponse>
  </DataRequestResponse>

If the ticket requested is a pass, then the DataRequestResponse element will contain a Members element which will in turn contain one or
more Member elements. Members/Member elements are defined within the Common Elements section of this document.
The RenewablePLUList field has a different format than other fields when returned by eGalaxy. The RenewablePLUList field has one or more
<Item> elements. Following is the format of the <Item> element:


                                                                                                                                        167
eGalaxy Server Interface Specification                                                                      9 QueryTicket Message
 Field          Description                                                                                                    Type
 PLU            Item’s Galaxy product lookup number i.e. item code                                                             Text (20)
 Price          Price on the PLU                                                                                               Currency
 PassKindName   Name of the pass kind configured on the given PLU                                                              Text (30)
 PaymentPlanID  ID of the first available payment plan for the renewal item. This is the first payment plan for the renewal    Numeric
                item that is valid for the postal code on the pass. (Only populated if PassRenewUpgradeMode is 1)
 ExpirationDate The calculated expiration date for the renewal. (Only populated if PassRenewUpgradeMode is 1)                  DateTime

Below is an example of the RenewablePLUList in the DataRequestResponse:

  <DataRequestResponse>
      <RenewablePLUList>
          <Item>
              <PLU>0030201</PLU>
              <Price>20.00</Price>
              <PaymentPlanID/>
              <ExpirationDate/>
          </Item>
          <Item>
              <PLU>0040301</PLU>
              <Price>30.00</Price>
              <PaymentPlanID/>
              <ExpirationDate/>
          </Item>
      </RenewablePLUList>
  </DataRequestResponse>

The UpgradePLUList field is similar to the RenewablePLUList field. This element has one or more <Item> elements. The following is the
format of the <Item> element for the UpgradePLUList:

 Field                              Description                                                                                Type
 PLU                                Item’s Galaxy product lookup number i.e. item code                                         Text (20)
 Price                              Price on the PLU                                                                           Currency
 UpgradePrice                       Price of the upgrade. This is the difference between the upgrade item price and the        Currency
                                    original pass price.
 AlternateUpgradePrice              Alternate price of the upgrade. This field is shown for Ticket to Ticket downgrades        Currency
                                    only when the eGalaxy Source is configured to allow downgrade rule overide. To use
                                    this alternate price specify <UseAlternateUpgradePrice> with YES or NO value on the
                                    upgrade Ticket Order Line.
 PaymentPlanID                      The unique identifier for the payment plan option                                          Numeric
 Description                        The description of the payment plan                                                        Text(256)
 Name                               The name of the payment plan                                                               Text(50)
 ItemKind                           The Kind of the upgrade item                                                               Numeric
 ItemName                           The Name of the upgrade item                                                               Text (40)
 AttachedPackagePLU                 Item.PackagePLU                                                                            Text (20)
 UpgradePriceIncludesEligibleAddons Indicates if the UpgradePrice accounts for eligible addons                                 Boolean

Below is an example of the UpgradePLUList in the DataRequestResponse:




                                                                                                                                        168
eGalaxy Server Interface Specification                                                                     9 QueryTicket Message
  <DataRequestResponse>
      <UpgradePLUList>
          <Item>
              <PLU>0030201</PLU>
              <Price>20.00</Price>
              <UpgradePrice>5.00</UpgradePrice>
              <PaymentPlans>
                  <PaymentPlan>
                      <PaymentPlanID>1</PaymentPlanID>
                      <Description>12 Month Payment Plan</Description>
                      <Name>12 Month Plan</Name>
                  </PaymentPlan>
              </PaymentPlans>
              <ItemKind>99</ItemKind>
              <ItemName>A Great Payment Plan</ItemName>
          </Item>
          <Item>
              <PLU>0040301</PLU>
              <Price>30.00</Price>
              <UpgradePrice>10.00</UpgradePrice>
              <ItemKind>999</ItemKind>
              <ItemName>Adult Ticket</ItemName>
          </Item>
      </UpgradePLUList>
  </DataRequestResponse>

The EligibleAddons field displays what can be added onto a ticket or pass based on the attached package configured in Galaxy to create a
package on the fly. Only package details with the 'Optional' issuance type are eligible as package on the fly addons.

 Field             Description                                                                                                  Type
 PLU               Item’s Galaxy product lookup number i.e. item code                                                           Text
                                                                                                                                (20)
 PackageDetailID   ID of the package detail contained in the attached package                                                   Numeric
 Quantity          Quantity limit as configured on the package detail                                                           Numeric
 Price             Price for the package detail                                                                                 Currency
 IsRequired        If an issued detail has a Package Detail setting to 'Enforce Mandatory Upgrade', then an eligible addon      Boolean
                   that is part of the upgrade path may be deemed required

Below is an example of the EligibleAddons in the DataRequestResponse:

  <DataRequestResponse>
      <EligibleAddons>
          <Item>
              <PLU>1DayMealVoucher</PLU>
              <PackageDetailID>591</PackageDetailID>
              <Quantity>1</Quantity>
              <EnforceMandatoryUpgrade>YES</EnforceMandatoryUpgrade>
          </Item>
          <Item>
              <PLU>1DayParking</PLU>
              <PackageDetailID>592</PackageDetailID>
              <Quantity>Unlimited</Quantity>
              <EnforceMandatoryUpgrade>YES</EnforceMandatoryUpgrade>
          </Item>
          <Item>
              <PLU>CouponBook</PLU>
              <PackageDetailID>596</PackageDetailID>
              <Quantity>1</Quantity>
              <EnforceMandatoryUpgrade>NO</EnforceMandatoryUpgrade>
          </Item>
      </EligibleAddons>
  </DataRequestResponse>

ItemKind Values:

 Value Description
 1     Regular/Ticket
 2     Pass
                                                                                                                                      169
eGalaxy Server Interface Specification                                                                     9 QueryTicket Message
 3       Paid In
 4       Paid Out
 5       Group
 6       Reissue Pass
 7       Renew Pass
 8       Item
 9       Reserved
 10      Debit Card
 11      Recharge
 12      Debit Reissue
 13      Upgrade Pass
 14      Exchange
 15      Package
 16      Assigned Seat
 17      Fee
 18      Donation
 19      Express charge
 20      Member add-on
 21      Member card reissue
 22      Food and Beverage item

Note that all ItemKind values may not appear in the UpgradePLUList but are presented here for completeness.
If the <LoyaltyAccounts> field was specified in the DataRequest element, the <LoyaltyAccounts> element will be included in the response,
with one or more <LoyaltyAccount> elements. See the <LoyaltyAccounts> under the “Common Elements Format” section.
The <RenewalPass> element in the QueryTicket message contains information about a renewal pass when the requested pass has been
renewed but is still valid until it’s expiration date. It has the following fields:

 Field        Description                                               Type
 PLU          PLU of the renewal pass                                   Text (20)
 ValidFrom    ValidFrom value of the renewal pass.                      Currency
 ValidUntil   ValidUntil value (expiration date) of the renewal pass.   Text (30)

Below is an example of the RenewalPass element in the DataRequestResponse:

  <DataRequestResponse>
      <RenewalPass>
          <PLU>0030201</PLU>
          <ValidFrom>2012-10-11 00:00:00</ValidFrom>
          <ValidUntil>2013-10-10 00:00:00</ValidUntil>
      </RenewalPass>
  </DataRequestResponse>

If the <ProductAttributes> field was specified in the DataRequest element and the <ReturnAttributes> element was included in <Query>
element, the <ProductAttributes> element will be included in the response, with one or more <ProductAttribute> elements.
The <ProductAttribute> element in the QueryTicket message contains the following fields:

 Field                    Description                                                            Type
 AttributeValueGroupID    UniqueID for a group of values.                                        Numeric
 Name                     The name of the Attribute Definition.                                  Text
 Value                    The attribute value.                                                   Text
 Sequence                 Zero based index that shows the order of the attributes in the list.   Numeric

Below is an example of the <ProductAttributes> element in the DataRequestResponse:

                                                                                                                                       170
eGalaxy Server Interface Specification                                                                        9 QueryTicket Message
  <DataRequestResponse>
      <ProductAttributes>
          <ProductAttribute>
              <AttributeValueGroupID>345</AttributeValueGroupID>
              <Name>Purpose</Name>
              <Sequence>0</Sequence>
              <Value>General Admission</Value>
          </ProductAttribute>
      </ProductAttributes>
  </DataRequestResponse>

9.5.2.1.2 <VerifyFieldsResponse> Element

The VerifyFieldsResponse element is used to return the data verification requests in the VerifyFields element of the QueryTicket message.
A VerifyFieldsResponse element could contain all the fields explained in the “Package, Ticket or Pass Look up Fields” section, the only
restriction is the data of the fields will be always BOOLEAN (YES or NO). The value of YES for a field indicates that the data for that field
given in the VerifyFields element matches with its Galaxy equivalent. The value of NO indicates that the data does not match with the
Galaxy equivalent.

  <VerifyFieldsResponse>
      <DOB>YES</DOB>
      . . .
  </VerifyFieldsResponse>

9.5.2.2 Example QueryTicketResponse – Regular DataRequest & VerifyFields

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="" PassAccount="">
                      <DataRequestResponse>
                          <ItemKind>1</ItemKind>
                          <Status>0</Status>
                          <PLU>TICKET0010101</PLU>
                          <Price>8.00</Price>
                          <EventNo>1234</EventNo>
                          <CustomerID>19</CustomerID>
                          <AccessCode>10</AccessCode>
                          <UseCount>0</UseCount>
                          <RemainingUse>1</RemainingUse>
                      </DataRequestResponse>
                      <VerifyFieldsResponse>
                          <DOB>YES</DOB>
                          <ZIP>YES</ZIP>
                      </VerifyFieldsResponse>
                  </Product>
              </Product>
          </QueryTicketResponse>
      </Body>
  </Envelope>

9.5.2.3 Example QueryTicketResponse – DataRequest with wildcard

If the DataRequestResponse element contains only one field with the wildcard ‘*’ (an asterisk), the DataRequestResponse element in the
QueryTicketResponse message returns all applicable fields for the given ItemKind.



                                                                                                                                           171
eGalaxy Server Interface Specification                               9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="" PassAccount="">
                      <DataRequestResponse>
                          <ItemKind>1</ItemKind>
                          <Status>0</Status>
                          <Exchangeable>NO</Exchangeable>
                          <Returnable>YES</Returnable>
                          <PLU>TICKET0010101</PLU>
                          <Price>8.00</Price>
                          <RemainingPrice>0.00</RemainingPrice>
                          <Tax>0</Tax>
                          <RemainingTax>0</RemainingTax>
                          <TaxMethods>NNNNNNNN</TaxMethods>
                          <AccessCode>10</AccessCode>
                          <AccessCodeName>ADULT</AccessCodeName>
                          <TicketDate/>
                          <LockedOut>No</LockedOut>
                          <UseCount>0</UseCount>
                          <RemainingUse>1</RemainingUse>
                          <UpdateStatus>0</UpdateStatus>
                          <NodeNo>82</NodeNo>
                          <TransNo>1234</TransNo>
                          <DateSold>2004-02-01 00:00:00</DateSold>
                          <OrderID>1234</OrderID>
                          <CustomerID>19</CustomerID>
                      </DataRequestResponse>
                  </Product>
              </Products>
          </QueryTicketResponse>
      </Body>
  </Envelope>

9.5.2.4 Example QueryTicketResponse – DataRequest for Package

Response to request for data from package header only:




                                                                                      172
eGalaxy Server Interface Specification                                            9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="" PassAccount="">
                      <DataRequestResponse>
                          <AccessCode>70</AccessCode>
                          <ItemKind>3</ItemKind>
                          <PLU>PACKAGE</PLU>
                          <Status>0</Status>
                      </DataRequestResponse>
                  </Product>
              </Products>
          </QueryTicketResponse>
      </Body>
  </Envelope>

Response to request for data from package header and package details:

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="" PassAccount="">
                      <DataRequestResponse>
                          <AccessCode>70</AccessCode>
                          <ItemKind>3</ItemKind>
                          <PLU>PACKAGE</PLU>
                          <Status>0</Status>
                          <Package>
                              <PackageDetail>
                                  <AccessCode>10</AccessCode>
                                  <ItemKind>1</ItemKind>
                                  <PLU>TICKET0010101</PLU>
                                  <Status>0</Status>
                              </PackageDetail>
                              <PackageDetail>
                                  <AccessCode>10</AccessCode>
                                  <ItemKind>1</ItemKind>
                                  <PLU>TICKET0010102</PLU>
                                  <Status>0</Status>
                              </PackageDetail>
                          </Package>
                      </DataRequestResponse>
                  </Product>
              </Products>
          </QueryTicketResponse>
      </Body>
  </Envelope>

Response to request for data and usage from package header and package details:

                                                                                                   173
eGalaxy Server Interface Specification                                                 9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="" PassAccount="">
                      <DataRequestResponse>
                          <AccessCode>70</AccessCode>
                          <ItemKind>3</ItemKind>
                          <PLU>PACKAGE</PLU>
                          <Status>0</Status>
                          <Package>
                              <PackageDetail>
                                  <AccessCode>10</AccessCode>
                                  <ItemKind>1</ItemKind>
                                  <PLU>TICKET0010101</PLU>
                                  <Status>0</Status>
                                  <VisualID>10017000456</VisualID>
                                  <UsageRequestResponse>
                                      <UsageRecords>
                                          <UsageRecord>
                                              <UseTime>2017-06-16 21:24:57</UseTime>
                                              <VisualID>10017000456</VisualID>
                                          </UsageRecord>
                                      </UsageRecords>
                                  </UsageRequestResponse>
                              </PackageDetail>
                              <PackageDetail>
                                  <AccessCode>10</AccessCode>
                                  <ItemKind>1</ItemKind>
                                  <PLU>TICKET0010102</PLU>
                                  <Status>0</Status>
                                  <VisualID>10017000455</VisualID>
                                  <UsageRequestResponse>
                                      <UsageRecords>
                                          <UsageRecord>
                                              <UseTime>2017-06-16 17:24:57</UseTime>
                                              <VisualID>10017000455</VisualID>
                                          </UsageRecord>
                                      </UsageRecords>
                                  </UsageRequestResponse>
                              </PackageDetail>
                          </Package>
                      </DataRequestResponse>
                  </Product>
              </Products>
              <UsageRequestResponse>
                  <UsageRecords>
                      <UsageRecord>
                          <UseTime>2017-06-16 17:24:57</UseTime>
                          <VisualID>10017000455</VisualID>
                      </UsageRecord>
                      <UsageRecord>
                          <UseTime>2017-06-16 21:24:57</UseTime>
                          <VisualID>10017000456</VisualID>
                      </UsageRecord>
                  </UsageRecords>
              </UsageRequestResponse>
          </QueryTicketResponse>
      </Body>
  </Envelope>

9.5.2.5 Example QueryTicketResponse - with StatusRequestResponse


                                                                                                        174
eGalaxy Server Interface Specification                      9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="" PassAccount="">
                      <DataRequestResponse>
                          <ItemKind>1</ItemKind>
                          <Status>0</Status>
                      </DataRequestResponse>
                      <VerifyFieldsResponse>
                          <PassAcct>YES</PassAcct>
                      </VerifyFieldsResponse>
                      <StatusRequestResponse>
                          <FirstName>Viewable</FirstName>
                          <LastName>Viewable</LastName>
                          <Street1>Editable</Street1>
                          <Street2>Editable</Street2>
                          <City>Editable</City>
                          <State>Editable</State>
                          <ZIP>Editable</ZIP>
                          <Email>Restricted</Email>
                      </StatusRequestResponse>
                  </Product>
              </Products>
          </QueryTicketResponse>
      </Body>
  </Envelope>

9.5.2.6 Example QueryTicketResponse – with errors




                                                                             175
eGalaxy Server Interface Specification                                                  9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>1300</StatusCode>
              <StatusText>QueryTicket request error: 1 of 1 lookups contained errors</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="" PassAccount="">
                      <QueryTicketErrors>
                          <DataRequestErrors>
                              <DataRequestError>
                                  <ErrorCode>1301</ErrorCode>
                                  <ErrorText>Invalid field(s) Price. This field is restricted on the
  source</ErrorText>
                              </DataRequestError>
                              <DataRequestError>
                                  <ErrorCode>1303</ErrorCode>
                                  <ErrorText>Invalid field(s) ZIPCode. Field(s) does not apply to the item kind
  requested</ErrorText>
                              </DataRequestError>
                          </DataRequestErrors>
                          <VerifyFieldsErrors>
                              <VerifyFieldsError>
                                  <ErrorCode>1303</ErrorCode>
                                  <ErrorText>Invalid field(s) Fields. Field(s) does not apply to the item kind
  requested</ErrorText>
                              </VerifyFieldsError>
                          </VerifyFieldsErrors>
                      </QueryTicketErrors>
                  </Product>
              </Products>
          </QueryTicketResponse>
      </Body>
  </Envelope>

9.5.2.7 Example QueryTicketResponse - with multiple lookup with an error and success




                                                                                                              176
eGalaxy Server Interface Specification                                                        9 QueryTicket Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryTicketResponse</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2015-10-27 15:40:42</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>1300</StatusCode>
              <StatusText>QueryTicket request error: 1 of 2 lookups contained errors</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="11062956282">
                      <QueryTicketErrors>
                          <Errors>
                              <Error>
                                  <ErrorCode>999</ErrorCode>
                                  <ErrorText>An error occurred while processing the request: No data was loaded:
  this is not a Pass, Ticket, or Debit Card.</ErrorText>
                              </Error>
                          </Errors>
                          <DataRequestErrors/>
                      </QueryTicketErrors>
                  </Product>
                  <Product VisualID="11062956283" PassAccount="">
                      <DataRequestResponse>
                          <ItemKind>1</ItemKind>
                          <Status>0</Status>
                          <Exchangeable>NO</Exchangeable>
                          <Returnable>YES</Returnable>
                          <PLU>TICKET0010101</PLU>
                          <Price>8.00</Price>
                          <RemainingPrice>0.00</RemainingPrice>
                          <Tax>0</Tax>
                          <RemainingTax>0</RemainingTax>
                          <TaxMethods>NNNNNNNN</TaxMethods>
                          <AccessCode>10</AccessCode>
                          <AccessCodeName>ADULT</AccessCodeName>
                          <TicketDate/>
                          <LockedOut>No</LockedOut>
                          <UseCount>0</UseCount>
                          <RemainingUse>1</RemainingUse>
                          <UpdateStatus>0</UpdateStatus>
                          <NodeNo>82</NodeNo>
                          <TransNo>1234</TransNo>
                          <DateSold>2004-02-01 00:00:00</DateSold>
                          <OrderID>1234</OrderID>
                          <CustomerID>19</CustomerID>
                      </DataRequestResponse>
                  </Product>
              </Products>
          </QueryTicketResponse>
      </Body>
  </Envelope>

9.5.2.7.0.1 Example QueryTicketResponse message - with <ProductAttributes> and <HasPicture>




                                                                                                               177
eGalaxy Server Interface Specification                                                 9 QueryTicket Message
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>-1</MessageID>
          <MessageType>QueryTicketResponse</MessageType>
          <SourceID>Exchange</SourceID>
          <TimeStamp>2017-05-02 09:23:57</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <QueryTicketResponse>
              <Products>
                  <Product VisualID="123456789" PassAccount="">
                      <DataRequestResponse>
                          <HasPicture>NO</HasPicture>
                          <ProductAttributes>
                              <ProductAttribute>
                                  <AttributeValueGroupID>345</AttributeValueGroupID>
                                  <Name>Purpose</Name>
                                  <Sequence>0</Sequence>
                                  <Value>General Admission</Value>
                              </ProductAttribute>
                          </ProductAttributes>
                      </DataRequestResponse>
                  </Product>
              </Products>
          </QueryTicketResponse>
      </Body>
  </Envelope>




                                                                                                        178
eGalaxy Server Interface Specification                                               10 QueryTicket Message - Legacy Format
10 QueryTicket Message - Legacy Format
Starting in version eGalaxy version 7.0, the preferred message structure is the request and response format mentioned above. This allows
for multiple VisualIDs or PassAccounts to be looked up in a single QueryTicket call. For legacy purposes, calls can still be made for a single
VisualID or PassAccount lookup by using the format below. The same fields and query options are still available as mentioned above.
Please note the main difference is that the legacy format only supports a single <Query> element. The response will only return data for a
single lookup, so the response will not contain <Products> or <Product> elements found in the new format. In eGalaxy 7.0 and forward, it is
recommended using the new message format above, even if only performing a single lookup.

10.1 Legacy QueryTicket Request Format
10.1.1 Example QueryTicket Request – Regular DataRequest & VerifyFields
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>123456789</VisualID>
              </Query>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>Price</Field>
                  <Field>EventNo</Field>
                  <Field>CustomerID</Field>
                  <Field>AccessCode</Field>
                  <Field>UseCount</Field>
                  <Field>RemainingUse</Field>
                  <UsageRecords>
                      <Field>UseTime</Field>
                  </UsageRecords>
                  <LineageRecords>
                      <Field>DateSold</Field>
                      <Field>Description</Field>
                  </LineageRecords>
              </DataRequest>
              <VerifyFields>
                  <DOB>1975-07-19 00:00:00</DOB>
                  <ZIP>19512</ZIP>
              </VerifyFields>
          </QueryTicket>
      </Body>
  </Envelope>

10.1.2 Example QueryTicket Request – DataRequest with wildcard




                                                                                                                                           179
eGalaxy Server Interface Specification                                          10 QueryTicket Message - Legacy Format
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>123456789</VisualID>
              </Query>
              <DataRequest>
                  <Field>*</Field>
                  <UsageRecords>
                      <Field>*</Field>
                  </UsageRecords>
                  <LineageRecords>
                      <Field>*</Field>
                  </LineageRecords>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

10.1.3 Example QueryTicket Request – DataRequest for Package
Request for a set of data fields from the package header only:

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>123456789</VisualID>
              </Query>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>AccessCode</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

Request for a set of data fields from the package header and package details:




                                                                                                                  180
eGalaxy Server Interface Specification                         10 QueryTicket Message - Legacy Format
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>123456789</VisualID>
              </Query>
              <DataRequest>
                  <Field>PackageDetailData</Field>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
                  <Field>PLU</Field>
                  <Field>AccessCode</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

10.1.4 Example QueryTicket Request – DataRequest with PassAccount
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-11-16 11:01:50</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <PassAccount>82000039</PassAccount>
              </Query>
              <DataRequest>
                  <Field>*</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

10.1.5 Example QueryTicket Request – DataRequest with VisualID & LastName
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-11-16 11:02:55</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>50082000039</VisualID>
                  <LastName>Smith</LastName>
              </Query>
              <DataRequest>
                  <Field>*</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

10.1.6 Example QueryTicket Request – DataRequest with PassRequiredInfo

                                                                                                 181
eGalaxy Server Interface Specification                              10 QueryTicket Message - Legacy Format
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-11-16 11:02:55</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>50082000039</VisualID>
                  <LastName>Smith</LastName>
              </Query>
              <DataRequest>
                  <Field>PassRequiredInfo</Field>
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

10.1.7 Example QueryTicket Request – DataRequest for Pass Picture
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2012-01-18 14:50:32</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>50082000039</VisualID>
                  <LastName>Smith</LastName>
                  <IncludePicture>YES</IncludePicture>
              </Query>
              <DataRequest>
                  <Field>Status</Field>
                  <Field>DateSold</Field>
                  <Field>PassPicture</Field>
                  . . .
              </DataRequest>
          </QueryTicket>
      </Body>
  </Envelope>

10.1.8 Example QueryTicket message with in Request




                                                                                                      182
eGalaxy Server Interface Specification                                           10 QueryTicket Message - Legacy Format
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>123456789</VisualID>
              </Query>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
              </DataRequest>
              <VerifyFields>
                  <PassAcct>123456</PassAcct>
              </VerifyFields>
              <StatusRequest>
                  <Field>FirstName</Field>
                  <Field>LastName</Field>
                  <Field>Street1</Field>
                  <Field>Street2</Field>
                  <Field>City</Field>
                  <Field>State</Field>
                  <Field>ZIP</Field>
                  <Field>Email</Field>
              </StatusRequest>
          </QueryTicket>
      </Body>
  </Envelope>

10.1.9 Example QueryTicket message with wild card (*) in <StatusRequest>
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicket</MessageType>
      </Header>
      <Body>
          <QueryTicket>
              <Query>
                  <VisualID>123456789</VisualID>
              </Query>
              <DataRequest>
                  <Field>ItemKind</Field>
                  <Field>Status</Field>
              </DataRequest>
              <VerifyFields>
                  <PassAcct>123456</PassAcct>
              </VerifyFields>
              <StatusRequest>
                  <Field>*</Field>
              </StatusRequest>
          </QueryTicket>
      </Body>
  </Envelope>


10.2 Legacy QueryTicketResponse Message
10.2.1 Example QueryTicketResponse – DataRequest with wildcard
If the DataRequestResponse element contains only one field with the wildcard ‘*’ (an asterisk), the DataRequestResponse element in the
QueryTicketResponse message returns all applicable fields for the given ItemKind.



                                                                                                                                    183
eGalaxy Server Interface Specification                                  10 QueryTicket Message - Legacy Format
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <QueryTicketResponse>
              <DataRequestResponse>
                  <ItemKind>1</ItemKind>
                  <Status>0</Status>
                  <Exchangeable>NO</Exchangeable>
                  <Returnable>YES</Returnable>
                  <PLU>TICKET0010101</PLU>
                  <Price>8.00</Price>
                  <RemainingPrice>0.00</RemainingPrice>
                  <Tax>0</Tax>
                  <RemainingTax>0</RemainingTax>
                  <TaxMethods>NNNNNNNN</TaxMethods>
                  <AccessCode>10</AccessCode>
                  <AccessCodeName>ADULT</AccessCodeName>
                  <TicketDate/>
                  <LockedOut>No</LockedOut>
                  <UseCount>0</UseCount>
                  <RemainingUse>1</RemainingUse>
                  <UpdateStatus>0</UpdateStatus>
                  <NodeNo>82</NodeNo>
                  <TransNo>1234</TransNo>
                  <DateSold>2004-02-01 00:00:00</DateSold>
                  <OrderID>1234</OrderID>
                  <CustomerID>19</CustomerID>
              </DataRequestResponse>
          </QueryTicketResponse>
      </Body>
  </Envelope>

10.2.2 Example QueryTicketResponse – DataRequest for Package
Response to request for data from package header only:

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <QueryTicketResponse>
              <DataRequestResponse>
                  <AccessCode>70</AccessCode>
                  <ItemKind>3</ItemKind>
                  <PLU>PACKAGE</PLU>
                  <Status>0</Status>
              </DataRequestResponse>
          </QueryTicketResponse>
      </Body>
  </Envelope>

Response to request for data from package header and package details:




                                                                                                          184
eGalaxy Server Interface Specification                        10 QueryTicket Message - Legacy Format
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2014-09-11 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <QueryTicketResponse>
              <DataRequestResponse>
                  <AccessCode>70</AccessCode>
                  <ItemKind>3</ItemKind>
                  <PLU>PACKAGE</PLU>
                  <Status>0</Status>
                  <Package>
                      <PackageDetail>
                          <AccessCode>10</AccessCode>
                          <ItemKind>1</ItemKind>
                          <PLU>TICKET0010101</PLU>
                          <Status>0</Status>
                      </PackageDetail>
                      <PackageDetail>
                          <AccessCode>10</AccessCode>
                          <ItemKind>1</ItemKind>
                          <PLU>TICKET0010102</PLU>
                          <Status>0</Status>
                      </PackageDetail>
                  </Package>
              </DataRequestResponse>
          </QueryTicketResponse>
      </Body>
  </Envelope>

10.2.3 Example QueryTicketResponse – with StatusRequestResponse
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <QueryTicketResponse>
              <DataRequestResponse>
                  <ItemKind>1</ItemKind>
                  <Status>0</Status>
              </DataRequestResponse>
              <VerifyFieldsResponse>
                  <PassAcct>YES</PassAcct>
              </VerifyFieldsResponse>
              <StatusRequestResponse>
                  <FirstName>Viewable</FirstName>
                  <LastName>Viewable</LastName>
                  <Street1>Editable</Street1>
                  <Street2>Editable</Street2>
                  <City>Editable</City>
                  <State>Editable</State>
                  <ZIP>Editable</ZIP>
                  <Email>Restricted</Email>
              </StatusRequestResponse>
          </QueryTicketResponse>
      </Body>
  </Envelope>

10.2.4 Example QueryTicketResponse – with errors




                                                                                                185
eGalaxy Server Interface Specification                             10 QueryTicket Message - Legacy Format
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>1300</StatusCode>
              <StatusText>QueryTicket request error</StatusText>
          </Status>
          <QueryTicketErrors>
              <DataRequestErrors>
                  <DataRequestError>
                      <ErrorCode>1301</ErrorCode>
                      <ErrorText>Invalid field(s) Price. This field is restricted on the source</ErrorText>
                  </DataRequestError>
                  <DataRequestError>
                      <ErrorCode>1303</ErrorCode>
                      <ErrorText>Invalid field(s) ZIPCode. Field(s) does not apply to the item kind
  requested</ErrorText>
                  </DataRequestError>
              </DataRequestErrors>
              <VerifyFieldsErrors>
                  <VerifyFieldsError>
                      <ErrorCode>1303</ErrorCode>
                      <ErrorText>Invalid field(s) Fields. Field(s) does not apply to the item kind
  requested</ErrorText>
                  </VerifyFieldsError>
              </VerifyFieldsErrors>
          </QueryTicketErrors>
      </Body>
  </Envelope>




                                                                                                              186
eGalaxy Server Interface Specification                                                             11 Common Element Formats
11 Common Element Formats
This section describes the common elements used in variety of XML messages supported by eGalaxy server.
For example, the <Contact> element is used within an Orders message as well as within Customers and Contacts messages. Instead of
describing the same element in different places, they all are grouped under this section and referenced anywhere needed.

11.1 <Pass> Element
The <Pass> element contains fields related to a pass. A Pass element can be used in the body of messages like UpdatePass and Orders.
A Pass element contains following fields related to the Pass:

 Field                         Description                                                                                     Type
 VisualID                      Scan code or barcode as read from scanner; combination of AccessCode and ID (Optional)          Text (40)
                               (Required for UpdatePass, Orders with pass renewals) (Used by UpdatePass, Orders and
                               ImportPass message) If data for this field is not given in the ImportPass essage, then system
                               will generate a new VisualID based on the configuration on the PLU of the pass
 FirstName                     Pass holder’s first name (Optional) (Used by UpdatePass, Orders, and ImportPass message)        Text (30)
 MiddleName                    Pass holder’s middle name/initial (Optional) (Used by UpdatePass, Orders, and ImportPass        Text (30)
                               message)
 LastName                      Pass holder’s last name (Optional for UpdatePass message) (Required for Orders with new         Text (30)
                               passes and ImportPass message) (Used by UpdatePass, Orders and ImportPass message)
 Street1                       Street address line 1 (Optional) (Used by UpdatePass, Orders, and ImportPass message)           Text (30)
 Street2                       Street address line 2 (Optional) (Used by UpdatePass, Orders, and ImportPass message)           Text (30)
 City                          Pass holder’s city (Optional) (Used by UpdatePass, Orders, and ImportPass message)              Text (40)
 State                         Pass holder’s state (Optional) (Used by UpdatePass, Orders, and ImportPass message)             Text (40)
 ZIP                           Pass holder’s ZIP/postal code (Optional) (Used by UpdatePass, Orders, and ImportPass            Text (16)
                               message)
 CountryCode                   Pass holder’s country code (Optional) (Used by UpdatePass, Orders, and ImportPass message)      Text (2)
 Phone                         Pass holder’s telephone number (Optional) (Used by UpdatePass, Orders, and ImportPass           Text (30)
                               message)
 Email                         Pass holder’s e-mail address (Optional) (Used by UpdatePass, Orders, and ImportPass             Text
                               message)                                                                                        (128)
 TitleID                       Pass holder’s title ID, as stored in the NameTitles database table (Optional)                   Numeric
 SuffixID                      Pass holder’s suffix ID, as stored in the NameSuffixes database table (Optional)                Numeric
 DOB                           Pass holders’ date of birth (Optional) (Used by UpdatePass, Orders, and ImportPass message)     DateTime
 Gender                        Pass holder’s gender (Optional) (Values: 0 = Unspecified, 1 = Male, 2 = Female)                 Numeric
 User01                        Pass user field 1 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                               (255)
 User02                        Pass user field 2 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                               (255)
 User03                        Pass user field 3 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                               (255)
 User04                        Pass user field 4 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                               (255)
 User05                        Pass user field 5 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                               (255)
 User06                        Pass user field 6 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                               (255)
 User07                        Pass user field 7 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                               (255)
 User08                        Pass user field 8 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                               (255)
 User09                        Pass user field 9 (Optional) (Used by UpdatePass, Orders, and ImportPass message)               Text
                                                                                                                                       187
eGalaxy Server Interface Specification                                                        11 Common Element Formats
                                                                                                                             (255)
 User10                Pass user field 10 (Optional) (Used by UpdatePass, Orders, and ImportPass message)                    Text
                                                                                                                             (255)
 IsPrimary             Set if the given pass is a primary pass. This field is supported for New Pass Sales only (when        Boolean
                       used in Orders, and ImportPass messages). (Optional)
 PassAcct              Pass account number (Optional) This field is supported for ImportPass message only. If this           Text (24)
                       field is not present in ImportPass message, then system will come up with the proper value for
                       this field
 DateOpened            The date the pass account was opened (Optional) This field is supported for ImportPass                DateTime
                       message only. If this field is not present in ImportPass message, then by default system will
                       use current date
 ValidFrom             The date pass is valid from. (Optional) For Orders, and ImportPass messages if this field is          DateTime
                       present under the <Pass> element, then eGalaxy Server will copy the date given in this element
                       on the Passes.ValidFrom column provided that the PassKind has “Allow Expire Override” option
                       set.
 ValidUntil            The date that the pass is valid until (Optional) For ImportPass message, eGalaxy server simply        DateTime
                       copies the ValidUntil date given in the xml to the Passes.ValidUntil column. For Orders
                       message if this field is present under the <Pass> element, then eGalaxy Server will copy the
                       date given in this element on the Passes.ValidUntil column provided that the PassKind has
                       “Allow Expire Override” option set. For the UpdatePass message, if the
                       <RecalculateExpirationDate> field is set to YES this field is ignored in favor of the expiration
                       date calculated by the UpdatePass message. (See RecalculateExpirationDate element below.)
                       If this field is not present in a message (like Orders, ImportPass), then system will calculate the
                       pass’s expiration date and use the new value for this field on the pass record
 MaxParty              The maximum number of people that can be admitted with the pass (Optional) This field is              Numeric
                       supported for ImportPass and UpdatePass messages only. If this field is not present in the
                       ImportPass message, the system will obtain the value from the access code by default
 PLU                   The PLU of the pass (Optional) (Required for ImportPass) This field is supported for ImportPass       Text (20)
                       message only
 Status                The current status of the pass (Optional) This field is supported for ImportPass and Updatepass       Numeric
                       messages only. If this field is not present in the ImportPass message, then by default system
                       will use the status of 0 (Pass valid)
 MasterPassID          The PassNo of the primary pass for this pass (Optional) This field is supported for ImportPass        Numeric
                       message only
 PurchaserPassID       The PassNo of the purchaser for this pass (Optional) This field is supported for ImportPass           Numeric
                       message only
 ValidFrom             Date pass is valid from (Optional) This field is supported for UpdatePass message only                DateTime
 Picture               Optional Picture element to contain pass photo data
 ImageData             Tag enclosed within Picture tags. Pass JPEG photo data in binary format.                              BLOB
 PhoneNumbers          For the format of the <PhoneNumbers> element please refer to sub section “<PhoneNumbers>              Element
                       Element” under section “Common Element Formats”. (Optional)
 Status                Tag enclosed within Picture tags. Status of the picture, see table below for possible values          Numeric
 JointMemberships      For the format of the <JointMemberships> element please refer to sub section                          Element
                       “<JointMemberships> Element” under section “Common Element Formats”. Note: At present
                       <JointMemberships> element is only supported for Passes imported thru “Orders” or
                       “ImportPass” message. (Optional)
 Members               For the format of the <Members> element, please refer to the sub section “<Members>                   Element
                       Elements” under section “Common Element Formats” Note: At present <Members> is only
                       supported for passes imported through ”Orders” or “ImportPass” message. The <Members>
                       element is an alternative to the <JointMembers> format above as well as being available for a
                       sale of an individual pass. (Optional)
 ContactGUID           A Contact GUID (see <Contact> Element for more information) for the member                            Text
 IssuedBenefits        For the format of the <IssuedBenefits> element, please refer to the sub-section                       Element
                       “<IssuedBenefits> Elements” under section “Common Element Formats&rdquo
 NonIssuedBenefits     For the format of the <NonIssuedBenefits> element, please refer to the sub-section                    Element
                       “<NonIssuedBenefits> Elements” under section “Common Element Formats”
 AllowEmail            The opt-in/opt-out state of the contact for email messaging. (Optional)                               Boolean

                                                                                                                                    188
eGalaxy Server Interface Specification                                                             11 Common Element Formats
 RecalculateExpirationDate  Updates the expiration date of the pass for an UpdatePass message. If YES, the ValidUntil date     Boolean
                            of the pass is recalculated using the ValidFrom as the "sale" date of the pass, using the pass
                            kind rules. For instance, if the pass kind specifies a 1-year expiration relative to sale,
                            RecalculateExpirationDate is YES, and the ValidFrom date is specified in the message as 01-
                            January-2019, the UpdatePass message will update the pass's expiration date to 01-January-
                            2020. (Optional) This field is supported for the UpdatePass message only.
 SendPassholderNotification Used in the UpdatePass message to trigger the sending of the Product Activation email              Boolean
                            template. If YES, the template configured in the eGalaxy Source will be sent. The template can
                            access the Pass object through gateway script to report on the demographics and status of the
                            pass that is being updated. The AllowEmail opt-in must be true for the contact for this email to
                            be generated and sent.
 PassID                     The PassNo of an existing pass. Used as a group ID if processing member benefits or a new          Numeric
                            pass with a package sale.
 Value Gateway Constant        Description
       Name
 0     STATUS_VERIFIED   This visually verified picture is now the current picture in a group of pictures defined by the BaseID
                         column. Pictures attached to passes sold via POS or OE are automatically verified.
 1       STATUS_PENDING This picture is currently awaiting verification.
 2       STATUS_REJECTED This denied picture will not be used.
 3       STATUS_APPROVED This picture has been approved via the photo review manager.

  <Pass>
      <FirstName>Michael</FirstName>
      <MiddleName>M</MiddleName>
      <LastName>Andre</LastName>
      <Street1>315 E 2nd Street</Street1>
      <Street2/>
      <City>Boyertown</City>. . .
      <Picture>
          <ImageData dt:dt="bin.base64" xmlns:dt="urn:schemas-microsoft-com:datatypes"><![CDATA[ (Picture binary
  data here) ]]></ImageData>
          <Status>0</Status></Picture>
      . .
  </Pass>


11.2 <AddOn> Element
The <AddOn> element contains fields related to a joint membership pass add-on. An AddOn element can be used in the body of Orders
messages.
An AddOn element contains following fields:

 Field            Description                                                                                                   Type
 PassID           Foreign key to Passes.PassNo (Optional)                                                                       Numeric
 ExternalPassID   The <PassID> element value of the pass being added onto (Optional)                                            Numeric
 Members          For the format of the <Members> element refer to the sub section “<Members> Element” under section            Element
                  “Common Element Formats”

11.2.0.1 Note:

The <PassID> and <ExternalPassID> elements are both marked (Optional) in the description above, but it is required that one of the two be
present, or the order processing will fail.

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <MessageType>Orders</MessageType>
          <TimeStamp>2014-09-30 17:17:44</TimeStamp>
      </Header>
      <Body>
          <Orders>
                                                                                                                                      189
eGalaxy Server Interface Specification                                          11 Common Element Formats
         <Orders>
             <Order>
                 <OrderID>20141114-5</OrderID>
                 <OrderCommand>Add</OrderCommand>
                 <CustomerID>1</CustomerID>
                 <OrderDate>2015-09-30 17:09:48</OrderDate>
                 <OrderStatus>2</OrderStatus>
                 <OrderContact>
                     <Contact>
                         <ExternalID>1194</ExternalID>
                         <FirstName>VSP</FirstName>
                         <LastName>Customer</LastName>
                         <Phone>555-555-1000</Phone>
                         <Email>Test@Example.com</Email>
                     </Contact>
                 </OrderContact>
                 <BillToContact>
                     <FirstName>Test</FirstName>
                 </BillToContact>
                 <ShipToContact>
                     <SameAsOrderContact>YES</SameAsOrderContact>
                 </ShipToContact>
                 <GroupVisit>
                     <VisitDate>2015-09-30 09:00:00</VisitDate>
                 </GroupVisit>
                 <Shipping>
                     <DeliveryMethodID>7</DeliveryMethodID>
                 </Shipping>
                 <OrderLines>
                     <OrderLine>
                         <DetailType>8</DetailType>
                         <Description>Pass</Description>
                         <PLU>PASS0010102</PLU>
                         <Qty>1</Qty>
                         <Amount>100.00</Amount>
                         <Total>100.00</Total>
                         <TaxAmount>0.00</TaxAmount>
                         <DiscountAmount>0.00</DiscountAmount>
                         <Pass>
                             <PassID>987</PassID>
                             <ValidFrom>2012-01-28</ValidFrom>
                             <ValidUntil>2020-01-28</ValidUntil>
                             <DateOpened>2012-01-28</DateOpened>
                             <User1>Just A Test</User1>
                             <Members>
                                 <Member>
                                     <Primary>Yes</Primary>
                                     <FirstName>John</FirstName>
                                     <LastName>Person</LastName>
                                     <Email>Test@Example.com</Email>
                                     <Street1>445 County Line Rd</Street1>
                                     <Street2>TEST ADDED ST 2</Street2>
                                     <City>Gilbertsville</City>
                                     <DOB>1982-01-28</DOB>
                                     <RelationshipTypeID>3</RelationshipTypeID>
                                 </Member>
                                 <Member>
                                     <Primary>No</Primary>
                                     <FirstName>Jane</FirstName>
                                     <LastName>Person</LastName>
                                     <Street1>445 County Line Rd</Street1>
                                     <Street2>TEST ADDED ST 2</Street2>
                                     <City>Gilbertsville</City>
                                     <DOB>1982-05-14</DOB>
                                     <IdentificationNo>123456789</IdentificationNo>
                                     <RelationshipTypeID>2</RelationshipTypeID>
                                 </Member>
                                 <Member>
                                     <Primary>No</Primary>
                                     <FirstName>Jimmy</FirstName>
                                     <LastName>Person</LastName>
                                     <DOB>2011-05-07</DOB>
                                     <RelationshipTypeID>1</RelationshipTypeID>
                                 </Member>
                             </Members>
                         </Pass>
                     </OrderLine>
                     <OrderLine>
                                                                                                     190
eGalaxy Server Interface Specification                                                               11 Common Element Formats
                      <OrderLine>
                          <DetailType>15</DetailType>
                          <Description>Joint Member Add-On</Description>
                          <PLU>PASS0010108</PLU>
                          <Qty>1</Qty>
                          <Amount>100.00</Amount>
                          <Total>100.00</Total>
                          <AddOn>
                              <ExternalPassID>987</ExternalPassID>
                              <PassID></PassID>
                              <Members>
                                  <Member>
                                      <LastName>AddedOn</LastName>
                                      <FirstName>Member</FirstName>
                                      <Street1>TEST TEST TEST St 1</Street1>
                                      <DOB>1985-01-09</DOB>
                                      <RelationshipTypeID>3</RelationshipTypeID>
                                  </Member>
                              </Members>
                          </AddOn>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>2</DetailType>
                          <PaymentCode>13</PaymentCode>
                          <Description>SP CF</Description>
                          <Amount>200.00</Amount>
                          <PaymentDate></PaymentDate>
                          <Endorsement></Endorsement>
                      </OrderLine>
                  </OrderLines>
              </Order>
          </Orders>
      </Body>
  </Envelope>


11.3 <Taxes> Element
<Taxes> element contains fields related to a tax. Element <Taxes> can be used to give tax information to eGalaxy server in a message. For
example, Orders message.
The only element supported under the <Taxes> element is one or more <Tax> elements.

 Field Description Type
 Tax <Tax> element Element

11.3.1 <Tax> Element
The Tax element contains details of a tax for an item or ticket. Following fields are supported within <Tax> element:

 Field            Description                                                                                                  Type
 TaxUniqueID      SQL primary key ID                                                                                           Numeric
 TaxID            Galaxy Tax ID (1 thru 8)                                                                                     Numeric
 Description      Description of the type of tax (Optional)                                                                    Text
                                                                                                                               (40)
 TaxTableID    Reference to the Tax Table (Optional)                                                                           Numeric
 DisburseIndex If the tax amount is for a disbursement, this value represents the SequenceNo of the disbursement detail that Numeric
               the tax amount is for, current values are 1-10 or 0 if it is not for a disbursement (Optional)
 UnitAmount    The actual amount of tax                                                                                        Currency
 ReducePrice If set, the tax amount (UnitAmount) was included in the original price of the ticket or item. In other words, the Boolean
               ticket or item has the tax included flag turned on (Optional)
 Method        Tax method used 0 for Item base tax 1 for Transactional tax (Optional)                                          Numeric

11.4 <Contact> Element
The <Contact> element contains fields related to a contact. A Contact element can be used in the body of messages like Orders, Customers
                                                                                                                                      191
eGalaxy Server Interface Specification                                                                 11 Common Element Formats
and Contacts.
A <Contact> element contains following fields:

 Field               Description                                                                                                Type
 JobTitle            Contact’s title or position (optional)                                                                     Text
                                                                                                                                (30)
 NameTitleID         Foreign key to NameTitles.NameTitleID, referencing an entry in the NameTitles table (optional)             Numeric
 FirstName           Contact first name                                                                                         Text
                                                                                                                                (30)
 MiddleName          Contact middle name                                                                                        Text
                                                                                                                                (30)
 LastName            Contact last name                                                                                          Text
                                                                                                                                (30)
 NameSuffixID        Foreign key to NameSuffixes.NameSuffixID, referencing an entry in the NameSuffixes table (optional)        Numeric
 Company             Company name*                                                                                              Text
                                                                                                                                (30)
 Street1             Street address line 1                                                                                      Text
                                                                                                                                (30)
 Street2             Street address line 2                                                                                      Text
                                                                                                                                (30)
 Street3             Street address line 3                                                                                      Text
                                                                                                                                (30)
 City                City                                                                                                       Text
                                                                                                                                (40)
 State               State or province                                                                                          Text
                                                                                                                                (40)
 ZIP                 ZIP or postal code                                                                                         Text
                                                                                                                                (16)
 CountryCode         Country Code i.e. ‘US’ for United States                                                                   Text (2)
 Phone               Telephone number                                                                                           Text
                                                                                                                                (30)
 Fax                 Fax number                                                                                                 Text
                                                                                                                                (30)
 Cell                Mobile cell phone number                                                                                   Text
                                                                                                                                (30)
 Email               Email Address                                                                                              Text
                                                                                                                                (128)
 ExternalID          ExternalID of this contact. Stored in CustContacts.ExternalID field. (Optional)                            Text
                                                                                                                                (20)
 LogOn            See <LogOn> element for details, described under sub section “<LogOn> Element” of section “Common             Element
                  Element Formats”
 ContactCommand Action to perform on the given contact data. Supported values: Add, Modify or Cancel (Optional)                 Text
 ContactNote      Notes related to the contact (Optional)                                                                       Text
 PaymentInfo      Payment information for the contact (Optional)                                                                Element
 PhoneNumbers     For the format of the <PhoneNumbers> element please refer to sub section “<PhoneNumbers> Element”             Element
                  under section “Common Element Formats”. (Optional)
 ContactGUID      GUID (globally unique identifier) to identify the contact across different systems (e.g Galaxy database and   Text
                  eGalaxy Webstore database)
 AllowEmail       Set when the contact may be contacted via email. (Optional)                                                   Boolean
 AllowMailings    Set when the contact may be contacted via the mailing address. (Optional)                                     Boolean
 SpecialNeeds     Set when the contact is entitled to a SpecialNeeds status. (Optional)                                         Boolean
 Deceased         Set when the contact is deceased. (Optional)                                                                  Boolean
 GiftAidDonorType Integer that points to the item in the CodeTableValues table that corresponds to the guest's response to      Numeric
                  the Gift Aid question
                                                                                                                                       192
eGalaxy Server Interface Specification                                                                11 Common Element Formats
 IdentificationNo    The contact's identification no. This field may have an attribute describing the visibility as configured on    Text
                     the eGalaxy Source
 GxKeyID             Foreign key to GxKeys.GxKeyID, this element defines what GxKeyID to use to decrypt the IdentificationNo         Numeric
                     element if it is encrypted

*Not supported in Galaxy at this time
A <PaymentInfo> element contains following fields:

 Field               Description                                                                                                    Type
 PaymentName         User-defined name for this payment (Optional)                                                                  Text(100)
 CardNo              Credit card account number                                                                                     Text (50)
 CardToken           Credit card token                                                                                              Text (62)
 GxKeyID             Foreign key to GxKeys.GxKeyID, this element defines what GxKeyID to use to decrypt the CardNo                  Numeric
                     element. If this value is non-zero, the system assumes the text in the CardNo element is encrypted
 CardHolderName      Name of credit card holder printed on the card (Optional)                                                      Text (80)
 ExpDate             Credit Card expiration date, if credit card payment. Represented by MMYY format (Optional)                     Numeric
                                                                                                                                    MMYY
 Primary          Set when payment info is primary for the given contact (Optional)                                                 Boolean
 ClearPaymentInfo If 'YES', the following Contact Payment Info fields will be cleared: CardNumber, ExpirationDate,                  Boolean
                  CardToken

11.5 <LogOns> Element
The <LogOns> element contains one or more <LogOn> elements. The LogOns element can be used in the body of messages like Customers,
and Contacts.

11.6 <LogOn> Element
The <LogOn> element contains the logon information. The <LogOn> element can be used within the <LogOns> element.
A <LogOn> element contains following fields:

 Field                      Description                                                                                              Type
 SystemLogonID              FK to the SystemLogons table. Returned during a QueryContact call to give the UniqueID of the
                            exact SystemLogon record referenced.
 Username                   Username of the logon                                                                                    Text
                                                                                                                                     (75)
 Password                   Password of the logon                                                                                    Text
                                                                                                                                     (75)
 RequirePasswordChange Set to force user to change their password when they logon to the Webstore next time                          Boolean

11.7 <PricingInfoList> Element
The <PricingInfoList> element contains one or more <PricingInfo> elements. The <PricingInfoList> element is returned by eGalaxy Server in
the response message of QueryContact and QueryGroupSalesCode requests.
<PricingInfo> element
Each <PricingInfo> element within the <PricingInfoList> element contains the pricing data associated to a given Customer in Galaxy.
Data in the <PricingInfo> element is used by the Web store to calculate pricing for tickets sold to the Group Sales customers. For the most
part, the Web store simply dumps the data given in the <PricingInfo> element into the Web Store database. This is the reason structure of
the data within the <PricingInfo> element is nothing but the representation of various Galaxy database tables but in the XML format. Data
within <PricingInfo> element comes directly from the corresponding table from Galaxy database.
The next question is what data is included in each <PricingInfo> elements? The answer is simple, since each <PricingInfo> element is
associated to a customer, each <PricingInfo> element contains all data required to apply Sales Program Pricing associated to that customer

                                                                                                                                            193
eGalaxy Server Interface Specification                                                               11 Common Element Formats
in Galaxy.
To apply Sales Program pricing, Galaxy uses various tables including, SalesPrograms, ItemRates, ItemConstraints, ItemGroups etc. The
<PricingInfo> element contains data from these tables associated to the customer for which pricing information is being returned.
The <PricingInfo> element contains following fields:

 Field            Description                                                                                                      Type
 CreditFOP        Number of the FOP used as a “Credit FOP” in Galaxy                                                               Numeric
 AttributeGroupID AttributeGroupID associated with the Customer Category of the customer for which pricing is being                Numeric
                  returned
 Galaxy table     <PricingInfo> element contains one xml element for each Galaxy database table that is associated with the        Element
 name             Customer and contains the pricing data. A list of Galaxy database tables for which data is included in
                  <PricingInfo> element right now is available in a later section.

Format of the Galaxy table data within <PricingInfo> element
The <PricingInfo> element contains data for multiple Galaxy database tables.
XML format of a Galaxy table is very simple. To explain this we can use the example of Items Galaxy database table. Items table stores the
definition of a ticket or PLU. Below is the xml representation of the Items table in the publish message body:

  <PricingInfo>
      <Customer ClassName="TGTScustomer" TableName="Customers">
          <CustomerID>10</CustomerID>
          <CustName>Boyertown Elementary School</CustName>
          <ExternalAccount>Boyer1</ExternalAccount>
          . . . More fields from Customers table
          <Item/>
          <CustCategory ClassName="TGTSCustCategory" TableName="CustCategories">
              <CustCategoryID>123</CustCategoryID>
              <Description>School Customers</Description>
              <TaxSetID>1</TaxSetID>
              . . . More fields from CustCategories table
              <Item/>
          </CustCategory>
          . . . More Galaxy tables
      </Customer>
  </PricingInfo>

The <Customers> element is named based on the name of the table. This is true for the most cases however there might be cases when
this is not true. For example for Taxes table the container element is called <Taxs>.
The <Customer TableName="Customers" ClassName="TGTSCustomer"> element contains two attributes, TableName and ClassName.
Attribute TableName contains the name of the Galaxy table this element corresponds to, which in this case is Customers. There are no
exceptions to this rule and this is always true for all Galaxy tables published. The ClassName attribute represent the class name of the
Galaxy Business Object that represents the Customers Galaxy database table and has no significance to the third-party Web store.
All xml tags under the <Customer> element represent the columns from the Customers Galaxy database table. The structure of the
Customers table is described in the Galaxy Database Dictionary. Fields under the <Customer> element have same name as the column
name of the Customers table.
List of Galaxy database tables included in the <PricingInfo> element
      Customers
      CustCategories
      TaxSets
      TaxSetDetails
      SalesPrograms
      SPConnections
      SPPriceCalendars
      AssociatedTicketRatios
      ItemGroups
      ItemGroupDetails
      ItemConstraints
      ItemRates

                                                                                                                                           194
eGalaxy Server Interface Specification                                                          11 Common Element Formats
11.8 <JointMemberships> (or <Memberships>) Element
The <JointMemberships> (or <Memberships>, which applies to all references to JointMemberships below as well) element contains the
information for JointMembers of a pass holder. One or more <JointMember> elements can be used within the <JointMemberships> element.
A <JointMembership> element contains following fields:

 Field              Description                                                                                               Type
 LastName           Last name of the Joint Member                                                                             Text(30)
 FirstName          First name of the Joint Member                                                                            Text(30)
 DOB                Date of Birth of the Joint Member. The JointMembership rules defined on the Pass Kind are enforced        DateTime
                    based on the current age of the Joint Member.
 IdentificationNo   Identification No                                                                                         Text(64)
 RelationshipTypeID ID of the relation type from the RelationTypes table in Galaxy database.                                  Numeric
 Status             Status value for the Pass/Membership                                                                      Numeric

11.8.1 <JointMemberships> element example
The <JointMemberships> element is always contained within a <Pass> element. Following example shows a list of joint members
associated with a pass holder.

  <Pass>
      <FirstName>John</FirstName>
      <MiddleName>M</MiddleName>
      <LastName>Doe</LastName>
      <Street1>315 E 2nd Street</Street1>
      <Street2/>
      <City>Boyertown</City>
      <DOB>1980-01-30</DOB>. . .
      <JointMemberships>
          <JointMembership>
              <LastName>Doe</LastName>
              <FirstName>Jane</FirstName>
              <DOB>1980-3-19</DOB>
              <IdentificationNo>123456789</IdentificationNo></JointMembership>
          <JointMembership>
              <LastName>Doe</LastName>
              <FirstName>Kim</FirstName>
              <DOB>2009-06-25</DOB>
          </JointMembership>
          <JointMembership>
              <LastName>Doe</LastName>
              <FirstName>Bill</FirstName>
              <DOB>2010-01-15</DOB>
          </JointMembership>
      </JointMemberships>
      . .
  </Pass>


11.9 <Members> Element
The <Members> element contains the demographic information for a pass holder. One or more <Member> elements can be used within the
<Members> element. The element is an alternative to the <JointMembers> element listed above, but you may notice that demographic
information has been moved to the <Member> elements instead of being under the <Pass> element.
The <Members> element can also be used to purchase a single pass in the “Orders” message with the same idea that the <Member>
element contains the demographic information while the <Pass> element simply contains information about the Pass (ValidFrom, Status,
DateOpened, etc).
A <Member> element contains following fields:

 Field                Description                                                                                             Type
 Primary              Indicator of the primay member of the joint membership. Notes: If the <Members> element does not        Boolean
                      have any <Member> elements marked as Primary, the first (or only) <Member> is assumed to be the

                                                                                                                                    195
eGalaxy Server Interface Specification                                                         11 Common Element Formats
                    Primay. The <Members> element cannot contain multiple <Member> elements marked as Primary. This
                    is considered to be invalid XML data.
 LastName           Last name of the Member                                                                               Text(30)
 FirstName          First name of the Member                                                                              Text(30)
 Street1            Street address line 1                                                                                 Text (30)
 Street2            Street address line 2                                                                                 Text (30)
 Street3            Street address line 3                                                                                 Text (30)
 City               City                                                                                                  Text (40)
 State              State or province                                                                                     Text (40)
 CountryCode        Country Code i.e. ‘US’ for United States                                                              Text (2)
 ZIP                ZIP or postal code                                                                                    Text (16)
 Phone              Telephone number                                                                                      Text (30)
 Cell               Mobile cell phone number                                                                              Text (30)
 Fax                Fax number                                                                                            Text (30)
 Email              The member’s email address                                                                            Text(128)
 PhoneNumbers       For the format of the <PhoneNumbers> element please refer to sub section “<PhoneNumbers>              Element
                    Element” under section “Common Element Formats”. (Optional)
 DOB                Date of Birth of the Member. The JointMembership rules defined on the Pass Kind are enforced based    DateTime
                    on the current age of the Member.
 IdentificationNo   Identification No                                                                                     Text(64)
 RelationshipTypeID ID of the relation type from the RelationTypes table in Galaxy database.                              Numeric
 ContactGUID        A Contact GUID (see <Contact> Element for more information) for the member.                           Text
 Picture            Optional Picture element to contain secondary member photo data. This element can only be included
                    for non-Primary members

11.9.1 <Memberships> element example
The <Memberships> element is always contained within a <Pass> element. Following example shows a list of joint members associated
with a pass holder. The <Members> element can contain a single <Member> element when selling a non-joint member pass.




                                                                                                                                    196
eGalaxy Server Interface Specification                                                                11 Common Element Formats
  <Pass>
      <PassID>987</PassID>
      <SameAsOrderContact>YES</SameAsOrderContact>
      <ValidFrom>2013-01-28</ValidFrom>
      <ValidUntil>2020-01-28</ValidUntil>
      <DateOpened>2012-01-28</DateOpened>. . .

      <Members>
          <Member>
              <Primary>Yes</Primary>
              <FirstName>PriMary</FirstName>
              <LastName>Passholder</LastName>
              <Email>PPassholder@gatewayticketing.com</Email>
              <Street1>315 E 2nd Street</Street1>
              <Street2/>
              <City>Boyertown</City>
              <DOB>1982-01-28</DOB>
              <RelationshipTypeID>3</RelationshipTypeID>
              <PhoneNumbers>
                  <PhoneNumber>(555)555-5555</PhoneNumber>
              </PhoneNumbers>
          </Member>
          <Member>
              <Primary>No</Primary>
              <LastName>Passholder</LastName>
              <FirstName>Bob</FirstName>
              <DOB>1982-05-14</DOB>
              <IdentificationNo>123456789</IdentificationNo>
              <RelationshipTypeID>2</RelationshipTypeID>
          </Member>
          <Member>
              <Primary>No</Primary>
              <LastName>Passholder</LastName>
              <FirstName>Logan</FirstName>
              <DOB>2011-05-07</DOB>
              <RelationshipTypeID>1</RelationshipTypeID>
          </Member>
      </Members>
  </Pass>


11.10 <IssuedBenefits> Element
The <IssuedBenefits> element contains one or more <Benefit> elements. These specify the issued benefits associated with an entity. The
element now has the MediaType attribute corresponding to the benefit package MediaType.
Each <Benefit> element within the <IssuedBenefits> element contains information about a single issued benefit associated with a Pass.
Each <Benefit> element contains the following fields:

 Field                  Description                                                                                           Type
 Name                   Text containing the Name of the benefit.                                                              Text
 Description            Text containing a fuller description of the benefit.                                                  Text
 Price                  Price of the benefit.                                                                                 Numeric
 VisualID               The VisualID associated with the item. This will be present only for issued tickets and passes.       Text
 IssuanceStatus         A value indicating whether the item has been issued 1                                                 Numeric
 Quantity               The number of items for the given benefit.                                                            Numeric
 UnlimitedQuantity      YES = benefit is configured with unlimited quantity and there are no other limits on availability.    Boolean
 PLU                    The PLU for the given benefit.                                                                        Text
 DateRedeemed           If the benefit has been issued, this is the date that it was redeemed by the customer.                DateTime
 PkgInstanceDetailID    Reference to the PkgInstanceDetail that represents this benefit.                                      Numeric
 PackageDetailID        Reference to the PackageDetail record that reference the package detail configuration for this        Numeric
                        benefit.
 PackageVisualID        The VisualID of the package that this benefit was sold under.                                         Text
 MediaMode              0 = included in pass media, 1 = separate media. Issued benefit only.                                  Numeric

                                                                                                                                        197
eGalaxy Server Interface Specification                                                             11 Common Element Formats
 HasAppleWalletData 1 = benefit has AppleWallet data to process, 0 = no data. Issued benefit only.                                Numeric

1 IssuanceStatus

 Value   Description
 0       Issued - The benefit has been redeemed and issued.
 1       Unissued - The benefit has not been redeemed.
 2       Pending - The benefit has been redeemed, but is unissued. No VisualID has been generated for this yet.

11.11 <NonIssuedBenefits> Element
The <NonIssuedBenefits> element contains one or more <Benefit> elements. These specify the non-issued benefits associated with an
entity.
Each <Benefit> element within the <IssuedBenefits> element contains information about a single issued benefit associated with a Pass.
The <Benefit> element within the <NonIssuedBenefits> element contains the same elements as the <IssuedBenefits> element above.

11.12 <PhoneNumbers> Element
The <PhoneNumbers> element contains one or more <PhoneNumber> elements. These specify the phone numbers associated with an
entity, such as a Contact or a pass.
<PhoneNumber> element
Each <PhoneNumber> element within the <PhoneNumbers> contains a single phone number associated with a Contact. This data will be
stored in the PhoneNumbers table in the database.
The first element within the <PhoneNumber> element is <PhoneType>. This is a numerical value representing whether a particular phone
number is a person’s “Home”, “Cell” or perhaps “Fax” number. See below for a list of valid <PhoneTypes> and their corresponding
descriptions.
Only one instance of a PhoneType can exist for a given person. If a specific Contact within a given message were to include two
<PhoneNumber> elements with a <PhoneType> of 1, for example, an error would be generated for that message.
The second field within the <PhoneNumber> element is <Phone>. This is a text field containing the phone number.
Updating or deleting a PhoneNumber
Some messages which support the <PhoneNumbers> element, such as Contacts or Orders, allow a “Modify” action. The <PhoneNumbers>
element can be used in such messages to update one more phone numbers that were previously sent to eGalaxy, or to delete some or all of
the PhoneNumbers.
If a <PhoneNumbers> element is provided and it does not contain any <PhoneNumber> elements, then all PhoneNumbers records
associated with that entity will be deleted.
If a <PhoneNumber> element is provided with a <PhoneType> that was previously saved for this entity, but the <Phone> element is blank,
then the PhoneNumber record matching that PhoneType for this entity will be deleted.
Finally, if a <PhoneNumber> elements is provided with a <PhoneType> that was previously saved, and a non-blank <Phone> element, then
the PhoneNumber record matching that PhoneType for this entity will be updated with the new <PhoneNumber>.
Each <PhoneNumber> element contains the following fields:

 Field          Description                                                          Type
 PhoneType      Number of the PhoneType                                              Numeric
 Phone          Text containing a phone number.                                      Numeric
 AllowContact   Indicates whether the entity wishes to be contacted at this number   Boolean

The following are the currently supported phone types in eGalaxy:

 Phone Type Description
                                                                                                                                        198
eGalaxy Server Interface Specification                                                              11 Common Element Formats
 0              Home
 1              Work
 2              Mobile
 3              Fax
 4              Other

Example of the <PhoneNumbers> element

  <PhoneNumbers>
      <PhoneNumber>
          <PhoneType>1</PhoneType>
          <Phone>(555)555-1212</Phone>
          <AllowContact>YES</AllowContact>
      </PhoneNumber>
      <PhoneNumber>
          <PhoneType>2</PhoneType>
          <Phone>(555)555-1212</Phone>
          <AllowContact>NO</AllowContact>
      </PhoneNumber>
  </PhoneNumbers>


11.13 <LoyaltyAccounts> Element
The <LoyaltyAccounts> element is used by messages for loyalty module. <LoyaltyAccounts> element is returned by eGalaxy server in
messages like QueryTicket, and QueryContacts to list all loyalty accounts associated with a given ticket or contact. <LoyaltyAccounts>
element contains one or more <LoyaltyAccount> elements. <LoyaltyAccount> element is used by messages like LoyaltyAccount,
QueryLoyaltyAccount, and LinkLoyaltyAccount.
Following fields are available under <LoyaltyAccount> element:

 Field                 Description                                                                                              Type
 LoyaltyProgramID      The LoyaltyProgramID associated to this loyalty account. Required for ADD                                Numeric
                       LoyaltyAccountCommand when creating a new loyalty account.
 LoyaltyAccountCommand Command indicating action to perform on the data given in the LoyaltyAccount request. Supported          Text
                       values: ADD, MODIFY, or CANCEL Required only when creating a new loyalty account
 LoyaltyAccountNo      The loyalty account number associated to this loyalty account. Optional when adding a new                Text(40)
                       loyalty account.
 LoyaltyAccountBalance The point balance for the specified loyalty account. This is currently only returned for the             Numeric
                       QueryContact message, not the QueryTicket message. Optional.
 JoinDate              The date the contact joined the loyalty program.                                                         DateTime
 GalaxyContactID       ID of the contact to be associated to the Loyalty account. This is the CustContacts.CustContactID        Numeric
                       value for the contact, NOT the CustContacts.ExternalID value. Required only when creating a new
                       loyalty account.

11.13.1 <LoyaltyAccounts> element example
Below is an example of the LoyaltyAccounts element being returned after being requested in the QueryTicket message.




                                                                                                                                         199
eGalaxy Server Interface Specification                                                                11 Common Element Formats
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <QueryTicketResponse>
              <DataRequestResponse>
                  <LoyaltyAccounts>
                      <LoyaltyAccount>
                          <LoyaltyProgramID>1</LoyaltyProgramID>
                          <LoyaltyAccountNo>0010065043545043</LoyaltyAccountNo>
                          <LoyaltyAccountBalance>100</LoyaltyAccountBalance>
                          <JoinDate>2010-10-01 12:21:00</JoinDate>
                      </LoyaltyAccount>
                      <LoyaltyAccount>
                          <LoyaltyProgramID>2</LoyaltyProgramID>
                          <LoyaltyAccountNo>9094589959485453</LoyaltyAccountNo>
                          <LoyaltyAccountBalance>50</LoyaltyAccountBalance>
                          <JoinDate>2009-11-21 10:01:00</JoinDate>
                      </LoyaltyAccount>
                  </LoyaltyAccounts>
              </DataRequestResponse>
          </QueryTicketResponse>
      </Body>
  </Envelope>


11.14 <PassRequiredInfo> Element
The PassRequiredInfo element is potentially returned in the QueryTicket message. This element contains information about pass required
ticket limits and uses of this particular pass for pass required tickets today. The following is the format of the < PassRequiredInfo> element:

 Field             Description                                                                                                       Type
 PassKindLimit     The number of times that this pass can be used when purchasing pass required tickets in a day.                    Numeric
 UseCountToday     The number of times this pass has been used already today in pass required ticket sales.                          Numeric
 Items             Contains <Item> elements.                                                                                         Element
 Item              Contains the specific uses of this pass for pass required ticket purchases today                                  Element
 PLU               The list of specific PLUs purchased as pass required tickets that use this pass.                                  Text(20)
 UsesToday         The number of times the PLU was purchased as pass required tickets using this pass today. This is useful if       Numeric
                   there is a limit on the number of times a pass can be used for a certain PLU.

11.14.1 <PassRequiredInfo> element example
Below is an example of the PassRequiredInfo element being returned after being requested in the QueryTicket message.




                                                                                                                                           200
eGalaxy Server Interface Specification                                                              11 Common Element Formats
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-02-05 17:00:05</TimeStamp>
          <MessageType>QueryTicketResponse</MessageType>
      </Header>
      <Body>
          <QueryTicketResponse>
              <DataRequestResponse>
                  <PassRequiredInfo>
                      <PassKindLimit>3</PassKindLimit>
                      <UseCountToday>2</UseCountToday>
                      <Items>
                          <Item>
                              <PLU>0010101</PLU>
                              <UsesToday>1</UsesToday>
                          </Item>
                          <Item>
                              <PLU>0010102</PLU>
                              <UsesToday>1</UsesToday>
                          </Item>
                      </Items>
                  </PassRequiredInfo>
              </DataRequestResponse>
          </QueryTicketResponse>
      </Body>
  </Envelope>


11.15 <DebitCardAuthData> Element
The <DebitCardAuthData> element contains authorization data of the Debit Card to be activated in Galaxy. Authorization data given in this
element is used to journalize a draft record in Galaxy. <DebitCardAuthData> element contains following fields:

 Field            Description                                                                                                    Type
 AuthCode         Authorization Code from payment processor                                                                      Numeric
 ValidationCode   Validation code from payment processor (Optional)                                                              Text (4)
 TransID          Transaction ID from payment processor (Optional)                                                               Text
                                                                                                                                 (15)
 ExpDate          Credit Card expiration date, if credit card payment (Optional)                                                 Numeric
                                                                                                                                 MMYY
 PSI              Payment Service Indicator from payment processor(Optional)                                                     Text(1)
 GxKeyID          Foreign key to GxKeys.GxKeyID, this element defines what GxKeyID to use to decrypt the Endorsement             Numeric
                  element. If this value is non-zero, the system assumes the text in the Endorsement element is encrypted

11.16 <RosterDataList> Element
The <RosterDataList> element may be provided in response to a QueryRosterResponse message from eGalaxy Server.

 Field        Description          Type
 <RosterData> <RosterData> element Element

The <RosterData> element may be provided in response to a QueryRosterResponse message from eGalaxy Server.
NOTE: If a ContactID is supplied in the <Contact> element a new Attendee for the roster will not be created.

 Field     Description           Type
 <Contact> See <Contact> element Element
 <Answers> <Answers> element     Element

The <Answers> element contains the following fields:


                                                                                                                                       201
eGalaxy Server Interface Specification                                                           11 Common Element Formats
 Field    Description      Type
 <Answer> <Answer> element Element

The <Answer> element contains the following fields:

 Field               Description                                 Type
 ID                  The ID of the question being answered.      Numeric
 Value               The answer to a free form question.         Text (256)
 LookUpAnswerID      The answer ID to a lookup table question.   Numeric

11.16.1 <RosterDataList> element example
  <RosterDataList>
      <RosterData>
          <Contact>
              <FirstName>John</FirstName>
              <LastName>Smith</LastName>
              <Street1>123 Lake Drive</Street1>
              <Street2>Apartment 11</Street2>
              <City>Boyertown</City>
              <State>PA</State>
              <ZIP>19512</ZIP>
          </Contact>
          <Answers>
              <Answer>
                  <ID>2</ID>
                  <Value>Jane Smith</Value>
              </Answer>
              <Answer>
                  <ID>1</ID>
                  <LookUpAnswerID>1</LookUpAnswerID>
              </Answer>
          </Answers>
      </RosterData>
  </RosterDataList>


11.17 <CreateTransactionResponse> Element
The <CreateTransactionResponse> element contains information for a transaction including payments and ticket sale for items sold on the
Web store. Element <CreateTransactionResponse> is used in eGalaxy server message like Orders to return information about the tickets
issued in an order back to the sender (for PrintOnWeb delivery method only).
Following fields are supported within the <CreateTransactionResponse> element:

 Field                Description                                                                                               Type
 <TransactionData>    <TransactionData> element                                                                                 Element
 <Taxes>              <Taxes> element. Returned for messages with TransactionType of 0 (Ticket Sale) only.                      Element
 <Tickets>            <Tickets> element. Returned for messages with TransactionType of 0 (Ticket Sale) only. eGalaxy server     Element
                      versions 5.3 and older returns tickets in this element.
 <Products>           <Products> element. Returned for messages with TransactionType of 0 (Ticket Sale) only. eGalaxy server    Element
                      versions 5.4 and newer returns tickets in this element.
 <Payments>           <Payments> element. Returned for messages with Transaction Type of 0 (Ticket Sale) and 1                  Element
                      (PrePayment).
 <UserFields>         <UserFields> element.                                                                                     Element

11.17.1 <TransactionData> Element
<TransactionData> element contains following fields:

 Field                      Description                                                                                        Type
 NodeNo                     Node number of eGalaxy server where transaction was journalized                                    Numeric

                                                                                                                                     202
eGalaxy Server Interface Specification                                                             11 Common Element Formats
 TransactionNo            Transaction number of the journal transaction                                                          Numeric
 TranDate                 Datetime of the journal transaction                                                                    DateTime
 AgencyID                 Agency number used on the journal transaction                                                          Numeric
 UserID                   ID of the user recorded on the journal transaction                                                     Numeric
 SalesChannelCategoryID   ID of the SalesChannel Category from where the tickets were sold. Same value sent in the request       Numeric
                          is returned.
 CustomerID               Customer ID. Same value sent in the request is returned.                                               Numeric
 TransactionType          Transaction Type. Same value sent in the request is returned.                                          Numeric
 AccountID                AccountID of the customer. Used by Web store for Prepayment transaction.                               Numeric
 PrepaymentFOP            Prepayment FOP on the customer account. Used by Web store for Prepayment transaction.                  Numeric
 PrepaidBalance           Prepaid Balance. Used by Web store for Prepayment transaction.                                         Currency
 TransactionTotal         Transaction Total                                                                                      Currency
 ExternalTransactionTotal Total of the reseller’s external price                                                                 Currency
 RetailTransactionTotal   Total of the reseller’s retail price                                                                   Currency
 TranslationLanguageID The TranslationLanguageID of the language that was used to generate the                                   Numeric
                          CreateTransactionResponse

11.17.2 <Taxes> Element
Please see <Taxes> entry under the “Common Element Formats” section of the “eGalaxy Interface Specs” document to find out the fields
supported under the <Taxes> element.

11.17.3 <Tickets> Element
<Tickets> element contains one or more of <Ticket> elements. Each <Ticket> element contains following fields:

 Field                  Description                                                                                              Type
 PrintTicket            When PrintTicket field is set to NO, it means the ticket does not need a physical media or ticket        Text
                        (regardless of the value of the VisualID field below).
 VisualID               VisualID of ticket. When VisualID field is empty it means the ticket does not need a physical media or   Text(40)
                        ticket. When VisualID field is non-empty it means the physical ticket needs to be produced with the
                        barcode given value given in this field.
 OwnerVisualID          The VisualID of the owning product. This will be set when an element is sent in the element of an        Text(40)
                        Orders request to add an entitlement to a Package or Pass.
 SerialNo               Serial number of ticket                                                                                  Numeric
 PLU                    PLU of ticket                                                                                            Text(20)
 ItemName               Item name from Items table                                                                               Text
 ItemDescription        Item description from Items table                                                                        Text
 ItemUserCode           Item UserCode from Items table                                                                           Text
 AccessCode             AccessCode of ticket                                                                                     Numeric
 NetPrice               Net price of ticket                                                                                      Currency
 ExternalPrice          Reseller external price                                                                                  Currency
 RetailPrice            Reseller retail price                                                                                    Currency
 TaxAmount              Tax amout of ticket                                                                                      Currency
 DiscountAmouont        Discount amount of ticket                                                                                Currency
 DateSold               Sale Date of ticket                                                                                      DateTime
 TicketDate             Ticket date of ticket                                                                                    DateTime
 EventID                Event ID the ticket is associated with                                                                   Numeric
 EventTypeName          Event type name                                                                                          Text
 EventName              Event name                                                                                               Text
 EventStartDate         Start date of event                                                                                      DateTime
 EventEndDate           End date of event                                                                                        DateTime

                                                                                                                                        203
eGalaxy Server Interface Specification                                                               11 Common Element Formats
 EventNotes              Event notes                                                                                              Text
 EventUserNo             User event number                                                                                        Numeric
 ResourceName            Resource name                                                                                            Text
 ParentResourceName      Parent resource name. Returned only for ticket with event associated with a child resource               Text
 <Guest>                 <Guest> element containing <FirstName> and <LastName> elements for the contact associated with           Element
                         the ticket
 <AttributeValues>       <AttributeValues> element containing a list of <AttributeValue> elements to display Access Code          Element
                         Attribute information. See <AttributeValue> below.

11.17.4 <Products> Element
<Products> element contains one or more <Product> elements. A <Product> element contains an attribute called type. The type attribute on
the <Product> element indicates the type of the product for the XML fields are returned.

 Attribute Description                                                                                                                Type
 Type      Indicates the type of the product. “Ticket” – <Product> element contains data for a ticket. “Item” – <Product>             Text
           element contains data for a retail item. “Package” – <Product> element contains data for a package.

The <Product> element contains same fields as the <Ticket> element listed in the last section for all product types. A product with the type
of package also contains <Products> element representing all the package details that are part of the package.
Sections below contain examples for package products.

11.17.5 <Payments> Element
<Payments> element contains one or more of <Payment> elements. Each <Payment> element contains following fields:

 Field       Description               Type
 PaymentCode FOP number of the payment Numeric
 Amount      Payment amount            Currency

11.17.6 <UserFields> Element
The <UserFields> element contains any user fields that were specified in the order and successfully saved with the order. If an element is
not present here, but was present in the request, it was not saved successfully.

 Field        Description                            Type
 UserField1   From <UserField1> on order request     Text (255)
 UserField2   From <UserField2> on order request     Text (255)
 ...          ...                                    ...

11.17.7 <AttributeValue> Element
 Field                 Description                                                                                                 Type
 AttributeValueGroupID UniqueID for a group of values                                                                              Numeric
 Name                  The name of the Attribute Definition. This can be referenced as part of a keyword.                          Text
                       @ACCESS_CODE_ATTRIBUTE_name in PDF templates
 Value                 The attribute value that will be the data to replace the keyword.                                           Text
 Sequence              Zero based index that shows the order of the attributes in the list. This is useful when trying to get      Numeric
                       the nth Attribute when the same attribute is used many times. @ACCESS_CODE_ATTRIBUTE_Note(2)

11.17.8 Example CreateTransaction Response for Ticket Sale transaction - Version 5.3 and older
Following is the response from eGalaxy server version 5.3 and prior for a CreateTransaction request with TransactionType of Ticket Sale:

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
                                                                                                                                           204
eGalaxy Server Interface Specification                                        11 Common Element Formats
     <Header>
         <MessageType>CreateTransactionResponse</MessageType>
         <SourceID>ABC Travels</SourceID>
         <TimeStamp>2011-11-03 15:53:58</TimeStamp>
         <EchoData/>
         <SystemFields/>
     </Header>
     <Body>
         <CreateTransactionResponse>
             <TransactionData>
                 <NodeNo>601</NodeNo>
                 <TransactionNo>1</TransactionNo>
                 <TranDate>2011-11-03 15:53:00</TranDate>
                 <AgencyID>10000</AgencyID>
                 <UserID>10000</UserID>
                 <SalesChannelCategoryID>6</SalesChannelCategoryID>
                 <CustomerID>1</CustomerID>
                 <TransactionType>0</TransactionType>
                 <TransactionTotal>20.00</TransactionTotal>
                 <ExternalTransactionTotal>20.00</ExternalTransactionTotal>
                 <RetailTransactionTotal>20.00</RetailTransactionTotal>
             </TransactionData>
             <Payments>
                 <Payment>
                     <PaymentCode>80</PaymentCode>
                     <Amount>20.00</Amount>
                 </Payment>
             </Payments>
             <Taxes/>
             <Tickets>
                 <Ticket>
                     <VisualID>10601000001</VisualID>
                     <SerialNo>0</SerialNo>
                     <PLU>0010101</PLU>
                     <SalesChannelPLUDetailID>374</SalesChannelPLUDetailID>
                     <ItemName>TICKET - No Tax</ItemName>
                     <ItemDescription>TICKET - No Tax</ItemDescription>
                     <ItemUserCode/>
                     <AccessCode>10</AccessCode>
                     <NetPrice>10.00</NetPrice>
                     <ExternalPrice>10.00</ExternalPrice>
                     <RetailPrice>10.00</RetailPrice>
                     <TaxAmount>0.00</TaxAmount>
                     <DiscountAmount>0.00</DiscountAmount>
                     <DateSold>2011-11-03 15:53:00</DateSold>
                     <EventID>5</EventID>
                     <EventName>Blueman's Group</EventName>
                     <EventStartDate>2011-11-03 23:00:00</EventStartDate>
                     <EventEndDate>2011-11-03 23:30:00</EventEndDate>
                     <EventUserNo>0</EventUserNo>
                     <EventNotes/>
                     <EventTypeName>Blueman's Group Show</EventTypeName>
                     <ResourceName>Grand Theater</ResourceName>
                 </Ticket>
                 <Ticket>
                     <VisualID>10601000002</VisualID>
                     <SerialNo>0</SerialNo>
                     <PLU>0010101</PLU>
                     <SalesChannelPLUDetailID>374</SalesChannelPLUDetailID>
                     <ItemName>TICKET - No Tax</ItemName>
                     <ItemDescription>TICKET - No Tax</ItemDescription>
                     <ItemUserCode/>
                     <AccessCode>10</AccessCode>
                     <NetPrice>10.00</NetPrice>
                     <ExternalPrice>10.00</ExternalPrice>
                     <RetailPrice>10.00</RetailPrice>
                     <TaxAmount>0.00</TaxAmount>
                     <DiscountAmount>0.00</DiscountAmount>
                     <DateSold>2011-11-03 15:53:00</DateSold>
                     <EventID>5</EventID>
                     <EventName>Blueman's Group</EventName>
                     <EventStartDate>2011-11-03 23:00:00</EventStartDate>
                     <EventEndDate>2011-11-03 23:30:00</EventEndDate>
                     <EventUserNo>0</EventUserNo>
                     <EventNotes/>
                     <EventTypeName>Blueman's Group Show</EventTypeName>
                     <ResourceName>Grand Theater</ResourceName>
                     <AttributeValues>
                                                                                                   205
eGalaxy Server Interface Specification                                                           11 Common Element Formats
                      <AttributeValues>
                          <AttributeValue>
                              <AttributeValueGroupID>8</AttributeValueGroupID>
                              <Name>Note</Name>
                              <Value>Please have your ready at the gate.</Value>
                              <Sequence>0</Sequence>
                          </AttributeValue>
                          <AttributeValue>
                              <AttributeValueGroupID>8</AttributeValueGroupID>
                              <Name>Note</Name>
                              <Value>Another note,Use Note(2)</Value>
                              <Sequence>1</Sequence>
                          </AttributeValue>
                          <AttributeValue>
                              <AttributeValueGroupID>8</AttributeValueGroupID>
                              <Name>Exp Date</Name>
                              <Value>January 17, 2013</Value>
                              <Sequence>2</Sequence>
                          </AttributeValue>
                      </AttributeValues>
                  </Ticket>
              </Tickets>
          </CreateTransactionResponse>
      </Body>
  </Envelope>

11.17.9 Example CreateTransaction Response for Ticket Sale transaction - Version 5.4 and newer
Following is the response from eGalaxy server version 5.4 and later showing a CreateTransactionResponse element containing a Single
Media package:

  <CreateTransactionResponse>
      <TransactionData>
          <GenerationType>1</GenerationType>
          <OrderID>20120612-12345</OrderID>
          <GalaxyOrderID>12345</GalaxyOrderID>
          <NodeNo>601</NodeNo>
          <TransactionNo>1</TransactionNo>
          <TranDate>2011-11-03 15:53:00</TranDate>
          <AgencyID>10000</AgencyID>
          <UserID>10000</UserID>
          <SalesChannelCategoryID>6</SalesChannelCategoryID>
          <CustomerID>1</CustomerID>
          <TransactionType>0</TransactionType>
          <TransactionTotal>20.00</TransactionTotal>
          <ExternalTransactionTotal>20.00</ExternalTransactionTotal>
          <RetailTransactionTotal>20.00</RetailTransactionTotal>
      </TransactionData>
      <Payments>
          <Payment>
              <PaymentCode>32</PaymentCode>
              <Amount>20.00</Amount>
              <Description>VISA</Description>
          </Payment>
      </Payments>
      <Taxes/>
      <Products>
          <Product Type="Ticket">
              <VisualID>10082000051</VisualID>
              <SerialNo>52</SerialNo>
              <PLU>0010101</PLU>
              <ItemName>TICKET - No Tax</ItemName>
              <ItemDescription>TICKET - No Tax</ItemDescription>
              <AccessCode>10</AccessCode>
              <NetPrice>10.00</NetPrice>
              <DateSold>2012-01-31 16:51:00</DateSold>
              <EventID>1234</EventID>
              <EventName>Panda Exhibit</EventName>
              <EventStartDate>2012-02-15 15:00:00</EventStartDate>
              <EventEndDate>2012-02-15 15:30:00</EventEndDate>
              <EventNotes>This is an event note</EventNotes>
              <EventUserNo>123</EventUserNo>
          </Product>
          <Product Type="Item">
              <PLU>1001001</PLU>
                                                                                                                                      206
eGalaxy Server Interface Specification                                                          11 Common Element Formats
              <PLU>1001001</PLU>
              <ItemName>Item NT</ItemName>
              <ItemDescription>Item No Tax</ItemDescription>
              <ItemUserCode>ITEM</ItemUserCode>
              <NetPrice>10.00</NetPrice>
          </Product>
          <Product Type="Package">
              <VisualID>10082000062</VisualID>
              <SerialNo>0</SerialNo>
              <PLU>PACKAGE0010101</PLU>
              <ItemName>Package - Single Media</ItemName>
              <ItemDescription>Package - No Taxes</ItemDescription>
              <AccessCode>10</AccessCode>
              <NetPrice>20.00</NetPrice>
              <DateSold>2012-02-07 09:37:00</DateSold>
              <Guest>
                  <FirstName>Package_FirstName</FirstName>
                  <LastName>Package_LastName</LastName>
              </Guest>
              <Products>
                  <Product Type="Ticket">
                      <SerialNo>54</SerialNo>
                      <PLU>0010101</PLU>
                      <ItemName>TICKET - No Tax</ItemName>
                      <ItemDescription>TICKET - No Tax</ItemDescription>
                      <ItemUserCode/>
                      <AccessCode>10</AccessCode>
                      <NetPrice>10.00</NetPrice>
                      <DateSold>2012-01-31 16:51:00</DateSold>
                      <EventID>5678</EventID>
                      <EventName>Safari Ride</EventName>
                      <EventStartDate>2012-02-15 16:00:00</EventStartDate>
                      <EventEndDate>2012-02-15 16:30:00</EventEndDate>
                      <EventNotes>This is an event note</EventNotes>
                      <EventUserNo>123</EventUserNo>
                  </Product>
                  <Product Type="Item">
                      <PLU>1001001</PLU>
                      <ItemName>Item NT</ItemName>
                      <ItemDescription>Item No Tax</ItemDescription>
                      <ItemUserCode>ITEM</ItemUserCode>
                      <NetPrice>10.00</NetPrice>
                  </Product>
              </Products>
          </Product>
      </Products>
  </CreateTransactionResponse>

11.17.10 Example CreateTransaction Response for Ticket Sale transaction - Version 5.4 and newer
Following is the response from eGalaxy server version 5.4 and later showing a CreateTransactionResponse element containing a pass with
a payment contract:




                                                                                                                                   207
eGalaxy Server Interface Specification                                                           11 Common Element Formats
  <CreateTransactionResponse>
      <TransactionData>
          <GenerationType>1</GenerationType>
          <OrderID>151214-30</OrderID>
          <GalaxyOrderID>36</GalaxyOrderID>
          <NodeNo>502</NodeNo>
          <TransactionNo>202</TransactionNo>
          <TranDate>2016-03-19 11:02:00</TranDate>
          <AgencyID>7000</AgencyID>
          <UserID>888</UserID>
          <CustomerID>39</CustomerID>
          <TransactionTotal>80.00</TransactionTotal>
      </TransactionData>
      <Payments>
          <Payment>
              <PaymentCode>42</PaymentCode>
              <Amount>16.00</Amount>
              <Description>MASTER</Description>
              <Endorsement>XXXXXXXXXXXXXXXX</Endorsement>
              <GxKeyID>1</GxKeyID>
              <SearchEndorsementValue>1111</SearchEndorsementValue>
              <CardHolderName>John Smith</CardHolderName>
              <AuthCode>151193</AuthCode>
              <ExpDate>XX/XX</ExpDate>
          </Payment>
      </Payments>
      <Payments>
          <Payment>
              <PaymentCode>74</PaymentCode>
              <Amount>80.00</Amount>
              <Description>PAYPLAN</Description>
          </Payment>
      </Payments>
      <Taxes/>
      <Products>
          <Product Type="Ticket">
              <VisualID>15502000000652</VisualID>
              <ExpirationDate>2017-03-19 00:00:00</ExpirationDate>
              <PaymentContractID>104</PaymentContractID>
              <SerialNo>652</SerialNo>
              <PLU>3GZ00601ANP</PLU>
              <Qty>1</Qty>
              <ItemName>Adult Season Pass</ItemName>
              <ItemDescription>Adult Season Pass</ItemDescription>
              <ItemUserCode>No benefit Package</ItemUserCode>
              <BaseLanguageItemName>Adult Season Pass</BaseLanguageItemName>
              <BaseLanguageItemDescription>Adult Season Pass</BaseLanguageItemDescription>
              <AccessCode>15</AccessCode>
              <Price>80.00</Price>
              <OrderLineID>161</OrderLineID>
              <DateSold>2016-03-19 11:02:00</DateSold>
              <Guest>
                  <FirstName>John</FirstName>
                  <LastName>Smith</LastName>
              </Guest>
          </Product>
      </Products>
  </CreateTransactionResponse>

Following is the response from eGalaxy server version 5.4 and later showing a CreateTransactionResponse element containing an Individual
Media package:

  <CreateTransactionResponse>
      <TransactionData>
          <GenerationType>1</GenerationType>
          <OrderID>20120612-12345</OrderID>
          <GalaxyOrderID>12345</GalaxyOrderID>
          <NodeNo>601</NodeNo>
          <TransactionNo>1</TransactionNo>
          <TranDate>2011-11-03 15:53:00</TranDate>
          <AgencyID>10000</AgencyID>
          <UserID>10000</UserID>
          <SalesChannelCategoryID>6</SalesChannelCategoryID>
          <CustomerID>1</CustomerID>
          <TransactionType>0</TransactionType>
                                                                                                                                    208
eGalaxy Server Interface Specification                                                           11 Common Element Formats
          <TransactionType>0</TransactionType>
          <TransactionTotal>20.00</TransactionTotal>
          <ExternalTransactionTotal>20.00</ExternalTransactionTotal>
          <RetailTransactionTotal>20.00</RetailTransactionTotal>
      </TransactionData>
      <Payments>
          <Payment>
              <PaymentCode>32</PaymentCode>
              <Amount>20.00</Amount>
              <Description>VISA</Description>
          </Payment>
      </Payments>
      <Taxes/>
      <Products>
          <Product Type="Ticket">
              <VisualID>10082000053</VisualID>
              <SerialNo>52</SerialNo>
              <PLU>0010101</PLU>
              <ItemName>TICKET - No Tax</ItemName>
              <ItemDescription>TICKET - No Tax</ItemDescription>
              <AccessCode>10</AccessCode>
              <NetPrice>10.00</NetPrice>
              <DateSold>2012-01-31 16:51:00</DateSold>
              <EventID>1234</EventID>
              <EventName>Panda Exhibit</EventName>
              <EventStartDate>2012-02-15 15:00:00</EventStartDate>
              <EventEndDate>2012-02-15 15:30:00</EventEndDate>
              <EventNotes>This is an event note</EventNotes>
              <EventUserNo>123</EventUserNo>
          </Product>
          <Product Type="Item">
              <PLU>1001001</PLU>
              <ItemName>Item NT</ItemName>
              <ItemDescription>Item No Tax</ItemDescription>
              <ItemUserCode>ITEM</ItemUserCode>
              <NetPrice>10.00</NetPrice>
          </Product>
          <Product Type="Package">
              <SerialNo>0</SerialNo>
              <PLU>PACKAGE0010101</PLU>
              <ItemName>Package Individual Media</ItemName>
              <ItemDescription>Package - No Taxes</ItemDescription>
              <AccessCode>10</AccessCode>
              <NetPrice>20.00</NetPrice>
              <DateSold>2012-02-07 09:37:00</DateSold>
              <Guest>
                  <FirstName>Package_FirstName</FirstName>
                  <LastName>Package_LastName</LastName>
              </Guest>
              <Products>
                  <Product Type="Ticket">
                      <VisualID>10082000065</VisualID>
                      <SerialNo>54</SerialNo>
                      <PLU>0010101</PLU>
                      <ItemName>TICKET - No Tax</ItemName>
                      <ItemDescription>TICKET - No Tax</ItemDescription>
                      <AccessCode>10</AccessCode>
                      <NetPrice>10.00</NetPrice>
                      <DateSold>2012-01-31 16:51:00</DateSold>
                      <EventID>0</EventID>
                  </Product>
                  <Product Type="Item">
                      <PLU>1001001</PLU>
                      <ItemName>Item NT</ItemName>
                      <ItemDescription>Item No Tax</ItemDescription>
                      <ItemUserCode>ITEM</ItemUserCode>
                      <NetPrice>10.00</NetPrice>
                  </Product>
              </Products>
          </Product>
      </Products>
  </CreateTransactionResponse>

11.17.11 Example CreateTransaction Response for PrePayment Reseller transaction
Following is the response from eGalaxy server for a CreateTransaction request with TransactionType of PrePayment:
                                                                                                                      209
eGalaxy Server Interface Specification                                                             11 Common Element Formats
  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>4</MessageID>
          <MessageType>CreateTransactionResponse</MessageType>
          <SourceID>ABC Travels</SourceID>
          <TimeStamp>2011-11-03 15:59:40</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <CreateTransactionResponse>
              <TransactionData>
                  <NodeNo>601</NodeNo>
                  <TransactionNo>2</TransactionNo>
                  <TranDate>2011-11-03 15:59:30</TranDate>
                  <AgencyID>10000</AgencyID>
                  <UserID>10000</UserID>
                  <SalesChannelCategoryID>6</SalesChannelCategoryID>
                  <CustomerID>2</CustomerID>
                  <TransactionType>0</TransactionType>
                  <TransactionTotal>100.00</TransactionTotal>
                  <ExternalTransactionTotal>0.00</ExternalTransactionTotal>
                  <RetailTransactionTotal>0.00</RetailTransactionTotal>
              </TransactionData>
              <Payments>
                  <Payment>
                      <PaymentCode>60</PaymentCode>
                      <Amount>100.00</Amount>
                  </Payment>
              </Payments>
          </CreateTransactionResponse>
      </Body>
  </Envelope>

11.17.12 Example CreateTransaction Response for Credit Limit transaction
Following is the response from eGalaxy server for a CreateTransaction request with TransactionType of Credit Limit:

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>5</MessageID>
          <MessageType>CreateTransactionResponse</MessageType>
          <SourceID>ABC Travels</SourceID>
          <TimeStamp>2011-11-03 16:30:50</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <CreateTransactionResponse>
              <TransactionData>
                  <NodeNo>601</NodeNo>
                  <TransactionNo>2</TransactionNo>
                  <TranDate>2011-11-03 16:30:10</TranDate>
                  <AgencyID>10000</AgencyID>
                  <UserID>10000</UserID>
                  <SalesChannelCategoryID>6</SalesChannelCategoryID>
                  <CustomerID>3</CustomerID>
                  <TransactionType>0</TransactionType>
                  <TransactionTotal>500.00</TransactionTotal>
                  <ExternalTransactionTotal>0.00</ExternalTransactionTotal>
                  <RetailTransactionTotal>0.00</RetailTransactionTotal>
              </TransactionData>
              <Payments>
                  <Payment>
                      <PaymentCode>80</PaymentCode>
                      <Amount>500.00</Amount>
                  </Payment>
              </Payments>
          </CreateTransactionResponse>
      </Body>
  </Envelope>


                                                                                                                        210
eGalaxy Server Interface Specification                                        11 Common Element Formats
 11.17.13 Example CreateTransactionResponse contained in a SetOrderStatus response
Following is the response from eGalaxy server for an Orders request. The SetOrderStatus response message contains a
CreateTransactionResponse node that contains the transaction information for a print on web order, including the ticket information:

  Request:
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>-1</MessageID>
          <MessageType>Orders</MessageType>
          <TimeStamp>2018-03-05 07:57:59</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Orders>
              <Order>
                  <OrderID>MMS00000001</OrderID>
                  <OrderCommand>Add</OrderCommand>
                  <SessionID></SessionID>
                  <CustomerID>1</CustomerID>
                  <OrderDate>2018-03-05 00:00:00</OrderDate>
                  <OrderStatus>2</OrderStatus>
                  <OrderTotal>120.00</OrderTotal>
                  <OrderContact>
                      <Contact>
                          <FirstName>CONTACT</FirstName>
                          <LastName>ONE</LastName>
                          <Email>Test@gts.com</Email>
                          <ExternalID>TEST123</ExternalID>
                          <IdentificationNo>TEST123TEST</IdentificationNo>
                      </Contact>
                  </OrderContact>
                  <ShipToContact>
                      <SameAsOrderContact>YES</SameAsOrderContact>
                  </ShipToContact>
                  <OrderLines>
                      <OrderLine>
                          <DetailType>1</DetailType>
                          <Description>Adult GA</Description>
                          <PLU>0010101</PLU>
                          <Qty>1</Qty>
                          <Amount>10.00</Amount>
                          <Total>10.00</Total>
                          <DisbursementID>0</DisbursementID>
                          <EntitlementAddOnVisualID>11062963745</EntitlementAddOnVisualID>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>1</DetailType>
                          <Description>Adult GA</Description>
                          <PLU>0010101</PLU>
                          <Qty>1</Qty>
                          <Amount>10.00</Amount>
                          <Total>10.00</Total>
                          <DisbursementID>0</DisbursementID>
                          <EntitlementAddOnVisualID>11062963746</EntitlementAddOnVisualID>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>1</DetailType>
                          <Description>Adult GA</Description>
                          <PLU>0010101</PLU>
                          <Qty>1</Qty>
                          <Amount>10.00</Amount>
                          <Total>10.00</Total>
                          <DisbursementID>0</DisbursementID>
                          <EntitlementAddOnVisualID>11062963747</EntitlementAddOnVisualID>
                      </OrderLine>
                      <OrderLine>
                          <DetailType>2</DetailType>
                          <Description>MASTER CARD</Description>
                          <Amount>30.00</Amount>
                          <PaymentCode>32</PaymentCode>
                          <PaymentDate>2017-06-12 15:20:04</PaymentDate>
                                                                                                                                       211
eGalaxy Server Interface Specification                                       11 Common Element Formats
                          <PaymentDate>2017-06-12 15:20:04</PaymentDate>
                          <Endorsement></Endorsement>
                      </OrderLine>
                  </OrderLines>
                  <Shipping>
                      <DeliveryMethod>11</DeliveryMethod>
                  </Shipping>
                  <GroupVisit>
                      <VisitDate>2018-06-17 00:00:00</VisitDate>
                  </GroupVisit>
              </Order>
          </Orders>
      </Body>
  </Envelope>

  Response:
  <Envelope>
      <Header>
          <MessageID>-1</MessageID>
          <MessageType>SetOrderStatus</MessageType>
          <SourceID>ABC Travels</SourceID>
          <TimeStamp>2018-03-05 10:53:53</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <OrderID>MMS00000002</OrderID>
          <GalaxyOrderID>4697</GalaxyOrderID>
          <Status>2</Status>
          <CreateTransactionResponse>
              <TransactionData>
                  <GenerationType>1</GenerationType>
                  <OrderID>MMS00000002</OrderID>
                  <GalaxyOrderID>4697</GalaxyOrderID>
                  <NodeNo>555</NodeNo>
                  <TransactionNo>145</TransactionNo>
                  <TranslationLanguageID>0</TranslationLanguageID>
                  <TranDate>2018-03-05 10:54:00</TranDate>
                  <AgencyID>1000</AgencyID>
                  <UserID>888</UserID>
                  <CustomerID>1</CustomerID>
                  <TransactionTotal>30.00</TransactionTotal>
              </TransactionData>
              <Payments>
                  <Payment>
                      <PaymentCode>32</PaymentCode>
                      <Amount>30.00</Amount>
                      <Description>visa</Description>
                      <ExpDate>XX/XX</ExpDate>
                  </Payment>
              </Payments>
              <Payments>
                  <Payment>
                      <PaymentCode>81</PaymentCode>
                      <Amount>30.00</Amount>
                      <Description>balance</Description>
                  </Payment>
              </Payments>
              <Products>
                  <Product Type="Ticket">
                      <VisualID>10555000023</VisualID>
                      <OwnerVisualID>11062963745</OwnerVisualID>
                      <ExpirationDate>2020-03-05 00:00:00</ExpirationDate>
                      <SerialNo>23</SerialNo>
                      <PLU>0010101</PLU>
                      <Qty>1</Qty>
                      <ItemName>Adult GA</ItemName>
                      <AccessCode>10</AccessCode>
                      <Price>10.00</Price>
                      <OrderLineID>30723</OrderLineID>
                      <DateSold>2018-03-05 10:54:00</DateSold>
                      <OnlineExchangeStatus>1</OnlineExchangeStatus>
                  </Product>
                  <Product Type="Ticket">
                      <VisualID>10555000024</VisualID>
                      <OwnerVisualID>11062963746</OwnerVisualID>
                      <ExpirationDate>2020-03-05 00:00:00</ExpirationDate>
                                                                                                  212
eGalaxy Server Interface Specification                                       11 Common Element Formats
                      <ExpirationDate>2020-03-05 00:00:00</ExpirationDate>
                      <SerialNo>24</SerialNo>
                      <PLU>0010101</PLU>
                      <Qty>1</Qty>
                      <ItemName>Adult GA</ItemName>
                      <AccessCode>10</AccessCode>
                      <Price>10.00</Price>
                      <OrderLineID>30724</OrderLineID>
                      <DateSold>2018-03-05 10:54:00</DateSold>
                      <OnlineExchangeStatus>1</OnlineExchangeStatus>
                  </Product>
                  <Product Type="Ticket">
                      <VisualID>10555000025</VisualID>
                      <OwnerVisualID>11062963747</OwnerVisualID>
                      <ExpirationDate>2020-03-05 00:00:00</ExpirationDate>
                      <SerialNo>25</SerialNo>
                      <PLU>0010101</PLU>
                      <Qty>1</Qty>
                      <ItemName>Adult GA</ItemName>
                      <AccessCode>10</AccessCode>
                      <Price>10.00</Price>
                      <OrderLineID>30725</OrderLineID>
                      <DateSold>2018-03-05 10:54:00</DateSold>
                      <OnlineExchangeStatus>1</OnlineExchangeStatus>
                  </Product>
              </Products>
              <OrderContact>
                  <FirstName>CONTACT</FirstName>
                  <LastName>ONE</LastName>
                  <IdentificationNo>MMS123TEST</IdentificationNo>
                  <Email>CONE@gts.com</Email>
              </OrderContact>
          </CreateTransactionResponse>
      </Body>
  </Envelope>




                                                                                                  213
eGalaxy Server Interface Specification                                                                      12 UpdatePass Message
12 UpdatePass Message
The UpdatePass message is used to update demographic information on one or more Passes.
To do so, the client must provide the visual ID (typically the “barcode number”) or the pass account of the pass(es) to update.
If both the visual ID an pass account are provided, both must be correct for the same pass. Otherwise, the request will fail.
If only a visual ID is provided and more than one matching pass record is found, the first result back from SQL will be updated
If only a pass account is provided and more than one matching pass record is found, the pass with the highest PassNo (the most recent
pass record) will be updated

12.1 Message Format
Using the fields described in the “Pass Element” section(s), a source can update the demographics on a pass by sending an UpdatePass
message to the eGalaxy Server.

12.1.1 UpdatePass Message
The UpdatePass message is sent by the web site to eGalaxy Attraction Server to update the specified fields on one or more passes. The
eGalaxy Attraction Server returns either an OK or the error that was encountered during the update.

12.1.1.1 Request Message Parameters

If a single Pass is being updated, it can be specified using a Pass element, or a Passes element with a single child Pass element. Multiple
passes must be defined in the message under a Passes element.
If a Passes element is sent and two or more Pass elements within evaluate to the same pass record the entire request will fail unless the
StrictValidation field is set to False.

 Field            Description                                                                                                       Type
 Pass             <Pass> element. See <Pass> element for details, described under sub section “<Pass> Element” of section           Element
                  “Common Element Formats” (Optional)
 Passes           <Passes> element, contains one or more <Pass> child elements. (Optional)                                          Element
 StrictValidation Indicates whether all updates given in the request must succeed validation (True) or if failed validation can     Boolean
                  be skipped without failing the entire request (False) (optional, default True)

12.1.1.1.1 <Pass> Element

Please refer to <Pass> element for details, which is described under sub section “<Pass> Element” of section “Common Element Formats”

12.1.1.2 Example UpdatePass Request (with VisualID)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABCTravels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-08-03 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <StrictValidation>NO</StrictValidation>
          <Pass>
              <VisualID>20000258000002</VisualID>
              <FirstName>John</FirstName>
              <MiddleName>J</MiddleName>
              <LastName>Smith</LastName>
              <IdentificationNo>123456789</IdentificationNo>
              <ValidFrom>2004-08-03 10:00:00</ValidFrom>. . . </Pass>
      </Body>
  </Envelope>


                                                                                                                                         214
eGalaxy Server Interface Specification                                                 12 UpdatePass Message
12.1.1.3 Example UpdatePass Request (with PassAcct)

  <Envelope>
      <Header>
          <SourceID>ABCTravels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-08-03 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Pass>
              <PassAcct>258000002</PassAcct>
              <FirstName>John</FirstName>
              <MiddleName>J</MiddleName>
              <LastName>Smith</LastName>
              <IdentificationNo>123456789</IdentificationNo>
              <ValidFrom>2004-08-03 10:00:00</ValidFrom>. . . </Pass>
      </Body>
  </Envelope>

12.1.1.4 Example UpdatePass Response – no errors

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABCTravels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-08-03 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

12.1.1.5 Example UpdatePass Response – with errors

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABCTravels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-08-03 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>1500</StatusCode>
              <StatusText>Updated 0 of 1 passes successfully</StatusText>
          </Status>
          <UpdatePassErrors>
              <Errors>
                  <Error>
                      <ErrorCode>1506</ErrorCode>
                      <ErrorText>VisualID 20000258000002 of the pass not found or is invalid</ErrorText>
                  </Error>
              </Errors>
          </UpdatePassErrors>
      </Body>
  </Envelope>

12.1.1.6 Example UpdatePass Response – with errors (VisualID - PassAcct discrepency)




                                                                                                           215
eGalaxy Server Interface Specification                                                12 UpdatePass Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABCTravels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-08-03 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>1500</StatusCode>
              <StatusText>Updated 0 of 1 passes successfully</StatusText>
          </Status>
          <UpdatePassErrors>
              <Errors>
                  <Error>
                      <ErrorCode>1513</ErrorCode>
                      <ErrorText>VisualID 20001000159 and PassAcct 123123 of the pass not found or invalid.
  </ErrorText>
                  </Error>
              </Errors>
          </UpdatePassErrors>
      </Body>
  </Envelope>

12.1.1.7 Example UpdatePass Request - Multiple passes

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABC Travels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2012-10-30 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Passes>
              <Pass>
                  <VisualID>33099000622</VisualID>
                  <FirstName>EditFirst-Update</FirstName>
                  <MiddleName>G</MiddleName>
                  <Street1>Stree1 Edit</Street1>
                  <LastName>Next Pass has invalid VisualID</LastName>
              </Pass>
              <Pass>
                  <VisualID>123492929</VisualID>
                  <FirstName>Test</FirstName>
              </Pass>
              <Pass>
                  <VisualID>30062956249</VisualID>
                  <FirstName>Test-Update</FirstName>
                  <MiddleName>G</MiddleName>
                  <LastName>LastName</LastName>
              </Pass>
          </Passes>
      </Body>
  </Envelope>

12.1.1.8 Example UpdatePass Response – Multiple passes, no errors




                                                                                                              216
eGalaxy Server Interface Specification                                                12 UpdatePass Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABCTravels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-08-03 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

12.1.1.9 Example UpdatePass Response – Multiple passes, with errors

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABCTravels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-08-03 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>1500</StatusCode>
              <StatusText>Updated 1 of 2 passes successfully</StatusText>
          </Status>
          <UpdatePassErrors>
              <Errors>
                  <Error>
                      <ErrorCode>1510</ErrorCode>
                      <ErrorText>Error saving pass with visual id, 33099000622: Additional Error Message
  Here</ErrorText>
                  </Error>
              </Errors>
          </UpdatePassErrors>
      </Body>
  </Envelope>

12.1.1.10 Example UpdatePass Response – Multiple passes, with errors

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>ABCTravels</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2004-08-03 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>1500</StatusCode>
              <StatusText>Updated 0 of 2 passes successfully</StatusText>
          </Status>
          <UpdatePassErrors>
              <Errors>
                  <ErrorCode>1506</ErrorCode>
                  <ErrorText>VisualID 204550001881 of the pass not found or is invalid</ErrorText>
              </Errors>
              <Errors>
                  <ErrorCode>1509</ErrorCode>
                  <ErrorText>Error updating pass with Pass Acct 455000131: Pass field Last Name is configured as
  a required field on the pass kind (26), however no data exists for this field in the updated pass.</ErrorText>
              </Errors>
          </UpdatePassErrors>
      </Body>
  </Envelope>


                                                                                                              217
eGalaxy Server Interface Specification                                                       12 UpdatePass Message
12.1.1.11 Example UpdatePass Request - Activate a pass

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <SourceID>Exchange</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2019-10-17 10:00:00</TimeStamp>
          <MessageType>UpdatePass</MessageType>
      </Header>
      <Body>
          <Passes>
              <Pass>
                  <VisualID>20001000177</VisualID>
                  <FirstName>PassFirstName</FirstName>
                  <LastName>PassLastName</LastName>
                  <IdentificationNo>IdentificationNo</IdentificationNo>
                  <AllowEmail>YES</AllowEmail>
                  <Status>0</Status>
              </Pass>
          </Passes>
      </Body>
  </Envelope>

12.1.1.12 Example UpdatePass Response - Activation success

  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>UpdatePassResponse</MessageType>
          <SourceID>Exchange</SourceID>
          <TimeStamp>2019-10-17 13:44:29</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <UpdatePassResponse/>
      </Body>
  </Envelope>

12.1.1.13 Example UpdatePass Response - Activation failure (required demographics missing)

  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>UpdatePassResponse</MessageType>
          <SourceID>Exchange</SourceID>
          <TimeStamp>2019-10-17 13:45:37</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>1500</StatusCode>
              <StatusText>Updated 0 of 1 passes successfully</StatusText>
          </Status>
          <UpdatePassErrors>
              <Errors>
                  <ErrorCode>1509</ErrorCode>
                  <ErrorText>Error updating pass with Visual ID 20001000177: Pass field Last Name is configured
  as a required field on the pass kind (3), however no data exists for this field in the updated pass.
  </ErrorText>
              </Errors>
          </UpdatePassErrors>
      </Body>
  </Envelope>



                                                                                                              218
eGalaxy Server Interface Specification                                                                          13 Surveys Message
13 Surveys Message
The Surveys message is used to send surveys completed on the web store to the eGalaxy server, which imports the surveys into Galaxy’s
database
To do so, eGalaxy server can be configured to send the request for new surveys (PickupSurveys) in specific time intervals. Upon receipt of
the PickupSurveys request, the web store responds with the Surveys message, which includes all new surveys in the web store’s database.

13.1 Message Format
Following sections describes the format of different messages related to the surveys on the web store.

13.1.1 PickupSurveys Message
There are no parameters involved in the PickupSurveys request, the message type in the Header of the message should be “PickupSurveys”
and that is the only format requirement for this message.

13.1.1.1 PickupSurveys request example

The Pass element appears in the Body element of a standard eGalaxy message. Pass is the only field (element) supported in the
UpdatePass message.

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>133</MessageID>
          <TimeStamp>2005-01-31 15:43:10</TimeStamp>
          <MessageType>PickupSurveys</MessageType>
      </Header>
      <Body/>
  </Envelope>

13.1.2 Surveys Message
The web store returns the Surveys message as a response to the PickupSurveys message. The Surveys message is consist of following
parameters:

 Field   Description       Type
 Surveys <Surveys> element Element

13.1.2.1 <Surveys> element

A <Surveys> element has one or more <Survey> element. One or more <Survey> elements can be added to a <Surveys> element to support
the multiple surveys per transaction requirement.

 Field Description Type
 Survey See <Survey> Element

13.1.2.2 <Survey> element

Following fields are supported within <Survey> element:

 Field        Description                                      Type
 ExternalID   External ID to identify the survey result        Numeric
 SurveyID     Unique SurveyID                                  Numeric
 OrderID      ID of the order for which survey was completed   Text (20)
 SurveyURL    URL for the guest to take the survey             Text (255)
 Answers      See <Answers>                                    Element


                                                                                                                                        219
eGalaxy Server Interface Specification                                                                      13 Surveys Message
13.1.2.3 <Answers> element

An <Answers> element has one or more <Answer> element:

 Field  Description  Type
 Answer See <Answer> Element

13.1.2.4 <Answer> element

Following fields are supported within <Answer> element:

 Field        Description                                      Type
 AnswerNumber Number of question                               Numeric
 AnswerText   Answer given in response to the survey question. Text (40)

13.1.2.5 Surveys message example

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>Webstore</SourceID>
          <MessageID>133</MessageID>
          <TimeStamp>2004-10-23 15:43:10</TimeStamp>
          <MessageType>Surveys</MessageType>
      </Header>
      <Body>
          <Surveys>
              <Survey>
                  <ExternalID>1</ExternalID>
                  <SurveyID>1</SurveyID>
                  <OrderID>1234</OrderID>
                  <SurveyURL>http://surveys.gatewayticketing.com/?ID=12345</SurveyURL>
                  <Answers>
                      <Answer>
                          <AnswerNumber>1</AnswerNumber>-- Question: What is your name ?
                          <AnswerText>John Smith</AnswerText></Answer>
                      <Answer>
                          <AnswerNumber>2</AnswerNumber>-- Question: Which State you live in ?
                          <AnswerText>PA</AnswerText></Answer>
                      <Answer>
                          <AnswerNumber>3</AnswerNumber>-- Question: What is your ZIP code ?
                          <AnswerText>19512</AnswerText></Answer>
                  </Answers>
              </Survey>
              <Survey>
                  <ExternalID>2</ExternalID>
                  <SurveyID>1</SurveyID>
                  <OrderID>5678</OrderID>. . . </Survey>
          </Surveys>
      </Body>
  </Envelope>

13.1.3 SetSurveyStatus Message
In response to the Surveys message, eGalaxy server sends SetSurveyStatus message back to the website. The SetSurveyStatus message is
consist of following parameters:

 Field          Description                                   Type
 ExternalID     External ID to identify the survey result     Numeric
 Status         Status of the survey (see below for values)   Numeric
 SurveyErrors   See <SurveyErrors>                            Element

Status Values

 Value Description

                                                                                                                                   220
eGalaxy Server Interface Specification                                                                      13 Surveys Message
 1       New survey. Survey is not picked up by eGalaxy yet
 2       Survey is picked up by eGalaxy successfully
 3       Survey is rejected by eGalaxy with error(s)

13.1.3.1 <SurveyErrors> element

A <SurveyErrors> element has one or more <SurveyError> element. One or more <SurveyError> elements can also exists in a <SurveyErrors>
element.

 Field       Description       Type
 SurveyError See <SurveyError> Element

13.1.3.2 <SurveyError> element

A <SurveyError> element has following fields:

 Field     Description       Type
 ErrorCode Code of the error Numeric
 ErrorText Text of the error Text

13.1.3.3 SetSurveyStatus message example – no errors

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>Webstore</SourceID>
          <MessageID>133</MessageID>
          <TimeStamp>2004-10-23 15:43:10</TimeStamp>
          <MessageType>SetSurveyStatus</MessageType>
      </Header>
      <Body>
          <ExternalID>1</ExternalID>
          <Status>2</Status>
      </Body>
  </Envelope>

13.1.3.4 SetSurveyStatus message example – error(s)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>Webstore</SourceID>
          <MessageID>133</MessageID>
          <TimeStamp>2004-10-23 15:43:10</TimeStamp>
          <MessageType>AddSurveyResultsResponse</MessageType>
      </Header>
      <Body>
          <ExternalID>1</ExternalID>
          <Status>3</Status>
          <SurveyErrors>
              <SurveyError>
                  <ErrorCode>1601</ErrorCode>
                  <ErrorText>Cannot insert survey, surveyID 1 not found</ErrorText>
              </SurveyError>
          </SurveyErrors>
      </Body>
  </Envelope>

13.1.3.5 GetRejectedSurveys Message

There are no parameters involved in the GetRejectedSurveys request, the message type in the Header of the message should be
“GetRejectedSurveys” and that is the only format requirement for this message.

13.1.3.6 GetRejectedSurveys message example
                                                                                                                                   221
eGalaxy Server Interface Specification                                                                          13 Surveys Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>134</MessageID>
          <TimeStamp>2005-02-15 15:43:10</TimeStamp>
          <MessageType>GetRejectedSurveys</MessageType>
      </Header>
      <Body/>
  </Envelope>

13.1.4 GetRejectedSurveysResponse Message
The web store returns the GetRejectedSurveysResponse message as a response to the GetRejectedSurveys message. The
GetRejectedSurveysResponse message is consist of following parameters:

 Field           Description               Type
 RejectedSurveys <RejectedSurveys> element Element

13.1.4.1 <RejectedSurveys> element

A <RejectedSurveys> element has one or more <RejectedSurvey> element.

 Field          Description          Type
 RejectedSurvey See <RejectedSurvey> Element

13.1.4.2 <RejectedSurvey> element

The <RejectedSurvey> element contains errors for a rejected survey. Following are the fields that are supported under the <RejectedSurvey>
element:

 Field        Description                                         Type
 ExternalID   ID used by external system to identify the survey   Numeric
 SurveyID     SurveyID of the rejected survey                     Numeric
 OrderID      OrderID of the rejected survey                      Numeric
 Errors       See <Errors>                                        Element

13.1.4.3 <Errors> element

An <Errors> element has one or more <Error> element.

 Field Description Type
 Error See <Error> Element

13.1.4.4 <Error> element

The <Error> element contains details of the error for a rejected survey. The only fields supported under the <Error> element are ErrorCode
and ErrorText.

 Field     Description                    Type
 ErrorCode Error code of the survey error Numeric
 ErrorText Text of the survey error       Text

13.1.4.5 GetRejectedSurveysResponse example




                                                                                                                                        222
eGalaxy Server Interface Specification                                                                  13 Surveys Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>Webstore</SourceID>
          <MessageID>133</MessageID>
          <TimeStamp>2004-10-23 15:43:10</TimeStamp>
          <MessageType>AddSurveyResultsResponse</MessageType>
      </Header>
      <Body>
          <RejectedSurveys>
              <RejectedSurvey>
                  <ExternalID>1</ExternalID>
                  <SurveyID>1</SurveyID>
                  <OrderID>1234</OrderID>
                  <Errors>
                      <Error>
                          <ErrorCode>1601</ErrorCode>
                          <ErrorText>Cannot insert survey, surveyID 1 not found</ErrorText>
                      </Error>
                  </Errors>
              </RejectedSurvey>
          </RejectedSurveys>
      </Body>
  </Envelope>

13.1.5 ChangeSurveyStatus Message
Message ChangeSurveyStatus can be sent from Managers Workstation to change the status of a survey. The ChangeSurveyStatus message
is consist of following parameters:

 Field   Description   Type
 Surveys See <Surveys> Element

13.1.5.1 <Surveys> element

The <Surveys> element contains one or more <Survey> element.

 Field Description Type
 Survey See <Survey> Element

13.1.5.2 <Survey> element

The <Survey> element contains the ExternalID, SurveyID and the NewStatus of the survey.

 Field      Description                                    Type
 ExternalID ExternalID of the survey                       Numeric
 NewStatus New status of the survey (see below for values) Numeric

NewStatus Values

 Value   Description
 1       New survey. Survey is not picked up by eGalaxy yet
 2       Survey is picked up by eGalaxy successfully
 3       Survey is rejected by eGalaxy with error(s)

13.1.5.3 ChangeSurveyStatus message example




                                                                                                                              223
eGalaxy Server Interface Specification                    13 Surveys Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>135</MessageID>
          <TimeStamp>2005-02-15 15:43:10</TimeStamp>
          <MessageType>ChangeSurveyStatus</MessageType>
      </Header>
      <Body>
          <Surveys>
              <Survey>
                  <ExternalID>1</ExternalID>
                  <NewStatus>1</NewStatus>
              </Survey>
              <Survey>
                  <ExternalID>2</ExternalID>
                  <NewStatus>1</NewStatus>
              </Survey>
          </Surveys>
      </Body>
  </Envelope>




                                                                        224
eGalaxy Server Interface Specification                                                          14 Authenticate Logon Message
14 Authenticate Logon Message
The AuthenticateLogon message is used to authenticate logon for individuals or Galaxy customers. Galaxy stores logon information for
individuals (contacts) as well as for customers. The AuthenticateLogon message is used to verify the credentials for such logons.

14.1 Message Format
Following sections describes the format of the AuthenticateLogon message.

14.1.1 AuthenticateLogon Message
AuthenticateLogon message is sent by the Web Store to eGalaxy server to verify the credentials entered by the individual seeking access to
a specific area of the Web Store. Upon receiving this message, eGalaxy server looks up the Username and Password given in the request in
SystemLogons SQL table. If a match is found, eGalaxy returns the information about the owner of the logon (owner of a logon in Galaxy
could be a customer or an individual contact). If no match is found, eGalaxy returns the error.

14.1.1.1 Request Message Parameters

The AuthenticateLogon element appears in the Body of this message. AuthenticateLogon is the only field or element supported in the
AuthenticateLogon message.

 Field             Description                 Type
 AuthenticateLogon <AuthenticateLogon> element Element

14.1.1.1.1 <AuthenticateLogon> Element

Following fields are supported within <AuthenticateLogon> element:

 Field    Description                           Type
 Username Username of the individual logging on Text
 Password Password of the individual logging on Text

14.1.1.2 Example AuthenticateLogon request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>AuthenticateLogon</MessageType>
          <SourceID/>
          <TimeStamp>2005-08-09 11:54:37</TimeStamp>
      </Header>
      <Body>
          <AuthenticateLogon>
              <Username>Username</Username>
              <Password>Password</Password>
          </AuthenticateLogon>
      </Body>
  </Envelope>

14.1.2 AuthenticateLogonResponse Message
AuthenticateLogonResponse message is sent by eGalaxy server in response of the AuthenticateLogon request.

14.1.2.1 Response Message Parameters

The AuthenticateLogonResponse element appears in the Body of this message.

 Field                     Description                         Type
 AuthenticateLogonResponse <AuthenticateLogonResponse> element Element

                                                                                                                                       225
eGalaxy Server Interface Specification                                                                 14 Authenticate Logon Message
14.1.2.1.1 <AuthenticateLogonResponse> Element

Following fields are supported within <AuthenticateLogonResponse> element:

 Field                       Description                                                                                            Type
 LogonOwnerType              Type of owner for the logon given in the AuthenticateLogon request                                     Numeric
                             1 – Owner of the logon is a “Contact”
                             2 – Owner of the logon is a “Customer”

 LogonOwnerExternalID ExternalID of the owner of the logon given in the AuthenticateLogon request                                   Text
                             If the owner of this logon is a “Contact”, then value in this field is the ExternalID of the contact
                             (CustContacts.ExternalID field)
                             If the owner of this logon is a “Customer”, then value in this field is the ExternalAccount of the
                             customer (Customer.ExternalAccount field)


14.1.2.2 Example AuthenticateLogonResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>AuthenticateLogonResponse</MessageType>
          <SourceID/>
          <TimeStamp>2005-08-09 11:54:38</TimeStamp>
      </Header>
      <Body>
          <AuthenticateLogonResponse>
              <LogonOwnerType>1</LogonOwnerType>
              <LogonOwnerExternalID>123</LogonOwnerExternalID>
          </AuthenticateLogonResponse>
      </Body>
  </Envelope>

14.1.2.3 Example AuthenticateLogonResponse message (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>AuthenticateLogonResponse</MessageType>
          <SourceID/>
          <TimeStamp>2005-08-09 11:54:38</TimeStamp>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>1801</ErrorCode>
                  <ErrorText>Logon authentication error, no match found for the given username and
  password</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                                                           226
eGalaxy Server Interface Specification                                                                         15 Customers Message
15 Customers Message
This section describes different messages related to the customer in Galaxy.

15.1 Customers Message
Customers message is sent to eGalaxy server to add, modify or delete a customer in Galaxy database. When processing the Customers
message with the Modify command, eGalaxy uses the value given in the ExternalAccount field to lookup the customer in Galaxy’s database.
If the customer is not found based on the ExternalAccount field, the record is added to the Customers database with the assumption that it
is a new customer (this is true only when error code 1709 is configured as warning). When processing the Modify command, eGalaxy simply
removes the existing information on the customer and adds the data such as Contacts, and SalesPrograms given in the Modify command.
The Modify command must always have all information of the customer. If only the contact information should be updated, the
UpdateContacts command should be used.
The Tax Group and FOP Group defined on the category (given in the Customers message) are assigned to the customer when the customer
is added or modified using the Customers message.
The CustomersResponse message is returned by eGalaxy in response to the Customers message. The CustomersResponse message
indicates if the Customers request was processed successfully or not.

15.1.1 Message Format
Following sections describe the format of the Customers message.

15.1.1.1 Request Message Parameters

The Customers element appears in the Body of this message. Customers is the only field or element supported within body of the message.

 Field     Description         Type
 Customers <Customers> element Element

One or more <Customer> elements are supported within <Customers> element.
15.1.1.1.1 <Customer> Element

Each Customer element contains data for a single customer. A customer in Galaxy has two types of addresses, first one is customer address
and the second one is customers’ primary contact’s address. This is the reason fields Street1 thru CountryCode are required for a customer
(under <Customer> element of the message) as well as for the customer contact (under <Contact> element). In most cases a customer
address and customers’ primary contact’s address are the same, and fields Street1 thru CountryCode would have the same data under the
<Customer> and <Contact> elements of the Customer message.
Following fields are supported within the <Customer> element:

 Field                     Description                                                                                Type
 CustomerCommand           Add, Modify or Cancel. At this time only the Modify command will be used.                  Text
 Name                      Customer name, stored in Customers.CustName                                                Text(50)
 CustomerGUID              GUID associated to this customer. Used to uniquely identify this customer across any       Text(38)
                           system. This field is optional. If a CustomerGUID is not provided, one will be generated
                           for the customer.
 ExternalAccount           External account number for the given customer. Stored in Customers.ExternalAccount.       Text(20)
                           This field is optional if CustomerStatus other than (0 – Valid) is given in the request.
 Category                  Customer Category to represent xxyy where xx is the category ID of the customer            This field is optional if
                           category and yy is the sub-category ID of the customer category.                           CustomerStatus other
                                                                                                                      than (0 – Valid) is
                                                                                                                      given in the request.
 Reference                 Reference for this customer (Optional)                                                     Text(40)
 CustomerNote              Customer notes (optional)                                                                  Text
 Email                     E-mail address (Optional)                                                                  Text(128)
 WebURL                    Customer web site URL (Optional)                                                           Text(128)
                                                                                                                                            227
eGalaxy Server Interface Specification                                                                       15 Customers Message
 Street1             Street address line 1                                                                           Text(36)
 Street2             Street address line 2 (Optional)                                                                Text(36)
 Street3             Street address line 3 (Optional)                                                                Text(36)
 City                City                                                                                            Text(40)
 State               State or province                                                                               Text(40)
 ZIP                 ZIP or postal code                                                                              Text(16)
 Salesperson         Salesperson assigned to this customer                                                           Text(16)
 GroupSalesCode      Group sales code for customer                                                                   Text(30)
 Phone               Customer's telephone number                                                                     Text(30)
 CellPhone           Customer's cell phone number                                                                    Text(30)
 Fax                 Customer's fax number                                                                           Text(30)
 CountryCode         Country Code i.e. ‘US’ for United States                                                        Text(2)
 Status              Status of the customer’s credit account. Possible status values are: 0 – Active 1 – On          Numeric
                     Hold 2 – Frozen (prepayment accounts only). Value given in this field is saved on the
                     credit status field on the customer’s account. (Optional)
 CustomerStatus      Status of the customer. Possible customer status values are: 0 – Customer is valid. This        Numeric
                     is the default status of the customer if no value is given in the request for this field. 1 –
                     Customer is pending. 2 – Customer is ejected. Value given in this field is saved on the
                     status field on the customer record. (Optional)
 IsPrepaymentAccount Indicates if the customer account is a prepayment account                                       Boolean
 CustomerContacts    <CustomerContacts> element (Optional)                                                           Element
 BillToContacts      <BillToContacts> element (Optional)                                                             Element
 ShipToContacts      <ShipToContacts> element (Optional)                                                             Element
 SalesPrograms       <SalesPrograms> element (Optional)                                                              Element
 LogOns              <LogOns> element. See <LogOns> element for details, described under sub section                 Element
                     “<LogOns> Element” of section “Common Element Formats” (Optional)

15.1.1.1.1.1 <Status> element


The value in the <Status> element represents the status of the customer’s account. The value in the <Status> element is a numeric value 0
– Active, or 1 – OnHold and it should be interpreted as below:
Active
        When importing a customer record with Add command, if value in Status element is 0 – “Active”, eGalaxy first creates an account
        with the bill-to contact given in the customer message and assigns the new account to the customer being added. The account kind
        on the customer is set to 1 – “Customer’s own Account”, Credit Limit Amount on the account is set to 0 – “Unlimited”, and Credit
        Hold flag on the account is Disabled (account is not on credit hold)
        When importing a customer record with Revise command, if value in Status element is 0 – “Active”, eGalaxy first checks if an account
        is assigned to the given customer…
        If an account is already assigned to the customer, eGalaxy sets Credit Hold flag on the account to Disabled (only if its Enabled
        currently)
        If no account is currently assigned to the given customer, eGalaxy creates an account with the bill-to contact given in the customer
        message and assigns the new account to the customer being added. The account kind on the customer is set to 1 – “Customer’s own
        Account”, Credit Limit Amount on the account is set to 0 – “Unlimited”, and Credit Hold flag on the account is Disabled (account is
        not on credit hold)
OnHold
        When importing a customer record with Add command, if value in Status element is 1 – “Hold”, eGalaxy first creates an account with
        the bill-to contact given in the customer message and assigns the new account to the customer being added. The account kind on the
        customer is set to 1 – “Customer’s own Account”, Credit Limit Amount on the account is set to 0 – “Unlimited”, and Credit Hold flag
        on the account is Enabled (account is on credit hold)
        When importing a customer record with Revise command, if value in Status element is 1 – “Hold”, eGalaxy first checks if an account
        is assigned to the given customer…
        If an account is already assigned to the customer, eGalaxy sets the Credit Hold flag on the account to Enabled (only if its Disabled
        currently)
        If no account is currently assigned to the given customer, eGalaxy creates an account with the bill-to contact given in the customer

                                                                                                                                        228
eGalaxy Server Interface Specification                                                                          15 Customers Message
        message and assigns the new account to the customer being added. The account kind on the customer is set to 1 – “Customer’s own
        Account”, Credit Limit Amount on the account is set to 0 – “Unlimited”, and Credit Hold flag on the account is Enabled (only if its
        Disabled currently)

15.1.1.1.1.2 <CustomerContacts>, <BillToContacts> and <ShipToContacts> Elements


The <CustomerContacts>, <BillToContacts> and <ShipToContacts> elements are all child elements of the Customer element, and each can
contain one or more <Contact> elements. Depending on which element the <Contact> element appears, the contact will be added/revised
as a Customer, Bill-To or Ship-To contact and associated with the Customer specified in the current Customer element. It should be noted
that each <Contact> element could contain a <Logon> element, which defines a username/password for that contact.
Existing contacts can be found by providing the ExternalID, ContactGUID, or GalaxyContactID. If more than one of these are provided, they
must all resolve to the same contact or no contact at all. If an ExternalID and/or ContactGUID are given that are not in the database, the
contact will be updated with that information. The GalaxyContactID is not updatable in this way and if given, must match an existing
contact. If, for example, a GalaxyContactID is provided that is valid for a contact and an ExternalID is provided that is not in the table, the
contact will be updated to have the given ExternalID.
If the Remove flag is sent as YES as part of the contact element, the link between the customer and that contact will be severed.

 Field   Description                                                                                                                   Type
 Contact <Contact> element. See <Contact> element for details, described under sub section “<Contact> Element” of section              Element
         “Common Element Formats”

15.1.1.1.1.3 <SalesPrograms> Element


The SalesPrograms element appears within the <Customer> element. The SalesPrograms element contains one or more <SalesProgram>
elements for each sales program that is supposed to be imported for this customer.

 Field        Description            Type
 SalesProgram <SalesProgram> element Element

15.1.1.1.1.3.1 <SalesProgram> Element
A SalesProgram element contains following fields of the sales program:

 Field         Description                                                                                                             Type
 Name          Sales Program Name, lookup up at time of insert to translate to internal ID for the sales program and                   Text(20)
               establishes the relationship in the SPConnections table
 MarkAsDefault The sales program is set as a default for the given customer. Stored in Customers.DefaultSalesProgram. If               Boolean
               element is not given or is empty default value is NO (Optional)

15.1.1.2 Example Customers request message – No <CustomerStatus>

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2005-04-28 15:43:10</TimeStamp>
          <MessageType>Customers</MessageType>
      </Header>
      <Body>
          <Customers>
              <Customer>
                  <CustomerCommand>Add</CustomerCommand>
                  <ExternalAccount>Cust1</ExternalAccount>
                  <CustomerGUID>{12E487E1-9BFA-419F-951B-2407412DE90B}</CustomerGUID>
                  <Name>Customer 1</Name>
                  <Category>0105</Category>
                  <Street1>123 Main St</Street1>
                  <Street2/>
                  <Street3/>
                  <City>Seattle</City>
                  <State>WA</State>
                  <ZIP>98156</ZIP>
                  <CountryCode>US</CountryCode>
                                                                                                                                             229
eGalaxy Server Interface Specification                        15 Customers Message
                <CountryCode>US</CountryCode>
                <Status>0</Status>
                <Salesperson>John Doe</Salesperson>
                <Reference>REF2016-01</Reference>
                <GroupSalesCode>CODE01</GroupSalesCode>
                <Phone>610-555-1212</Phone>
                <CellPhone>610-555-1212</CellPhone>
                <Fax>610-555-1212</Fax>
                <CustomerContacts>
                    <Contact>
                        <FirstName>John</FirstName>
                        <MiddleName/>
                        <LastName>Smith</LastName>
                        <Street1>123 Main St</Street1>
                        <Street2/>
                        <Street3/>
                        <City>Seattle</City>
                        <State>WA</State>
                        <ZIP>98156</ZIP>
                        <CountryCode>US</CountryCode>
                        <Phone/>
                        <Fax/>
                        <Cell/>
                        <Email/>
                        <LogOn>
                            <Username>User1</Username>
                            <Password>Password1</Password>
                        </LogOn>
                    </Contact>
                    <Contact>
                        <FirstName>James</FirstName>
                        <MiddleName/>
                        <LastName>Clark</LastName>
                        <Street1>456 East Main St</Street1>
                        <Street2/>
                        <Street3/>
                        <City>Seattle</City>
                        <State>WA</State>
                        <ZIP>98156</ZIP>
                        <CountryCode>US</CountryCode>
                        <Phone/>
                        <Fax/>
                        <Cell/>
                        <Email/>
                        <LogOn>
                            <Username>User2</Username>
                            <Password>Password2</Password>
                        </LogOn>
                    </Contact>
                </CustomerContacts>
                <BillToContacts>
                    <Contact>
                        <FirstName>John</FirstName>
                        <MiddleName/>
                        <LastName>Smith</LastName>
                        <Street1>123 Main St</Street1>
                        <Street2/>
                        <Street3/>
                        <City>Seattle</City>
                        <State>WA</State>
                        <ZIP>98156</ZIP>
                        <CountryCode>US</CountryCode>
                        <Phone/>
                        <Fax/>
                        <Cell/>
                        <Email/>
                    </Contact>
                </BillToContacts>
                <ShipToContacts>
                    <Contact>
                        <FirstName>Jane</FirstName>
                        <MiddleName/>
                        <LastName>Smith</LastName>
                        <Street1>123 Main St</Street1>
                        <Street2/>
                        <Street3/>
                        <City>Seattle</City>
                                                                              230
eGalaxy Server Interface Specification                                                              15 Customers Message
                          <City>Seattle</City>
                          <State>WA</State>
                          <ZIP>98156</ZIP>
                          <CountryCode>US</CountryCode>
                          <Phone/>
                          <Fax/>
                          <Cell/>
                          <Email/>
                          <LogOn>
                              <Username>User3</Username>
                              <Password>Password3</Password>
                          </LogOn>
                      </Contact>
                  </ShipToContacts>
                  <SalesPrograms>
                      <SalesProgram>
                          <Name>Sales Program 1</Name>
                          <MarkAsDefault>YES</MarkAsDefault>
                      </SalesProgram>
                      <SalesProgram>
                          <Name>Sales Program 2</Name>
                          <MarkAsDefault>NO</MarkAsDefault>
                      </SalesProgram>
                  </SalesPrograms>
              </Customer>
          </Customers>
      </Body>
  </Envelope>

15.1.1.3 Example Customers Message (UpdateContacts) - this will only update the contacts and not alter any other customer
information

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2005-04-28 15:43:10</TimeStamp>
          <MessageType>Customers</MessageType>
      </Header>
      <Body>
          <Customers>
              <Customer>
                  <CustomerCommand>UpdateContacts</CustomerCommand>
                  <ExternalAccount>Cust1</ExternalAccount>
                  <CustomerGUID>{12E487E1-9BFA-419F-951B-2407412DE90B}</CustomerGUID>
                  <CustomerContacts>
                      <Contact>
                          <Remove>YES</Remove>
                          <ExternalID>234567</ExternalID>
                          <FirstName>John</FirstName>
                          <MiddleName/>
                          <LastName>Smith</LastName>
                          <Street1>123 Main St</Street1>
                          <Street2/>
                          <Street3/>
                          <City>Seattle</City>
                          <State>WA</State>
                          <ZIP>98156</ZIP>
                          <CountryCode>US</CountryCode>
                          <Phone/>
                          <Fax/>
                          <Cell/>
                          <Email/>
                          <LogOn>
                              <Username>User1</Username>
                              <Password>Password1</Password>
                          </LogOn>
                      </Contact>
                      <Contact>
                          <ExternalID>123456</ExternalID>
                          <FirstName>James</FirstName>
                          <MiddleName/>
                          <LastName>Clark</LastName>
                          <Street1>455 East Main St</Street1>
                          <Street2/>
                                                                                                                            231
eGalaxy Server Interface Specification                         15 Customers Message
                          <Street2/>
                          <Street3/>
                          <City>Seattle</City>
                          <State>WA</State>
                          <ZIP>98156</ZIP>
                          <CountryCode>US</CountryCode>
                          <Phone/>
                          <Fax/>
                          <Cell/>
                          <Email/>
                          <LogOn>
                              <Username>User2</Username>
                              <Password>Password2</Password>
                          </LogOn>
                      </Contact>
                  </CustomerContacts>
                  <BillToContacts>
                      <Contact>
                          <ExternalID>345678</ExternalID>
                          <FirstName>John</FirstName>
                          <MiddleName/>
                          <LastName>Smith</LastName>
                          <Street1>123 Main St</Street1>
                          <Street2/>
                          <Street3/>
                          <City>Seattle</City>
                          <State>WA</State>
                          <ZIP>98156</ZIP>
                          <CountryCode>US</CountryCode>
                          <Phone/>
                          <Fax/>
                          <Cell/>
                          <Email/>
                      </Contact>
                  </BillToContacts>
                  <ShipToContacts>
                      <Contact>
                          <Remove>NO</Remove>
                          <ExternalID>987456</ExternalID>
                          <FirstName>Jane</FirstName>
                          <MiddleName/>
                          <LastName>Smith</LastName>
                          <Street1>123 Main St</Street1>
                          <Street2/>
                          <Street3/>
                          <City>Seattle</City>
                          <State>WA</State>
                          <ZIP>98156</ZIP>
                          <CountryCode>US</CountryCode>
                          <Phone/>
                          <Fax/>
                          <Cell/>
                          <Email/>
                          <LogOn>
                              <Username>User3</Username>
                              <Password>Password3</Password>
                          </LogOn>
                      </Contact>
                  </ShipToContacts>
              </Customer>
          </Customers>
      </Body>
  </Envelope>

15.1.1.4 Example CustomersResponse message (no errors)




                                                                               232
eGalaxy Server Interface Specification                                                                    15 Customers Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2005-04-28 15:43:10</TimeStamp>
          <MessageType>CustomerResponse</MessageType>
      </Header>
      <Body>
          <CustomerResponses>
              <CustomerResponse>
                  <ExternalAccount>Cust1</ExternalAccount>
                  <CustomerCommand>Add</CustomerCommand>
                  <Status>0</Status>
                  <GalaxyCustomerID>123</GalaxyCustomerID>
                  <CustomerGUID>{12E487E1-9BFA-419F-951B-2407412DE90B}</CustomerGUID>
              </CustomerResponse>
          </CustomerResponses>
      </Body>
  </Envelope>

15.1.1.5 Example CustomersResponse message (with errors)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2005-04-28 15:43:10</TimeStamp>
          <MessageType>CustomersResponse</MessageType>
      </Header>
      <Body>
          <CustomerResponses>
              <CustomerResponse>
                  <ExternalAccount>Cust1</ExternalAccount>
                  <CustomerCommand>Add</CustomerCommand>
                  <Status>1</Status>
                  <Errors>
                      <Error>
                          <ErrorCode>1706</ErrorCode>
                          <ErrorText>Customer with the given external account already exists in
  Galaxy</ErrorText>
                      </Error>
                  </Errors>
              </CustomerResponse>
          </CustomerResponses>
      </Body>
  </Envelope>


15.2 QueryCustomer Message
QueryCustomer message is used to get data for a customer from the Galaxy database. The Web Store sends the QueryCustomer message
to eGalaxy server to get data for a Galaxy customer. Upon receiving this message, eGalaxy server looks up the Customers table in Galaxy
database for a matching customer. If a match is found, eGalaxy returns the information about the customer back to the Web Store. If no
match is found, eGalaxy returns an error.

15.2.1 Message Format
Following sections describes the format of the QueryCustomer message.

15.2.1.1 Request Message Parameters

The QueryCustomer element appears in the Body of this message. QueryCustomer is the only field or element supported within body of the
QueryCustomer message.

 Field         Description             Type
 QueryCustomer <QueryCustomer> element Element


                                                                                                                                     233
eGalaxy Server Interface Specification                                                                   15 Customers Message
15.2.1.1.1 <QueryCustomer> Element

The QueryCustomer element has a Query element.

 Field Description     Type
 Query <Query> element Element

Following fields are supported within the Query element:

 Field           Description                                                                               Type
 CustomerGUID GUID associated to this customer. Used to uniquely identify this customer across any system. Text(38)
 ExternalAccount External account for the customer                                                         Text (20)

15.2.1.1.2 DataRequest fields

The following fields can be requested in the <DataRequest> element.
Following fields represent the data specific to a customer:

 Field              Description
 RemainingCredit    This field will enable the inclusion of the RemainingCredit and UnlimitedCredit fields in the response
 UsedCreditAmount   This field will enable the inclusion of the UsedCreditAmount, EnforceCreditOnIssue and EnforceCreditOnAdd fields
                    in the response
 CustomerAttributes This field will enable the inclusion of the CustomerAttributes list in the response

15.2.1.1.3 Example QueryCustomer request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryCustomer</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-09 11:54:37</TimeStamp>
      </Header>
      <Body>
          <QueryCustomer>
              <Query>
                  <ExternalAccount>ExtAccount1</ExternalAccount>
              </Query>
          </QueryCustomer>
      </Body>
  </Envelope>

15.2.1.2 Response Message Parameters

When a QueryCustomer request is processed successfully withouot any errors, eGalaxy Server returns the response with the
<QueryCustomerResponse> element appears in the Body of this message.

 Field                 Description                     Type
 QueryCustomerResponse <QueryCustomerResponse> element Element

15.2.1.2.1 <QueryCustomerResponse> Element

The QueryCustomerResponse element contains following fields.

 Field                          Description                                                                                 Type
 ExternalAccount                External account number                                                                     Text(20)
 GalaxyCustomerID               ID of the customer from Customers table in Galaxy database                                  Numeric
 Name                           Name of the customer                                                                        Text(50)

                                                                                                                                  234
eGalaxy Server Interface Specification                                                                   15 Customers Message
 Reference            Reference field                                                                                          Text(40)
 CustomerGUID         GUID associated to this customer. Used to uniquely identify this customer across any system.             Text(38)
 CustomerNote         Customer note                                                                                            Text
 Status               Status of the customer account: 0 – Active – Customer account is in good standing 1 – On Hold –          Numeric
                      Customer account is on hold 2 – Frozen – Customer account is frozen (Prepayment accounts only)
 EnforceLimits        Flag indicating if the GroupSales Limits are enforced for this customer                                  Boolean
 CustCategoryID       ID of the customer’s category from CustCategories table in Galaxy database                               Numeric
 SalesChannelID       ID of the Sales Channel defined on the customer                                                          Numeric
 AccountID            ID of the customer’s account from ARAccounts table in Galaxy database                                    Numeric
 DisableCredit        Indicates if the customer’s account from the ARAccounts table has credit disabled                        Boolean
 CreditLimit          The credit limit on the customer’s account from the ARAccounts table                                     Currency
 RemainingCredit      The remaining credit on the customer’s account from the ARAccounts table                                 Currency
 UnlimitedCredit      Indicates if the customer’s account from the ARAccounts table has an unlimited credit limit              Boolean
 UsedCreditAmount     The used credit amount on the customer’s account from the ARAccounts table                               Currency
 EnforceCreditOnIssue Returns the cofiguration setting for the 'Do credit check' option (Code 508). Returned when              Boolean
                      'UsedCreditAmount' data request field is given in the request.
 EnforceCreditOnAdd Returns the cofiguration setting for the 'Enforce credit limit on add items' option (Code 522). Returned   Boolean
                      when 'UsedCreditAmount' data request field is given in the request.
 IsPrepaymentAccount Indicates if the customer’s account from the ARAccounts table is a prepayment account                     Boolean
 PrepaidBalance       The prepaid balance amount on the customer’s account from the ARAccounts table                           Currency
 OwnsAccount          Indicates if the customer’s account is owned by this customer (ARAccounts.OwnerID matches                Boolean
                      Customers.CustomerID). If the customer has no account, this returns false(“NO”).
 Address              <Address> element                                                                                        Element
 CustomerAttributes   <CustomerAttributes> element. Contains zero or more <CustomerAttribute> elements.                        Element
 CustomerContacts     <CustomerContacts> element. Contains one or more <Contact> elements. See <Contact> element for           Element
                      details, described under sub section “<Contact> Element” of section “Common Element Formats”
 BillToContacts       <BillToContacts> element. Contains one or more <Contact> elements. See <Contact> element for             Element
                      details, described under sub section “<Contact> Element” of section “Common Element Formats”
 ShipToContacts       <ShipToContacts> element. Contains one or more <Contact> elements. See <Contact> element for             Element
                      details, described under sub section “<Contact> Element” of section “Common Element Formats”

<Address> element contains the following fields.

 Field           Description              Type
 Street1         Street address line 1    Text(36)
 Street2         Street address line 2    Text(36)
 Street3         Street address line 3    Text(36)
 City            City                     Text(40)
 State           State                    Text(40)
 ZIP             Postal code              Text(16)
 CountryCode     Country code             Text(2)

Each <CustomerAttribute> element contains the information for one customer field attribute associated with the customer. Each element
contains the following XML attributes:

 Attribute Description
 Name      The name of the customer attribute
 Value     The value of the customer attribute

15.2.1.2.2 Example QueryCustomerResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
                                                                                                                                     235
eGalaxy Server Interface Specification                                             15 Customers Message
     <Header>
         <MessageID>1</MessageID>
         <MessageType>QueryCustomerResponse</MessageType>
         <SourceID/>
         <TimeStamp>2005-08-09 11:54:38</TimeStamp>
     </Header>
     <Body>
         <QueryCustomerResponse>
             <ExternalAccount>ExtAccount1</ExternalAccount>
             <GalaxyCustomerID>123</GalaxyCustomerID>
             <Name>Customer Name</Name>
             <Reference/>
             <CustomerGUID>{12E487E1-9BFA-419F-951B-2407412DE90B}</CustomerGUID>
             <CustomerNote/>
             <Status>1</Status>
             <EnforceLimits>YES</EnforceLimits>
             <CustCategoryID>1</CustCategoryID>
             <AccountID>1</AccountID>
             <DisableCredit>NO</DisableCredit>
             <CreditLimit>1000.00</CreditLimit>
             <IsPrepaymentAccount>NO</IsPrepaymentAccount>
             <PrepaidBalance>0.00</PrepaidBalance>
             <OwnsAccount>YES</OwnsAccount>
             <Address>
                 <Street1>315 E 2nd st</Street1>
                 <Street2/>
                 <Street3/>
                 <City>Boyertown</City>
                 <State>PA</State>
                 <ZIP>19512</ZIP>
                 <CountryCode>US</CountryCode>
             </Address>
             <CustomerContacts>
                 <Contact>
                     <FirstName>John</FirstName>
                     <MiddleName>A</MiddleName>
                     <LastName>Smith</LastName>
                     <Street1>123 Main St</Street1>
                     <Street2/>
                     <Street3/>
                     <City>Seattle</City>
                     <State>WA</State>
                     <ZIP>98156</ZIP>
                     <CountryCode>US</CountryCode>
                     <Phone/>
                     <Fax/>
                     <Cell/>
                     <Email/>
                     <NameTitleID>5</NameTitleID>
                     <NameSuffixID>5</NameSuffixID>
                     <AllowEmail>NO</AllowEmail>
                     <AllowMailings>NO</AllowMailings>
                 </Contact>
             </CustomerContacts>
             <BillToContacts>
                 <Contact>
                     <FirstName>Joe</FirstName>
                     <MiddleName>A</MiddleName>
                     <LastName>Black</LastName>
                     <Street1>100 N Main St</Street1>
                     <Street2/>
                     <Street3/>
                     <City>Seattle</City>
                     <State>WA</State>
                     <ZIP>98150</ZIP>
                     <CountryCode>US</CountryCode>
                     <Phone/>
                     <Fax/>
                     <Cell/>
                     <Email/>
                     <NameTitleID>5</NameTitleID>
                     <NameSuffixID>5</NameSuffixID>
                     <AllowEmail>NO</AllowEmail>
                     <AllowMailings>NO</AllowMailings>
                 </Contact>
             </BillToContacts>
             <ShipToContacts>
                 <Contact>
                                                                                                   236
eGalaxy Server Interface Specification                                                  15 Customers Message
                  <Contact>
                      <FirstName>Jane</FirstName>
                      <MiddleName>M</MiddleName>
                      <LastName>Fisher</LastName>
                      <Street1>1000 S Main St</Street1>
                      <Street2/>
                      <Street3/>
                      <City>Seattle</City>
                      <State>WA</State>
                      <ZIP>98155</ZIP>
                      <CountryCode>US</CountryCode>
                      <Phone/>
                      <Fax/>
                      <Cell/>
                      <Email/>
                      <NameTitleID>5</NameTitleID>
                      <NameSuffixID>5</NameSuffixID>
                      <AllowEmail>NO</AllowEmail>
                      <AllowMailings>NO</AllowMailings>
                  </Contact>
              </ShipToContacts>
          </QueryCustomerResponse>
      </Body>
  </Envelope>

15.2.1.2.3 Example QueryCustomerResponse message (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryCustomerResponse</MessageType>
          <SourceID/>
          <TimeStamp>2005-08-09 11:54:38</TimeStamp>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>1901</ErrorCode>
                  <ErrorText>Unable to return customer data, customer with External Account of ExtAccount1 not
  found</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>

15.2.1.2.4 Example QueryCustomer message with DataRequest fields

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryCustomer</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2005-08-16 10:30:46</TimeStamp>
      </Header>
      <Body>
          <QueryCustomer>
              <Query>
                  <ExternalAccount>ExtAccount1</ExternalAccount>
              </Query>
                  <DataRequest>
                      <Field>RemainingCredit</Field>
                      <Field>UsedCreditAmount</Field>
                      <Field>CustomerAttributes</Field>
                  </DataRequest>
          </QueryCustomer>
      </Body>
  </Envelope>

15.2.1.2.5 Example QueryCustomerResponse message with DataRequest fields

  <?xml version="1.0"?>
                                                                                                                 237
eGalaxy Server Interface Specification                                     15 Customers Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryCustomerResponse</MessageType>
          <SourceID/>
          <TimeStamp>2005-08-09 11:54:38</TimeStamp>
      </Header>
      <Body>
          <QueryCustomerResponse>
              <ExternalAccount>ExtAccount1</ExternalAccount>
              <GalaxyCustomerID>123</GalaxyCustomerID>
              <Name>Customer Name</Name>
              <Reference/>
              <CustomerNote/>
              <Status>1</Status>
              <EnforceLimits>YES</EnforceLimits>
              <CustCategoryID>1</CustCategoryID>
              <AccountID>1</AccountID>
              <DisableCredit>NO</DisableCredit>
              <CreditLimit>1000.00</CreditLimit>
              <RemainingCredit>0.00</RemainingCredit>
              <UnlimitedCredit>YES</UnlimitedCredit>
              <UsedCreditAmount>100.00</UsedCreditAmount>
              <EnforceCreditOnIssue>YES</EnforceCreditOnIssue>
              <EnforceCreditOnAdd>NO</EnforceCreditOnAdd>
              <IsPrepaymentAccount>NO</IsPrepaymentAccount>
              <PrepaidBalance>0.00</PrepaidBalance>
              <OwnsAccount>YES</OwnsAccount>
              <Address>
                  <Street1>315 E 2nd st</Street1>
                  <Street2/>
                  <Street3/>
                  <City>Boyertown</City>
                  <State>PA</State>
                  <ZIP>19512</ZIP>
                  <CountryCode>US</CountryCode>
              </Address>
              <CustomerAttributes>
                  <CustomerAttribute>
                      <AttributeValueGroupID>345</AttributeValueGroupID>
                      <Name>Account Number</Name>
                      <Sequence>0</Sequence>
                      <Value>XYZ001234</Value>
                  </CustomerAttribute>
                  <CustomerAttribute>
                      <AttributeValueGroupID>345</AttributeValueGroupID>
                      <Name>Account Added Date</Name>
                      <Sequence>1</Sequence>
                      <Value>10/21/2015</Value>
                  </CustomerAttribute>
              </CustomerAttributes>
              <CustomerContacts>
                  <Contact>
                      <FirstName>John</FirstName>
                      <MiddleName>A</MiddleName>
                      <LastName>Smith</LastName>
                      <Street1>123 Main St</Street1>
                      <Street2/>
                      <Street3/>
                      <City>Seattle</City>
                      <State>WA</State>
                      <ZIP>98156</ZIP>
                      <CountryCode>US</CountryCode>
                      <Phone/>
                      <Fax/>
                      <Cell/>
                      <Email/>
                      <NameTitleID>5</NameTitleID>
                      <NameSuffixID>5</NameSuffixID>
                      <AllowEmail>NO</AllowEmail>
                      <AllowMailings>NO</AllowMailings>
                  </Contact>
              </CustomerContacts>
              <BillToContacts>
                  <Contact>
                      <FirstName>Joe</FirstName>
                                                                                           238
eGalaxy Server Interface Specification                    15 Customers Message
                      <FirstName>Joe</FirstName>
                      <MiddleName>A</MiddleName>
                      <LastName>Black</LastName>
                      <Street1>100 N Main St</Street1>
                      <Street2/>
                      <Street3/>
                      <City>Seattle</City>
                      <State>WA</State>
                      <ZIP>98150</ZIP>
                      <CountryCode>US</CountryCode>
                      <Phone/>
                      <Fax/>
                      <Cell/>
                      <Email/>
                      <NameTitleID>5</NameTitleID>
                      <NameSuffixID>5</NameSuffixID>
                      <AllowEmail>NO</AllowEmail>
                      <AllowMailings>NO</AllowMailings>
                  </Contact>
              </BillToContacts>
              <ShipToContacts>
                  <Contact>
                      <FirstName>Jane</FirstName>
                      <MiddleName>M</MiddleName>
                      <LastName>Fisher</LastName>
                      <Street1>1000 S Main St</Street1>
                      <Street2/>
                      <Street3/>
                      <City>Seattle</City>
                      <State>WA</State>
                      <ZIP>98155</ZIP>
                      <CountryCode>US</CountryCode>
                      <Phone/>
                      <Fax/>
                      <Cell/>
                      <Email/>
                      <NameTitleID>5</NameTitleID>
                      <NameSuffixID>5</NameSuffixID>
                      <AllowEmail>NO</AllowEmail>
                      <AllowMailings>NO</AllowMailings>
                  </Contact>
              </ShipToContacts>
          </QueryCustomerResponse>
      </Body>
  </Envelope>




                                                                          239
eGalaxy Server Interface Specification                                                      16 UpdateReplenishStatus Message
16 UpdateReplenishStatus Message
The UpdateReplenishStatus message is used to update the replenish status of a ticket in the Galaxy database.

16.1 Message Format
Following sections describes the format of the UpdateReplenishStatus message.

16.1.1 UpdateReplenishStatus Message
UpdateReplenishStatus message is sent by the Web Store to eGalaxy server to update the replenish status of a ticket in the Galaxy
database. Upon receiving this message, eGalaxy server finds the ticket using the VisualID given in the request first. If a match is found, the
status of the ticket is updated to the new status given in the request. If no match is found, eGalaxy returns an error.

16.1.1.1 Request Message Parameters

The UpdateReplenishStatus element appears in the Body of this message. UpdateReplenishStatus is the only field or element supported in
the UpdateReplenishStatus message.

 Field                 Description                     Type
 UpdateReplenishStatus <UpdateReplenishStatus> element Element

16.1.1.1.1 <UpdateReplenishStatus> Element

Following fields are supported within UpdateReplenishStatus element

  <thead>
      <tr><th>Field</th><th>Description</th><th>Type</th></tr>
  </thead>
  <tbody>
      <tr>
          <td>VisualID</td>
          <td>VisualID or barcode of the ticket</td>
          <td>Text (40)</td>
      </tr>
      <tr>
          <td>ReplenishStatus</td>
          <td>
              New replenish status for the ticket. Following status values are allowed for this field:<br />
              1 – Activate replenishment<br />
              3 – Cancel the replenishment<br />
              4 – Suspend the replenishment<br />
              Note: If the value is different than listed above, the request is rejected with an error
          </td>
          <td>Numeric</td>
      </tr>
  </tbody>



16.1.1.2 Example UpdateReplenishStatus request




                                                                                                                                           240
eGalaxy Server Interface Specification                                    16 UpdateReplenishStatus Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>UpdateReplenishStatus</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-15 11:54:37</TimeStamp>
      </Header>
      <Body>
          <UpdateReplenishStatus>
              <VisualID>10001004083000020</VisualID>
              <ReplenishStatus>3</ReplenishStatus>
          </UpdateReplenishStatus>
      </Body>
  </Envelope>

16.1.1.3 Example UpdateReplenishStatusResponse (no errors)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>UpdateReplenishStatusResponse</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-15 11:54:38</TimeStamp>
      </Header>
      <Body/>
  </Envelope>

16.1.1.4 Example UpdateReplenishStatusResponse (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>UpdateReplenishStatusResponse</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-15 11:54:38</TimeStamp>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>2001</ErrorCode>
                  <ErrorText>Unable to update replenish status, VisualID 10001004083000020 not found</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                              241
eGalaxy Server Interface Specification                                                                           17 Contact Message
17 Contact Message
This section describes different messages related to the contact in Galaxy.

17.1 Contacts Message
Contacts message is sent to eGalaxy server to add, modify or delete a contact in Galaxy database. When processing the Contacts message
with the Modify command, eGalaxy uses the value given in the ExternalID field to lookup the contact in Galaxy’s database. If the contact is
not found based on the ExternalID field, the record is added to the CustContacts database with the assumption that it is a new contact (this
is true only when the error code is configured as warning). When processing the Modify command, eGalaxy simply removes the existing
information on the contact using the data given in the request. The Modify command must always have all information of the contact.
The ContactsResponse message is returned by eGalaxy in response to the Contacts message. The ContactsResponse message indicates if
the Contacts request was processed successfully or not.

17.1.1 Message Format
Following sections describe the format of the Contacts message.

17.1.1.1 Request Message Parameters

The Contacts element appears in the Body of this message. Contacts is the only field or element supported within body of the message.

 Field    Description        Type
 Contacts <Contacts> element Element

One or more <Contact> elements are supported within <Contact> element.
17.1.1.1.1 <Contact> Element

Each Contact element contains data for a single contact. Please refer to <Contact> element for more details related to the XML format for
this element. The <Contact> element is described under sub section “<Contact> Element” of section “Common Element Formats”

17.1.1.2 Example Contacts request




                                                                                                                                        242
eGalaxy Server Interface Specification                                  17 Contact Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>Contacts</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-16 10:30:46</TimeStamp>
      </Header>
      <Body>
          <Contacts>
              <Contact>
                  <ContactCommand>Add</ContactCommand>
                  <ExternalID>ExternalID1</ExternalID>
                  <JobTitle/>
                  <NameTitleID/>
                  <FirstName>John</FirstName>
                  <MiddleName>M</MiddleName>
                  <LastName>Smith</LastName>
                  <NameSuffixID/>
                  <Street1>123 Main St</Street1>
                  <Street2/>
                  <Street3/>
                  <City>Seattle</City>
                  <State>WA</State>
                  <ZIP>98156</ZIP>
                  <CountryCode>US</CountryCode>
                  <Phone>6109874000</Phone>
                  <Fax/>
                  <Cell/>
                  <Email>jsmith@xyz.com</Email>
                  <Primary>NO</Primary>
                  <AllowEmail>NO</AllowEmail>
                  <AllowMailings>NO</AllowMailings>
                  <ContactNote/>
                  <SpecialNeeds>NO</SpecialNeeds>
                  <Deceased>NO</Deceased>
                  <PaymentInfo>
                      <PaymentName>Personal Credit Card</PaymentName>
                      <CardNo>4005550000000019</CardNo>
                      <CardToken>ZT9l1AMq5flHqh5znPTizg==</CardToken>
                      <CardHolderName>John M Smith</CardHolderName>
                      <ExpDate>1206</ExpDate>
                      <Primary>YES</Primary>
                  </PaymentInfo>
              </Contact>
          </Contacts>
      </Body>
  </Envelope>

17.1.1.3 Example ContactsResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <TimeStamp>2005-04-28 15:43:10</TimeStamp>
          <MessageType>ContactsResponse</MessageType>
      </Header>
      <Body>
          <ContactResponses>
              <ContactResponse>
                  <ExternalID>ExternalID1</ExternalID>
                  <ContactCommand>Add</ContactCommand>
                  <Status>0</Status>
                  <GalaxyContactID>123</GalaxyContactID>
              </ContactResponse>
          </ContactResponses>
      </Body>
  </Envelope>

17.1.1.4 Example ContactsResponse message (with errors)


                                                                                      243
eGalaxy Server Interface Specification                                                                              17 Contact Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <TimeStamp>2005-04-28 15:43:10</TimeStamp>
          <MessageType>ContactsResponse</MessageType>
      </Header>
      <Body>
          <ContactResponses>
              <ContactResponse>
                  <ExternalID>ExternalID1</ExternalID>
                  <ContactCommand>Add</ContactCommand>
                  <Status>1</Status>
                  <Errors>
                      <Error>
                          <ErrorCode>2201</ErrorCode>
                          <ErrorText>Contact with the given ExternalID already exists in Galaxy</ErrorText>
                      </Error>
                  </Errors>
              </ContactResponse>
          </ContactResponses>
      </Body>
  </Envelope>


17.2 QueryContact Message
The QueryContact message is used to get data for a contact from the Galaxy database. QueryContact message is sent by the Web Store to
eGalaxy server to get data for a contact in Galaxy. Upon receiving this message, eGalaxy server looks up the CustContacts table in Galaxy
database for a matching contact. If a match is found, eGalaxy returns the information about the contact back to the Web Store. If no match
is found, eGalaxy returns an error.
Clients can send the QueryContact message to get the payment information configured on the contact record. The payment information is
returned in the <PaymentInfo> element of the QueryContactResponse message. However, eGalaxy server returns the PaymentInfo in the
QueryContactResponse message only when the request is sent using a secure connection (SSL port 443). If the request is sent to using the
non-secure connection (regular Gateway port 3051), then eGalaxy server does not return PaymentInfo in the QueryContactResponse
message.

17.2.1 Message Format
Following sections describes the format of the QueryContact message.

17.2.1.1 Request Message Parameters

The QueryContact element appears in the Body of this message. QueryContact is the only field or element supported in the QueryContact
message.

 Field        Description            Type
 QueryContact <QueryContact> element Element

17.2.1.1.1 <QueryContact> Element

The QueryContact element has a Query element.

 Field Description     Type
 Query <Query> element Element

Following fields are supported within the Query element:

 Field                      Description                                                                                               Type
 ExternalID                 External ID for the contact                                                                               Text
                                                                                                                                      (20)
 IdentificationNo           IdentificationNo of the contact                                                                           Text
                                                                                                                                      (64)
 GalaxyContactID            Galaxy ContactID for the contact. Use this field to look up contact by value in CustContactID column of   Numeric
                                                                                                                                          244
eGalaxy Server Interface Specification                                                                            17 Contact Message
                      CustContacts table in Galaxy database.
 ContactGUID          GUID for the contact. Use this field to look up the contact across different systems (e.g Galaxy              Text
                      database and eGalaxy Webstore database).
 PricingForCustomerID Galaxy CustomerID for a Group Sales Customer associated with the contact. Use this field to look up           Numeric
                      pricing information only for that particular Customer. (Optional)
 IncludeInvalidPasses If set to YES, the query response will included passes/memberships that are no longer valid but are           Boolean
                      associated with the requested contact. (Optional)

17.2.1.2 Response Message Parameters

One of element returned within the QueryContactResponse message is the <PricingInfoList> element. Please refer to <PricingInfoList>
element for more details related to the XML format for this element. The <PricingInfoList> element is described under sub section
“<PricingInfoList> Element” of section “Common Element Formats”.
Another potential element returned is the LoyaltyAccounts element, if any loytalty accounts are associated to the requested contact. See
<LoyaltyAccounts> entry under the “Common Element Formats” section for more information.
The BlockingStatus element is also returned, containing the status of the block on the contact for several actions: Orders, Tickets, Passes
and Admission.
If the Contact requested is associated with a Pass (Individual or Joint), then the QueryContactResponse will contain a Memberships
element. This element will contain one or more Membership elements (depending on how many memberships the contact is associated
with). The BlockingStatus is returned for each member as well.

 Field                    Description                                                                                               Type
 ExpirationDate           Expiration date of the membership                                                                         Element
 IsRenewable              Is the membership currently renewable?                                                                    Boolean
 ProductName              Name of the membership product                                                                            Text
 VisualID                 VisualID of the pass                                                                                      Text
 MediaVisualID            VisualID of the pass as printed on customer card (Lifetime Card only)                                     Text
 CurrentRecord            Indicates if the membership is currently valid or if it is the last one in the membership chain if        Boolean
                          none are valid (Lifetime Card only)
 PaymentContractAutoRenew Set if the pass is on Payment Contract and the Contract is set to Auto-Renew                              Boolean
 Members                  <Members> element (see Common Elements). Individual members return information for                        Element
                          HasAppleWalletData.

17.2.1.3 Example QueryContact request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryContact</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-16 10:30:46</TimeStamp>
      </Header>
      <Body>
          <QueryContact>
              <Query>
                  <ExternalID>ExternalID1</ExternalID>
                  <IdentificationNo>IdNo</IdentificationNo>
              </Query>
          </QueryContact>
      </Body>
  </Envelope>

17.2.1.4 Example QueryContactResponse message when request is sent using a non-secure connection (no error)




                                                                                                                                           245
eGalaxy Server Interface Specification                                                                17 Contact Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryContactResponse</MessageType>
          <SourceID/>
          <TimeStamp>2005-08-16 10:30:47</TimeStamp>
      </Header>
      <Body>
          <QueryContactResponse>
              <ExternalID>ExternalID1</ExternalID>
              <IdentificationNo>IdNo</IdentificationNo>
              <GalaxyContactID>123</GalaxyContactID>
              <ContactGUID>{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}</ContactGUID>
              <JobTitle/>
              <NameTitleID/>
              <FirstName>John</FirstName>
              <MiddleName>M</MiddleName>
              <LastName>Smith</LastName>
              <NameSuffixID/>
              <Street1>123 Main St</Street1>
              <Street2/>
              <Street3/>
              <City>Seattle</City>
              <State>WA</State>
              <ZIP>98156</ZIP>
              <CountryCode>US</CountryCode>
              <Phone>6109874000</Phone>
              <Fax/>
              <Cell/>
              <Email>jsmith@xyz.com</Email>
              <Primary>NO</Primary>
              <AllowEmail>NO</AllowEmail>
              <AllowMailings>NO</AllowMailings>
              <ContactNote/>
              <SpecialNeeds>NO</SpecialNeeds>
              <Deceased>NO</Deceased>
              <LogOn>
                                  <SystemLogonID>31</SystemLogonID>
                                  <Username>MyUsername</Username>
                                  <Password>MyPassword</Password>
              </LogOn>
              <TotalPaymentContracts>1</TotalPaymentContracts>
              <BlockingStatus>
                  <BlockOrders>YES</BlockOrders>
                  <BlockTickets>NO</BlockTickets>
                  <BlockPasses>NO</BlockPasses>
                  <BlockAdmission>YES</BlockAdmission>
              </BlockingStatus>
              <PricingInfoList>
                  <PricingInfo>. . . </PricingInfo>
              </PricingInfoList>
          </QueryContactResponse>
      </Body>
  </Envelope>

17.2.1.5 Example QueryContactResponse message when request is sent using a secure connection (no error)




                                                                                                                    246
eGalaxy Server Interface Specification                                            17 Contact Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryContactResponse</MessageType>
          <SourceID/>
          <TimeStamp>2005-08-16 10:30:47</TimeStamp>
      </Header>
      <Body>
          <QueryContactResponse>
              <ExternalID>ExternalID1</ExternalID>
              <IdentificationNo>IdNo</IdentificationNo>
              <GalaxyContactID>123</GalaxyContactID>
              <ContactGUID>{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}</ContactGUID>
              <JobTitle/>
              <NameTitleID/>
              <FirstName>John</FirstName>
              <MiddleName>M</MiddleName>
              <LastName>Smith</LastName>
              <NameSuffixID/>
              <Street1>123 Main St</Street1>
              <Street2/>
              <Street3/>
              <City>Seattle</City>
              <State>WA</State>
              <ZIP>98156</ZIP>
              <CountryCode>US</CountryCode>
              <Phone>6109874000</Phone>
              <Fax/>
              <Cell/>
              <Email>jsmith@xyz.com</Email>
              <Primary>NO</Primary>
              <AllowEmail>NO</AllowEmail>
              <AllowMailings>NO</AllowMailings>
              <ContactNote/>
              <SpecialNeeds>NO</SpecialNeeds>
              <Deceased>NO</Deceased>
              <LogOn>
                                  <SystemLogonID>31</SystemLogonID>
                                  <Username>MyUsername</Username>
                                  <Password>MyPassword</Password>
              </LogOn>
              <TotalPaymentContracts>1</TotalPaymentContracts>
              <BlockingStatus>
                  <BlockOrders>YES</BlockOrders>
                  <BlockTickets>NO</BlockTickets>
                  <BlockPasses>NO</BlockPasses>
                  <BlockAdmission>YES</BlockAdmission>
              </BlockingStatus>
              <PaymentInfo>
                  <CardNo>4005550000000019</CardNo>
                  <CardToken>ZT9l1AMq5flHqh5znPTizg==</CardToken>
                  <CardHolderName>John M Smith</CardHolderName>
                  <ExpDate>1206</ExpDate>
                  <Primary>YES</Primary>
              </PaymentInfo>
          </QueryContactResponse>
      </Body>
  </Envelope>

17.2.1.6 Example QueryContactResponse message for a pass contact

  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryContactResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2021-08-24 12:10:55</TimeStamp>
      </Header>
      <Body>
          <QueryContactResponse>
              <FirstName>John</FirstName>
              <MiddleName/>
              <LastName>Person</LastName>
              <IdentificationNo/>
                                                                                                247
eGalaxy Server Interface Specification                                        17 Contact Message
            <IdentificationNo/>
            <Street1>123 Main St</Street1>
            <Street2/>
            <Street3/>
            <City>Gilbertsville</City>
            <State>PA</State>
            <ZIP>19525</ZIP>
            <CountryCode>US</CountryCode>
            <Phone>1234567890</Phone>
            <Fax/>
            <Cell/>
            <Email>test@gmail.com</Email>
            <ExternalID/>
            <JobTitle/>
            <Primary>NO</Primary>
            <ContactNote/>
            <NameTitleID>0</NameTitleID>
            <NameSuffixID>0</NameSuffixID>
            <TotalPaymentContracts>0</TotalPaymentContracts>
            <AllowEmail>YES</AllowEmail>
            <AllowMailings>YES</AllowMailings>
            <DOB>1900-01-01 00:00:00</DOB>
            <AgeGroup>0</AgeGroup>
            <Gender>0</Gender>
            <SpecialNeeds>NO</SpecialNeeds>
            <Deceased>NO</Deceased>
            <BlockingStatus>
                <BlockOrders>NO</BlockOrders>
                <BlockTickets>NO</BlockTickets>
                <BlockPasses>NO</BlockPasses>
                <BlockAdmission>NO</BlockAdmission>
            </BlockingStatus>
            <Memberships>
                <Membership>
                    <ExpirationDate>2022-02-13</ExpirationDate>
                    <IsRenewable>NO</IsRenewable>
                    <ProductName>Child Platinum Pass Renewal</ProductName>
                    <VisualID>102501000000090</VisualID>
                    <PaymentContractAutoRenew>NO</PaymentContractAutoRenew>
                    <Status>0</Status>
                    <Members>
                        <Member>
                            <PassNo>539</PassNo>
                            <PassKind>3</PassKind>
                            <ContactID>904</ContactID>
                            <VisualID>102501000000090</VisualID>
                            <PictureID>0</PictureID>
                            <PreviousID>538</PreviousID>
                            <MemberType>0</MemberType>
                            <Primary>YES</Primary>
                            <PLU>PS101100002CPR</PLU>
                            <Status>0</Status>
                            <StatusText>Valid</StatusText>
                            <OrderLineID>0</OrderLineID>
                            <RelationshipTypeID>0</RelationshipTypeID>
                            <RelationshipDescription/>
                            <JointMemberID>0</JointMemberID>
                            <HasAppleWalletData>NO</HasAppleWalletData>
                            <BlockingStatus>
                                <BlockOrders>NO</BlockOrders>
                                <BlockTickets>NO</BlockTickets>
                                <BlockPasses>NO</BlockPasses>
                                <BlockAdmission>NO</BlockAdmission>
                            </BlockingStatus>
                            <FirstName>John</FirstName>
                            <MiddleName/>
                            <LastName>Person</LastName>
                            <IdentificationNo/>
                            <Street1>123 Main St</Street1>
                            <Street2/>
                            <Street3/>
                            <City>Gilbertsville</City>
                            <State>PA</State>
                            <ZIP>64804-4500</ZIP>
                            <CountryCode>US</CountryCode>
                            <Phone>1234567890</Phone>
                            <Fax/>
                                                                                            248
eGalaxy Server Interface Specification                                         17 Contact Message
                            <Cell/>
                            <Email>test@gmail.com</Email>
                            <ExternalID>904</ExternalID>
                            <JobTitle/>
                            <ContactNote/>
                            <NameTitleID>0</NameTitleID>
                            <NameSuffixID>0</NameSuffixID>
                            <TotalPaymentContracts>0</TotalPaymentContracts>
                            <AllowEmail>NO</AllowEmail>
                            <AllowMailings>NO</AllowMailings>
                            <DOB>1899-12-30 00:00:00</DOB>
                            <AgeGroup>0</AgeGroup>
                            <Gender>0</Gender>
                            <SpecialNeeds>NO</SpecialNeeds>
                            <Deceased>NO</Deceased>
                            <PhoneNumbers>
                                <PhoneNumber>
                                    <PhoneType>0</PhoneType>
                                    <Phone>1234567890</Phone>
                                    <AllowContact>NO</AllowContact>
                                </PhoneNumber>
                            </PhoneNumbers>
                        </Member>
                    </Members>
                    <AssociatedMembers>
                        <AssociatedMember>
                            <PassNo>541</PassNo>
                            <PassKind>3</PassKind>
                            <ContactID>927</ContactID>
                            <VisualID>101501000000095</VisualID>
                            <PictureID>0</PictureID>
                            <PreviousID>0</PreviousID>
                            <MemberType>0</MemberType>
                            <Primary>NO</Primary>
                            <PLU>PS101100001AP</PLU>
                            <Status>0</Status>
                            <StatusText>Valid</StatusText>
                            <OrderLineID>0</OrderLineID>
                            <RelationshipTypeID>0</RelationshipTypeID>
                            <RelationshipDescription/>
                            <JointMemberID>0</JointMemberID>
                            <HasAppleWalletData>YES</HasAppleWalletData>
                            <IsRenewable>NO</IsRenewable>
                            <ExpirationDate>2022-06-16</ExpirationDate>
                            <ProductName>Adult Platinum Pass</ProductName>
                            <FirstName>Jane</FirstName>
                            <MiddleName/>
                            <LastName>Person</LastName>
                            <IdentificationNo/>
                            <Street1>123 Main St</Street1>
                            <Street2/>
                            <Street3/>
                            <City>Gilbertsville</City>
                            <State>PA</State>
                            <ZIP>19525</ZIP>
                            <CountryCode>US</CountryCode>
                            <Phone>1234567890</Phone>
                            <Fax/>
                            <Cell/>
                            <Email>test@gmail.com</Email>
                            <ExternalID/>
                            <JobTitle/>
                            <ContactNote/>
                            <NameTitleID>0</NameTitleID>
                            <NameSuffixID>0</NameSuffixID>
                            <TotalPaymentContracts>0</TotalPaymentContracts>
                            <AllowEmail>YES</AllowEmail>
                            <AllowMailings>YES</AllowMailings>
                            <DOB>1900-01-01 00:00:00</DOB>
                            <AgeGroup>0</AgeGroup>
                            <Gender>0</Gender>
                            <SpecialNeeds>NO</SpecialNeeds>
                            <Deceased>NO</Deceased>
                            <PhoneNumbers>
                                <PhoneNumber>
                                    <PhoneType>0</PhoneType>
                                    <Phone>1234567890</Phone>
                                                                                             249
eGalaxy Server Interface Specification                                                     17 Contact Message
                                      <Phone>1234567890</Phone>
                                      <AllowContact>YES</AllowContact>
                                  </PhoneNumber>
                              </PhoneNumbers>
                          </AssociatedMember>
                      </AssociatedMembers>
                  </Membership>
              </Memberships>
              <LogOn>
                  <SystemLogonID>0</SystemLogonID>
                  <Username/>
                  <Password/>
                  <RequirePasswordChange>NO</RequirePasswordChange>
              </LogOn>
              <PhoneNumbers>
                  <PhoneNumber>
                      <PhoneType>0</PhoneType>
                      <Phone>1234567890</Phone>
                      <AllowContact>YES</AllowContact>
                  </PhoneNumber>
              </PhoneNumbers>
          </QueryContactResponse>
      </Body>
  </Envelope>

17.2.1.7 Example QueryContactResponse message (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryContactResponse</MessageType>
          <SourceID/>
          <TimeStamp>2005-08-16 10:30:47</TimeStamp>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>2101</ErrorCode>
                  <ErrorText>Unable to return contact data, contact with ExternalID of ExternalID1 not
  found</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                         250
eGalaxy Server Interface Specification                                                       18 QueryContactHistory Message
18 QueryContactHistory Message
The QueryContactHistory message is used to query the purchase history of an individual (contact) in the Galaxy database.

18.1 Message Format
Following sections describes the format of the QueryContactHistory message.

18.1.1 QueryContactHistory Message
QueryContactHistory message is sent by the Web Store to eGalaxy server to retrieve the purchase history for an individual contact from the
Galaxy database. Upon receiving this message, eGalaxy server looks up the purchase history for the given contact and returns the data back
to the Web Store.

18.1.1.1 Request Message Parameters

The QueryContactHistory element appears in the Body of this message. QueryContactHistory is the only field or element supported in the
QueryContactHistory message.

 Field               Description                   Type
 QueryContactHistory <QueryContactHistory> element Element

18.1.1.1.1 <QueryContactHistory> Element

The QueryContactHistory element has a Query element.

 Field Description     Type
 Query <Query> element Element

Following fields are supported within Query element of the QueryContactHistory message:

 Field      Description                                                             Type
 ExternalID ExternalID of the contact for which purchase history is being requested Text (20)

18.1.1.2 Example QueryContactHistory request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryContactHistory</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-19 09:10:05</TimeStamp>
      </Header>
      <Body>
          <QueryContactHistory>
              <Query>
                  <ExternalID>ExternalID1</ExternalID>
              </Query>
          </QueryContactHistory>
      </Body>
  </Envelope>

18.1.2 QueryContactHistoryResponse Message
QueryContactHistoryResponse message is sent in response to the QueryContactHistory message. QueryContactHistoryResponse message
includes the purchase history of an individual contact.

18.1.2.1 Message Parameters

The QueryContactHistoryResponse element appears in the Body of this message. QueryContactHistoryResponse is the only field or element

                                                                                                                                      251
eGalaxy Server Interface Specification                                                            18 QueryContactHistory Message
supported in the QueryContactHistoryResponse message.

 Field                       Description                    Type
 QueryContactHistoryResponse <QueryContactResponse> element Element

18.1.2.1.1 <QueryContactHistoryResponse> Element

The QueryContactHistoryResponse element has following fields:

 Field                 Description                                                                Type
 ExternalID            ExternalID of the contact for which purchase history was being requested   Text (20)
 GalaxyContactID       ContactID from Galaxy’s CustContacts table for this contact                Numeric
 Tickets               <Tickets> element                                                          Element

The <Tickets> element has one or more <Ticket> elements and following fields are supported within the <Ticket> element:

 Field    Description                                                        Type
 VisualID VisualID of the ticket                                             Text (40)

 Status      Current ReplenishStatus of the ticket from SuperTickets table Numeric
                0.   Not valid for replenishment
                1.   Valid for replenishment
                2.   Used
                3.   Replenishment cancelled
                4.   Replenishment suspended


18.1.2.2 Example QueryContactHistoryResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryContactHistoryResponse</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-19 09:10:07</TimeStamp>
      </Header>
      <Body>
          <QueryContactHistoryResponse>
              <ExternalID>ExternalID1</ExternalID>
              <GalaxyContactID>123</GalaxyContactID>
              <Tickets>
                  <Ticket>
                      <VisualID>10000004083000017</VisualID>
                      <Status>0</Status>
                  </Ticket>
                  <Ticket>
                      <VisualID>10000004083000056</VisualID>
                      <Status>1</Status>
                  </Ticket>
                  <Ticket>
                      <VisualID>10000004083000099</VisualID>
                      <Status>3</Status>
                  </Ticket>
              </Tickets>
          </QueryContactHistoryResponse>
      </Body>
  </Envelope>

18.1.2.3 Example QueryContactHistoryResponse message (with error)




                                                                                                                            252
eGalaxy Server Interface Specification                                       18 QueryContactHistory Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryContactHistoryResponse</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-08-19 09:10:07</TimeStamp>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>2301</ErrorCode>
                  <ErrorText>Unable to return purchase history, contact with ExternalID of ExternalID1 not
  found</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                             253
eGalaxy Server Interface Specification                                                                  19 ReplenishTicket Message
19 ReplenishTicket Message
The ReplenishTicket message is used to manually replenish the ticket(s) purchased by individual guests on the Web store.

19.1 Message Format
Following sections describes the format of the ReplenishTicket message.

19.1.1 ReplenishTicket Message
ReplenishTicket message is sent by the Web Store to eGalaxy server to manually replenish a ticket. Upon receiving this message, eGalaxy
server does the processing to replenish the ticket given in the request. If the ticket is replenished successfully the new ticket’s VisualID and
the status is returned by eGalaxy. If eGalaxy is unable to replenish the ticket due to an error, the error is returned in the response.

19.1.1.1 Request Message Parameters

The ReplenishTicket element appears in the Body of this message. ReplenishTicket is the only field or element supported in the
ReplenishTicket message.

 Field           Description               Type
 ReplenishTicket <ReplenishTicket> element Element

19.1.1.1.1 <ReplenishTicket> Element

Following fields are supported within ReplenishTicket element

 Field    Description                                    Type
 VisualID VisualID or barcode of the ticket to replenish Text (40)

19.1.1.2 Example ReplenishTicket request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>ReplenishTicket</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-10-21 11:54:45</TimeStamp>
      </Header>
      <Body>
          <ReplenishTicket>
              <VisualID>10001004083000055</VisualID>
          </ReplenishTicket>
      </Body>
  </Envelope>

19.1.2 ReplenishTicketResponse Message
ReplenishTicketResponse message is sent in response to the ReplenishTicket message. ReplenishTicketResponse message indicates the
result indicating if the ticket was replenished successfully or not.

19.1.2.1 Message Parameters

The ReplenishTicketResponse element appears in the Body of this message. ReplenishTicketResponse is the only field or element
supported in the ReplenishTicket Response message.

 Field                   Description                       Type
 ReplenishTicketResponse <ReplenishTicketResponse> element Element

19.1.2.1.1 <ReplenishTicketResponse> Element


                                                                                                                                            254
eGalaxy Server Interface Specification                                                              19 ReplenishTicket Message
The ReplenishTicketResponse element has following fields:

 Field             Description                                                                                                   Type
 VisualID          VisualID of the ticket                                                                                        Text
                                                                                                                                 (20)
 ReplenishStatus Replenish status for the ticket. Following status values are allowed for this field: 1 – Activate replenishment Numeric
                 3 – Cancel the replenishment 4 – Suspend the replenishment
 Amount          Total amount charged on the credit card                                                                         Currency
 CardNo          Credit card used for payment. This will display a secure version of the card number, masking all but the last Text
                 four digits.                                                                                                    (50)
 AuthCode        Authorization code for the transaction                                                                          Text (8)

19.1.2.2 Example ReplenishTicketResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>ReplenishTicketResponse</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-10-21 11:55:58</TimeStamp>
      </Header>
      <Body>
          <ReplenishTicketResponse>
              <VisualID>10001004083000055</VisualID>
              <ReplenishStatus>1</ReplenishStatus>
              <Amount>10.85</Amount>
              <CardNo>4005550000000019</CardNo>
              <AuthCode>12345</AuthCode>
          </ReplenishTicketResponse>
      </Body>
  </Envelope>

19.1.2.3 Example ReplenishTicketResponse (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>ReplenishTicketResponse</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2005-10-21 11:54:45</TimeStamp>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>2504</ErrorCode>
                  <ErrorText>Unable to replenish ticket 10001004083000055 due to an error: Unable to located
  ticket 10001004083000055</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                                                      255
eGalaxy Server Interface Specification                                                                        20 ImportPass Message
20 ImportPass Message
The ImportPass message is used to import passes into Galaxy’s Passes table using eGalaxy server.

20.1 Message Format
Following sections describes the format of the ImportPass message.

20.1.1 ImportPass Message
ImportPass message is used to create new pass in Galaxy. Most likely these passes are sold in the third party systems and they need to be
in Galaxy’s Passes table so they can be validated at the turnstile or can be used to issue pass required tickets. The ImportPass message is
supported in real-time, and file import. When sending ImportPass message in real-time, a single pass per request is supported but if you
are using file import then multiple passes per file can be sent. Importing passes thru file import is explained in the later sections.
The ImportPass message includes the pass related data to be imported with the pass.

20.1.1.1 Request Message Parameters

The <Pass> element appears in the Body of this message.

 Field Description   Type
 Pass <Pass> element Element

20.1.1.1.1 <Pass> Element

Please refer to <Pass> element for more details related to the XML format for this element. The <Pass> element is described under sub
section “<Pass> Element” of section “Common Element Formats”
NOTES:
       If data for pass fields VisualID, PassAcct, ValidUntil, and MaxParty is not given in the request, the system will generate the data for
       these fields using the current configuration on the Items, PassKinds and AccessCodes table
       Data for these fields on the pass record is obtained from the PLU definition (Items SQL table): Kind, Price, Category, SubCat, TaxFlags,
       ProdNo, FKey, AccessCode, FKeyFlags, FKeyKind, and TaxMethods
       Data for Tax field on the pass record is calculated by eGalaxy using the price on the PLU
       Data for these fields on the pass record is obtained from eGalaxyConfig: NodeNo
       Data for DiscountID and LimitCount fields on the pass record is populated from what is configured on the PassKind for the same fields

20.1.1.2 Example ImportPass request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2012-03-28 09:35:60</TimeStamp>
          <MessageType>ImportPass</MessageType>
      </Header>
      <Body>
          <Pass>
              <VisualID>20000258000002</VisualID>
              <FirstName>John</FirstName>
              <MiddleName>J</MiddleName>
              <LastName>Smith</LastName>. . . </Pass>
      </Body>
  </Envelope>

20.1.2 ImportPassResponse Message
ImportPassResponse message is sent in response to the ImportPass message. ImportPassResponse message indicates the result indicating
if the pass was imported successfully or not.


                                                                                                                                           256
eGalaxy Server Interface Specification                                                                     20 ImportPass Message
20.1.2.1 Message Parameters

If the ImportPass message is processed successfully and the pass is imported into Galaxy’s Passes table then Body of the
ImportPassResponse message includes a Status element with status code of 0 (OK).
If errors were found when processing the ImportPass message, then <ImportPassErrors> element is found within the Body of the
ImportPassResponse message.
Following examples describes the response message parameters.

20.1.2.2 Example ImportPassResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2012-03-28 10:05:00</TimeStamp>
          <MessageType>ImportPassResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

20.1.2.3 Example ImportPassResponse message (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2012-03-28 10:05:55</TimeStamp>
          <MessageType>ImportPassResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>2800</StatusCode>
              <StatusText>ImportPass request error</StatusText>
          </Status>
          <ImportPassErrors>
              <Error>
                  <ErrorCode>2806</ErrorCode>
                  <ErrorText>Item does not have a pass kind</ErrorText>
              </Error>
          </ImportPassErrors>
      </Body>
  </Envelope>

20.1.3 Sending ImportPass message in a file
eGalaxy server supports importing passes from a file via ImportPass message. To do this, create a file with ImportPass request containing
<Passes> element in the request. eGalaxy server will import each pass under the <Passes> element individually and if a pass cannot be
imported due to an error then a rejected file is created with those passes for reprocessing.
To send ImportPass message containing multiple passes via eGalaxy server file import process, you need to add <Passes> element in the
body of the ImportPass message.
The <Passes> element contains one or more <Pass> elements. The <Pass> element is described under sub section “<Pass> Element” of
section “Common Element Formats”.
Note: The <Passes> element is ONLY supported in ImportPass message for sending this message in a file. If you are sending the ImportPass
message in real-time to eGalaxy server via HTTP POST request then only one pass is supported and hence you cannot use <Passes>
element in the <Body> of the ImportPass message.


                                                                                                                                       257
eGalaxy Server Interface Specification                                   20 ImportPass Message
20.1.3.1 ImportPass request with multiple passes for sending in a file

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2012-03-28 10:05:55</TimeStamp>
          <MessageType>ImportPassResponse</MessageType>
      </Header>
      <Body>
          <Passes>
              <Pass>
                  <VisualID>20000258000005</VisualID>
                  <FirstName>John</FirstName>
                  <MiddleName>J</MiddleName>
                  <LastName>Smith</LastName>. . . </Pass>
              <Pass>
                  <VisualID>20000258000006</VisualID>
                  <FirstName>Jen</FirstName>
                  <MiddleName>D</MiddleName>
                  <LastName>Smith</LastName>. . . </Pass>
          </Passes>
      </Body>
  </Envelope>




                                                                                          258
eGalaxy Server Interface Specification                                                     21 SendPasswordReminder Message
21 SendPasswordReminder Message
The SendPasswordReminder message is used to send password reminder e-mails to the guests who have an account created on the Web
store for their online purchases.

21.1 Message Format
Following sections describes the format of the SendPasswordReminder message.

21.1.1 SendPasswordReminder Message
A SendPasswordReminder message is used to send password reminder e-mails to the guests who have forgot their password after creating
an account on the Web store for their online purchases. The SendPasswordReminder message can only be sent in real-time to eGalaxy
server.
Username and E-mail address of the guest who has forgotten the account password is included in the SendPasswordReminder request.
Upon receiving the message, eGalaxy server looks up the user’s account by matching the Username and E-mail address. If no account is
found, an error is returned. If an account is located by eGalaxy server, then an e-mail is sent to the guest’s e-mail address with information
to aid them in resetting their password. The E-mail template to use for this password reminder e-mail can be configured in eGalaxy server
under eGalaxyConfig>eGalaxy Source tab>eGalaxySources button>eGalaxySource edit screen>E-mail tab>Templates button>Password
reminder e-mail template.

21.1.1.1 Request Message Parameters

Following fields appear in the Body of this message.

 Field                 Description                                                                                                      Type
 Username              Username of the guest to whom password reminder e-mail needs to be sent                                          Text
                                                                                                                                        (100)
 Email                 E-mail address of the guest                                                                                      Text
                                                                                                                                        (128)
 PasswordResetURL The base URL that the guest should be directed to to complete the password reset process.                             Text
 Mode             The mode that the SendPasswordReminder request is operating under. Possible values of SendResetToken                  Text
                  and UpdatePasswordFromReset. See the <Mode> element section below.
 TokenToValidate  The Token to verify when the Mode element = UpdatePasswordFromReset.                                                  Text
 NewPassword      If Mode = UpdatePasswordFromReset, this element contains the new password for the SystemLogon record                  Text

21.1.1.2 <Mode> Element

The <Mode> element appears within the <SendPasswordReminder> element and contains text specifying how the request should be
processed.

 Value                   Description
 SendResetToken          Send a password reminder to the guest (Default)
 UpdatePasswordFromReset Verify the provided token value. This will be used during the process of validating a password reset
                         operation on the eGalaxy Web Store.

Order Command values are not case-sensitive i.e. eGalaxy treats both “Add” and “ADD” as the same command. The default command is
“Add” when the OrderCommand element is not present in the <Order> element. This provides compatibility with applications developed for
earlier versions of eGalaxy which did not implement the OrderCommand element and assumed all <Order> elements were new orders.

21.1.1.3 Example SendPasswordReminder request




                                                                                                                                           259
eGalaxy Server Interface Specification                                                21 SendPasswordReminder Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-09-15 10:00:00</TimeStamp>
          <MessageType>SendPasswordReminder</MessageType>
      </Header>
      <Body>
          <Username>GuestUsername</Username>
          <Email>guestemailaddress@guestdomain.com</Email>
          <PasswordResetURL>https://www.mywebstore.com/webstore/passwordreset.aspx</PasswordResetURL>
      </Body>
  </Envelope>

21.1.2 SendPasswordReminderResponse Message
SendPasswordReminderResponse message is sent in response to the SendPasswordReminder request. SendPasswordReminderResponse
message indicates the result indicating if the password reminder e-mail was successfully sent to the guest.

21.1.2.1 Message Parameters

If the SendPasswordReminder message is processed successfully and the password reminder e-mail is sent successfully to the guest, then
Body of the SendPasswordReminderResponse message is empty.
If errors were found when processing the SendPasswordReminder message, then <Errors> element is found within the Body of the
SendPasswordReminderResponse message.
Following examples describes the response message parameters.

21.1.2.2 Example SendPasswordReminderResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-09-15 00:00:00</TimeStamp>
          <MessageType>SendPasswordReminderResponse</MessageType>
      </Header>
      <Body/>
  </Envelope>

21.1.2.3 Example SendPasswordReminderResponse message (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-09-15 00:00:00</TimeStamp>
          <MessageType>SendPasswordReminderResponse</MessageType>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>2403</ErrorCode>
                  <ErrorText>Unable to find the account with the given username(GuestUsername) and e-mail
  address(guestemailaddress@guestdomain.com) due to this error: Cannot find a system logon for username
  GuestUsername</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                                                   260
eGalaxy Server Interface Specification                                                                      22 CreateTickets Message
22 CreateTickets Message
CreateTicket message allows you to…
      Create tickets without creating an order or reservation in Galaxy.
      Create a ticket with the status of Inactive by sending the ticket as a foreign media ticket. To do this you have to set the status of the
      PLU to Inactive on item definition in Galaxy.
CreateTicket message returns the VisualIDs of the new tickets back to the sender in the response.

22.1 Message Format
The CreateTickets message will be used to create a new ticket in the Galaxy database, and journalize the sale in the SQL journal.
To create the new tickets, the client must provide the PLU of the tickets that should be created. Optionally, the client can also specify the
price of the tickets. If the tickets are not free tickets, a payment message must also be included equal to the price of the tickets.
A CreateTicketsResponse message will be generated by eGalaxy and sent back to the client. If the ticket creation was successful, the visual
IDs of the new tickets will be included in the response message. If not successful, error messages will be returned.

22.1.1 CreateTickets Message Fields
The CreateTickets request message will be in the standard eGalaxy message format. The body of the CreateTickets message will contain a
TicketCreation element, which will contain one or more ticket elements.

22.1.1.1 <TicketCreation> Element

The <TicketCreation> element contains a list indicating the types of tickets that will be created. The system does not allow multiple
TicketCreation elements in a single CreateTickets message.

 Field        Description                                                                                                             Type
 CustomerID   Optional. Galaxy ID of the customer to which the activation fee (price of the ticket) is charged. Must be in the        Numeric
              list of customers specified for the eGalaxySource
 SalesProgram Optional. Sales program ID of the sales program that should be applied to this transaction.                             Numeric
 <Tickets>    Tickets to be created by eGalaxy.                                                                                       Element

22.1.1.2 <Tickets> Element

The <Tickets> element contains one or more <Ticket> elements for tickets that are to be created.
Note: Since the command applies to all tickets in the request, the response will indicate an error if the command fails for one of the tickets
and NONE of the tickets will be processed. The error response will indicate which ticket(s) caused the error(s).

22.1.1.3 <Ticket> Element

The ticket element indicates the PLU’s of the tickets that are to be created and, optionally, the prices of the tickets.

 Field             Description                                                                                                       Type
 ItemCode /        Item’s Galaxy item code i.e. PLU                                                                                  Text(20)
 PLU
 Qty            Quantity of tickets to be created. The quantity will be assumed 1 to be if this field is not present.                Numeric
 Price          Price of the activated ticket                                                                                        Currency
 EventID        Event ID of the event that applies to the ticket. (Optional)                                                         Numeric
 ResourceID     Resource ID the ticket was sold for. This field is required if the event is configured to sell with multiple         Numeric
                resources. (Optional)
 TicketDate     Ticket date that will be applied to the ticket. (Optional)                                                           DateTime
 ExpirationDate Expiration date that will be set on the ticket. (Optional)                                                           DateTime
 DateSold       The date the ticket was sold. (Optional)                                                                             DateTime

                                                                                                                                            261
eGalaxy Server Interface Specification                                                                  22 CreateTickets Message
 Section          Section of the ticket’s eat assignment data (Optional)                                                         Text (40)
 Row              Row of the ticket’s seat assignment data (Optional)                                                            Text (40)
 Seat             Seat of the ticket’s seat assignment data (Optional)                                                           Text (40)

22.1.1.4 <Payments> Element

The <Payments> element contains one or more <Payment>.

22.1.1.5 <Payment> Element

A Payment indicates payments applied to the ticket sale. A payment element includes the following elements:

 Field              Description                                                                                                  Type
 PaymentCode        Galaxy Form of payment number (value 10-89)                                                                  Numeric
 Description        Text description payment                                                                                     Text (40)
 Amount             Payment amount                                                                                               Currency
 PaymentDate        Date the payment was made, or authorized if credit card. (Optional)                                          DateTime
 Endorsement        For credit cards, the credit card account number. For vouchers, the unique voucher number (Optional)         Text (30)
 ExpDate            Credit Card expiration date, if credit card payment (Optional)                                               Numeric
                                                                                                                                 MMYY
 CardHolderName     Name of credit card holder printed on the card                                                               Text
 AuthCode           Authorization Code from payment processor (Optional)                                                         Text (8)
 TransID            Transaction ID from payment processor (Optional)                                                             Text (15)
 ValidationCode     Validation code from payment processor (Optional)                                                            Text (4)
 PSI                Payment Service Indicator from payment processor (Optional)                                                  Text (1)
 PayOnIssuance      Set to apply payment when the order is issued (or pickup) (Optional)                                         Boolean
 BillingStreet      Street address of the billing address, used for AVS verification (Optional)                                  Text (30)
 BillingZIP         Zip or postal code of the billing address, used for AVS verification (Optional)                              Text (16)
 CVN                Card Verification Number, used to verify credit card (Optional)                                              Numeric
 GxKeyID            Foreign key to GxKeys.GxKeyID, this element defines what GxKeyID to use to decrypt the Endorsement           Numeric
                    element. If this value is non-zero, the system assumes the text in the Endorsement element is encrypted
 ExternalKeyID      Foreign key to GxKeys.ExternalKeyID. If a GxKeyID value is specified, it will always be used in place of      Text(100)
                    this element. If ExternalKeyID is the only element defined, it will be used to look up the appropriate key in
                    the GxKeys table in order to decrypt the Endorsement element. If this value is non-blank, the system
                    assumes the text in the Endorsement element is encrypted

Note: Same field list as Order Payment Line.

22.1.1.6 Example CreateTickets request




                                                                                                                                        262
eGalaxy Server Interface Specification                                                                   22 CreateTickets Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>Partner12345</SourceID>
          <MessageID>0</MessageID>
          <MessageType>CreateTickets</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2004-02-04 18:01:09</TimeStamp>
      </Header>
      <Body>
          <TicketCreation>
              <CustomerID>123456</CustomerID>
              <Tickets>
                  <Ticket>
                      <PLU>101010</PLU>
                      <Price>39.95</Price>
                  </Ticket>
                  <Ticket>
                      <PLU>101012</PLU>
                      <Price>19.95</Price>
                      <Qty>2</Qty>
                  </Ticket>
              </Tickets>
              <Payments>
                  <Payment>
                      <PaymentCode>42</PaymentCode>
                      <Description>Charge</Description>
                      <Endorsement>123456789</Endorsement>
                      <Amount>59.90</Amount>
                  </Payment>
              </Payments>
          </TicketCreation>
      </Body>
  </Envelope>

22.1.2 CreateTicketsResponse Message
The CreateTicketsResponse message will be returned to the client when eGalaxy has finished processing the CreateTickets message. The
response will contain either information about the new tickets that were created, or information about errors that prevented the creation of
the tickets.

22.1.2.1 <TicketCreationResponse> Element

The <TicketCreationResponse> message contains one or more <CreatedTicket> elements that contain information about the new tickets.

22.1.2.2 <CreatedTicket> Element

The <CreatedTicket> element contains the PLU and visual ID of a ticket that was created in eGalaxy.

 Field             Description                                                                                        Type
 VisualID          Visual ID of the created ticket. This field will always be present in the CreatedTicket message.   Text (40)
 ItemCode / PLU    PLU of the created ticket. This field will always be present in the CreatedTicket message          Text (20)
 EventID           This field will only be added if EventID is non-zero for the ticket.                               Numeric
 TicketDate        This field will only exist if the ticket has a TicketDate specified.                               DateTime
 ExpirationDate    This field will only be added if the ticket has an ExpirationDate specified.                       DateTime
 DateSold          This field will only be added if the ticket has a DateSold field added.                            DateTime

22.1.2.3 <TicketCreationErrors> Element

The <TicketCreationErrors> Element contains one or more <TicketCreationError> elements. For each ticket that the indicated command was
unsuccessful, the <TicketCreationErrors> element contains a <TicketCreationError> element with the specifics of the error.

22.1.2.4 <TicketCreationError> Element

Each <TicketCreationError> element contains the PLU of the ticket that could not be created, and an <Errors> element containing individual

                                                                                                                                         263
eGalaxy Server Interface Specification                                                                 22 CreateTickets Message
<Error> elements. Each of these <Error> elements contains an <ErrorCode> and an <ErrorText> element describing the specifics of the error.

 Field       Description                                        Type
 PLU         PLU of the creation request that caused an error   Text(40)
 ErrorCode   Code indicating reason for error                   Numeric
 ErrorText   Text description of error code                     Text

22.1.2.5 Example CreateTicketsResponse message (no error)

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>CreateTicketsResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2002-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
          <TicketCreationResponse>
              <CreatedTicket>
                  <VisualID>115300034321</VisualID>
                  <PLU>101010</PLU>
              </CreatedTicket>
              <CreatedTicket>
                  <VisualID>125300034322</VisualID>
                  <PLU>101012</PLU>
              </CreatedTicket>
              <CreatedTicket>
                  <VisualID>125300034323</VisualID>
                  <PLU>101012</PLU>
              </CreatedTicket>
          </TicketCreationResponse>
      </Body>
  </Envelope>

22.1.2.6 Example CreateTicketsResponse message (error)

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>CreateTicketsResponse</MessageType>
          <SessionID>9507</SessionID>
          <TimeStamp>2002-02-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>2700</StatusCode>
              <StatusText>Ticket creation request error</StatusText>
          </Status>
          <TicketCreationErrors>
              <TicketCreationError>
                  <PLU>1020201</PLU>
                  <Errors>
                      <Error>
                          <ErrorCode>2704</ErrorCode>
                          <ErrorText>Item does not exist</ErrorText>
                      </Error>
                  </Errors>
              </TicketCreationError>
          </TicketCreationErrors>
      </Body>
  </Envelope>


                                                                                                                                      264
eGalaxy Server Interface Specification                                                                23 EncryptionKey Message
23 EncryptionKey Message
The EncryptionKey message is used to create an encryption key in the Galaxy system.

23.1 Message Format
The EncryptionKey message will be used to an encryption key in the Galaxy system, and potentially enable this key as the default
encryption key.

23.1.1 EncryptionKey Message Fields
The EncryptionKey request message will be in the standard eGalaxy message format. The body of the EncryptionKey message will contain
one EncryptionKey element.

23.1.1.1 <EncryptionKey> Element

The <EncryptionKey> element contains a single encryption key to be imported into the Galaxy system. Multiple <EncryptionKey> elements
are not supported in a single message.

 Field                Description                                                                                                  Type
 KeyName              Name for this encryption key                                                                                 Text(100)
 GxKeyID              Optional. The internal numeric key used to associate an encrypted value to a GxKey. If this element is       Numeric
                      zero or not specified, the system will generate one.
 PassPhrase           The Passphrase to use for this encryption key. If an ExternalKey is specified, the PassPhrase cannot         Text(200)
                      be specified.
 ExternalKeyID        An alphanumeric ID to associate with this encryption key. This is normally used in conjunction with          Text(100)
                      the ExternalKey. Galaxy tables will still reference the GxKeyID, but this external ID can be used by
                      external systems.
 ExternalKey          The ExternalKey to use for this encryption key. If a PassPhrase is specified, the ExternalKey cannot be      Text(255)
                      specified. NOTE: The value of the element MUST be Base64 encoded.
 DefaultEncryptionKey Defines whether or not this encryption key should become the “default” encryption key. Defining an           Boolean
                      imported key as the default will take immediate effect in eGalaxy server, but all other applications
                      (Web Order Processor, Galaxy, etc) will need to be restarted in order to realize the new default
                      encryption key.
 EncryptionSchemeID Defines the encryption scheme used for the key, where: 0 = AES/Rijndael 256-bit (CFB 8-bit Mode) 1 =           Integer
                      AES/Rijndael 256-bit (CBC Mode)

23.1.1.2 Example EncryptionKey request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>0</MessageID>
          <MessageType>EncryptionKey</MessageType>
          <TimeStamp>2007-11-26 09:42:09</TimeStamp>
      </Header>
      <Body>
          <EncryptionKey>
              <KeyName>Imported Encryption Key</KeyName>
              <GxKeyID/>
              <PassPhrase/>
              <ExternalKeyID>EXTERNAL-Key1</ExternalKeyID>
              <ExternalKey>22ffeee3587ca4730c3d33b691df38bab076bc558</ExternalKey>
              <DefaultEncryptionKey>YES</DefaultEncryptionKey>
          </EncryptionKey>
      </Body>
  </Envelope>

23.1.2 EncryptionKeyResponse Message

                                                                                                                                         265
eGalaxy Server Interface Specification                                                               23 EncryptionKey Message
The EncryptionKey message will be returned to the client when eGalaxy has finished processing the EncryptionKey message. The response
will contain either information about the new tickets that were created, or information about errors that prevented the creation of the
tickets.

23.1.2.1 Example EncryptionKeyResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>65</MessageID>
          <MessageType>EncryptionKeyResponse</MessageType>
          <SourceID/>
          <TimeStamp>2007-11-26 09:56:11</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

23.1.2.2 Example EncryptionKeyResponse message (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>65</MessageID>
          <MessageType>EncryptionKeyResponse</MessageType>
          <SourceID/>
          <TimeStamp>2007-11-26 09:56:11</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>2902</ErrorCode>
                  <ErrorText>The specified ExternalKeyID (EXTERNAL-Key1) already exists</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                                                    266
eGalaxy Server Interface Specification                                              24 GetPaymentPlanSalesData Message
24 GetPaymentPlanSalesData Message
The GetPaymentPlanSalesData message is used to retrieve the PaymentPlan sales data from the Galaxy system.

24.1 Message Format
Following sections describes format of the GetPaymentPlanSalesData message.

24.1.1 GetPaymentPlanSalesData Message Fields
The GetPaymentPlanSalesData message will be in the standard eGalaxy message format. The body of the message will contain a
<PaymentPlan> element.

24.1.1.1 <PaymentPlan> Element

The <PaymentPlan> element contains a PaymentPlan for which sales data is being requested from the Galaxy system.

 Field             Description                Type
 PaymentPlanID     ID of the PaymentPlan      Numeric
 ExternalContactID External ID of the contact Text(20)

24.1.1.2 Example GetPaymentPlanSalesData request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>0</MessageID>
          <MessageType>GetPaymentPlanSalesData</MessageType>
          <TimeStamp>2007-11-26 09:42:09</TimeStamp>
      </Header>
      <Body>
          <PaymentPlan>
              <PaymentPlanID>123</PaymentPlanID>
              <ExternalContactID>A123</ExternalContactID>
          </PaymentPlan>
      </Body>
  </Envelope>

24.1.1.3 GetPaymentPlanSalesDataResponse Message

The GetPaymentPlanSalesDataResponse message is returned to the sender in response to the GetPaymentPlanSalesData message. The
response contains either the sales data for the PaymentPlanID given in the request, or information about errors that prevented the message
from being processed.

24.1.1.4 Example GetPaymentPlanSalesDataResponse message (no error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageType>GetPaymentPlanSalesDataResponse</MessageType>
          <SourceID/>
          <TimeStamp>2007-11-26 09:56:11</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <GetPaymentPlanSalesDataResponse>
              <PaymentPlanID>1</PaymentPlanID>
              <ExternalContactID>A123</ExternalContactID>
              <TotalItemsSold>10</TotalItemsSold>
          </GetPaymentPlanSalesDataResponse>
      </Body>
  </Envelope>

                                                                                                                                      267
eGalaxy Server Interface Specification                               24 GetPaymentPlanSalesData Message
24.1.1.5 Example GetPaymentPlanSalesDataResponse message (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>65</MessageID>
          <MessageType>GetPaymentPlanSalesDataResponse</MessageType>
          <SourceID/>
          <TimeStamp>2007-11-26 09:56:11</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Status>
              <StatusCode>3000</StatusCode>
              <StatusText>GetPaymentPlanSalesData request error</StatusText>
          </Status>
          <GetPaymentPlanSalesDataErrors>
              <GetPaymentPlanSalesDataError>
                  <ErrorCode>3001</ErrorCode>
                  <ErrorText>PaymentPlan with ID 1 not found in Galaxy database</ErrorText>
              </GetPaymentPlanSalesDataError>
          </GetPaymentPlanSalesDataErrors>
      </Body>
  </Envelope>




                                                                                                   268
eGalaxy Server Interface Specification                                                    25 CheckGroupSalesLimits Message
25 CheckGroupSalesLimits Message
The CheckGroupSalesLimits message can be used to check GroupSalesLimits when selling groups on the Web store.

25.1 Message Format
Following sections describes format of the CheckGroupSalesLimits message.

25.1.1 CheckGroupSalesLimits Message Fields
The CheckGroupSalesLimits message will be in the standard eGalaxy message format. The body of the message will contain a
<CheckGroupSalesLimits> element with the required data to check for GroupSales Limits.

25.1.1.1 <CheckGroupSalesLimits> Element

The <CheckGroupSalesLimits> element contains CustCategoryID, VisitDate, and Expected number of guests fields. Using the data sent for
these fields, eGalaxy server will check for the Group Sales Limits and return the proper response indicating the success or failure of the
check.

 Field                  Description                                     Type
 CustCategoryID         Customer category ID                            Numeric
 VisitDate              Scheduled date for the group’s arrival          DateTime
 ExpectedNumGuests      The total number of people expected to arrive   Numeric

25.1.1.2 Example CheckGroupSalesLimits request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>CheckGroupSalesLimits</MessageType>
          <TimeStamp>2008-01-23 09:55:52</TimeStamp>
      </Header>
      <Body>
          <CheckGroupSalesLimits>
              <CustCategoryID>123</CustCategoryID>
              <VisitDate>2008-01-23</VisitDate>
              <ExpectedNumGuests>50</ExpectedNumGuests>
          </CheckGroupSalesLimits>
      </Body>
  </Envelope>

25.1.2 CheckGroupSalesLimitsResponse Message
The CheckGroupSalesLimitsResponse message is returned to the sender in response to the CheckGroupSalesLimits request. The response
contains either result of the Group sales limit check, or information about errors that prevented the message from being processed.

25.1.2.1 <CheckGroupSalesLimitsResponse> Element

The <CheckGroupSalesLimitsResponse> element contains all the fields sent in the request to eGalaxy server and the fields providing the
result (success or failure) of the check.
Following are the fields returned under a <CheckGroupSalesLimitsResponse> element:

 Field                     Description                                                                                           Type
 CustCategoryID            Customer category ID                                                                                  Numeric
 VisitDate                 Scheduled date for the group’s arrival                                                                DateTime
 ExpectedNumGuests         The total number of people expected to arrive                                                         Numeric
 CheckResult               0 – Check succeeded                                                                                   Numeric
                           1 – Check failed – VenueLimit Group qty exceeded
                                                                                                                                         269
eGalaxy Server Interface Specification                                                25 CheckGroupSalesLimits Message
                       2 – Check failed – VenueLimit Guest qty exceeded
                       3 – Check failed – CustCategory Group qty exceeded
                       4 – Check failed – CustCategory Guest qty exceeded
                       5 – Check failed – Unexpected error. This is mainly a configuration problem in Galaxy Group Sales
                       limit setup. For example, Checking for GroupSales Limit has failed. Reason: “The venue limits
                       settings have not been configured” error
 CheckFailureReason    Detailed error message describing the reason of GroupSales Limit check failure                      Text
 MaxVenueGroupLimit    Max number of Venue Groups allowed.                                                                 Numeric
                       =0 – No limit (unlimited venue groups allowed)
                       >0 – Limit is enforced and is equal to the non zero value
 MaxCategoryGroupLimit Max number of CustCategory Groups allowed.                                                          Numeric
 MaxCategoryGuestLimit Max number of CustCategory Guests allowed.                                                          Numeric
 VenueGroupQty         Total number of Venue Groups already sold                                                           Numeric
 VenueGuestQty         Total number of Venue Guests already sold                                                           Numeric
 CategoryGroupQty      Total number of CustCategory Groups already sold                                                    Numeric
 CategoryGuestQty      Total number of CustCategory Guests already sold                                                    Numeric

25.1.2.2 Example CheckGroupSalesLimitsResponse message (no request error – LimitCheck Successful)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageType>CheckGroupSalesLimitsResponse</MessageType>
          <SessionID>123</SessionID>
          <TimeStamp>2008-01-23 09:55:55</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <CheckGroupSalesLimitsResponse>
              <CustCategoryID>123</CustCategoryID>
              <VisitDate>2008-01-23</VisitDate>
              <ExpectedNumGuests>50</ExpectedNumGuests>
              <CheckResult>0</CheckResult>
          </CheckGroupSalesLimitsResponse>
      </Body>
  </Envelope>

25.1.2.3 Example CheckGroupSalesLimitsResponse message (no request error – LimitCheck Failed)




                                                                                                                                 270
eGalaxy Server Interface Specification                                              25 CheckGroupSalesLimits Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageType>CheckGroupSalesLimitsResponse</MessageType>
          <SourceID/>
          <SessionID>123</SessionID>
          <TimeStamp>2008-01-23 09:55:55</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <CheckGroupSalesLimitsResponse>
              <CustCategoryID>123</CustCategoryID>
              <VisitDate>2008-01-23</VisitDate>
              <ExpectedNumGuests>50</ExpectedNumGuests>
              <CheckResult>1</CheckResult>
              <CheckFailureReason>Checking for GroupSales Limit has failed. Reason: The venue limits have
  reached the maximum group quantity of 500</CheckFailureReason>
              <MaxVenueGroupLimit>500</MaxVenueGroupLimit>
              <MaxVenueGuestLimit>10000</MaxVenueGuestLimit>
              <MaxCategoryGroupLimit>50</MaxCategoryGroupLimit>
              <MaxCategoryGuestLimit>1000</MaxCategoryGuestLimit>
              <VenueGroupQty>500</VenueGroupQty>
              <VenueGuestQty>9500</VenueGuestQty>
              <CategoryGroupQty>10</CategoryGroupQty>
              <CategoryGuestQty>75</CategoryGuestQty>
          </CheckGroupSalesLimitsResponse>
      </Body>
  </Envelope>

25.1.2.4 Example CheckGroupSalesLimitsResponse message (error processing request)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageType>CheckGroupSalesLimitsResponse</MessageType>
          <SessionID>123</SessionID>
          <TimeStamp>2008-01-23 09:55:54</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Status>
              <StatusCode>5000</StatusCode>
              <StatusText>CheckGroupSalesLimits request error</StatusText>
          </Status>
          <CheckGroupSalesLimitsErrors>
              <CheckGroupSalesLimitsError>
                  <ErrorCode>5001</ErrorCode>
                  <ErrorText>Customer Category with ID 1 not found in Galaxy database</ErrorText>
              </CheckGroupSalesLimitsError>
          </CheckGroupSalesLimitsErrors>
      </Body>
  </Envelope>




                                                                                                                271
eGalaxy Server Interface Specification                                                                                  26 User Message
26 User Message
The User message can be used to create, update or delete a Reseller Web store user in the Galaxy database.

26.1 Message Format
Following sections describes format of the User message.

26.1.1 User Message Fields
The User message is a standard eGalaxy server message format. The body of the message contains a <User> element with the required
data to add, update or delete a Reseller Web store user.

26.1.1.1 <User> Element

The <User> element contains properties of a Reseller Web store user. Using the data sent for these fields, eGalaxy server creates a new
Reseller user in the Galaxy database.
ADD UserCommand
      UserName of the user to add must be provided in the request along with any other field(s) that needs to be added and eGalaxy server
      returns the UserID field and Auto Generated Password in the response, if the request is processed successfully. If an error occurs
      validating or processing the request, error response is returned.
      Password is an optional field when adding a new user. If no password is given in the request, eGalaxy server will Auto Generate a
      new Password by using the Strong Password Rules defined in the Central Configuration (MWS> DM> SM>Central Configuration). The
      Auto Genrated password is returned back to sender in the response.
      When Password is changed using MODIFY user command, RequirePasswordChange flag is set to False in GxUsers table
      When creating a new user, eGalaxy server also creates an entry in the AgencyControls table associating the user to the given reseller
      AgencyID. eGalaxy server also creates a Contact record (in CustContacts table) for the new user.
MODIFY UserCommand
      UserID of the user to modify or update must be provided in the request along with any field(s) that needs to be modified and eGalaxy
      server returns the UserID field in the response, if the request is processed successfully. If an error occurs validating or processing the
      request, error response is returned.
      Password element is a CDATA XML element. This allows any type of character within the password text allowing the sender to send a
      Strong Password.
      When Password is changed using MODIFY user command, RequirePasswordChange flag is set to False in GxUsers table. When
      processing a Password change request, if the new password is NOT following the Strong Password rules defined in the Central
      Configuration (MWS> DM> SM>Central Configruation), eGalaxy server rejects the MODIFY request with proper error.
CANCEL UserCommand:
      UserID of the user to cancel or delete must be provided in the request and eGalaxy server returns the UserID field in the response, if
      the request is processed successfully. If an error occurs validating or processing the request, error response is returned.
Following is a list of fields supported within the <User> element:

 Field                       Description                                                                                             Type
 UserID                      User ID of the reseller web store user. Optional for ADD UserCommand. Required for MODIFY and           Numeric
                             CANCEL UserCommand.
 UserCommand                 Command indicating action to perform on the data given in the User request. Supported values:           Text
                             ADD, MODIFY, or CANCEL
 AgencyID                    ID of the Agency. Agency type must be “Reseller agency” Optional for MODIFY andI CANCEL                 Numeric
                             UserCommand. Required for ADD UserCommand.
 ClassID                     ID of the User Profile for this user Optional for MODIFY and CANCEL UserCommand. Required for           Text (10)
                             ADD UserCommand.
 UserName                    UserName for the given user Optional for MODIFY and CANCEL UserCommand. Required for ADD                Text (24)
                             UserCommand.
 Password                    User’s password to use for logon. This is a CDATA XML element. See MODIFY User message                  Text (40)
                             Example below (Optional)

                                                                                                                                            272
eGalaxy Server Interface Specification                                                                         26 User Message
 Name                     Full name of the user (Optional)                                                                Text (20)
 NickName                 Nick name of the user (Optional)                                                                Text (10)
 FirstName                User’s first name (Optional                                                                     Text (30)
 LastName                 User’s last name (Optional)                                                                     Text (30)
 Email                    User’s Email address (Optional)                                                                 Text
                                                                                                                          (128)
 Phone                    User’s Phone number (Optional)                                                                  Text (30)
 Expiration               Password expiration date (Optional)                                                             DateTime
 LockOut                  Flag indicating the user is locked out of the system (Optional)                                 Boolean
 LastLogOn                Last Logon date for this user (Optional)                                                        DateTime
 RequirePasswordChange    Flag indicating that a password change is required for this user (Optional)                     Boolean
 SecurityQuestionID       ID of the SecurityQuestion. In Galaxy this ID corresponds to CodeTableValues.CodeTableValueID   Numeric
                          column (Optional)
 SecurityAnswerText       Answer entered by the user for the given Security Question (Optional)                           Text
 ResetSecurityAnswer      Flag indicating that the user needs to answer their security question again (Optional)          Boolean
 Active                   Flag indicating if the user is active (can be used to log into the system)                      Boolean
 FailedRemaining          New value for the number of remaining login attempts for the user. Only valid for MODIFY        Numeric
                          message. (Optional)

26.1.1.2 Example User (ADD) request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>User</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <User>
              <UserCommand>ADD</UserCommand>
              <AgencyID>10000</AgencyID>
              <UserName>mandre</UserName>
              <Email>mandre@gatewayticketing.com</Email>
              <Phone>6109874000</Phone>
              <Expiration>2008-12-31</Expiration>
              <LockOut>NO</LockOut>
              <SecurityQuestionID>3</SecurityQuestionID>
              <SecurityAnswer>abcd</SecurityAnswer>
              <FirstName>Michael</FirstName>
              <LastName>Andre</LastName>
              <Active>YES</Active>
          </User>
      </Body>
  </Envelope>

26.1.1.3 Example User (MODIFY) request




                                                                                                                                273
eGalaxy Server Interface Specification                                                                           26 User Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>User</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <User>
              <UserCommand>MODIFY</UserCommand>
              <UserID>10001</UserID>
              <Password><![CDATA[<>=9]]></Password>
              <Active>YES</Active>
              <FailedRemaining>6</FailedRemaining>
          </User>
      </Body>
  </Envelope>

26.1.1.4 Example User (CANCEL) request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>User</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <User>
              <UserCommand>CANCEL</UserCommand>
              <UserID>10001</UserID>
              <Active>NO</Active>
          </User>
      </Body>
  </Envelope>

26.1.2 UserResponse Message
The UserResponse message is returned to the sender in response to the User request. The response contains either a success response, or
information about errors that prevented the message from being processed.

26.1.2.1 <UserResponse> Element

The <UserResponse> element contains one or more of the following fields depending upon the UserCommand given in the request.
Following are the fields returned under a <UserResponse> element:

 Field    Description                                                                     Type
 UserID   ID of the user. Always returned by eGalaxy server for all types of UserCommands Numeric
 Password Password of the new user added. Only returned for ADD UserCommand.              Text (40)

26.1.2.2 Example UserResponse message (ADD- Successful)




                                                                                                                                    274
eGalaxy Server Interface Specification                                                         26 User Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>UserResponse</MessageType>
          <TimeStamp>2008-06-12 09:55:53</TimeStamp>
      </Header>
      <Body>
          <UserResponse>
              <UserID>10001</UserID>
              <Password><![CDATA[<>=9]]></Password>
          </UserResponse>
      </Body>
  </Envelope>

26.1.2.3 Example UserResponse message (ADD- Error)

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>UserResponse</MessageType>
          <TimeStamp>2008-06-12 09:55:53</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>3200</StatusCode>
              <StatusText>User request error</StatusText>
          </Status>
          <UserErrors>
              <UserError>
                  <ErrorCode>3205</ErrorCode>
                  <ErrorText>User with UserName mandre already exists in Galaxy database</ErrorText>
              </UserError>
          </UserErrors>
      </Body>
  </Envelope>

26.1.2.4 Example UserResponse message (MODIFY and CANCEL- Successful)

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>UserResponse</MessageType>
          <TimeStamp>2008-06-12 09:55:53</TimeStamp>
      </Header>
      <Body>
          <UserResponse>
              <UserID>10001</UserID>
          </UserResponse>
      </Body>
  </Envelope>




                                                                                                          275
eGalaxy Server Interface Specification                                                                                27 Node Message
27 Node Message
The Node message can be used to create, update or delete a Reseller Web store node in the Galaxy database.

27.1 Message Format
Following sections describes format of the Node message.

27.1.1 Node Message Fields
The Node message is a standard eGalaxy server message format. The body of the message contains a <Node> element with the required
data to add, update or delete a Reseller Web store node.

27.1.1.1 <Node> Element

The <Node> element contains properties of a Reseller Web store node. Using the data sent for these fields, eGalaxy server creates a new
Reseller node in the Galaxy database.
ADD NodeCommand
      Name of the node to add must be provided in the request along with any other field(s) that needs to be added and eGalaxy server
      returns the NodeNo field in the response, if the request is processed successfully. If an error occurs validating or processing the
      request, error response is returned.
      By default when a new node is created using ADD NodeCommand, it is created with an Active status (Nodes.Active = True), unless
      specifically advised in the request (<Active>NO</Active>).
MODIFY NodeCommand
      Number of the node to modify or update must be provided in the request along with any field(s) that needs to be modified and
      eGalaxy server returns the NodeNo field in the response, if the request is processed successfully. If an error occurs validating or
      processing the request, error response is returned. CANCEL NodeCommand
      Number of the node to cancel or delete must be provided in the request and eGalaxy server returns the NodeNo field in the response,
      if the request is processed successfully. If an error occurs validating or processing the request, error response is returned. Following
      is a list of fields supported within the <Node> element:

 Field       Description                                                                                                             Type
 NodeNo      Node number of the reseller web store location. Not applicable to ADD NodeCommand. Required for MODIFY                  Numeric
             and CANCEL NodeCommand.
 NodeCommand Command indicating action to perform on the data given in the Node request. Supported values: ADD,                      Text
             MODIFY, or CANCEL
 AgencyID    ID of the Agency. Agency type must be “Reseller agency” Optional for MODIFY and CANCEL NodeCommand.                     Numeric
             Required for ADD NodeCommand.
 Name        Node name Optional for MODIFY and CANCEL NodeCommand. Required for ADD NodeCommand.                                     Text
                                                                                                                                     (50)
 Description       Node description, e.g. “Reseller Web store Admin Node” (Optional)                                                 Text
                                                                                                                                     (100)
 Active            Flag indicating node’s current status (Optional)                                                                  Boolean
 Phone             Number to reach this node via phone (Optional)                                                                    Text
                                                                                                                                     (24)

27.1.1.2 Example Node (ADD) request




                                                                                                                                            276
eGalaxy Server Interface Specification                                                                         27 Node Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>Node</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <Node>
              <NodeCommand>ADD</NodeCommand>
              <AgencyID>10000</AgencyID>
              <Name>Reseller Web store admin node</Name>
              <Phone>6109874000</Phone>
          </Node>
      </Body>
  </Envelope>

27.1.1.3 Example Node (MODIFY) request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>Node</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <Node>
              <NodeCommand>MODIFY</NodeCommand>
              <NodeNo>10001</NodeNo>
              <Active>NO</Active>
          </Node>
      </Body>
  </Envelope>

27.1.1.4 Example Node (CANCEL) request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>Node</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <Node>
              <NodeCommand>CANCEL</NodeCommand>
              <NodeNo>10001</NodeNo>
          </Node>
      </Body>
  </Envelope>

27.1.2 NodeResponse Message
The NodeResponse message is returned to the sender in response to the Node request. The response contains either a success response,
or information about errors that prevented the message from being processed.

27.1.2.1 <NodeResponse> Element

The <NodeResponse> element contains one or more of the following fields depending upon the NodeCommand given in the request.
Following are the fields returned under a element:

 Field  Description                                                                  Type
 NodeNo Node number. Always returned by eGalaxy server for all types of NodeCommands Numeric

                                                                                                                                  277
eGalaxy Server Interface Specification                                               27 Node Message
27.1.2.2 Example NodeResponse message (ADD, MODIFY or CANCEL- Successful)

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>NodeResponse</MessageType>
          <TimeStamp>2008-06-12 09:55:53</TimeStamp>
      </Header>
      <Body>
          <NodeResponse>
              <NodeNo>10001</NodeNo>
          </NodeResponse>
      </Body>
  </Envelope>

27.1.2.3 Example UserResponse message (ADD, MODIFY or CANCEL – Error response)

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>NodeResponse</MessageType>
          <TimeStamp>2008-06-12 09:55:53</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>3300</StatusCode>
              <StatusText>Node request error</StatusText>
          </Status>
          <NodeErrors>
              <NodeError>
                  <ErrorCode>3304</ErrorCode>
                  <ErrorText>Agency 10000 not found in Galaxy database</ErrorText>
              </NodeError>
          </NodeErrors>
      </Body>
  </Envelope>




                                                                                                278
eGalaxy Server Interface Specification                                                            28 QueryReportData Message
28 QueryReportData Message
The QueryReportData message can be used to retrieve report information from eGalaxy for a variety of reports.

28.1 Message Format
Following sections describes the format of the QueryReportData message.

28.1.1 QueryReportData Message Fields
The Node message is a standard eGalaxy server message format. The body of the message contains a <Report> element with the required
parameters to generate the report data.

28.1.1.1 <Report> Element

The <Report> element contains properties and parameters needed to generate report data. Using the data sent for these fields, eGalaxy
server runs a report and returns the data in the form of either XML report business objects or comma-separated lists.
Following is a list of fields supported within the <Report> element

 Field                 Description                                                                                                Type
 ReportID              The unique ID (from the Reports table) of the report to run.                                               Numeric
 ReportUserID          The user ID of the user logged onto the sending system. If this value is 0, or is not included in the      Numeric
                       message, the report will display the eGalaxy user in the report footer.
 ReportAgencyNo        The agency number of the user logged onto the sending system. If this value is 0, or is not included       Numeric
                       in the message, the report will display the eGalaxy agency number in the report footer.
 ReportNodeNo          The node number of the user logged onto the sending system. If this value is 0, or is not included in      Numeric
                       the message, the report will display the eGalaxy node number in the report footer.
 OutputFormat          (Optional). The output format of the report response message is determined by this value. If this          Numeric
                       value is 0 or not included in the message, the report data will be returned in XML format and can be
                       sent to CartTrans to generate a PDF report ile. If this value is 1, the response elements will be in CSV
                       (comma-separated value) format. The XML tags will be different, and the data within the tags will be
                       in CSV format. CartTrans will not process a CSV formatted response message. The WebStore will
                       handle the processing of the response message.
 <ReportParameters>    A list of the parameters used to filter the report output                                                  Element
 TranslationLanguageID (Optional) The language to use when translating the report data. Corresponds to the                        Numeric
                       TranslationLanguageID of the language you wish to use in the TranslationLanguages table.

28.1.1.2 <ReportParameters> Element

The <ReportParameters> element contains parameters (restrictions) for a report. The only element supported under the
<ReportParameters> element is one or more <ReportParameter> elements.

 Field           Description               Type
 ReportParameter <ReportParameter> element Element

28.1.1.3 <ReportParameter> Element

The <ReportParameter> element contains information about a single parameter for a given report. The parameter information is simply a
reference to information about a parameter from the ReportParameters table along with a parameter value. A given report can have any
number of parameters. The ReportParameters table has a ReportID to indicate the report from the Reports table that the parameter can be
used for.
The following is a list of fields supported within the <ReportParameter> element.

 Field             Description                                                                                                    Type
 ReportParameterID The unique ID (from the ReportParameters table) of the parameter. The ReportParameters record                  Numeric
                   contains the name, description, and data type for the parameter

                                                                                                                                        279
eGalaxy Server Interface Specification                                                             28 QueryReportData Message
 Value                The value of the parameter. This can be of a variety of data types which will be converted from the text    Any
                      string by eGalaxy according to the data type on the ReportParameter record.

28.1.1.4 Example QueryReportData message

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>QueryReportData</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <Report>
              <ReportID>1</ReportID>
              <ReportUserID>888</ReportUserID>
              <ReportAgencyNo>1</ReportAgencyNo>
              <ReportNodeNo>1234</ReportNodeNo>
              <OutputFormat>0</OutputFormat>
              <ReportParameters>
                  <ReportParameter>
                      <ReportParameterID>1</ReportParameterID>
                      <Value>2008-06-01 00:00:00</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>2</ReportParameterID>
                      <Value>2008-06-07 23:59:59</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>3</ReportParameterID>
                      <Value>1, 7, 9</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>4</ReportParameterID>
                      <Value>20001</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>7</ReportParameterID>
                      <Value>YES</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>8</ReportParameterID>
                      <Value>NO</Value>
                  </ReportParameter>
              </ReportParameters>
          </Report>
      </Body>
  </Envelope>

28.1.2 QueryReportDataResponse Message Fields
The QueryReportDataResponse message is returned to the sender in response to the QueryReportData request. The response contains
either a success response, or information about errors that prevented the message from being processed.

28.1.2.1 <ReportResponse> Element

The following are the fields returned under the <ReportResponse> element:

 Field                  Description                                                                                               Type
 ReportID               The unique ID (from the Reports table) of the report that the data was generated for.                     Numeric
 OutputFormat           This is the output format (0 – XML, 1 – CSV) of the response message. This will be the same as the        Numeric
                        OutputFormat sent in the QueryReportData request message. The report data tags that appear in the
                        response are dependent on this alue.
 ReportLists            <ReportLists> element. The report business object lists that make up the report. This element only        Element
                        appears if the OutputFormat has a value of 0.
 ReportParameters       <ReportParameters> element. The parameters that were passed to the report as restrictions. This           Element
                        information is preserved in the response to allow it to be displayed on the report output. This element

                                                                                                                                        280
eGalaxy Server Interface Specification                                                              28 QueryReportData Message
                     only appears if the utputFormat has a value of 0.
 ReportLabelInfo     <ReportLabelInfo> element. This contains the general information about where the report was run                Element
                     from. This element only appears if the OutputFormat has a value of 0.
 CSVReports          <CSVReports> element. This element can hold report business object data in CSV form for one or more            Element
                     reports. This element only appears if the OutputFormat = 1.
 CSVReportParameters <CSVReportParameters> element. This element holds CSV-formatted data for one or more report                    Element
                     parameters. This element only appears if the OutputFormat = 1.
 CSVReportLabelInfo  <CSVReportLabelInfo> element. This element holds CSV-formatted data for the report label                       Element
                     information. This element only appears if the OutputFormat = 1.

28.1.2.2 <ReportLists> Element

The <ReportLists> Element contains information about one or more business object lists that comprise the report data. The business object
lists are converted to XML format and output. There are no standard element names for the contents of the <ReportLists> element, as the
business object list XML uses the name of the business object for the element names. For example, for the Reseller Sales Summary Report,
the <ReportListsElement> will contain two elements - <ResellerSalesSummaryReports> and <ResellerReturnDetailReports>. This is because
the report has a main part, and a separate returns part at the end of the report.
The <ResellerSalesSummaryReports> element contains one or more <ResellerSalesSummaryReport> elements which contain information
about a single report business object. The fields of this element are the properties of the business object.
The <ResellerReturnDetailReports> element similarly is made up of one or more <ResellerReturnDetailReport> elements containing the
report records.

28.1.2.3 <ReportParameters> Element

The <ReportParameters> element is the same as the one in the QueryReportData request message. The data is preserved on the response
so the restrictions can be displayed on the report output. This information is transferred directly from the request to the response without
modification.

28.1.2.4 <ReportLabelInfo> Element

The <ReportLabelInfo> element contains general information about the machine that generates the report. In this case, the information
comes from eGalaxy.
The following is a list of fields supported within the <ReportLabelInfo> element.

 Field             Description                                            Type
 CompanyName       Name of the company configured in eGalaxy              Text
 AgencyName        Name of the agency configured in eGalaxy               Text
 AgencyID          ID of the agency configured in eGalaxy                 Numeric
 UserName          Name of the user configured in eGalaxy                 Text
 UserID            ID of the user configured in eGalaxy                   Numeric
 NodeNo            Node number of the eGalaxy node                        Integer
 AppName           Application name of eGalaxy. This will be “eGalaxy”    Text
 AppVersion        Version number (with build number)                     Text

28.1.2.5 Example QueryReportDataResponse Message (with OutputFormat = 0)




                                                                                                                                         281
eGalaxy Server Interface Specification                                                            28 QueryReportData Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>QueryReportDataResponse</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <ReportResponse>
              <ReportID>1</ReportID>
              <OutputFormat>0</OutputFormat>
              <ReportLists>
                  <ResellerSalesSummaryReports>
                      <ResellerSalesSummaryReport TableName=”<NONE>” ClassName=”TGTSResellerSalesSummaryReport”>
                          <Price>119</Price>
                          <Quantity>22</Quantity>
                          <CategoryName><![CDATA[TestCategory]]></CategoryName> ...
                      </ResellerSalesSummaryReport>
                      <ResellerSalesSummaryReport> ...
                      </ResellerSalesSummaryReport>
                  </ResellerSalesSummaryReports>
                  <ResellerReturnDetailReports>
                      <ResellerReturnDetailReport> ...
                      </ResellerReturnDetailReport>
                      <ResellerReturnDetailReport> ...
                      </ResellerReturnDetailReport>
                  </ResellerReturnDetailReports>
              </ReportLists>
              <ReportParameters>
                  <ReportParameter>
                      <ReportParameterID>1</ReportParameterID>
                      <Value>2008-06-01 00:00:00</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>2</ReportParameterID>
                      <Value>2008-06-07 23:59:59</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>3</ReportParameterID>
                      <Value>1, 7, 9</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>4</ReportParameterID>
                      <Value>20001</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>7</ReportParameterID>
                      <Value>YES</Value>
                  </ReportParameter>
                  <ReportParameter>
                      <ReportParameterID>8</ReportParameterID>
                      <Value>NO</Value>
                  </ReportParameter>
              </ReportParameters>
              <ReportLabelInfo>
                  <CompanyName>GATEWAY TICKETING SYSTEMS</CompanyName>
                  <AgencyName>GATEWAY TICKETING</AgencyName>
                  <AgencyID>1</AgencyID>
                  <UserName>Test User</UserName>
                  <UserID>888</UserID>
                  <NodeNo>570</NodeNo>
                  <AppName>eGalaxy</AppName>
                  <AppVersion>4.5.0 (Build 300)</AppVersion>
              </ReportLabelInfo>
          </ReportResponse>
      </Body>
  </Envelope>



28.1.2.6 <CSVReports> Element

The <CSVReports> element holds one or more <CSVReport> elements containing data from the report business object lists generated for the
report. Some reports have multiple business object lists, such as the Reseller Sales Summary Report which also includes the Reseller Return

                                                                                                                                       282
eGalaxy Server Interface Specification                                                               28 QueryReportData Message
Detail Report in it.

 Field     Description                                                                                 Type
 CSVReport <CSVReport> element containing CSV formatted data from a single report business object list Element

28.1.2.7 <CSVReport> Element

The <CSVReport> element contains the main report data for the report. This is the data from a single report business object list.

 Field                 Description                                                                                                   Type
 ReportName            The name of the report section that this data belongs to.                                                     Text
 CSVColumnNames        A comma-separated string list of the property names from the report business object list.                     Text
 CSVReportData         A comma-separated string list of the property values for the report data from the business object list. The   Text
                       rows of CSV data are separated by carriage return/linefeed (ASCII characters 13, 10)

28.1.2.8 <CSVReportParameters> Element

The <CSVReportParameters> element contains CSV-formatted information about the parameters passed into the report request.

 Field                   Description                                                                                       Type
 CSVColumnNames          A comma-separated string list of the property names from the parameter objects from the parameter Text
                         list generated from the request message.
 CSVReportParametersData A comma-separated string list of the property values for the parameter objects from the request   Text
                         message. The rows of CSV data are separated by carriage return/linefeed (ASCII characters 13, 10)

28.1.2.9 <CSVReportLabelInfo> Element

The <CSVReportLabelInfo> element contains CSV-formatted general information from the machine generating the report.

 Field                  Description                                                                                                  Type
 CSVColumnNames         A comma-separated string list of the property names from the general information obtained from the           Text
                        request message.
 CSVReportLabelInfoData A comma-separated string list of the property values for the general information from the request            Text
                        message. The rows of CSV data are separated by carriage return/linefeed (ASCII characters 13, 10)

28.1.2.10 Example QueryReportDataResponse Message (with OutputFormat = 1)




                                                                                                                                       283
eGalaxy Server Interface Specification                                          28 QueryReportData Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>QueryReportDataResponse</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <ReportResponse>
              <ReportID>1</ReportID>
              <OutputFormat>1</OutputFormat>
              <CSVReports>
                  <CSVReport>
                      <ReportName>ResellerSalesSummaryReport</ReportName>
                      <CSVColumnNames><![CDATA[SalesChannelID,CategoryGroupID,CategoryID, …]]></CSVColumnNames>
                      <CSVReportData><![CDATA[ 5,12,13,20000,571,ADTICK,TICKET0010101,&quot;TICKET -
  ADULT&quot;, … 5,12,13,20000,570,ADTICK,TICKET0010101,&quot;TICKET - ADULT&quot;, …
  5,12,13,20000,570,CHTICK,TICKET0010102,&quot;TICKET - CHILD&quot;, … ]]></CSVReportData>
                  </CSVReport>
                  <CSVReport>
                      <ReportName>ResellerReturnDetailReport</ReportName>
                      <CSVColumnNames><![CDATA[SalesChannelID,CategoryGroupID,CategoryID, …]]></CSVColumnNames>
                      <CSVReportData><![CDATA[ 5,12,13,20000,571,ADTICK,TICKET0010101,&quot;TICKET -
  ADULT&quot;, … 5,12,13,20000,571,ADTICK,TICKET0010101,&quot;TICKET - ADULT&quot;, …
  5,12,13,20000,571,ADTICK,TICKET0010101,&quot;TICKET - ADULT&quot;, …
  5,12,13,20000,570,ADTICK,TICKET0010101,&quot;TICKET - ADULT&quot;, …
  5,12,13,20000,570,CHTICK,TICKET0010102,&quot;TICKET - CHILD&quot;, … ]]></CSVReportData>
                  </CSVReport>
              </CSVReports>
              <CSVReportParameters>
                  <CSVColumnNames><![CDATA[ParameterID,Name,DataType,StringValue]]></CSVColumnNames>
                  <CSVReportParametersData><![CDATA[ 1,StartDateTime,4,2008-04-10 2,EndDateTime,4,2008-07-08
  3,Categories,2,&quot;12, 13, 34&quot; 6,PLU,2,TICKET0010101 7,HasResellerReportPriv,3,YES
  8,HasAdminReportPriv,3,YES ]]></CSVReportParametersData>
              </CSVReportParameters>
              <CSVReportLabelInfo>
                  <CSVColumnNames><![CDATA[CompanyName,AgencyName,UserName,AppName,…]]></CSVColumnNames>
                  <CSVReportLabelInfoData><![CDATA[&quot;GATEWAY TICKETING SYSTEMS&quot;,&quot;GATEWAY
  TICKETING&quot;,…]]></CSVReportLabelInfoData>
              </CSVReportLabelInfo>
          </ReportResponse>
      </Body>
  </Envelope>

28.1.2.11 Example QueryReportDataResponse Message with errors

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <SessionID>123</SessionID>
          <MessageType>QueryReportDataResponse</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>3500</StatusCode>
              <StatusText>Query report data request error</StatusText>
          </Status>
          <QueryReportDataErrors>
              <QueryReportDataError>
                  <ErrorCode>3504</ErrorCode>
                  <ErrorText>Report with ID 10 not found in Galaxy database</ErrorText>
              </QueryReportDataError>
          </QueryReportDataErrors>
      </Body>
  </Envelope>




                                                                                                              284
eGalaxy Server Interface Specification                                                      29 ImportDebitTransaction Message
29 ImportDebitTransaction Message
The ImportDebitTransaction message can be used to update RFID debit balances and log debit transactions in the Galaxy system for
transactions that take place in an external system. This can also be used to update debit balances and log debit transactions for the
Gateway Stored Value system.

29.1 Message Format
Following sections describes format of the ImportDebitTransaction message.

29.1.1 ImportDebitTransaction Message Fields
The ImportDebitTransaction message is a standard eGalaxy server message format. The body of the message contains a
<DebitTransaction> element with the required parameters to generate a DebitCardLog record with the transaction information.

29.1.1.1 <DebitTransaction> Element

The <DebitTransaction> element contains properties and parameters needed to generate debit transaction data. Using the data sent for
these fields, eGalaxy server updates the balance in the DebitCards table and creates a DebitCardLog record containing the transaction
information.
Following is a list of fields supported within the <DebitTransaction> element

 Field                  Description                                                                                              Type
 Station                The unique identifier for the external node/station where the transaction occurred. This can be a        Text(30)
                        numeric identifier or a textual description.
 TransactionNumber      The numeric identifier for the transaction from the external system.                                     Numeric
 TransactionDateTime The date and time that the transaction occurred                                                             DateTime
 SerialNumber           The RFID serial number of the card/wristband used in the debit transaction. This identifier will be      Text(20)
                        mapped to a visual ID in the RFIDMaps table to allow galaxy to update the correct record in the
                        DebitCards table, and properly create the DebitCardLog record. (Only used for RFID transactions)
 VisualID               The visual ID of the debit card (only used for non-RFID transactions). If this field is used, an error   Text(40)
                        will also be returned if the visual ID is locked out or if the balance is insufficient to cover the
                        payment.
 CardLogType            The type of transaction that occurred. The values allowed for this are: 1 – Recharge 2 – Charge          Numeric
                        (Payment) 6 – Unload For a recharge, the transaction amount is added to the balance. For charges
                        and unloads, the amount is subtracted from the balance.
 TransactionTotal       The actual amount that was charged, recharged or unloaded against the stored value item in the           Currency
                        transaction. This amount should not include the extra amount charged for unprocessed locker
                        transactions. That amount will be sent in the LockerTransactionTotal field.
 LockerTransactionTotal This is an optional field indicating the amount that was charged to the RFID stored value item for       Currency
                        unprocessed locker transactions. This should match the amount that was returned by the
                        QueryLockerTransaction message during the transaction. (Only supported for RFID transactions)

The <SourceID> element in the header is also an important part of the message. The eGalaxySourceID from the record in the
eGalaxySources table is saved with the DebitCardLog record to identify the system where the transaction originated. This gives more
meaning to the station and transaction number, and allows distinction between multiple types of external systems that can perform debit
transactions.

29.1.1.2 Example ImportDebitTransaction message (Recharge of $25.00) (RFID)




                                                                                                                                        285
eGalaxy Server Interface Specification                                                 29 ImportDebitTransaction Message
  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>EXTSYS01</SourceID>
          <SessionID>123</SessionID>
          <MessageType>ImportDebitTransaction</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <DebitTransaction>
              <Station>STATION 1</Station>
              <TransactionNumber>12345</TransactionNumber>
              <TransactionDateTime>2008-06-12 09:54:58</TransactionDateTime>
              <SerialNumber>231983102039488579</SerialNumber>
              <CardLogType>1</CardLogType>
              <TransactionTotal>25.00</TransactionTotal>
              <LockerTransactionTotal>10.00</LockerTransactionTotal>
          </DebitTransaction>
      </Body>
  </Envelope>

29.1.1.3 Example ImportDebitTransaction message (Charge of $25.00) (non-RFID)

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>EXTSYS01</SourceID>
          <SessionID>123</SessionID>
          <MessageType>ImportDebitTransaction</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <DebitTransaction>
              <Station>STATION 1</Station>
              <TransactionNumber>12345</TransactionNumber>
              <TransactionDateTime>2008-06-12 09:54:58</TransactionDateTime>
              <VisualID>1239001239501239</VisualID>
              <CardLogType>2</CardLogType>
              <TransactionTotal>25.00</TransactionTotal>
          </DebitTransaction>
      </Body>
  </Envelope>

29.1.2 ImportDebitTransactionResponse Message Fields
The ImportDebitTransactionResponse message has no data aside from status and errors (when applicable). Any errors will be wrapped in
the <ImportDebitTransactionErrors> tag. The individual errors will be in the standard error format and wrapped in the
<ImportDebitTransactionError> tag.

29.1.2.1 Example ImportDebitTransactionResponse message (No Error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>EXTSYS01</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2008-06-12 10:00:00</TimeStamp>
          <MessageType>ImportDebitTransactionResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

29.1.2.2 Example ImportDebitTransactionResponse message (With Error)


                                                                                                                                   286
eGalaxy Server Interface Specification                                    29 ImportDebitTransaction Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>EXTSYS01</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2008-06-12 10:00:00</TimeStamp>
          <MessageType>ImportDebitTransactionResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>3700</StatusCode>
              <StatusText>ImportDebitTransaction request error</StatusText>
          </Status>
          <ImportDebitTransactionErrors>
              <ImportDebitTransactionError>
                  <ErrorCode>3706</ErrorCode>
                  <ErrorText>Serial number 231983102039488579 not found</ErrorText>
              </ImportDebitTransactionError>
          </ImportDebitTransactionErrors>
      </Body>
  </Envelope>




                                                                                                       287
eGalaxy Server Interface Specification                                                     30 UpdateContractStatus Message
30 UpdateContractStatus Message
The UpdateContractStatus message can be used to update the status on a payment contract in the Galaxy system from an external system.
This can be used for contracts that are exported from Galaxy, where the payments are handled by an external system.

30.1 Message Format
Following sections describes format of the UpdateContractStatus message.

30.1.1 UpdateContractStatus Message Fields
The UpdateContractStatus message is a standard eGalaxy server message format. The body of the message contains a element that
contains one or more elements with the required parameters modify a PaymentContract with the new status.

30.1.1.1 Element

 Field                 Description          Type
 PaymentContractStatus One or more elements Element

30.1.1.2 Element

The element contains properties and parameters needed to modify the status on a payment contract. Using the data sent for these fields,
eGalaxy server updates the value in the PaymentContractStatusID field on the PaymentContractStatus table.
Following is a list of fields supported within the element

 Field                   Description                                                                                        Type
 PaymentContractID       The unique identifier for the payment contract in the PaymentContracts table.                      Numeric
 PaymentContractStatusID The unique identifier for the payment contract status record in the PaymentContractStatuses table. Numeric
                         This value will be used for the PaymentContractStatusID field in the PaymentContracts table.

30.1.1.3 Example UpdateContractStatus message

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <MessageType>UpdateContractStatus</MessageType>
          <SessionID>123</SessionID>
          <TimeStamp>2008-07-11 17:50:09</TimeStamp>
      </Header>
      <Body>
          <PaymentContractStatuses>
              <PaymentContractStatus>
                  <PaymentContractID>1971</PaymentContractID>
                  <PaymentContractStatusID>1</PaymentContractStatusID>
              </PaymentContractStatus>
              <PaymentContractStatus>
                  <PaymentContractID>1978</PaymentContractID>
                  <PaymentContractStatusID>3</PaymentContractStatusID>
              </PaymentContractStatus>
          </PaymentContractStatuses>
      </Body>
  </Envelope>

30.1.2 UpdateContractStatusResponse Message Fields
The UpdateContractStatusResponse message has no data aside from status and errors (when applicable). Any errors will be wrapped in the
tag. The individual errors will be in the standard error format and wrapped in the tag.

30.1.2.1 Example UpdateContractStatusReponse message (No Error)

                                                                                                                                     288
eGalaxy Server Interface Specification                                     30 UpdateContractStatus Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2008-07-11 17:50:09</TimeStamp>
          <MessageType>UpdateContractStatusResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

30.1.2.2 Example UpdateContractStatusReponse message (With Error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2008-07-11 17:50:09</TimeStamp>
          <MessageType>UpdateContractStatusResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>3900</StatusCode>
              <StatusText>UpdateContractStatus request error</StatusText>
          </Status>
          <UpdateContractStatusErrors>
              <UpdateContractStatusError>
                  <ErrorCode>3904</ErrorCode>
                  <ErrorText>Contract 1971: Contract not found</ErrorText>
              </UpdateContractStatusError>
              <UpdateContractStatusError>
                  <ErrorCode>3905</ErrorCode>
                  <ErrorText>Contract 1978: Invalid contract status ID 8</ErrorText>
              </UpdateContractStatusError>
          </UpdateContractStatusErrors>
      </Body>
  </Envelope>




                                                                                                      289
eGalaxy Server Interface Specification                                                  31 QueryLockerTransaction Message
31 QueryLockerTransaction Message
The QueryLockerTransaction message can be used by an external system to determine the amounts of unprocessed locker transactions that
exist in the DebitCardLog table for a given RFID debit item. This message is for use with a locker system that does not write to the RFID
chip, but instead sends transactions to Galaxy which subtracts the amount from the RFID debit item when the next debit transaction is
processed. This message does not do any processing. It just returns the total amount of the unprocessed transactions for a given RFID
serial number. The ImportDebitTransaction message has been modified to process locker transactions after the amount has been removed
from the RFID chip.

31.1 Message Format
Following sections describes format of the QueryLockerTransaction message.

31.1.1 QueryLockerTransaction Message Fields
The QueryLockerTransaction message is a standard eGalaxy server message format. The body of the message contains a element
containing a serial number of the RFID chip that may have unprocessed locker transactions in the DebitCardLog table.

31.1.1.1 <QueryLockerTransaction> Element

The <QueryLockerTransaction< element has a single serial number field of an RFID chip that is to be queried for unprocessed locker
transactions. Using the data sent for these fields, eGalaxy server returns a response message with a total amount from the unprocessed
locker transactions.
Following is a list of fields supported within the <QueryLockerTransaction> element

 Field        Description                                                                                                       Type
 SerialNumber The RFID serial number of the debit item (card/wristband) that is being queried for unprocessed locker            Text(20)
              transactions.

The eGalaxy source is required to have debit requests enabled for the QueryLockerTransaction messages to process.

31.1.1.2 Example QueryLockerTransaction message

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>EXTSYS01</SourceID>
          <SessionID>123</SessionID>
          <MessageType>QueryLockerTransaction</MessageType>
          <TimeStamp>2008-06-12 09:55:52</TimeStamp>
      </Header>
      <Body>
          <QueryLockerTransaction>
              <SerialNumber>231983102039488579</SerialNumber>
          </QueryLockerTransaction>
      </Body>
  </Envelope>

31.1.2 QueryLockerTransactionResponse Message Fields
The QueryLockerTransactionResponse message contains a single <QueryLockerTransactionResponse> element if successful. If any errors
occur, they will be wrapped in the <QueryLockerTransactionErrors> tag. The individual errors will be in the standard error format and
wrapped in the <QueryLockerTransactionError> tag.

31.1.2.1 <QueryLockerTransactionResponse> Element

The following are the fields returned under the <QueryLockerTransactionResponse> element:

 Field                  Description                                                                                            Type
 SerialNumber           The RFID serial number that was queried for unprocessed locker transactions.                           Text(20)
 LockerTransactionTotal The total amount of all of the unprocessed locker transactions found in the DebitCardLog table for     Currency
                                                                                                                                         290
eGalaxy Server Interface Specification                                   31 QueryLockerTransaction Message
                        the given RFID serial number.

31.1.2.2 Example QueryLockerTransactionResponse message (No Error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>EXTSYS01</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2008-06-12 10:00:00</TimeStamp>
          <MessageType>QueryLockerTransactionResponse</MessageType>
      </Header>
      <Body>
          <QueryLockerTransactionResponse>
              <SerialNumber>231983102039488579</SerialNumber>
              <LockerTransactionTotal>5.00</LockerTransactionTotal>
          </QueryLockerTransactionResponse>
      </Body>
  </Envelope>

31.1.2.3 Example QueryLockerTransactionResponse message (With Error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>EXTSYS01</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2008-06-12 10:00:00</TimeStamp>
          <MessageType>QueryLockerTransactionResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>4000</StatusCode>
              <StatusText>QueryLockerTransaction request error</StatusText>
          </Status>
          <QueryLockerTransactionErrors>
              <QueryLockerTransactionError>
                  <ErrorCode>4004</ErrorCode>
                  <ErrorText>Serial number 231983102039488579 not found</ErrorText>
              </QueryLockerTransactionError>
          </QueryLockerTransactionErrors>
      </Body>
  </Envelope>




                                                                                                      291
eGalaxy Server Interface Specification                                                                  32 PaymentAuth Message
32 PaymentAuth Message
For interface specification of this message please refer to the Payment Authorization Interface Specs document.




                                                                                                                          292
eGalaxy Server Interface Specification                                                      33 QueryGroupSalesCode Message
33 QueryGroupSalesCode Message
The QueryGroupSalesCode message can be used by an external system to determine the customer and pricing for the Group Sales customer
associated to a given Group Sales Code. The purpose of this message is to import all the pricing data required to perform a Group Sales
transaction on the Web store.

33.1 Message Format
Following sections describes format of the QueryGroupSalesCode message.

33.1.1 QueryGroupSalesCode Message Fields
The body of the QueryGroupSalesCode message contains a <QueryGroupSalesCode> element containing <Query> element. The <Query>
element contains the Group Sales Code field for which the Web store needs to retrieve the pricing information.

33.1.1.1 <QueryGroupSalesCode> Element

The <QueryGroupSalesCode> element contains <Query> element. The <Query> element contains the fields that are used by the eGalaxy
Server to find pricing information.
Following is a list of fields supported within the <Query> element:

 Field Description                                                                                                         Type
 Code Group Sales Code, defined on the Customer in Galaxy Maintenance. It is used by a Contact placing an order on the web Text(30)
       to provide Customer-specific pricing.

33.1.1.2 Example QueryGroupSalesCode message

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <SessionID>123</SessionID>
          <MessageType>QueryGroupSalesCode</MessageType>
          <TimeStamp>2010-04-28 10:15:05</TimeStamp>
      </Header>
      <Body>
          <QueryGroupSalesCode>
              <Query>
                  <Code>BoyScouts1</Code>
              </Query>
          </QueryGroupSalesCode>
      </Body>
  </Envelope>

33.1.2 QueryGroupSalesCodeResponse Message Fields
The QueryGroupSalesCodeResponse message contains a element if the message is processed successfully. If any errors occur, they will be
wrapped in the element, which contains the individual errors wrapped in the element.

33.1.2.1 <QueryGroupSalescodeResponse> Element

The following are the fields returned under the <QueryGroupSalesCodeResponse> element:

 Field           Description                                                                    Type
 CustomerID      ID of the Customer associated with the Group Sales Code in the request message Numeric
 PricingInfoList <PricingInfoList> element                                                      Element

33.1.2.1.1 <PricingInfoList> element

Please refer to <PricingInfoList> element for more details related to the XML format for this element. The <PricingInfoList> element is
described under sub section “<PricingInfoList> Element” of section “Common Element Formats”.
                                                                                                                                          293
eGalaxy Server Interface Specification                                    33 QueryGroupSalesCode Message
33.1.2.2 Example QueryGroupSalesCodeResponse message (No Error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>123</MessageID>
          <TimeStamp>2010-04-28 10:15:10</TimeStamp>
          <MessageType>QueryGroupSalesCodeResponse</MessageType>
      </Header>
      <Body>
          <QueryGroupSalesCodeResponse>
              <CustomerID>12345</CustomerID>
              <PricingInfoList>
                  <PricingInfo>. . . </PricingInfo>
              </PricingInfoList>
          </QueryGroupSalesCodeResponse>
      </Body>
  </Envelope>

33.1.2.3 Example QueryGroupSalesCodeResponse message (Error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2010-04-28 10:15:07</TimeStamp>
          <MessageType>QueryGroupSalesCodeResponse</MessageType>
      </Header>
      <Body>
          <Status>
              <StatusCode>4500</StatusCode>
              <StatusText>QueryGroupSalescode request error</StatusText>
          </Status>
          <Errors>
              <Error>
                  <ErrorCode>4504</ErrorCode>
                  <ErrorText>GroupSales Code BoyScout1 is invalid</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                    294
eGalaxy Server Interface Specification                                                                        34 ImportTicket Message
34 ImportTicket Message
The ImportTicket message can be used to import a ticket sold at a different attraction for the purpose of allowing the guest to get access at
the current attraction.
This message is useful if you simply want your guest to buy ticket at one attraction and use it at the multiple attractions without worrying
about financial data. The attraction where the ticket is sold already has the ticket record in their Tickets table and hence the Access Control
module can validate the ticket properly and you can send the ticket in the ImportTicket message to all the other attractions where you want
guest to use it.
Before using this message please note the restrictions of this message:
      The ImportTicket message does not have any financial impact in the Galaxy database at the attraction where the ticket is imported. If
      you want eGalaxy server to journalize a transaction with payment and ticket record (essentially perform a ticket sale) then please use
      ActivateTicket or CreateTicket messages.
      ImportTicket message does not automatically import all of the information about the ticket. For example, when selling the ticket at
      the selling attraction if you are using AccessCode 10 then in order to successfully validate this ticket at the importing location,
      AccessCode 10 must be present in your Galaxy database with the same configuration as the selling attraction in order to validate this
      ticket successfully at the importing attraction. PLU of the ticket also must be present at the importing location. This also applies to
      the Event tickets which cannot be shared between multiple attractions by definition because an Event is cannot be shared by multiple
      attractions in Galaxy.
This also applies to the Event tickets which cannot be shared between multiple attractions by definition because an Event is cannot be
shared by multiple attractions in Galaxy.
Also if the ticket was sold within an order at the selling attraction, there is no way to include the Order information (except the order
number and customer number) within the ImportTicket message.

34.1 Message Format
The following sections describe the format of the ImportTicket message.

34.1.1 ImportTicket Message Fields
The body of the message has a <Tickets> element containing a single <Ticket> element. The format of the <Ticket> element is described in
the following section.

34.1.1.1 <Ticket> Element

The <Ticket> element contains all information an attraction needs in order to validate the ticket at the access control.
The following is a list of fields supported within the <Ticket> element:

 Field              Description                                                                                                      Type
 VisualID           Barcode of the ticket.                                                                                           Text(40)
 PLU                PLU of the ticket                                                                                                Text(20)
 AccessCode         Accesscode of the ticket.                                                                                        Numeric
 TicketCode         The ticket's TicketCode that is used to journalize the ticket to a Category and Sub-Category.                    Numeric
 ID                 A unique string identifying the ticket within the set of all tickets with the same AccessCode. The ID            Text(20)
                    consists of the NodeNo and Serial values (below) zero padded and concatenated. The lengths are user
                    definable, but the defaults are 3-digit node and 6-digit serial. (Optional)
 NodeNo             Node number of the POS where ticket was sold                                                                     Numeric
 TransNo            POS transaction number at the node where ticket was sold. (Optional)                                             Numeric
 Serial             The ticket’s serial number for the node and company which issued the ticket. (Optional)                          Numeric
 Company            (Optional)
 Qty                Qty of the ticket. Qty value MUST be 1. (Optional)                                                               Numeric
 TktIndex           The position of this ticket within the transaction for a specific ticket type. Each ticket in a transaction is   Text(6)
                    uniquely identified by combining ProductNo, FkeyNo, and TktIndex. Each ticket record of a disbursed ticket
                    will have the same TktIndex value. These may be uniquely identified by including the serial number, if

                                                                                                                                            295
eGalaxy Server Interface Specification                                                                    34 ImportTicket Message
                used. (Optional)
 Coupons        Number of coupons printed for this ticket. (Optional)                                                            Numeric
 ProductNo      Product from which the ticket was issued. (Optional)                                                             Numeric
 FKeyNo         FkeyNo is combination of the ticket type’s level and fkey numbers within the product: FkeyNo = (Level *          Numeric
                100) + Fkey. (Optional)
 DiscNo         Foreign key to Discounts.DiscountID, specifying the discount applied to this ticket, or 0 for no discount.       Numeric
                (Optional)
 DiscAmt        The amount of money, in base currency, discounted from the ticket. If DiscNo is 0 and this column is used,       Currency
                this indicates that the ticket price was edited at the time of sale. In this case, DiscAmt contains the
                difference between the base price and the price used. (Optional)
 DiscIndex      A sequence number for the discount used in the transaction. For example, if three discounts are used in a        Numeric
                transaction, one of the discounted tickets will have a DiscIndex value of 1, another of 2, and another of 3.
                (Optional)
 DateSold       Date and time at which the ticket was issued. (Optional)                                                         DateTime
 Status         A number indicating the state of the ticket as defined by the Ticket Status Values table below1. A ticket        Numeric
                may also be expired, but because that state may change without intervention by the system, it must be
                determined, as needed, by the system. Ticket Status values can be found in the Galaxy Database
                Dictionary under description for the Tickets table. (Optional)
 RemainingValue A floating point numeric value representing the value of the ticket. Typically, this is a number of              Currency
                admissions or a monetary value, but may represent any unit desired. For a regular ticket,the value would
                be one, or some number of guests or admissions. In a debit-card implementation, the number would
                represent the amount of money remaining on the ticket or card. (Optional)
 LastUse        The date and time that the ticket was last used by a guest. More specifically, the last time the record in       DateTime
                the Tickets table was updated after being scanned at a scanning station. (Optional)
 LastAcp        Foreign key to ACPs.AcpID, specifying the Access Control Point number of the scanning station at which           Numeric
                the ticket was last scanned. (Optional)
 UseCount       The number of times the ticket has been used for admission or redemption of value. (Optional)                    Numeric
 ExpirationDate If not null, an expiration date and time which overrides any expiration information specified in the ticket’s    DateTime
                Access record (referenced by AccessCode). (Optional)
 CustNo         A string containing the account number of the customer which purchased this ticket. This column is blank         Text(10)
                if the ticket was not purchased by a customer with an account in the system, or if the ticket was added
                dynamically at the time of its first scan. (Optional)
 OrderNo        Foreign key to Orders.OrderNo, specifying the order that the ticket was placed under (or 0 for no order).        Numeric
                (Optional)
 EventID        Foreign key to RMEvents.EventID, specifying the event that the ticket was sold from (or 0 for no event).         Numeric
                (Optional)
 Price          Price paid for ticket, excluding taxes and additional payments made to increase the RemainingValue of the        Currency
                ticket.
 Tax            Total amount of tax paid with ticket. This includes tax charged upon additional payments made to increase        Currency
                the RemainingValue of the ticket. (Optional)
 Taxes          An 8 character string containing an array of Y/N flags indicating which of the 8 possible taxes are included     Text(8)
                in the Tax value.(Optional)
 Commission     The commission earned for this ticket. The commission is based on the CommissionRate in the ticket’s             Currency
                corresponding Chart of Accounts entry. (Optional)
 Preprinted     Send a value of YES for pre-printed ticket types, indicating that the serial number (in both the ID and Serial   Boolean
                columns) is based on a user-defined value, not the company’s current sequential serial number. (Optional)
 UseQty         The number of times the ticket has been used. (Optional)                                                         Numeric
 Acct           The Chart of Accounts number. Defined as (Company * 100000) + (Category * 100) + Sub-Category                    Numeric
                (Optional)
 TicketDate     Used for Date Specific Tickets (Optional)                                                                        DateTime
 TaxMethods     TaxMethods is an 8 character string, with each character being a ‘0’, ‘1’ or ‘2’. These eight characters         Text(8)
                refer to the eight possible taxes (similar to the Taxes column), and how each tax is applied to this ticket.
                Meaning of values in this column is described in the Galaxy Database Dictionary document under Tickets
                table. (Optional)
 UpdateCode     Specifies whether or not sales data for this ticket was received from the POS Meaning of values in this          Numeric
                column is described in the Galaxy Database Dictionary document under Tickets table. (Optional)
                                                                                                                                           296
eGalaxy Server Interface Specification                                                               34 ImportTicket Message
 CustomerID       Populated with the internal Customer ID value when a tickets is sold in a customer-based transaction from Numeric
                  the POS or OE. Foreign key reference to Customers.CustomerID (Optional)

 CapacityID       The unique ID of the related RMCapacity record (Optional)                                                Numeric
 FirstName        First name of the guest associated with this ticket (Optional)                                           Text(30)
 LastName         Last name of the guest associated with this ticket (Optional)                                            Text(30)
 GalaxySiteID     Foreign Key reference to Sites.GalaxySiteID (Optional)                                                   Numeric
 ExternalPLU      Reseller PLU of the ticket (Optional)                                                                    Text(100)

34.1.1.2 Example ImportTicket request




                                                                                                                                 297
eGalaxy Server Interface Specification                                                                    34 ImportTicket Message
  <?xml version="1.0" encoding="Windows-1252"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <MessageType>ImportTicket</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2011-06-17 18:34:54</TimeStamp>
          <EchoData/>
          <SiteID>GatewayAquarium</SiteID>
          <SystemFields/>
      </Header>
      <Body>
          <Tickets>
              <Ticket>
                  <VisualID>10083000013</VisualID>
                  <AccessCode>10</AccessCode>
                  <ID>083000013</ID>
                  <NodeNo>83</NodeNo>
                  <TransNo>273</TransNo>
                  <LineNum>23</LineNum>
                  <Serial>13</Serial>
                  <Company>3</Company>
                  <TicketCode>00101</TicketCode>
                  <Qty>1</Qty>
                  <TktIndex>1</TktIndex>
                  <Coupons>0</Coupons>
                  <ProductNo>0</ProductNo>
                  <FKeyNo>0</FKeyNo>
                  <DiscNo>0</DiscNo>
                  <DiscAmt>0.00</DiscAmt>
                  <DiscIndex>0</DiscIndex>
                  <DateSold>2011-03-03 10:51:00</DateSold>
                  <Status>0</Status>
                  <RemainingValue>1.00</RemainingValue>
                  <LastUse>1899-12-30 00:00:00</LastUse>
                  <LastAcp>0</LastAcp>
                  <UseCount>0</UseCount>
                  <ExpirationDate>1899-12-30 00:00:00</ExpirationDate>
                  <CustNo>GEN001</CustNo>
                  <OrderNo>729</OrderNo>
                  <EventID>0</EventID>
                  <Price>10.00</Price>
                  <Tax>0.00</Tax>
                  <Taxes>NNNNNNNN</Taxes>
                  <Commission>0.00</Commission>
                  <Preprinted>NO</Preprinted>
                  <UseQty>0</UseQty>
                  <Acct>300101</Acct>
                  <Duplicate>0</Duplicate>
                  <TicketDate>1899-12-30 00:00:00</TicketDate>
                  <PLU>0010101</PLU>
                  <TaxMethods>00000000</TaxMethods>
                  <UpdateCode>0</UpdateCode>
                  <CustomerID>1</CustomerID>
                  <CapacityID>0</CapacityID>
                  <FirstName>Michael</FirstName>
                  <LastName>Andre</LastName>
                  <GalaxySiteID>1</GalaxySiteID>
              </Ticket>
          </Tickets>
      </Body>
  </Envelope>

34.1.2 ImportTicket Message
If the ImportTicket message is processed successfully by eGalaxy server then you will receive the following response.

34.1.2.1 Example ImportTicket response (successful)




                                                                                                                             298
eGalaxy Server Interface Specification                              34 ImportTicket Message
  <?xml version="1.0" encoding="Windows-1252"?>
  <Envelope>
      <Header>
          <MessageID>5</MessageID>
          <MessageType>ImportTicketResponse</MessageType>
          <SourceID>ABC Travels</SourceID>
          <TimeStamp>2011-06-29 16:09:23</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

34.1.2.2 Example ImportTicket response (error)

  <?xml version="1.0" encoding="Windows-1252"?>
  <Envelope>
      <Header>
          <MessageID>34</MessageID>
          <MessageType>ImportTicketResponse</MessageType>
          <SourceID>TestSystem</SourceID>
          <TimeStamp>2010-12-03 14:24:55</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Status>
              <StatusCode>5000</StatusCode>
              <StatusText>ImportTicket request error</StatusText>
          </Status>
          <Errors>
              <Error>
                  <ErrorCode>5001</ErrorCode>
                  <ErrorText>Unable to import ticket</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                       299
eGalaxy Server Interface Specification                                            35 GetPaymentContractAccount Message
35 GetPaymentContractAccount Message
The GetPaymentContractAccountData message is used to retrieve payment contract account data from the Galaxy system. This includes
names from passes on a payment contract

35.1 Message Format
Following sections describe the format of the GetPaymentContractAccountData message.

35.1.1 GetPaymentContractAccountData Message Fields
The GetPaymentContractAccountData message will be in the standard eGalaxy message format. The body of the message will contain a
field (numeric).

35.1.1.1 Element

The element contains a PaymentContract for which account data is being requested from the Galaxy system.

 Field             Description                Type
 PaymentContractID ID of the payment contract Numeric

35.1.1.2 Example GetPaymentContractAccountData request

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSource</SourceID>
          <MessageID>0</MessageID>
          <MessageType>GetPaymentContractAccountData</MessageType>
          <TimeStamp>2011-11-26 09:42:09</TimeStamp>
      </Header>
      <Body>
          <PaymentContract>
              <PaymentContractID>123</PaymentContractID>
          </PaymentContract>
      </Body>
  </Envelope>

35.1.2 GetPaymentContractAccountDataResponse Message
The GetPaymentContractAccountDataResponse message is returned to the sender in response to the GetPaymentContractAccountData
message. The response contains either the account data for the PaymentContractID given in the request, or information about errors that
prevented the message from being processed.

35.1.2.1 Element

The element contains a PaymentContract for which account data is being requested from the Galaxy system.

 Field             Description                                                           Type
 PaymentContractID ID of the payment contract                                            Numeric
 PassNames         Element containing names of passes belonging to the payment contract. Element

35.1.2.2 Element

The element contains a list of PassName fields. There can be any number of pass name fields in a element (Including 0).

 Field    Description                                                       Type
 PassName Full name of a passholder with on the requested payment contract. Text

35.1.2.3 Example GetPaymentContractAccountDataResponse message (no error)

                                                                                                                                      300
eGalaxy Server Interface Specification                                   35 GetPaymentContractAccount Message
  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageType>GetPaymentContractAccountDataResponse</MessageType>
          <SourceID/>
          <TimeStamp>2011-11-26 09:56:11</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <GetPaymentContractAccountDataResponse>
              <PaymentContractID>1</PaymentContractID>
              <PassNames>
                  <PassName>Bob Smith</PassName>
                  <PassName>Mary Smith</PassName>
                  <PassName>John Smith</PassName>
              </PassNames>
          </GetPaymentContractAccountDataResponse>
      </Body>
  </Envelope>

35.1.2.4 Example GetPaymentContractAccountDataResponse message (error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>65</MessageID>
          <MessageType>GetPaymentContractAccountDataResponse</MessageType>
          <SourceID/>
          <TimeStamp>2011-11-26 09:56:11</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <Status>
              <StatusCode>5600</StatusCode>
              <StatusText>GetPaymentContractAccountData request error</StatusText>
          </Status>
          <GetPaymentContractAccountDataErrors>
              <GetPaymentContractAccountDataError>
                  <ErrorCode>5601</ErrorCode>
                  <ErrorText>Payment Contract with ID 1 not found in Galaxy</ErrorText>
              </GetPaymentContractAccountDataError>
          </GetPaymentContractAccountDataErrors>
      </Body>
  </Envelope>




                                                                                                         301
eGalaxy Server Interface Specification                                                                    36 QueryOrders Message
36 QueryOrders Message
QueryOrders message can be used by an external system to retrieve a list of orders for a specific contact or customer given the contact’s
ExternalID or customer's CustomerID. The purpose of this message is to display a high level list of orders for a contact or customer logged
into their account.
Currently only orders that were completed using the Print at Home, Print on Web, SMS, and Custom delivery methods will be displayed to
help reduce the number of orders that are displayed. In addition, Orders that do not have an ExternalID value will not be included in the
response. This would typically affect Orders created in Order Entry directly, but that use Print at Home or Print on Web.

36.1 Message Format
Following sections describes format of the QueryOrders message.

36.1.1 QueryOrders Message Fields
The body of the QueryOrders message contains a <QueryOrders> element containing <Query> element. The <Query> element contains the
customer ExternalID field for which the Web store needs to retrieve the list of orders.

36.1.1.1 <QueryOrders> Element

The <QueryOrders> element contains a <Query> element. The <Query> element contains the fields that are used by the eGalaxy Server to
find the list of orders for a contact. Following is a list of fields supported within the <Query> element:

 Field                     Description                                                                                           Type
 ContactExternalID         The ExternalID field of a contact. This is the value which was supplied or generated when the         Text(64)
                           contact’s account was created. Either this value or the next (ContactGUID) must be specified.
 ContactGUID               The GUID value of a contact. This is the value which was supplied or generated when the               Text
                           contact's account was created. Either this value or the previous (ContactExternalID) must be
                           specified.
 CustomerID                The customer ID of a customer. (Optional)                                                             Text
 IncludeAllDeliveryMethods When this option is set to "YES," eGalaxy will return all orders regardless of delivery method.       Boolean
                           (Optional)
 FromDate                  Orders with OpenDate equal to or after FromDate will be returned. (Optional)                          DateTime
 ThruDate                  Orders with OpenDate equal to or before ThruDate will be returned. (Optional)                         DateTime
 FromGroupVisitDate        Orders with a group visit date equal to or after FromGroupVisitDate will be returned. (Optional)      DateTime
 ThruGroupVisitDate        Orders with a group visit date equal to or before ThruGroupVisitDate will be returned.                DateTime
                           (Optional)
 IdentificationNo          The identification number of the order contact. (Optional)                                            Text
 LastFourIDNo              The last four characters of the identification number of the order contact. (Optional)                Text
 ContactPhone              Orders where the order contact's phone, mobile, or fax number matches the ContactPhone                Text
                           provided will be returned. (Optional)
 PaymentEndorsement        When this field is sent, orders are returned where the endorsement field of any of the payments       Text
                           in the order matches this endorsement. (Optional)

Note: The ContactExternalID, ContactGUID, ContactPhone, CustomerID, LastFourIDNo, or PaymentEndorsement are required in the
QueryOrders message without the AllowQueryOrdersWithGroupVisitDateRangeOnly option enabled. With that option enabled, a group visit
date range may be substituted for the other requirements.
The QueryOrders message has two modes of operation:
      In its traditional mode, QueryOrders will base its search on ONE of the search parameters below. If more than one of these
      parameters is specified, only the first one will be used for searching. (Example: if both the CustomerID and the ContactExternalID are
      provided, QueryOrders will return orders that match the CustomerID, but will ignore the ContactExternalID.) Any additional criteria
      specified in the table above is combined with the parameter below to return only orders that match all criteria. (Example: if
      CustomerID, FromDate, and ThruDate are all specified, orders matching the CustomerID that were opened between the specified
      FromDate and ThruDate are returned.)
          1. CustomerID

                                                                                                                                         302
eGalaxy Server Interface Specification                                                                      36 QueryOrders Message
          2. ContactGUID
          3. ContactExternalID
          4. ContactLastFourIDNo
          5. ContactPhone
          6. IdentificationNo
      If the option "Only return results that meet all provided parameters" is turned on in the eGalaxy Source configuration (eGalaxy Source
      > Query Orders tab), then orders that meet ALL of the specified criteria are returned. (Example: if CustomerID, ContactExternalID,
      FromDate, and ThruDate are provided, QueryOrders will return orders with the specified CustomerID, with an order contact matching
      the specified ContactExternalID, and that were opened between the specified FromDate and ThruDate.)

36.1.1.2 Example QueryOrders message

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <MessageType>QueryOrders</MessageType>
          <SourceID>ABC Travels</SourceID>
          <TimeStamp>2010-07-19 09:10:05</TimeStamp>
      </Header>
      <Body>
          <QueryOrders>
              <Query>
                  <ContactExternalID>ExternalID1</ContactExternalID>
              </Query>
          </QueryOrders>
      </Body>
  </Envelope>

36.1.2 QueryOrdersResponse Message Fields
The QueryOrdersResponse message contains a <QueryOrdersResponse> element if the message is processed successfully. If any errors
occur, they will be wrapped in the <Errors> element, which contains the individual errors wrapped in the <Error> element.

36.1.2.1 <QueryOrdersResponse> Element

The following are the fields returned under the <QueryOrdersResponse> element:

 Field                Description                                                                                                Type
 ExternalID           ExternalID of the contact that the orders are being displayed for.                                         Text
 IdentificationNo     IdentificationNo of the contact that the orders are being displayed for.                                   Text
 GalaxyContactID      The UniqueID of the contact used to query the Orders table.                                                Numeric
 ContactGUID          The GUID of the contact that the orders are being displayed for.                                           Text
 CustomerID           The CustomerID of the customer used to query the Orders table.                                             Numeric
 LastFourIDNo         The Last Four characters of the IdentificationNO of the contact that the orders are being displayed for.   Text
 Orders               <Orders> element                                                                                           Element

Note: If the option "Only return results that meet all provided parameters" is turned on in eGalaxy Source configuration (eGalaxy Source >
Query Orders tab), the ExternalID, IdentificationNo, GalaxyContactID, ContactGUID, CustomerID, and LastFourIDNo elements will only be
returned if they were provided in the request to query by.
36.1.2.1.1 <Orders> element

The <Orders> element contains a list of <Order> elements that contain the information for each order that was found for the specified
contact.
The following are the fields returned under the <Orders> element:

 Field                  Description                                                                                          Type
 OrderID                The UniqueID of the Order.                                                                           Numeric
 ExternalID             The ExternalID of the order. This is the value that is generated by the Web Store.                   Text(20)
 SecureToken            Encoded string assigned to the order when Encoding OrderID is enabled on eGalaxy server Source       Text(12)
                                                                                                                                           303
eGalaxy Server Interface Specification                                                36 QueryOrders Message
 Balance            The balance of the order.                                                  Currency
 DeliveryMethodID   ID of the DeliveryMethod used for this order.                              Numeric
 DeliveryDetails    Detailed description of the delivery method used.                          Text(255)
 OpenDate           Date that the order was created.                                           DateTime
 OrderStatus        The current status of the order.                                           Numeric
 OrderAmount        The original amount of the order before any payments were made.            Currency
 OrderReference     Additional information about the order                                     Text(40)

36.1.2.2 Example QueryOrdersResponse message (No Error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryOrdersResponse</MessageType>
          <SourceID>ABC Travels</SourceID>
          <TimeStamp>2010-07-19 09:10:05</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <QueryOrdersResponse>
              <ExternalID>ExternalID1</ExternalID>
              <IdentificationNo/>
              <GalaxyContactID>702</GalaxyContactID>
              <ContactGUID>{FDA19E77-6F6C-4078-B3CF-196A112FDEC7}</ContactGUID>
              <LastFourIDNo>7890</LastFourIDNo>
              <CustomerID/>
              <Orders>
                  <Order>
                      <OrderID>873</OrderID>
                      <ExternalID>07192010-346</ExternalID>
                      <SecureToken>7FJcBegOsWu9</SecureToken>
                      <Balance>0.00</Balance>
                      <DeliveryMethodID>11</DeliveryMethodID>
                      <DeliveryDetails>Printed on Web Delivery Method</DeliveryDetails>
                      <OpenDate>2010-07-18 17:09:48</OpenDate>
                      <OrderStatus>2</OrderStatus>
                      <OrderAmount>28.00</OrderAmount>
                      <OrderReference/>
                  </Order>
              </Orders>
          </QueryOrdersResponse>
      </Body>
  </Envelope>

36.1.2.3 Example QueryOrdersResponse message (Error)

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>2</MessageID>
          <MessageType>QueryOrdersResponse</MessageType>
          <SourceID>ABC Travels</SourceID>
          <TimeStamp>2010-07-19 09:42:35</TimeStamp>
      </Header>
      <Body>
          <Status>
              <StatusCode>4800</StatusCode>
              <StatusText>QueryOrders request error</StatusText>
          </Status>
          <Errors>
              <Error>
                  <ErrorCode>4805</ErrorCode>
                  <ErrorText>Contact ExternalID999 does not exist.</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>

                                                                                                           304
eGalaxy Server Interface Specification   36 QueryOrders Message




                                                           305
eGalaxy Server Interface Specification                                                                      37 QueryOrder Message
37 QueryOrder Message
The QueryOrder message can be used by an external system to retrieve information about a specific order given the ExternalID,
GalaxyOrderID, or PaymentEndorsement of the order. The purpose of this message is to display an order, in detail, for a contact logged into
their account. The amount of data returned in this message can vary depending on what data is requested.

37.1 Message Format
The following sections describe the format of the QueryOrder message.

37.1.1 QueryOrder Message Fields
The body of the QueryOrder message contains a <QueryOrder> element containing <Query> element. The <Query> element contains the
OrderID, GalaxyOrderID, or PaymentEndorsement fields, which are used to specify the order to be retrieved.

37.1.1.1 <Query> Element

The <Query> element must contain either the OrderID field, the GalaxyOrderID field, or the PaymentEndorsement field, which is used by the
eGalaxy Server to find a specific order.

 Field                 Description                                                                                                  Type
 OrderID               The ExternalID field of an Order. This is the value which was generated when the order was created.          Text(20)
 GalaxyOrderID         The unique ID of an Order.                                                                                   Numeric
 PaymentEndorsement    When this field is sent, orders are returned where the endorsement field of any of the payments in           Text
                       the order matches this endorsement. If multiple orders match this endorsement, error code 4708 is
                       returned.
 ContactExternalID     This is an optional field that can be sent in the request. When this field is sent, the OrderContact's       Text(64)
                       and ShipToConact's ExternalID will be checked to verify that the logged in user is in fact the owner or
                       the recipient of the Order being requested.
 ContactGUID           This is an optional field that can be sent in the request. When this field is sent, the OrderContact's       Text
                       and ShipToContact's GUID will be checked to verify that the logged in user is in fact the owner or the
                       recipient of the Order being requested.
 TranslationLanguageID The language to translate the returned data into, if the system is configured for multiple languages         Numeric
                       (Optional)

37.1.1.2 <DataRequest> Element

The <DataRequest> element contains a number of <Field> elements that dictate how much data is returned in the response message.
A DataRequest element contains one or more of the Field elements:

 Field Description                             Type
 Field Field for which data is being requested Text

Following fields can be requested under <DataRequest> element of the QueryOrder message:

 Field              Description
 Customer           Use this field to request customer data of the order
 OrderContact       Request order contact data
 BillToContact      Request order BillTo contact data
 ShipToContact      Request order ShipTo contact data
 OrderLines         Request OrderLines of the given order
 Tickets            Request all tickets sold and issued for the given order. Tickets are returned within <Tickets> element. Tickets sold in
                    a package are not returned grouped by the package.
 Products           Request the original tickets sold and issued for the given order. Tickets are returned within <Products> element.
                    Tickets sold in a package are returned grouped by the package.

                                                                                                                                           306
eGalaxy Server Interface Specification                                                                    37 QueryOrder Message
 SIAE               Use this field to request data specific to SIAE module for the order
 UserFields         Use this field to request the user fields for the order
 GroupVisit         Request order Group Visit data
 Cancellable        Request an indication about whether this order is cancellable
 AppleWalletData    Request the AppleWallet template data, if AppleTicket template is configured on the PLU, for original tickets sold and
                    issued for the given order. The AppleWallet data for each ticket is returned as CData of the <AppleWalletData> field
                    within the <Product> element. This option enables 'Products' data request above.

For example, if the source is requesting the Customer, OrderContact, BillToContact, ShipToContact, Tickets, SIAE and OrderLines from an
order, the following would be the structure of the DataRequest element within the QueryOrder message:

  <DataRequest>
      <Field>Customer</Field>
      <Field>OrderContact</Field>
      <Field>BillToContact</Field>
      <Field>ShipToContact</Field>
      <Field>Tickets</Field>
      <Field>SIAE</Field>
      <Field>OrderLines</Field>
  </DataRequest>

Wildcard * can be used in the DataRequest element to return data for all fields applicable to the Order. If DataRequest element is missing
in the QueryOrder message, eGalaxy reads it as a wildcard, and returns all applicable fields for the given order.

37.1.1.3 Example QueryOrder Message

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <MessageID>0</MessageID>
          <SourceID>ABC Travels</SourceID>
          <MessageType>QueryOrder</MessageType>
          <TimeStamp>2009-06-23 15:55</TimeStamp>
      </Header>
      <Body>
          <QueryOrder>
              <Query>
                  <OrderID>07122010-341</OrderID>
                  <ContactExternalID>ExternalID1</ContactExternalID>
              </Query>
              <DataRequest>
                  <Field>Customer</Field>
                  <Field>OrderContact</Field>
                  <Field>BillToContact</Field>
                  <Field>ShipToContact</Field>
                  <Field>Tickets</Field>
                  <Field>SIAE</Field>
                  <Field>OrderLines</Field>
                  <Field>AppleWalletData</Field>
              </DataRequest>
          </QueryOrder>
      </Body>
  </Envelope>

37.1.2 QueryOrderResponse Message Fields
The QueryOrderResponse message contains a <QueryOrderResponse> element if the message is processed successfully. If any errors
occur, they will be wrapped in the <Errors> element, which contains the individual errors wrapped in the <Error> element.

37.1.2.1 <TransactionData> Element

The following are the fields returned under the <TransactionData> element which is a child node of the <QueryOrderResponse> node:

 Field                 Description                                                                                         Type
 OrderID               ExternalID of the Order.                                                                            Text(20)
 GalaxyOrderID         The UniqueID of the Order.                                                                          Numeric
                                                                                                                                        307
eGalaxy Server Interface Specification                                                                      37 QueryOrder Message
 SecureToken              Encoded string assigned to the order when Encoding OrderID is enabled on eGalaxy server Source      Text(12)
 OrderStatus              The current status of the order.                                                                    Numeric
 OrderDate                The Date the order was created.                                                                     DateTime
 TranDate                 The Date of the first order transaction (issuance or payment).                                      DateTime
 OrderReference           Additional information about the order.                                                             Text(40)
 PO                       The customer’s purchase order number for the order.                                                 Text(20)
 Balance                  The amount currently due on the order                                                               Currency
 DeliveryMethodID         The Delivery Method for the order                                                                   Numeric
 DeliveryMethodKind       The Delivery Method kind for this order                                                             Numeric
 Cancellable              Returns YES if this order can be cancelled via eGalaxy Server's "Cancel" command, NO if it cannot   Boolean
 GenerationType1          Where the ticket(s) were generated                                                                  Numeric
 GiftAidStatus 2          Indicates whether or not the guest has been asked to participate in Gift Aid                        Numeric
 Customer                 <Customer> element                                                                                  Element
 OrderContact             <OrderContact> element                                                                              Element
 BillToContact            <BillToContact> element                                                                             Element
 ShipToContact            <ShipToContact> element                                                                             Element
 OrderLines               <OrderLines> element                                                                                Element
 Tickets                  <Tickets> element                                                                                   Element
 GroupVisit               <GroupVisit> element                                                                                Element
 SalesProgramID           The Sales Program that was applied to the order                                                     Numeric

1 GenerationType Values

 Value Gateway Constant Name           Description
 0     RESELLER_TICKET_GENERATION_TYPE Ticket(s) were generated from the Reseller Web Store
 1     CONSUMER_TICKET_GENERATION_TYPE Ticket(s) were generated from the Consumer Web Store

2 GiftAidStatus Values

 Value    Gateway Constant Name         Description
 0        gasNotAsked                   Guest has not been asked to participate in Gift Aid.
 1        gasAccepted                   Guest has agreed to participate Gift Aid.
 2        gasDeclined                   Guest has declined to participate in Gift Aid.
 3        gasNonGiftAid                 Guest has agreed to make a non-Gift Aid donation.

37.1.2.1.1 <Customer> element

The <Customer> element information about this order’s customer.
The following are the fields returned under the <Customer> element:

 Field            Description                                    Type
 CustomerID       The Customer's unique identifier               Numeric
 CategoryID       Foreign key reference to Customer Category     Numeric
 Name             The customer’s name                            Text(50)
 Reference        Additional customer information                Text(40)
 Email            Customer’s email address                       Text(128)
 Street1          Customer’s street address line 1               Text(255)
 Street2          Customer’s street address line 2               Text(255)
 Street3          Customer’s street address line 3               Text(255)
 City             Customer address city                          Text(40)
                                                                                                                                         308
eGalaxy Server Interface Specification                                                                         37 QueryOrder Message
 State       Customer address state                                       Text(40)
 ZIP         Customer’s postal code                                       Text(16)
 CountryCode Customer address country code                                Text(2)

37.1.2.1.2 <OrderContact>, <BillToContact> and <ShipToContact> elements

The <OrderContact>, <BillToContact> and <ShipToContact> elements return contact information about the particular contact on the order.
Each of these elements contains a <Contact> element that displays the following fields:

 Field             Description                          Type
 FirstName         Contact’s first name                 Text(30)
 MiddleName        Contact’s middle name                Text(30)
 LastName          Contact’s last name                  Text(30)
 Street1           Contact’s street address line 1      Text(255)
 Street2           Contact’s street address line 2      Text(255)
 Street3           Contact’s street address line 3      Text(255)
 City              Contact’s city                       Text(40)
 State             Contact’s state                      Text(40)
 ZIP               Contact’s postal code                Text(16)
 CountryCode       Contact’s country code               Text(2)
 Phone             Contact’s phone number               Text(30)
 Fax               Contact’s fax number                 Text(30)
 Email             Contact’s email address              Text(128)

37.1.2.1.3 <OrderLines> element

The <OrderLines> element returns information about the order lines found in the order. Each of these elements contains a <Order> element
that displays the following fields:

 Field          Description                                                                                                         Type
 DetailType     A code to identify the type of order line                                                                           Numeric
 PLU            Alphanumeric code uniquely identifying a particular ticket or retail item                                           Text(20)
 Description    The item description, payment FOP description, or tax name, depending on the record’s detail type.                  Text(100)
 Qty            Quantity for this line                                                                                              Numeric
 Amount         The unit price for this line                                                                                        Currency
 Total          Total amount for all items in this line, using the calculation: ((Amount + TaxAmount – Discount Amount) *           Currency
                Quantity).
 TaxAmount      This is the amount of tax calculated on each unit of the ticket or item                                             Currency
 DiscountAmount Discount amount per ticket/item for this line. To determine what sort of discount is contained here, see            Currency
                the PriceBasis column.
 IssuedQuantity Number of issued items for this line                                                                                Numeric

37.1.2.1.4 <Tickets> element

The <Tickets> element returns information about the tickets found in the order. Each of these elements contains a <Ticket> element that
displays the following fields:

 Field                         Description                                                                                          Type
 VisualID                      Item’s barcode                                                                                       Text(40)
 PLU                           Alphanumeric code to uniquely identify a ticket or retail item                                       Text(20)
 Price                         Price paid for ticket, excluding taxes and additional payments made to increase the RemainingValue   Currency
                               of the ticket.
 Tax                           Total amount of tax paid with ticket. This includes tax charged upon additional payments made to     Currency
                               increase the RemainingValue of the ticket.
                                                                                                                                          309
eGalaxy Server Interface Specification                                                                        37 QueryOrder Message
 Status              A number indicating the state of the ticket.                                                                    Numeric
 RedeemedPoints      Points redeemed to purchase this ticket                                                                         Currency
 Description         Item description from Items table                                                                               Text
 EventID             Event ID the ticket is associated with                                                                          Numeric
 EndOfLifeDate       The end of life date of the ticket.                                                                             DateTime
 EndOfLifeLockDate   The date when the ticket will be locked once it has reached its end of life date, calculated as the             DateTime
                     ticket's end of life date plus the lock window. If the lock window is disabled, there will not be a lock
                     date.
 EndOfLifeLockStatus The lock status of the ticket related to its end of life date. A ticket is locked if the current date is past   Text (8)
                     the end of life date including the lock window. A ticket that is locked will be heavily limited as to what
                     actions can be performed on it.
 EndOfLifeDateStatus 0 - default, 1- indicates that the EndOfLifeDate was overriden.                                                 Numeric

If the SIAE module is enabled, and if SIAE has been requested via the <Field> elements, then a <SIAERecord> element will be contained
within each <Ticket> element. The <SIAERecord> element displays the following fields:

 Field                  Description                                                                         Type
 Sigillo                Fiscal Seal generated for the ticket                                                Text(23)
 ProgressivoNo          Progressive Number generated for the ticket                                         Numeric
 TitoloEvento           Season/Event Title                                                                  Text(30)
 TitoloBase             SIAE Ticket Category                                                                Text(5)
 OrdineDiPosto          Venue Type                                                                          Text(5)
 CodiceCarta            The SmartCard Device ID that generated the Fiscal Seal and Progressive Number       Text(9)
 DataFineEvento         Expiration Date of the ticket                                                       DateTime
 CausaleRiduzione       Reduction Type Name                                                                 Text(59)
 CFTitolare             System Owner’s SIAE ID                                                              Text(16)
 CFOrganizzatore        Show/Event Organizer’s SIAE ID                                                      Text(20)

37.1.2.1.5 <Products> element

<Products> element contains one or more <Product> elements. A <Product> element contains an attribute called type. The type attribute on
the <Product> element indicates the type of the product for the XML fields are returned.

 Attribute Description                                                                                                                   Type
 Type      Indicates the type of the product. “Ticket” – <Product> element contains data for a ticket. “Item” – <Product>                Text
           element contains data for a retail item. “Package” – <Product> element contains data for a package.

The <Product> element contains same fields as the <Ticket> element listed in the last section for all product types. A product with the type
of package also contains <Products> element representing all the package details that are part of the package.
Sections below contain examples for ticket, pass and package products.

37.1.2.1.6 <UserFields> element

The <UserFields> element contains the user fields for the order. It may contain zero or more <UserFieldN> elements, where N is the
FieldSequence number of the field, and the contents are the value of that field.

37.1.2.1.7 <GroupVisit> element

The <GroupVisit> element contains the group visit information for the order. If no group visit information exists for this order, the element
will not be included in the response.

 Field                      Description                                                          Type
 VisitDate                  The date and time for the group visit                                DateTime
 Reference                  And group reference information (e.g. notes) entered for the order   Text
 ExpectedNumGuests          The number of guests expected for this visit                         Numeric

                                                                                                                                            310
eGalaxy Server Interface Specification                                          37 QueryOrder Message
 Description        The description for the group visit for this order   Text

37.1.2.2 Example QueryOrderResponse message

  <?xml version="1.0">
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryOrderResponse</MessageType>
          <SourceID>ABC Travels</SourceID>
          <TimeStamp>2020-02-17 17:52:40</TimeStamp>
      </Header>
      <Body>
          <QueryOrderResponse>
              <TransactionData>
                  <OrderID>07122010-341</OrderID>
                  <GalaxyOrderID>865</GalaxyOrderID>
                  <SecureToken>7FJcBegOsWu9</SecureToken>
                  <OrderStatus>2</OrderStatus>
                  <OrderDate>2020-02-17 17:09:48</OrderDate>
                  <OrderReference/>
                  <PO/>
                  <Balance>0.00</Balance>
                  <DeliveryMethodID>11</DeliveryMethodID>
                  <DeliveryMethodKind>9</DeliveryMethodKind>
                  <GenerationType>1</GenerationType>
              </TransactionData>
              <Customer>
                  <Name>Test Customer</Name>
                  <Reference>TestCust</Reference>
                  <Email>Customer@gatewayticketing.com</Email>
                  <Street1>Address line 1</Street1>
                  <Street2/>
                  <Street3/>
                  <City>Boyertown</City>
                  <State>PA</State>
                  <ZIP>19512</ZIP>
                  <CountryCode>US</CountryCode>
              </Customer>
              <OrderContact>
                  <Contact>
                      <FirstName>Order</FirstName>
                      <MiddleName/>
                      <LastName>Contact</LastName>
                      <Street1>Contact Address 1</Street1>
                      <Street2/>
                      <Street3/>
                      <City>Boyertown</City>
                      <State>PA</State>
                      <ZIP>19512</ZIP>
                      <CountryCode>US</CountryCode>
                      <Phone>6105555555</Phone>
                      <Fax/>
                      <Email>OrderContact@GatewayTicketing.com</Email>
                  </Contact>
              </OrderContact>
              <OrderLines>
                  <OrderLine>
                      <DetailType>1</DetailType>
                      <PLU>TICKET0010102</PLU>
                      <Description>GA Ticket</Description>
                      <QTY>1</QTY>
                      <Amount>20.00</Amount>
                      <Total>20.00</Total>
                      <TaxAmount>0.00</TaxAmount>
                      <DiscountAmount>0.00</DiscountAmount>
                      <IssuedQuantity>1</IssuedQuantity>
                  </OrderLine>
                  <OrderLine>
                      <DetailType>8</DetailType>
                      <PLU>PASS0010105</PLU>
                      <Description>Pass</Description>
                      <QTY>1</QTY>
                      <Amount>8.00</Amount>
                      <Total>8.00</Total>
                                                                                                  311
eGalaxy Server Interface Specification                                           37 QueryOrder Message
                    <Total>8.00</Total>
                    <TaxAmount>0.00</TaxAmount>
                    <DiscountAmount>0.00</DiscountAmount>
                    <IssuedQuantity>1</IssuedQuantity>
                </OrderLine>
                <OrderLine>
                    <DetailType>2</DetailType>
                    <PLU/>
                    <Description>Cash</Description>
                    <QTY>1</QTY>
                    <Amount>-28.00</Amount>
                    <Total>-28.00</Total>
                    <TaxAmount>0.00</TaxAmount>
                    <DiscountAmount>0.00</DiscountAmount>
                    <IssuedQuantity>1</IssuedQuantity>
                </OrderLine>
                <OrderLine>
                    <DetailType>2</DetailType>
                    <PLU/>
                    <Description>CHARGE</Description>
                    <QTY>1</QTY>
                    <Amount>28.00</Amount>
                    <Total>28.00</Total>
                    <TaxAmount>0.00</TaxAmount>
                    <DiscountAmount>0.00</DiscountAmount>
                    <IssuedQuantity>1</IssuedQuantity>
                </OrderLine>
                <OrderLine>
                    <DetailType>2</DetailType>
                    <PLU/>
                    <Description>CHARGE</Description>
                    <QTY>1</QTY>
                    <Amount>-28.00</Amount>
                    <Total>0.00</Total>
                    <TaxAmount>0.00</TaxAmount>
                    <DiscountAmount>0.00</DiscountAmount>
                    <IssuedQuantity>1</IssuedQuantity>
                </OrderLine>
            </OrderLines>
            <Tickets>
                <Ticket>
                    <VisualID>11061000622</VisualID>
                    <PLU>TICKET0010102</PLU>
                    <Description>TICKET - CHILD</Description>
                    <Price>20.00</Price>
                    <Tax>0.00</Tax>
                    <Status>0</Status>
                    <RedeemedPoints>0.00</RedeemedPoints>
                    <EndOfLifeDate>2020-02-28 00:00:00</EndOfLifeDate>
                    <EndOfLifeLockStatus>Unlocked</EndOfLifeLockStatus>
                    <EndOfLifeLockDate>2020-05-28 00:00:00</EndOfLifeLockDate>
                    <EndOfLifeDateStatus>0</EndOfLifeDateStatus>
                    <SIAERecord>
                        <Sigillo>11 11 11 11 11 11 11 11</Sigillo>
                        <ProgressivoNo>801</ProgressivoNo>
                        <TitoloEvento>Test Customer 2011</TitoloEvento>
                        <TitoloBase>A</TitoloBase>
                        <OrdineDiPosto>UN</OrdineDiPosto>
                        <CodiceCarta>11111111</CodiceCarta>
                        <DataFineEvento>20111101</DataFineEvento>
                        <CausaleRiduzione>INTERO GENERICO</CausaleRiduzione>
                        <CFTitolare>12345678901</CFTitolare>
                        <CFOrganizzatore>12345678901</CFOrganizzatore>
                    </SIAERecord>
                </Ticket>
                <Ticket>
                    <VisualID>33061000110</VisualID>
                    <PLU>PASS0010105</PLU>
                    <Description>Renew Pass</Description>
                    <Price>8.00</Price>
                    <Tax>0.00</Tax>
                    <Status>0</Status>
                    <RedeemedPoints>0.00</RedeemedPoints>
                    <EndOfLifeDate>2020-02-28 00:00:00</EndOfLifeDate>
                    <EndOfLifeLockStatus>Unlocked</EndOfLifeLockStatus>
                    <EndOfLifeLockDate>2020-05-28 00:00:00</EndOfLifeLockDate>
                    <EndOfLifeDateStatus>0</EndOfLifeDateStatus>
                    <SIAERecord>
                                                                                                  312
eGalaxy Server Interface Specification                                               37 QueryOrder Message
                    <SIAERecord>
                        <Sigillo>22 22 22 22 22 22 22 22</Sigillo>
                        <ProgressivoNo>802</ProgressivoNo>
                        <TitoloEvento>Test Customer 2011</TitoloEvento>
                        <TitoloBase>A</TitoloBase>
                        <OrdineDiPosto>UN</OrdineDiPosto>
                        <CodiceCarta>11111111</CodiceCarta>
                        <DataFineEvento>20111101</DataFineEvento>
                        <CausaleRiduzione>INTERO GENERICO</CausaleRiduzione>
                        <CFTitolare>12345678901</CFTitolare>
                        <CFOrganizzatore>12345678901</CFOrganizzatore>
                    </SIAERecord>
                </Ticket>
            </Tickets>
            <Products>
                <Product Type="Ticket">
                    <VisualID>10082000053</VisualID>
                    <SerialNo>52</SerialNo>
                    <PLU>0010101</PLU>
                    <ItemName>TICKET - No Tax</ItemName>
                    <ItemDescription>TICKET - No Tax</ItemDescription>
                    <ItemUserCode/>
                    <AccessCode>10</AccessCode>
                    <NetPrice>10.00</NetPrice>
                    <ExternalPrice>0.00</ExternalPrice>
                    <RetailPrice>0.00</RetailPrice>
                    <TaxAmount>0.00</TaxAmount>
                    <DiscountAmount>0.00</DiscountAmount>
                    <DateSold>2012-01-31 16:51:00</DateSold>
                    <EventID>1234</EventID>
                    <EventName>Panda Exhibit</EventName>
                    <EventStartDate>2012-02-15 15:00:00</EventStartDate>
                    <EventEndDate>2012-02-15 15:30:00</EventEndDate>
                    <EventNotes>This is an event note</EventNotes>
                    <EventUserNo>123</EventUserNo>
                    <AppleWalletData>
                        <![CDATA[...]]>
                    </AppleWalletData>
                </Product>
                <Product Type="Ticket">
                    <VisualID>15502000000652</VisualID>
                    <ExpirationDate>2017-03-19 00:00:00</ExpirationDate>
                    <PaymentContractID>104</PaymentContractID>
                    <SerialNo>652</SerialNo>
                    <PLU>3GZ00601ANP</PLU>
                    <Qty>1</Qty>
                    <ItemName>Adult Season Pass</ItemName>
                    <ItemDescription>Adult Season Pass</ItemDescription>
                    <ItemUserCode>No benefit Package</ItemUserCode>
                    <BaseLanguageItemName>Adult Season Pass</BaseLanguageItemName>
                    <BaseLanguageItemDescription>Adult Season Pass</BaseLanguageItemDescription>
                    <AccessCode>15</AccessCode>
                    <Price>80.00</Price>
                    <OrderLineID>161</OrderLineID>
                    <DateSold>2016-03-19 11:02:00</DateSold>
                    <Guest>
                        <FirstName>John</FirstName>
                        <LastName>Smith</LastName>
                    </Guest>
                </Product>
                <Product Type="Item">
                    <PLU>1001001</PLU>
                    <ItemName>Item NT</ItemName>
                    <ItemDescription>Item No Tax</ItemDescription>
                    <ItemUserCode>ITEM</ItemUserCode>
                    <NetPrice>10.00</NetPrice>
                    <ExternalPrice>0.00</ExternalPrice>
                    <RetailPrice>0.00</RetailPrice>
                    <TaxAmount>0.00</TaxAmount>
                    <DiscountAmount>0.00</DiscountAmount>
                </Product>
                <Product Type="Package">
                    <SerialNo>0</SerialNo>
                    <PLU>PACKAGE0010101</PLU>
                    <ItemName>Package Individual Media</ItemName>
                    <ItemDescription>Package - No Taxes</ItemDescription>
                    <ItemUserCode/>
                                                                                                      313
eGalaxy Server Interface Specification
                   <ItemUserCode/>
                                                                                   37 QueryOrder Message
                      <AccessCode>10</AccessCode>
                      <NetPrice>20.00</NetPrice>
                      <ExternalPrice>0.00</ExternalPrice>
                      <RetailPrice>0.00</RetailPrice>
                      <TaxAmount>0.00</TaxAmount>
                      <DiscountAmount>0.00</DiscountAmount>
                      <DateSold>2012-02-07 09:37:00</DateSold>
                      <EventID>0</EventID>
                      <Guest>
                          <FirstName>Package_FirstName</FirstName>
                          <LastName>Package_LastName</LastName>
                      </Guest>
                      <Products>
                          <Product Type="Ticket">
                              <VisualID>10082000065</VisualID>
                              <SerialNo>54</SerialNo>
                              <PLU>0010101</PLU>
                              <ItemName>TICKET - No Tax</ItemName>
                              <ItemDescription>TICKET - No Tax</ItemDescription>
                              <ItemUserCode/>
                              <AccessCode>10</AccessCode>
                              <NetPrice>10.00</NetPrice>
                              <ExternalPrice>0.00</ExternalPrice>
                              <RetailPrice>0.00</RetailPrice>
                              <TaxAmount>0.00</TaxAmount>
                              <DiscountAmount>0.00</DiscountAmount>
                              <DateSold>2012-01-31 16:51:00</DateSold>
                              <EventID>0</EventID>
                              <Guest>
                                  <FirstName/>
                                  <LastName/>
                              </Guest>
                          </Product>
                          <Product Type="Item">
                              <PLU>1001001</PLU>
                              <ItemName>Item NT</ItemName>
                              <ItemDescription>Item No Tax</ItemDescription>
                              <ItemUserCode>ITEM</ItemUserCode>
                              <NetPrice>10.00</NetPrice>
                              <ExternalPrice>0.00</ExternalPrice>
                              <RetailPrice>0.00</RetailPrice>
                              <TaxAmount>0.00</TaxAmount>
                              <DiscountAmount>0.00</DiscountAmount>
                          </Product>
                      </Products>
                  </Product>
              </Products>
              <GroupVisit>
                  <VisitDate>2017-11-12 00:00:00</VisitDate>
                  <Reference>Reference information entered for order</Reference>
                  <ExpectedNumGuests>3</ExpectedNumGuests>
                  <Description>Description of the group visit</Description>
                  <Note/>
              </GroupVisit>
          </QueryOrderResponse>
      </Body>
  </Envelope>




                                                                                                    314
eGalaxy Server Interface Specification                                                    38 QueryCustomerAccount Message
38 QueryCustomerAccount Message
The QueryCustomerAccount message is used to validate the Customer by their UniqueID and ExternalAccount.

38.1 Message Format
Following sections describes format of the QueryCustomerAccount message.

38.1.1 QueryCustomerAccount Message Fields
The body of the QueryCustomerAccount message contains the <QueryCustomerAccount> element. The <QueryCustomerAccount> contains
the <CustomerID> field, the galaxy generated UniqueID of the customer used to lookup the customer as well as
<CustomerExternalAccount>. The Customer loaded by the CustomerID with be validated against the passed in CustomerExternalAccount
value.
The <QueryCustomerAccount> element can contain the following fields:

 Field                   Description                                                                                           Type
 CustomerID              The unique identifier of the customer. The customer loaded by this id will be validated against the   Numeric
                         passed in CustomerExternalAccount value. (Required)
 CustomerExternalAccount The ExternalAccount field of a Customer. This is the value given by the external system to identify   Text(20)
                         the Customer. (Required)

38.1.1.1 Example QueryCustomerAccount request

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <MessageID>0</MessageID>
      <MessageType>QueryCustomerAccount</MessageType>
      <SourceID>ABC Travels</SourceID>
      <TimeStamp>2015-09-23 09:10:05</TimeStamp>
      <EchoData/>
      <SystemFields/>
    </Header>
    <Body>
      <QueryCustomerAccount>
      <CustomerID>12</CustomerID>
        <CustomerExternalAccount>NCC001</CustomerExternalAccount>
      </QueryCustomerAccount>
    </Body>
  </Envelope>

38.1.2 QueryCustomerAccount Message Fields
The QueryCustomerAccount response message body contains a <Status> element and a <QueryCustomerAccountResponse> element. If the
message is processed successfully, the <Status> element will contain a <StatusCode> field with a value 0. Any non-zero value in the
<StatusCode> field denotes an error. When an error occurs, they will be wrapped in the <Errors> element, which contains the individual
errors wrapped in the <Error> element. For a successful response, the <QueryCustomerAccountResponse> element will also be present and
contain information about the Customer that was queried.

38.1.2.1 <Status> Element

The following are the fields returned under the <Status> element which is found in the body of the response:

 Field      Description                                                                                                          Type
 StatusCode The Status of the message, 0 is OK, Any other value is an error case. Additional information about the error will be Integer
            provided in the StatusText field as well as the Errors element.
 StatusText A description of the status of the message. 'OK' when the message was a success or additional information when Text
            an error occurred.

38.1.2.2 <QueryCustomerAccountResponse> Element
                                                                                                                                     315
eGalaxy Server Interface Specification                                                  38 QueryCustomerAccount Message
The following fields are returned under the <QueryCustomerAccountResponse> element found in the body of the response:

 Field                      Description                                   Type
 CustomerID                 The unique identifier field of the customer   Integer
 CustomerExternalAccount    The customer's external identifier.           Text(20)
 CustomerName               The customer's name.                          Text(50)

38.1.2.3 <Errors> Element

The <Errors> element contains a number of <Error> elements that describe the errors that occurred during the processing of the message.
The following fields are returned under the <Error> element:

 Field     Description                                                                  Type
 ErrorCode A numeric code value to describe the error that occurred                     Integer
 ErrorText A description of an error that occurred during the processing of the message Text

38.1.2.4 Example response from a QueryCustomerAccount message (no errors)

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <MessageID>1</MessageID>
      <MessageType>QueryCustomerAccount</MessageType>
      <SourceID>ABC Travels</SourceID>
      <TimeStamp>2015-09-23 11:20:51</TimeStamp>
      <EchoData/>
      <SystemFields/>
    </Header>
    <Body>
      <Status>
        <StatusCode>0</StatusCode>
        <StatusText>OK</StatusText>
      </Status>
      <QueryCustomerAccountResponse>
        <CustomerID>12</CustomerID>
        <CustomerExternalAccount>NCC001</CustomerExternalAccount>
        <CustomerName>New Credit Customer</CustomerName>
      </QueryCustomerAccountResponse>
    </Body>
  </Envelope>

38.1.2.5 Example response from a QueryCustomerAccount message (error)

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <MessageID>5</MessageID>
      <MessageType>QueryCustomerAccount</MessageType>
      <SourceID>ABC Travels</SourceID>
      <TimeStamp>2015-09-23 11:23:38</TimeStamp>
      <EchoData/>
      <SystemFields/>
    </Header>
    <Body>
      <Status>
        <StatusCode>6200</StatusCode>
        <StatusText>QueryCustomerAccount request error</StatusText>
      </Status>
      <Errors>
        <Error>
          <ErrorCode>6205</ErrorCode>
          <ErrorText>The CustomerExternalAccount requested (WrongExtAcct) does not match the ExternalAccount of
  Customer 12</ErrorText>
        </Error>
      </Errors>
    </Body>
  </Envelope>

                                                                                                                                     316
eGalaxy Server Interface Specification                                                                    39 UpdateTickets Message
39 UpdateTickets Message
The UpdateTickets message is used to update information for one or more tickets.
To do so, the client must provide the visual ID of the Ticket(s) (typically the “barcode number”) to update, as well as the fields to update.

39.1 Message Format
Currently the UpdateTickets message will support adding or updating the picture associated to the ticket in the request. In the event that
only the picture information is updated on a ticket, the normal validation of number of uses and expiration date, etc. is not considered.

39.1.1 UpdateTickets Message
The UpdateTickets message is sent by the web site to eGalaxy Attraction Server to update the specified fields on one or more tickets. The
eGalaxy Attraction Server returns either an OK or the error that was encountered during the update. It is possible that some tickets are
updated successfully while others fail due to errors. In this case, the overall response of the message is a success, but the status of each
ticket will specify the error that occurred during the update of the ticket.

39.1.1.1 Header Parameters

The header element in the UpdateTickets message requires the following fields:

 Field            Description                                                                                                           Type
 SourceID         The system source identifier                                                                                          Text
 MessageType      For this message, always UpdateTickets                                                                                Text
 ValidateOnly     The message will be validated only (optional)                                                                         Empty
 SessionID        The active session acquired. Used when working with capacity managed ticket updates (optional, not needed             Integer
                  for non-capacity managed updates)

Note: See the section Message Header to see other supported header fields, all of which are optional for this message.

39.1.1.2 Request Message Parameters

A Tickets element is the only field (element) supported at the top of the UpdateTickets message. Inside the tickets field is a Ticket element
for each ticket to be updated.

 Field                      Description                                                                                       Type
 Tickets                    <Tickets> element contains one or more <Ticket> child elements.                                   Element
 Ticket                     <Ticket> element contains the <VisualID> of the ticket to be updated.                             Element
 PackageDetails             Element containing <PackageDetail> for a package update                                           Element
 PackageDetail              Element containing the update information for the package details parts                           Element
 VisualID                   The VisualID of the ticket to be updated                                                          Text
 Picture                    <Picture> element contains the Base64 encoded picture data to be added to the ticket              Text(bin.base64
                            specified by the VisualID.                                                                        format)
 TicketDate                 The TicketDate being updated to, for date specific tickets                                        DateTime
 ExpirationDate             The ExpirationDate being updated to, for date range tickets                                       DateTime
 EventNo                    The EventNo begin update to, for capacity managed ticket updates (Set the SessionID in the        Numeric
                            header if capacity was held by session in an earlier request. If SessionID is not provided,
                            UpdateTicket will attempt to allocate capacity while processing the request.)
 CapacityID                 The CapacityID being update to, for capacity managed ticket updates (Set the SessionID in         Numeric
                            the header if capacity was held by session in an earlier request. If SessionID is not provided,
                            UpdateTicket will attempt to allocate capacity while processing the request.) (Optional -
                            when not using SessionID in header)
 TicketStatus               The status being updated to. The only allowable values are 0 (valid) and 3 (inactive). Note       Numeric
                            that the eGalaxy Source must be configured to allow updating to these states; see the
                            Update Ticket tab on the eGalaxy Source.

                                                                                                                                            317
eGalaxy Server Interface Specification                                                               39 UpdateTickets Message
 AllMustSucceed        Indicates whether all updates given in the request must succeed or if failed updates can be       Boolean
                       skipped without failing the entire update (optional)
 ValidatePricing       Indicates whether validation will occur to ensure the price of the ticket with the old and new    Boolean
                       information is consistent (optional)
 UpdateOrderTicketDate Indicates that if the tickets were purchased using an order, the original order will be updated   Boolean
                       with new ticket dates, if the date was changed (optional)
 UpdateOrderEventInfo Indicates that if the tickets were purchased using an order, the original order will be updated    Boolean
                       with new event information, if the event was changed (optional)

39.1.1.3 Example UpdateTickets Request

  <Envelope>
    <Header>
      <SourceID>ABC Travels</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2015-07-21 10:00:00</TimeStamp>
      <MessageType>UpdateTickets</MessageType>
    </Header>
    <Body>
      <Tickets>
        <Ticket>
        <VisualID>10455000919</VisualID>
        <Picture xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          Picture Data
        </Picture>
      </Ticket>
      </Tickets>
    </Body>
  </Envelope>

39.1.1.4 Example UpdateTickets Request to be Validated Only

  <Envelope>
    <Header>
      <ValidateOnly/>
      <SourceID>ABC Travels</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2015-07-21 10:00:00</TimeStamp>
      <MessageType>UpdateTickets</MessageType>
    </Header>
    <Body>
      <Tickets>
        <Ticket>
        <VisualID>10455000919</VisualID>
        <Picture xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          Picture Data
        </Picture>
      </Ticket>
      </Tickets>
    </Body>
  </Envelope>

Note: The <ValidateOnly> element will be present in the UpdateTicketsResponse message header to indicate that the request was
processed in the Validate Only mode.

    <Header>
      <MessageID>1</MessageID>
      <MessageType>UpdateTicketsResponse</MessageType>
      <SourceID>ABC Travels</SourceID>
      <TimeStamp>2015-07-21 10:00:17</TimeStamp>
      <EchoData/>
      <SystemFields/>
      <ValidateOnly/>
    </Header>

39.1.1.5 Example UpdateTickets Request - Multiple Tickets


                                                                                                                                   318
eGalaxy Server Interface Specification                                                39 UpdateTickets Message
  <Envelope>
    <Header>
      <SourceID>ABC Travels</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2015-07-21 10:00:00</TimeStamp>
      <MessageType>UpdateTickets</MessageType>
    </Header>
    <Body>
      <Tickets>
      <Ticket>
        <VisualID>10455999999</VisualID>
        <Picture xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          Picture Data
        </Picture>
      </Ticket>
      <Ticket>
        <VisualID>10455000919</VisualID>
        <Picture xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          Picture Data
          </Picture>
      </Ticket>
      </Tickets>
    </Body>
  </Envelope>

39.1.1.6 Example UpdateTickets Response - No Errors

  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <MessageID>13</MessageID>
      <MessageType>UpdateTicketsResponse</MessageType>
      <SourceID>ABC Travels</SourceID>
      <TimeStamp>2015-07-21 13:32:26</TimeStamp>
      <EchoData/>
      <SystemFields/>
    </Header>
    <Body>
      <Status>
        <StatusCode>0</StatusCode>
        <StatusText>1 of 1 ticket(s) updated successfully</StatusText>
      </Status>
      <UpdateTicketsResponse>
        <SuccessfulUpdates>1</SuccessfulUpdates>
        <FailedUpdates>0</FailedUpdates>
        <Tickets>
          <Ticket>
            <VisualID>10455000919</VisualID>
            <UpdateStatus>0</UpdateStatus>
            <UpdateStatusText>Ticket 10455000919 updated successfully</UpdateStatusText>
          </Ticket>
        </Tickets>
      </UpdateTicketsResponse>
    </Body>
  </Envelope>

39.1.1.7 Example UpdateTickets Response - Errors




                                                                                                          319
eGalaxy Server Interface Specification                                              39 UpdateTickets Message
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <MessageID>15</MessageID>
      <MessageType>UpdateTicketsResponse</MessageType>
      <SourceID>ABC Travels</SourceID>
      <TimeStamp>2015-07-21 13:35:05</TimeStamp>
      <EchoData/>
      <SystemFields/>
    </Header>
    <Body>
      <Status>
        <StatusCode>6101</StatusCode>
        <StatusText>0 of 1 ticket(s) updated successfully</StatusText>
      </Status>
      <UpdateTicketsResponse>
        <SuccessfulUpdates>0</SuccessfulUpdates>
        <FailedUpdates>1</FailedUpdates>
        <Tickets>
          <Ticket>
            <VisualID>10455999999</VisualID>
            <UpdateStatus>1</UpdateStatus>
            <UpdateStatusText>There was an error updating the ticket</UpdateStatusText>
            <TicketErrors>
              <TicketError>
                <ErrorCode>6102</ErrorCode>
                <ErrorText>There was an error attempting to load the ticket with VisualID 10455999999: Could not
  load ticket.</ErrorText>
              </TicketError>
            </TicketErrors>
          </Ticket>
        </Tickets>
      </UpdateTicketsResponse>
    </Body>
  </Envelope>

39.1.1.8 Example UpdateTickets Response - Some Errors, Some Success




                                                                                                              320
eGalaxy Server Interface Specification                                              39 UpdateTickets Message
  <?xml version="1.0"?>
  <Envelope>
    <Header>
      <MessageID>16</MessageID>
      <MessageType>UpdateTicketsResponse</MessageType>
      <SourceID>ABC Travels</SourceID>
      <TimeStamp>2015-07-21 13:38:41</TimeStamp>
      <EchoData/>
      <SystemFields/>
    </Header>
    <Body>
      <Status>
        <StatusCode>0</StatusCode>
        <StatusText>1 of 2 ticket(s) updated successfully</StatusText>
      </Status>
      <UpdateTicketsResponse>
        <SuccessfulUpdates>1</SuccessfulUpdates>
        <FailedUpdates>1</FailedUpdates>
        <Tickets>
          <Ticket>
            <VisualID>10455999999</VisualID>
            <UpdateStatus>1</UpdateStatus>
            <UpdateStatusText>There was an error updating the ticket</UpdateStatusText>
            <TicketErrors>
              <TicketError>
                <ErrorCode>6102</ErrorCode>
                <ErrorText>There was an error attempting to load the ticket with VisualID 10455999999: Could not
  load ticket.</ErrorText>
              </TicketError>
            </TicketErrors>
          </Ticket>
          <Ticket>
            <VisualID>10455000919</VisualID>
            <UpdateStatus>0</UpdateStatus>
            <UpdateStatusText>Ticket 10455000919 updated successfully</UpdateStatusText>
          </Ticket>
        </Tickets>
      </UpdateTicketsResponse>
    </Body>
  </Envelope>

39.1.1.9 Example UpdateTickets Request - Update Date Specific Ticket

  <Envelope>
    <Header>
      <SourceID>ABC Travels</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2015-12-25 10:13:00</TimeStamp>
      <MessageType>UpdateTickets</MessageType>
    </Header>
    <Body>
      <Tickets>
        <Ticket>
          <VisualID>10455005136</VisualID>
          <TicketDate>2015-12-18 08:00:00</TicketDate>
        </Ticket>
        <Ticket>
          <VisualID>10455005137</VisualID>
          <TicketDate>2015-12-18 08:00:00</TicketDate>
        </Ticket>
        <Ticket>
          <VisualID>10455005138</VisualID>
          <TicketDate>2015-12-18 08:00:00</TicketDate>
        </Ticket>
      </Tickets>
      <AllMustSucceed>YES</AllMustSucceed>
      <ValidatePricing>YES</ValidatePricing>
    </Body>
  </Envelope>

39.1.1.10 Example UpdateTickets Request - Update Date Specific Ticket


                                                                                                              321
eGalaxy Server Interface Specification                                     39 UpdateTickets Message
  <Envelope>
    <Header>
      <SourceID>ABC Travels</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2015-12-25 10:13:00</TimeStamp>
      <MessageType>UpdateTickets</MessageType>
    </Header>
    <Body>
      <Tickets>
        <Ticket>
          <VisualID>10455009999</VisualID>
          <TicketDate>2015-12-18 08:00:00</TicketDate>
          <ExpirationDate>2015-12-25 11:59:00</ExpirationDate>
        </Ticket>
      </Tickets>
    </Body>
  </Envelope>

39.1.1.11 Example UpdateTickets Request - Update Capacity Managed Ticket

  <Envelope>
    <Header>
      <SourceID>TestSystem</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2015-11-06 10:00:00</TimeStamp>
      <MessageType>UpdateTickets</MessageType>
      <SessionID>3767</SessionID>
    </Header>
    <Body>
      <Tickets>
        <Ticket>
          <VisualID>0110016055500000034</VisualID>
          <EventNo>1270</EventNo>
          <CapacityID>4525</CapacityID>
        </Ticket>
        <Ticket>
          <VisualID>0110016055500000036</VisualID>
          <EventNo>1270</EventNo>
          <CapacityID>4525</CapacityID>
        </Ticket>
      </Tickets>
      <AllMustSucceed>NO</AllMustSucceed>
      <ValidatePricing>YES</ValidatePricing>
    </Body>
  </Envelope>

39.1.1.12 Example UpdateTickets Request - Update Capacity Managed Ticket




                                                                                               322
eGalaxy Server Interface Specification                                                      39 UpdateTickets Message
  <Envelope>
    <Header>
      <SourceID>ABC Travels</SourceID>
      <MessageID>1</MessageID>
      <TimeStamp>2015-12-02 10:00:00</TimeStamp>
      <MessageType>UpdateTickets</MessageType>
      <SessionID/>
    </Header>
    <Body>
      <Tickets>
        <Ticket>
          <!-- Package VisualID -->
          <VisualID>60455005133</VisualID>
          <PackageDetails>
            <PackageDetail>
              <VisualID>10455005134</VisualID>
              <TicketDate>2015-12-24 08:00:00</TicketDate>
            </PackageDetail>
            <PackageDetail>
              <VisualID>10455005135</VisualID>
              <TicketDate>2015-12-24 08:00:00</TicketDate>
            </PackageDetail>
          </PackageDetails>
        </Ticket>
      </Tickets>
      <AllMustSucceed>YES</AllMustSucceed>
      <ValidatePricing>YES</ValidatePricing>
    </Body>
  </Envelope>

39.1.1.13 Example UpdateTickets Request - Update One Capacity Managed Detail of a Package

  <Envelope>
      <Header>
          <SourceID>Exchange</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2019-10-17 10:00:00</TimeStamp>
          <MessageType>UpdateTickets</MessageType>
          <SessionID>34</SessionID>
      </Header>
      <Body>
          <Tickets>
              <Ticket>
                  <VisualID>60001000171</VisualID>
                  <PackageDetails>
                      <PackageDetail>
                          <VisualID>88001000172</VisualID>
                          <EventNo>1271</EventNo>
                          <CapacityID>1275</CapacityID>
                      </PackageDetail>
                  </PackageDetails>
              </Ticket>
          </Tickets>
      </Body>
  </Envelope>

39.1.1.14 Example UpdateTickets Request - Update Capacity Managed Details of a Package




                                                                                                                323
eGalaxy Server Interface Specification                                                     39 UpdateTickets Message
  <Envelope>
      <Header>
          <SourceID>Exchange</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2019-10-17 10:00:00</TimeStamp>
          <MessageType>UpdateTickets</MessageType>
          <SessionID>34</SessionID>
      </Header>
      <Body>
          <Tickets>
              <Ticket>
                  <VisualID>60001000171</VisualID>
                  <PackageDetails>
                      <PackageDetail>
                          <VisualID>88001000172</VisualID>
                          <EventNo>1275</EventNo>
                          <CapacityID>1280</CapacityID>
                      </PackageDetail>
                      <PackageDetail>
                          <VisualID>88001000173</VisualID>
                          <EventNo>1270</EventNo>
                          <CapacityID>1275</CapacityID>
                      </PackageDetail>
                      <PackageDetail>
                          <VisualID>88001000174</VisualID>
                          <EventNo>1272</EventNo>
                          <CapacityID>1277</CapacityID>
                      </PackageDetail>
                  </PackageDetails>
              </Ticket>
          </Tickets>
      </Body>
  </Envelope>

39.1.1.15 Example UpdateTickets Response - Time-link Error When Updating Package Details




                                                                                                               324
eGalaxy Server Interface Specification                                              39 UpdateTickets Message
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>UpdateTicketsResponse</MessageType>
          <SessionID>34</SessionID>
          <SourceID>Exchange</SourceID>
          <TimeStamp>2019-10-17 13:22:45</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>6101</StatusCode>
              <StatusText>0 of 1 update request(s) completed successfully</StatusText>
          </Status>
          <UpdateTicketsResponse>
              <SuccessfulUpdates>0</SuccessfulUpdates>
              <FailedUpdates>1</FailedUpdates>
              <Tickets>
                  <Ticket>
                      <VisualID>60001000171</VisualID>
                      <UpdateStatus>1</UpdateStatus>
                      <UpdateStatusText>There was an error updating the ticket with VisualID
  60001000171</UpdateStatusText>
                      <Errors>
                          <Error>
                              <ErrorCode>6108</ErrorCode>
                              <ErrorText>There was an error validating the package details for VisualID
  60001000171: The requested updates not meet the package criteria from the original sale.</ErrorText>
                          </Error>
                          <Error>
                              <ErrorCode>601</ErrorCode>
                              <ErrorText>Time-link error for detail with VisualID 88001000173: First event
  validation failed</ErrorText>
                          </Error>
                      </Errors>
                  </Ticket>
              </Tickets>
          </UpdateTicketsResponse>
      </Body>
  </Envelope>




                                                                                                             325
eGalaxy Server Interface Specification                                                                      40 QueryPrices Message
40 QueryPrices Message
The QueryPrices message is used to retrieve pricing information for the PLUs in a particular event. An element will be returned for the price,
discount amount, and tax amount of each PLU for each possible sales program where the PLU may appear. Currently this only returns PLU
information for Reserved Seat Pricing Level PLUs.

40.1 Message Format
This section describes the format of the QueryPrices request with examples.

40.1.1 QueryPrices Message Fields
 Field   Description                                                        Type
 EventID EventID to determine which PLUs to return pricing information for. Numeric

40.1.1.1 Example QueryPrices Message

  <?xml version="1.0" ?>
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryPrices</MessageType>
          <SessionID></SessionID>
          <TimeStamp>2014-07-04 17:50:09</TimeStamp>
          </Header>
      <Body>
          <QueryPrices>
            <EventID>979</EventID>
        </QueryPrices>
      </Body>
  </Envelope>

40.1.2 QueryPrices Response Message Fields
The QueryPrices response contains the following fields in the response.

 Field             Description                                                                                                      Type
 PriceEntryList    Element containing PriceEntry elements.                                                                          Element
 PriceEntry        Element containing pricing information.                                                                          Element
 PLU               A PLU available to be sold for the event.                                                                        Text
 SalesProgramID    A sales program that the PLU is a part of. There will be an entry for each PLU with SalesProgramID = 0. This     Numeric
                   is the default pricing when no Sales Program is applied.
 Price             The price of the PLU for the referenced Sales Program, based on a quantity of 1.                                 Currency
 Discount          The discount amount for the referenced Sales Program based on a quantity of 1.                                   Currency
 Tax               The tax amount for the referenced Sales Program based on a quantity of 1.                                        Currency

40.1.2.1 Example QueryPrices Response




                                                                                                                                          326
eGalaxy Server Interface Specification                     40 QueryPrices Message
  <Envelope>
      <Header>
          <SourceID>TestSystem</SourceID>
          <MessageID>0</MessageID>
          <MessageType>QueryPricesResponse</MessageType>
          <SessionID>0</SessionID>
          <TimeStamp>2014-07-04 17:50:09</TimeStamp>
          </Header>
      <Body>
          <PriceEntryList>
            <PriceEntry>
              <PLU>TICKET0010101</PLU>
              <SalesProgramID>0</SalesProgramID>
              <Price>100</Price>
              <Tax>6</Tax>
              <Discount>0</Discount>
          </PriceEntry>
          <PriceEntry>
              <PLU>TICKET0010101</PLU>
              <SalesProgramID>4001</SalesProgramID>
              <Price>75</Price>
              <Tax>4.50</Tax>
              <Discount>25</Discount>
          </PriceEntry>
        </PriceEntryList>
      </Body>
  </Envelope>




                                                                             327
eGalaxy Server Interface Specification                                                        41 UpdateSystemLogon Message
41 UpdateSystemLogon Message
The UpdateSystemLogon message is used to update the Contact that is associated with the Logon based upon a given Pass. The ContactID
field from the pass is set to the OwnerID field of the SystemLogon entry.

41.1 Message Format
Following sections describes format of the UpdateSystemLogon message.

41.1.1 UpdateSystemLogon Message Fields
The body of the UpdateSystemLogon message contains the <UpdateSystemLogon> element. The <UpdateSystemLogon> contains the
<PassID> field, the galaxy generated UniqueID of the Pass used to lookup the new Contact as well as <SystemLogonID> of the SystemLogon
entry to be updated. Both fields are required.
The <UpdateSystemLogon> element can contain the following fields:

 Field                                Description                                                                                Type
 SystemLogonID                        The unique identifier of the SystemLogon entry to be updated. (Required)                   Numeric
 PassID                               The ExternalAccount field of a Pass. The ContactID value of the give Pass will be          Numeric
                                      assigned to the OwnerID field of the given SystemLogon entry. (Required)
 ErrorWhenSystemLogonExistsForContact Indicates whether to prevent updating the SystemLogon entry if the contact                 Boolean
                                      associated with the provided PassID is associated with another SystemLogon entry.
                                      (Optional)

41.1.1.1 Example UpdateSystemLogon request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>1</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-09-15 10:00:00</TimeStamp>
          <MessageType>UpdateSystemLogon</MessageType>
      </Header>
      <Body>
        <UpdateSystemLogon>
          <SystemLogonID>4</SystemLogonID>
          <PassID>551</PassID>
          <ErrorWhenSystemLogonExistsForContact>NO</ErrorWhenSystemLogonExistsForContact>
        </UpdateSystemLogon>
      </Body>
  </Envelope>

41.1.2 UpdateSystemLogonRespone Message Fields
The UpdateSystemLogon response message body contains a <Status> element and a <UpdateSystemLogonResponse> element. If the
message is processed successfully, the <Status> element will contain a <StatusCode> field with a value 0. Any non-zero value in the
<StatusCode> field denotes an error. When an error occurs, they will be wrapped in the <Errors> element, which contains the individual
errors wrapped in the <Error> element.

41.1.2.1 <Status> Element

The following are the fields returned under the <Status> element which is found in the body of the response:

 Field      Description                                                                                                          Type
 StatusCode The Status of the message, 0 is OK, Any other value is an error case. Additional information about the error will be Integer
            provided in the StatusText field as well as the Errors element.
 StatusText A description of the status of the message. 'OK' when the message was a success or additional information when Text
            an error occurred.


                                                                                                                                         328
eGalaxy Server Interface Specification                                                      41 UpdateSystemLogon Message
41.1.2.2 <Errors> Element

The <Errors> element contains a number of <Error> elements that describe the errors that occurred during the processing of the message.
The following fields are returned under the <Error> element:

 Field     Description                                                                  Type
 ErrorCode A numeric code value to describe the error that occurred                     Integer
 ErrorText A description of an error that occurred during the processing of the message Text

41.1.2.3 Example response from a UpdateSystemLogon message (no errors)

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>UpdateSystemLogonResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2018-04-05 15:11:47</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

41.1.2.4 Example response from a UpdateSystemLogon message (error)

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>UpdateSystemLogonResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2018-04-05 15:15:36</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>7100</StatusCode>
              <StatusText>UpdateSystemLogon request error</StatusText>
          </Status>
          <Errors>
              <Error>
                  <ErrorCode>7101</ErrorCode>
                  <ErrorText>PassID of 551999 doesn't refer to a valid Pass</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                                                     329
eGalaxy Server Interface Specification                                          42 AddDeferredEntitlementAddOn Message
42 AddDeferredEntitlementAddOn Message
The AddDeferredEntitlementAddOn message is used to add a deferred entitlement add-on to an existing ticket.

42.1 Message Format
Following sections describes format of the AddDeferredEntitlementAddOn message.

42.1.1 AddDeferredEntitlementAddOn Message Fields
The body of the AddDeferredEntitlementAddOn message contains the <AddDeferredEntitlementAddOn> element. The
<AddDeferredEntitlementAddOn> contains the <PLU> field as well as the <DeferredEntitlementAddOnVisualID> field. Both fields are
required.
The <AddDeferredEntitlementAddOn> element can contain the following fields:

 Field                            Description                                                                                   Type
 PLU                              The PLU of the item that will be added as a deferred entitlement add-on. (Required)           Text
 DeferredEntitlementAddOnVisualID The VisualID of the ticket that the deferred entitlement add-on will be added to.             Numeric
                                  (Required)

42.1.1.1 Example AddDeferredEntitlementAddOn request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>1</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2006-09-15 10:00:00</TimeStamp>
          <MessageType>AddDeferredEntitlementAddOn</MessageType>
      </Header>
      <Body>
        <AddDeferredEntitlementAddOn>
          <PLU>ABCD1234</PLU>
          <DeferredEntitlementAddOnVisualID>1234567890</DeferredEntitlementAddOnVisualID>
        </AddDeferredEntitlementAddOn>
      </Body>
  </Envelope>

42.1.2 AddDeferredEntitlementAddOnRespone Message Fields
The AddDeferredEntitlementAddOn response message body contains a <Status> element. If the message is processed successfully, the
<Status> element will contain a <StatusCode> field with a value 0. Any non-zero value in the <StatusCode> field denotes an error. When an
error occurs, they will be wrapped in the <Errors> element, which contains the individual errors wrapped in the <Error> element.

42.1.2.1 <Status> Element

The following are the fields returned under the <Status> element which is found in the body of the response:

 Field      Description                                                                                                          Type
 StatusCode The Status of the message, 0 is OK, Any other value is an error case. Additional information about the error will be Integer
            provided in the StatusText field as well as the Errors element.
 StatusText A description of the status of the message. 'OK' when the message was a success or additional information when Text
            an error occurred.

42.1.2.2 <Errors> Element

The <Errors> element contains a number of <Error> elements that describe the errors that occurred during the processing of the message.
The following fields are returned under the <Error> element:

 Field       Description                                                                    Type

                                                                                                                                      330
eGalaxy Server Interface Specification                                       42 AddDeferredEntitlementAddOn Message
 ErrorCode A numeric code value to describe the error that occurred                     Integer
 ErrorText A description of an error that occurred during the processing of the message Text

42.1.2.3 Example response from a AddDeferredEntitlementAddOn message (no errors)

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>AddDeferredEntitlementAddOnResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2018-06-07 10:20:21</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>0</StatusCode>
              <StatusText>OK</StatusText>
          </Status>
      </Body>
  </Envelope>

42.1.2.4 Example response from a AddDeferredEntitlementAddOn message (error)

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>AddDeferredEntitlementAddOnResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2018-06-07 10:20:21</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>7200</StatusCode>
              <StatusText>AddDeferredEntitlementAddOn request error</StatusText>
          </Status>
          <Errors>
              <Error>
                  <ErrorCode>7202</ErrorCode>
                  <ErrorText>The PLU ABCD1234 could not be found.</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                               331
eGalaxy Server Interface Specification                                                       43 StoredValuePayment Message
43 StoredValuePayment Message
The StoredValuePayment message is used to pay for a transaction using a Gateway stored value card balance.

43.1 Message Format
Following sections describes format of the StoredValuePayment message.

43.1.1 StoredValuePayment Message Fields
The body of the StoredValuePayment message contains the <StoredValuePayment> element.
The <StoredValuePayment> element contains the following required fields:

 Field      Description                                                                           Type
 FOPCode    The FOP code for GTS stored value. Foreign key to FOPs.FOPCode. (Required)            Numeric
 VisualID   The VisualID of the stored value card found in the DebitCards table. (Required)       Text
 Amount     The total amount to be deducted from the GTS stored value card balance. (Required)    Currency

43.1.1.1 Example StoredValuePayment request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>1</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2021-09-03 10:00:00</TimeStamp>
          <MessageType>StoredValuePayment</MessageType>
      </Header>
      <Body>
        <StoredValuePayment>
          <FOPCode>35</FOPCode>
          <VisualID>1234567890</VisualID>
          <Amount>10.00</Amount>
        </StoredValuePayment>
      </Body>
  </Envelope>

43.1.2 StoredValuePaymentRespone Message Fields
The StoredValuePayment response message body contains a <Status> element. If the message is processed successfully, the <Status>
element will contain a <StatusCode> field with a value 0. Any non-zero value in the <StatusCode> field denotes an error. When an error
occurs, they will be wrapped in the <Errors> element, which contains the individual errors wrapped in the <Error> element.

43.1.2.1 <StoredValuePaymentResponse> Element

The following are the fields returned under the <StoredValuePaymentResponse> element which is found in the body of the response:

 Field    Description                     Type
 AuthCode Authorization code from eGalaxy Text

43.1.2.2 <Errors> Element

The <Errors> element contains a number of <Error> elements that describe the errors that occurred during the processing of the message.
The following fields are returned under the <Error> element:

 Field     Description                                                                  Type
 ErrorCode A numeric code value to describe the error that occurred                     Integer
 ErrorText A description of an error that occurred during the processing of the message Text


                                                                                                                                         332
eGalaxy Server Interface Specification                                                43 StoredValuePayment Message
43.1.2.3 Example response from a StoredValuePayment message (no errors)

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>StoredValuePaymentResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2021-09-03 10:00:00</TimeStamp>
      </Header>
      <Body>
          <StoredValuePaymentResponse>
              <AuthCode>416456</AuthCode>
          </StoredValuePaymentResponse>
      </Body>
  </Envelope>

43.1.2.4 Example response from a StoredValuePayment message using a card with insufficient balance

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>StoredValuePaymentResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2021-09-03 10:00:00</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Status>
              <StatusCode>7508</StatusCode>
              <StatusText>StoredValuePayment request error</StatusText>
          </Status>
          <Errors>
              <Error>
                  <ErrorCode>7509</ErrorCode>
                  <ErrorText>Insufficient balance remaining: 1.29.</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>

43.1.2.5 Example response from a StoredValuePayment message using an expired card

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>StoredValuePaymentResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2021-09-03 10:00:00</TimeStamp>
          <EchoData></EchoData>
          <SystemFields></SystemFields>
      </Header>
      <Body>
          <Errors>
              <Error>
                  <ErrorCode>7513</ErrorCode>
                  <ErrorText>Debit card with VisualID '1234567890' is expired.</ErrorText>
              </Error>
          </Errors>
      </Body>
  </Envelope>




                                                                                                               333
eGalaxy Server Interface Specification                                                         44 QueryEntitlements Message
44 QueryEntitlements Message
The QueryEntitlements message returns transaction and order data.

44.1 Message Format
Following sections describes format of the QueryEntitlements message.

44.1.1 QueryEntitlements Message Fields
The body of the QueryEntitlements message contains the <QueryEntitlements> element.

44.1.1.1 <Query> Element

The <Query> element must contain an EntitlementHash.

 Field          Description                                                                                         Type
 EntitementHash The ExternalID field of an Order. This is the value which was generated when the order was created. Text(20)

44.1.1.2 <DataRequest> Element

The <DataRequest> element contains a number of <Field> elements that dictate how much data is returned in the response message.
A DataRequest element contains one or more of the Field elements:

 Field Description                             Type
 Field Field for which data is being requested Text

Following fields can be requested under <DataRequest> element of the QueryOrder message:

 Field           Description
 Products        Request the original tickets sold and issued for the given order or POS transaction. Tickets are returned within
                 <Products> element. Tickets sold in a package are returned grouped by the package.
 AppleWalletData Request the AppleWallet template data, if AppleTicket template is configured on the PLU, for original tickets sold and
                 issued for the given order. The AppleWallet data for each ticket is returned as CData of the <AppleWalletData> field
                 within the <Product> element. This option enables 'Products' data request above.

44.1.1.3 Example QueryEntitlements request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>Exchange</SourceID>
          <MessageID>-1</MessageID>
          <MessageType>QueryEntitlements</MessageType>
          <SessionID/>
          <TimeStamp>2022-05-1809:22:44</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <QueryEntitlements>
              <Query>
                  <EntitlementHash>10001000456</EntitlementHash>
              </Query>
              <DataRequest>
                  <Field>Products</Field>
                  <Field>AppleWalletData</Field>
              </DataRequest>
          </QueryEntitlements>
      </Body>
  </Envelope>


                                                                                                                                    334
eGalaxy Server Interface Specification                                                 44 QueryEntitlements Message
44.1.1.4 Example QueryEntitlements response (with AppleWallet template data omitted)

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>-1</MessageID>
          <MessageType>QueryEntitlementsResponse</MessageType>
          <SourceID>Exchange</SourceID>
          <TimeStamp>2022-05-18 09:23:12</TimeStamp>
          <EchoData/>
          <SystemFields/>
      </Header>
      <Body>
          <QueryEntitlementsResponse>
              <Products>
                  <Product Type="Ticket">
                      <VisualID>10001000456</VisualID>
                      <OwnerVisualID/>
                      <SerialNo>456</SerialNo>
                      <PLU>1-GUEST</PLU>
                      <Qty>1</Qty>
                      <OrderID>0</OrderID>
                      <ExternalID/>
                      <SalesChannelID>0</SalesChannelID>
                      <ItemName>No Tax with Guest</ItemName>
                      <ItemDescription>No Tax with Guest</ItemDescription>
                      <BaseLanguageItemName>No Tax with Guest</BaseLanguageItemName>
                      <BaseLanguageItemDescription>No Tax with Guest</BaseLanguageItemDescription>
                      <Status>0</Status>
                      <AccessCode>10</AccessCode>
                      <Price>10.00</Price>
                      <UpgradeValue>0.00</UpgradeValue>
                      <OrderLineID>12168</OrderLineID>
                      <DateSold>2022-05-17 15:22:33</DateSold>
                      <TranDate>2022-05-17 15:22:33</TranDate>
                      <VisitDate>1899-12-30 00:00:00</VisitDate>
                      <OnlineExchangeStatus>3</OnlineExchangeStatus>
                      <Guest>
                          <FirstName>Test</FirstName>
                          <LastName>2</LastName>
                          <MiddleName/>
                      </Guest>
                      <Contact>
                          <FirstName/>
                          <MiddleName/>
                          <LastName/>
                      </Contact>
                      <EndOfLifeDate/>
                      <EndOfLifeDateStatus>0</EndOfLifeDateStatus>
                      <AppleWalletData><CDATA></AppleWalletData>
                      </Product>
                      <Product Type="Ticket">
                          <VisualID>10001000457</VisualID>
                          <OwnerVisualID/>
                          <SerialNo>457</SerialNo>
                          <PLU>ADGAGuestName</PLU>
                          <Qty>1</Qty>
                          <OrderID>0</OrderID>
                          <ExternalID/>
                          <SalesChannelID>0</SalesChannelID>
                          <ItemName>Adult GA - Guest Name</ItemName>
                          <ItemDescription>Adult GA - Guest Name</ItemDescription>
                          <BaseLanguageItemName>Adult GA - Guest Name</BaseLanguageItemName>
                          <BaseLanguageItemDescription>Adult GA - Guest Name</BaseLanguageItemDescription>
                          <Status>0</Status>
                          <AccessCode>10</AccessCode>
                          <Price>10.00</Price>
                          <UpgradeValue>0.00</UpgradeValue>
                          <OrderLineID>12167</OrderLineID>
                          <DateSold>2022-05-17 15:22:33</DateSold>
                          <TranDate>2022-05-17 15:22:33</TranDate>
                          <VisitDate>1899-12-30 00:00:00</VisitDate>
                          <OnlineExchangeStatus>1</OnlineExchangeStatus>
                          <Guest>
                              <FirstName>Guest</FirstName>
                              <LastName>Test</LastName>
                                                                                                               335
eGalaxy Server Interface Specification                                  44 QueryEntitlements Message
                             <LastName>Test</LastName>
                             <MiddleName/>
                         </Guest>
                         <Contact>
                             <FirstName/>
                             <MiddleName/>
                             <LastName/>
                         </Contact>
                         <EndOfLifeDate/>
                         <EndOfLifeDateStatus>0</EndOfLifeDateStatus>
                     </Product>
                 </Products>
             </QueryEntitlementsResponse>
         </Body>
     </Envelope>




                                                                                                336
eGalaxy Server Interface Specification                                                            45 QueryPayments Message
45 QueryPayments Message
The QueryPayments message retrieves JnlDrafts, JnlHostDataFields and other payment related fields based on a given VisualID.

45.1 Message Format
Following sections describes format of the QueryPayments message.

45.1.1 QueryPayments Message Fields
The body of the QueryPayments message contains the <QueryPayments> element.
The <QueryPayments> element contains the following required fields:

 Field    Description                          Type
 VisualID The VisualID of a ticket. (Required) Text

45.1.1.1 Example QueryPayments request

  <?xml version="1.0"?>
  <Envelope>
      <Header>
          <SourceID>1</SourceID>
          <MessageID>1</MessageID>
          <TimeStamp>2022-10-18 10:00:00</TimeStamp>
          <MessageType>QueryPayments</MessageType>
      </Header>
      <Body>
          <QueryPayments>
              <Query>
                  <VisualID>123456</VisualID>
              </Query>
              <Query>
                  <VisualID>ABCDEFG</VisualID>
              </Query>
          </QueryPayments>
      </Body>
  </Envelope>

45.1.1.2 <QueryPaymentsResponse> Element

The following elements are returned under the <QueryPaymentsResponse> body

45.1.1.3 Element

The PaymentRecord element groups payment nodes together for a single visual ID.

 Field                  Description                                                       Type
 VisualID               The visual ID provided in the request                             Text
 IsPaidViaCreditAccount Indicates if an order was pay for using a customer credit account Boolean

45.1.1.4 Element

 Field          Description                                                                  Type
 FOP            JnlDrafts.FOP                                                                Numeric
 FOPProtocol1   FOPs.Protocol1                                                               Text
 CardNo         QueryPayments returns the JnlDrafts.CardNo with the last 4 digits unmasked   Text
 ExprDate       JnlDrafts.ExprDate                                                           Numeric
 Amount         Amount recorded in the corresponding JnlDetails record (JnlCodeID = 35)      Currency


                                                                                                                               337
eGalaxy Server Interface Specification                                                               45 QueryPayments Message
eGalaxy server only returns certain FieldData when the request is sent using a secure connection (SSL port 443).

45.1.1.5 Element

 Field     Description                 Type
 FieldID   JnlHostDataFields.FieldID   Numeric
 FieldData JnlHostDataFields.FieldData Text

45.1.1.6 Example response from a QueryPayments message (no errors)

  <?xml version="1.0" encoding="UTF-8"?>
  <Envelope>
      <Header>
          <MessageID>1</MessageID>
          <MessageType>QueryPaymentsResponse</MessageType>
          <SourceID>1</SourceID>
          <TimeStamp>2022-10-18 10:00:00</TimeStamp>
      </Header>
      <Body>
          <QueryPaymentsResponse>
              <PaymentRecord>
                  <VisualID>123456</VisualID>
                  <IsPaidViaCreditAccount>NO</IsPaidViaCreditAccount>
                  <JnlDraft>
                      <FOP>43</FOP>
                      <FOPProtocol1>TEST</FOPProtocol1>
                      <CardNo>XXXXXXXXXXXX1234</CardNo>
                      <ExprDate>0330</ExprDate>
                      <Amount>10.25</Amount>
                  </JnlDraft>
                  <HostDataField>
                      <FieldID>143</FieldID>
                      <FieldData>123456ABCDEFG</FieldData>
                  </HostDataField>
                  <HostDataField>
                      <FieldID>183</FieldID>
                      <FieldData>MerchantName</FieldData>
                  </HostDataField>
              </PaymentRecord>
          </QueryPaymentsResponse>
      </Body>
  </Envelope>




                                                                                                                         338
eGalaxy Server Interface Specification                                                           46 eGalaxy Server Error Codes
46 eGalaxy Server Error Codes
46.1 Error Code Table
 Error Description                                                                       MessageType                    Severity
 Code
 0     OK - No error                                                                     Any                            N/A
 101 Customer not found in the Customer Group defined on the Source                      Orders (File, Web download &   Error
                                                                                         Real time)
 102    Invalid Form of Payment                                                          Orders (File, Web download &   Error
                                                                                         Real time)
 103    Invalid PLU                                                                      Orders (File, Web download &   Error
                                                                                         Real time)
 104    PLU not available in customers' Sales Program                                    Orders (File, Web download &   Error
                                                                                         Real time)
 105    Order line item price does not match Galaxy's price for same item                Orders (File, Web download &   Error
                                                                                         Real time)
 106    Credit FOP defined under eGalaxyConfig is invalid                                Orders (File, Web download &   Error
                                                                                         Real time)
 107    Duplicate order. Order with given already exists in Galaxy                       Orders (File, Web download &   Error
                                                                                         Real time)
 108    Group VisitDate (or ArrivalDate) cannot be empty                                 Orders (File, Web download &   Error
                                                                                         Real time)
 109    is required for the given PLU                                                    Orders (File, Web download &   Error
                                                                                         Real time)
 110    given on order line does not match Galaxy's event ID for the same PLU            Orders (File, Web download &   Error
                                                                                         Real time)
 111    given on the order line does not match Galaxy's resource for the same PLU        Orders (File, Web download &   Error
                                                                                         Real time)
 112    Event type of Event on the order line does not match Galaxy's event type for     Orders (File, Web download &   Error
        the same                                                                         Real time)
 113    Invalid EventID                                                                  Orders (File, Web download &   Error
                                                                                         Real time)
 114    VisitDate is either out of range or has invalid value                            Orders (File, Web download &   Error
                                                                                         Real time)
 115    An order (to update or cancel) with the given not found in the Galaxy            Orders (File, Web download &   Error
                                                                                         Real time)
 116    An order (to update or cancel) with the given is found but it is marked closed   Orders (File, Web download &   Error
                                                                                         Real time)
 117    Order (to update or cancel) has issued tickets or items                          Orders (File, Web download &   Error
                                                                                         Real time)
 118    in the XML order does not fall within the From and Thru range defined on the     Orders (File, Web download &   Error
        eGalaxy source                                                                   Real time)
 119    Order contact not found or is empty                                              Orders (File, Web download &   Error
                                                                                         Real time)
 120    Customer to use for the order is configured to require a payment and no          Orders (File, Web download &   Error
        payment was found in the XML order                                               Real time)
 121    Customer to use for the order is configured to require a payment. The            Orders (File, Web download &   Error
        payment was found but it is not paid in FULL                                     Real time)
 122    Customer ID cannot be changed for the given                                      Orders (File, Web download &   Error
                                                                                         Real time)
 123    Source is inactive. Cannot process orders from an inactive source. This error    Orders (File, Web download &   Error /
        can be configured as a warning in eGalaxy                                        Real time)                     Warning
 124    not found or not valid to use for the customer to be used for the order          Orders (File, Web download &   Error

                                                                                                                                   339
eGalaxy Server Interface Specification                                                         46 eGalaxy Server Error Codes
                                                                                       Real time)
 125   No order lines found in the XML order. Can not update the order                 Orders (File, Web download &   Error
                                                                                       Real time)
 126   Source ABC Travels Website is enabled for AVS verification (By postal code)     Orders (File, Web download &   Error
       and no AVS data (BillingZIP) found in the payment order line OR Source ABC      Real time)
       Travels Website is enabled for AVS verification (By billing street and postal
       code) and no AVS data BillingStreet and/or BillingZIP) found in the payment
       order line
 127   Source ABC Travels Website is enabled for CVN verification and no CVN data    Orders (File, Web download &     Error
       found in the payment order line                                               Real time)
 128   Payment authorization failed. Error code & error text from BCAM32             Orders (File, Web download &     Error
                                                                                     Real time)
 129   AVS verification failed                                                       Orders (File, Web download &     Error
                                                                                     Real time)
 130   CVN verification failed                                                       Orders (File, Web download &     Error
                                                                                     Real time)
 131   AVS and CVN verification failed                                               Orders (File, Web download &     Error
                                                                                     Real time)
 132   Cannot connect to Galaxy's Payment Server to authorize payment:               Orders (File, Web download &     Error
       PaymentCode                                                                   Real time)
 133   PayOnIssuance orders are not permitted for source ABC Travels                 Orders (File, Web download &     Error
                                                                                     Real time)
 134   Cannot update order (OrderID), order has a payment applied in Galaxy          Orders (File, Web download &     Error
                                                                                     Real time)
 135   Cannot process an order with a Pay On Issuance payment (PaymentCode)          Orders (File, Web download &     Error
       that is configured for Authorize                                              Real time)
 136   Order has a payment PaymentCode marked as Pay On Issuance. Pay On             Orders (File, Web download &     Error
       Issuance payments are not supported when renewing passes                      Real time)
 137   VisualID element under the Pass element is missing or it is empty             Orders (File, Web download &     Error
                                                                                     Real time)
 138   Pass with VisualID VisualID has quantity of Qty. A Pass cannot have multiple Orders (File, Web download &      Error
       quantities                                                                    Real time)
 139   Pass with VisualID VisualID not found                                         Orders (File, Web download &     Error
                                                                                     Real time)
 140   Pass with VisualID VisualID is not renewable. This error can be configured as Orders (File, Web download &     Error /
       a warning in eGalaxy                                                          Real time)                       Warning
 141   Cannot renew pass with VisualID VisualID, pass kind (PassKindID) of the new Orders (File, Web download &       Error
       PLU (PLU) not found                                                           Real time)
 142   Cannot renew pass with VisualID VisualID, new pass kind has "Generate a       Orders (File, Web download &     Error
       new pass ID on renewal" option enabled                                        Real time)
 143   PLU (PLU) with a Kind of KindIdentifier (KindName) is not supported on an     Orders (File, Web download &     Error
       order line with a DetailType of DetailType                                    Real time)
 144   Promotion code used in the order has no uses left. This error can be          Orders (File, Web download &     Error /
       configured as a warning in eGalaxy                                            Real time)                       Warning
 145   Event EventID is not on sale. This error can be configured as a warning in    Orders (File, Web download &     Error /
       eGalaxy.                                                                      Real time)                       Warning
 146   Event EventID does not have enough quantity available. This error can be      Orders (File, Web download &     Error /
       configured as a warning in eGalaxy                                            Real time)                       Warning
 147   Event EventID is over. This error can be configured as a warning in eGalaxy   Orders (File, Web download &     Error /
                                                                                     Real time)                       Warning
 148   Order line ticket/item quantity for Print at Home orders cannot be greater    Orders (File, Web download &     Error
       than 1                                                                        Real time)
 149   Template to use for producing the Print at Home ticket is not defined on the Orders (File, Web download &      Error
       PLU                                                                           Real time)
 150   Item amount is too large for tax table. This error can be configured as a     Orders (File, Web download &     Error /
       warning in eGalaxy                                                            Real time)                       Warning
                                                                                                                                340
eGalaxy Server Interface Specification                                                           46 eGalaxy Server Error Codes
 151   Event not active currently                                                       Orders (File, Web download &   Error /
                                                                                        Real time)                     Warning
 152   Sales program SalesProgramID is not valid to use on the given order date of      Orders (File, Web download &   Error
       OrderDate                                                                        Real time)
 153   Cannot import pass with PLU PLU, LastName of the pass is required                Orders (File, Web download &   Error
                                                                                        Real time)
 154   Cannot import pass with PLU PLU, field FieldName is configured as required       Orders (File, Web download &   Error
       on the pass kind(PassKind) of the pass and no data is received for that field    Real time)
 156   Disbursement ID (DisbursementID) not found for PLU (PLU) / Visual ID:            ActivateTicket                 Error
       (VisualID)
 157   Disbursement ID (DisbursementID) does not have any details for PLU (PLU) /       ActivateTicket                 Error
       Visual ID: (VisualID)
 158   New payment given in the request was authorized successfully for the             Orders ( ile, Web download &   Error
       purchase initially, however since the request is rejected due to other errors    Real time)
       an attempt was made to void the authorization but failed due to this error:
       ErrorMessage
 159   At least one pass in the order is required to be the primary pass. Note: Error   Orders (File, Web download &   Error
       checking done only when The Raiser’s Edge ® is enabled                           Real time)
 160   An order cannot have more than one primary passes                                Orders (File, Web download &   Error
                                                                                        Real time)
 161   NameTitleID NameTitleID does not exist                                           Orders (File, Web download &   Error or
                                                                                        Real time)                     Warning
 162   NameSuffixID NameSuffixID does not exist                                         Orders (File, Web download &   Error or
                                                                                        Real time)                     Warning
 163   Quantity of an order line with seat assignment cannot be greater than 1          Orders (File, Web download &   Error
                                                                                        Real time)
 164   Cell phone is required for a delivery method of Mobile                           Orders (File, Web download &   Error
                                                                                        Real time)
 165   Order line ticket/item quantity for Mobile orders cannot be greater than 1       Orders (File, Web download &   Error
                                                                                        Real time)
 166   PaymentPlan not found in Galaxy database                                         Orders (File, Web download &   Error
                                                                                        Real time)
 167   PaymentPlan is not associated with PLU                                           Orders (File, Web download &   Error
                                                                                        Real time)
 168   Order has more than one paymentplans. Orders with multiple paymentplans          Orders (File, Web download &   Error
       are not supported                                                                Real time)
 169   Orders containing tickets with paymentplans and tickets without                  Orders (File, Web download &   Error
       paymentplan are not supported                                                    Real time)
 170   Order with paymentplan tickets must have at least one credit card payment        Orders (File, Web download &   Error
                                                                                        Real time)
 171   PaymentContract DownPayment of PaymentContractDownPayment is less                Orders (File, Web download &   Warning
       than the required DownPayment of PaymentPlanDownPaymentAmount for                Real time)
       PaymentPlan PaymentPlanID
 172   Event EventID is private                                                         Orders (File, Web download &   Error
                                                                                        Real time)
 173   The specified GxKeyID GxKeyID does not exist                                     Orders (File, Web download &   Error
                                                                                        Real time)
 174   The GxKeyID referenced by the External Key ID " GxKeyID " does not exist         Orders (File, Web download &   Error
                                                                                        Real time)
 175   TicketDate of TicketDate cannot be used on the orderline with PLU PLU, this      Orders (File, Web download &   Error
       PLU is not configured for Date Specific                                          Real time)
 176   TicketDate of TicketDate and ExpirationDate of ExpirationDate cannot be          Orders (File, Web download &   Error
       used on the orderline with PLU PLU, this PLU is not configured for Date          Real time)
       Range
 177   The order reference field must be unique for source ExternalSourceID             Orders (File, Web download &   Error
                                                                                        Real time)
                                                                                                                                  341
eGalaxy Server Interface Specification                                                       46 eGalaxy Server Error Codes
 178   Invalid Package detail error. When a package detail given in the XML does     Orders (File, Web download &   Error
       not exist in the Package defined in Galaxy OR vice a versa, this error is     Real time)
       raised.

 179   Invalid Package detail quantity. When Qty of Package detail in XML does not  Orders (File, Web download &    Error
       match Qty defined on the Package in Galaxy, this error is raised.            Real time)
 180   A roster has been provided for an event that does not require a roster.      Orders (File, Web download &    Error
                                                                                    Real time)
 181   Roster information is required for this event.                               Orders (File, Web download &    Error
                                                                                    Real time)
 182   A rostered event cannot have multiple quantities.                            Orders (File, Web download &    Error
                                                                                    Real time)
 183   Event is missing one or more required roster attributes.                     Orders (File, Web download &    Error
                                                                                    Real time)
 184   Event has contacts used in rosters that are not unique.                      Orders (File, Web download &    Error
                                                                                    Real time)
 185   Permit returns only option cannot be used for non-CMS points transactions    Orders (File, Web download &    Error
                                                                                    Real time)
 186   All Items in CMS points transactions require redeemed values greater than 0. Orders (File, Web download &    Error
                                                                                    Real time)
 187   A CMS transaction number (TransID2) is required for CMS points transactions Orders (File, Web download &     Error
                                                                                    Real time)
 188   Only one payment is allowed in CMS points transactions                       Orders (File, Web download &    Error
                                                                                    Real time)
 189   The permit returns only option is required for CMS points transactions.      Orders (File, Web download &    Error
                                                                                    Real time)
 190   Orders with CMS points transaction cannot be updated                         Orders (File, Web download &    Error
                                                                                    Real time)
 191   Orders with CMS points transaction cannot be cancelled                       Orders (File, Web download &    Error
                                                                                    Real time)
 192   Items in a CMS points transaction cannot have a negative quantity            Orders (File, Web download &    Error
                                                                                    Real time)
 193   While attempting to convert PLUs based on delivery method, the               Orders (File, Web download &    Error
       replacement PLU was not found.                                               Real time)
 194   Phone Numbers element cannot contain duplicate phone types.                  Orders (File, Web download &    Error
                                                                                    Real time)
 195   Error occurred when issuing the order with PopUp PrintAtHome delivery        Orders (File, Web download &    Error
       method.                                                                      Real time)
 196   Total number of child JointMembers exceeds the allowed limit for pass.       Orders (File, Web download &    Error
                                                                                    Real time)
 197   Total number of adult JointMembers exceeds the allowed limit for pass        Orders (File, Web download &    Error
                                                                                    Real time)
 198   This order is locked. The Print on Web delivery method is unavailable for    Orders (File, Web download &    Error
       locked orders.                                                               Real time)
 199   eGalaxy failed to acquire all SIAE fiscal seals for tickets/passes in the    Orders (File, Web download &    Warning
       transaction. The order was saved, but must be manually voided by the user, Real time)
       since some of the tickets do not have the required seal.
 200   Ticket Date must fall within the SIAE Event dates                            Orders (File, Web download &    Error
                                                                                    Real time)
 201   TicketDate is required on the orderline, PLU is configured for Date Specific Orders (File, Web download &    Error
                                                                                    Real time)
 202   Total number of reserved seats given in the order does not match number of Orders (File, Web download &      Error
       seats put on hold by the session                                             Real time)
 203   Orders: Multiple Joint Member passes on order                                Orders (File, Web download &    Error
                                                                                    Real time)
 204   Order and ShipTo contacts refer to the same ExternalID but have different    Orders                          Error
                                                                                                                              342
eGalaxy Server Interface Specification                                                            46 eGalaxy Server Error Codes
       data
 205   Pass Contact GUID element does not contain a valid GUID value                     Orders                         Error

 206   Pass Contact GUID is required                                                     Orders (File, Web download &   Error
                                                                                         Real time)
 207   Contact GUID is required                                                          Orders (File, Web download &   Error
                                                                                         Real time)
 208   Error validating Contact GUID                                                     Orders (File, Web download &   Error
                                                                                         Real time)
 209   Pass information was not provided for a Pass Required Ticket                      Orders (File, Web download &   Error
                                                                                         Real time)
 210   Pass information provided for a Pass Required Ticket was not valid                Orders (File, Web download &   Error
                                                                                         Real time)
 211   Event information provided for non-capacity-managed item                          Orders (File, Web download &   Error
                                                                                         Real time)
 212   Roster provided for a non-event based order line                                  Orders (File, Web download &   Error
                                                                                         Real time)
 213   A contact on the order does not fulfill field attribute requirements on one or    Orders (File, Web download &   Error
       more of the items in the order                                                    Real time)
 214   This session does not have the seats reserved                                     Orders                         Error
 215   Cannot cancel order (NNN), order is currently processing                          Orders                         Error
 221   There are user fields that are required, but they were not included in this       Orders                         Error
       request.
 222   The EMS (event management server) session(s) specified in the order are in        Orders                         Error
       an invalid state; that is, they are neither active nor locked.
 223   Time-linked validation for one or more packages within the order failed           Orders                         Error
 224
 225   The <Member> tag for the Primary Member should never include a <Picture>          Orders                         Error
       tag. Instead, the <Picture> should be part of the primary <Contact> tag.
 226   Pass required once-per-day ticket validation failure due to the multiple active   Orders (File, Web download &   Error
       requests. Rejected Order can be resubmitted to verify.                            Real time)
 227   Tickets do not have the same invoicing requirements                               Validate                       Error
 227   UpdateHeader messages cannot update order lines                                   Orders                         Error
 228   Cannot invoice multiple items configured as invoice by usage                      Validate                       Error
 232   One or more required fields were not provided in a reserved seating <Seat>        Orders                         Error /
       node.                                                                                                            Warning
 233   ShipTo and BillTo contacts refer to the same ExternalID but have different        Error
       data
 235   The GiftAidDonorType for this order is not found                                  Orders                         Error
 236   The GiftAidDonorType for this order is not in the correct CodeTable               Orders                         Error
 237   The GiftAidType specified is not valid a valid GiftAidType                        Orders                         Error
 238   The GiftAidType is missing                                                        Orders                         Error
 239   The GiftAidAmount specified on the order line is less than the configured         Orders                         Error
       minimum allowed amount of gift aid
 240   The GiftAidAmount specified on the order line does not match the expected         Orders                         Error
       amount for this item or package detail
 241   The GiftAidType specified on the order line is not valid for this item or         Orders                         Error
       package detail
 242   The GiftAidStatus specified on the order is not valid                             Orders                         Error
 243   A GiftAidStatus of 0 (not asked) or 2 (declined) was specified, but gift aid      Orders                         Error
       types or amounts were found on one or more order lines
 244   No PriceProgram matches the PriceProgramID specified on the order line.           Orders                         Error
 245   Invalid VisualID specified in <UpgradeFromVisualID> element.                      Orders                         Error
 246   PLU is an invalid upgrade option for product specified in                         Orders                         Error
                                                                                                                                  343
eGalaxy Server Interface Specification                                                            46 eGalaxy Server Error Codes
        <UpgradeFromVisualID> element.
 247    PLU is an invalid item type for upgrade using the <UpgradeFromVisualID>          Orders                           Error
        element.
 248    Product specified in <UpgradeFromVisualID> element has a picture ID. The         Orders                           Error
        picture does not exist or primary pass member picture ID does not match or
        <Picture> element is specified in the <Pass> or primary <Member> data.
 249    Product specified in <UpgradeFromVisualID> element has a contact ID. The         Orders                           Error
        primary pass member contact ExternalID or GUID does not match.
 250    The contact data on the order or the order line does not match the context       Orders                           Error
        criteria.
 251    The Item Sales Rules violation. Item not valid at the time of attempted use.     Orders                           Error
 252    A contact was found blocked for Orders, Tickets or Passes action.                Orders                           Error
 258    Upgrade of PLU <PLUtoUpgrade> to <UpgradeTargetPLU> is not a valid               Orders                           Error
        upgrade. UpgradeFromVisualID=<UpgradeFromVisualID>.
 259    Invalid partial package upgrade due to blank UpgradeFromVisualID.                Orders                           Error
 260    Could not find UpgradeFromVisualID <10001000BOGUSVID>                            Orders                           Error
 261    You cannot upgrade this item. The associated item bearing this VisualID has      Orders                           Error
        already been upgraded/returned.
 262    Unable to upgrade ticket. The date of the request is past the end of life date   Orders                           Error
        on the ticket record and therefore the ticket is locked.
 263    Cannot renew pass, it has already been renewed                                   Orders (File, Web download &     Error
                                                                                         Real time)
 264    Cannot change order "O" status from Closed to Open: Request not allowed          Orders UpdateHeader (File, Web   Error
        from the eGalaxy Source "S".                                                     download & Real time)
 265    Cannot change order "O" status from Closed to Open: The order must be            Orders UpdateHeader (File, Web   Error
        Closed to allow the change.                                                      download & Real time)
 266    Cannot change order "O" status from Closed to Open: Order has been               Orders UpdateHeader (File, Web   Error
        Invoiced/Credited.                                                               download & Real time)
 268    Order line quantity is invalid. E.g. qty is zero for item order line             Orders (File, Web download &     Error
                                                                                         Real time)
 269    Order line has a capacity managed product but is missing the ResourceID          Orders (File, Web download &     Error
                                                                                         Real time)
 992    Read timeout error                                                               Any                              Error
 993    Connection timeout error                                                         Any                              Error
 994    Database row modification error when attempting to save                          Any                              Error
 995    Database key violation when attempting to save                                   Any                              Error
 996    Error attempting to connect to the database                                      Any                              Error
 997    An attempt was made to make an update to a read-only database                    Any                              Error
 998    Format error                                                                     Any                              Error
 999    Unknown exception                                                                Any                              Error
 1001   Authentication Error                                                             Authenticate                     Error
 1002   Invalid Message Type                                                             Any                              Error
 1003   Invalid Message Header                                                           Any                              Error
 1004   Invalid Message Body                                                             Any                              Error
 1005   Invalid Data                                                                     Any                              Error
 1008   SourceID tag in the header not found or empty                                    Any                              Error
 1010   Internal eGalaxy error                                                           Any                              Error
 1011   SessionID given in the message header is not valid                               TicketHold, TicketCommit,        Error
                                                                                         TicketSale, TicketReturn
 1013   ValidateOnly mode not allowed for the message type                               Error
 1014   Invalid Origin value for CORS header request                                     Error
 1015   The SourceID value given in the HTTP header does not match the SourceID          Error

                                                                                                                                  344
eGalaxy Server Interface Specification                                                         46 eGalaxy Server Error Codes
        given in the XML request header
 1016   AuthToken tag is required in the XML request header but was not found or      Any                                 Error
        was empty
 1017   The AuthToken provided in the XML request header is invalid                   Any                                 Error
 1018   An AuthToken was provided, but the server is not configured to require a      Any                                 Error /
        token                                                                                                             Warning
 1019   The SalesChannelID value given in the request is not valid                    Error
 1020   The CstomerID and SalesChannelID field value mismatch                         Event Messages                      Error /
                                                                                                                          Warning
 1101   Event EventID not valid                                                       TicketHold, TicketSale              Error
 1102   Event EventID not active                                                      TicketHold, TicketSale              Error
 1103   Event EventID not on sale                                                     TicketHold, TicketSale              Error
 1104   Event EventID quantity Quantity not available                                 TicketHold, TicketSale,             Error
                                                                                      TicketCommit
 1105   Event EventID quantity Quantity cannot be negative                            TicketHold, TicketSale              Error
 1106   No ticket holds found to release for the session SessionID                    AbandonSession                      Error
 1107   Cannot find and/or update capacity record for ticket sale.                    TicketSale                          Error
 1108   Cannot find and/or update capacity record for ticket return.                  TicketReturn                        Error
 1109   EVENT_IS_PRIVATE.                                                                                                 Error
 1110   EVENT_PARENT_RESOURCE_INVALID.                                                                                    Error
 1111   Ticket Hold request SalesChannelID and Session SalesChannelID mismatch.       EventTicketHold                     Error
 1201   Invalid Order data, multiple orders are not supported                         Orders (Real time)                  Error
 1202   Guest Sale Limits Exceeded                                                    Orders, UpdateTickets               Error
 1203   Duplicate GUID with SameAsContact=NO                                          Orders, UpdateTickets               Error
 1300   QueryTicket request error                                                     QueryTicket                         Error
 1301   Invalid field(s) Fields. This field is restricted on the source               QueryTicket                         Error
 1302   The customer of this ticket is restricted by the source                       QueryTicket                         Error /
                                                                                                                          Warning
 1303   Invalid field(s) Fields. Field(s) does not apply to the item kind requested   QueryTicket                         Error
 1304   Invalid Field(s) Fields. Field(s) is unknown                                  QueryTicket                         Error
 1305   Source SourceID not found                                                     QueryTicket                         Error
 1306   Can not process messages from source SourceID, source is inactive             QueryTicket                         Error
 1307   QueryTicket messages are not permitted for source SourceID                    QueryTicket                         Error
 1308   Invalid field(s) Fields. Field(s) is not supported                            QueryTicket                         Error
 1309   StatusRequest element is only supported for ItemKind of Pass                  QueryTicket                         Error
 1310   Source is not enabled to accept Ticket Usage requests                         QueryTicket                         Error
 1311   Source is not enabled to accept Ticket Lineage requests                       QueryTicket                         Error
 1312   Unable to find the pass                                                       QueryTicket                         Error
 1313   Unable to find the ticket                                                     QueryTicket                         Error
 1314   Unable to find the debit card                                                 QueryTicket                         Error
 1315   The media def count not be found                                              QueryTicket                         Error
 1316   No data found                                                                 QueryTicket                         Error
 1317   Invalid PackageDetailResponseMode                                             QueryTicket                         Error
 1318   Invalid PackageDetailResponseMode source element                              QueryTicket                         Error
 1319   Invalid DataRequest source element                                            QueryTicket                         Error
 1400   Ticket activation request error                                               ActivateTicket (Real time)          Error
 1401   Source SourceID not found                                                     ActivateTicket (File & Real time)   Error
 1402   Source SourceID is inactive. Cannot process activation requests from an       ActivateTicket (File & Real time)   Error
        inactive source.
 1403   Source SourceID is not allowed to send ActivateTicket messages                ActivateTicket (File & Real time)   Error
 1404   Ticket does not exist                                                         ActivateTicket (File & Real time)   Error
                                                                                                                                    345
eGalaxy Server Interface Specification                                                             46 eGalaxy Server Error Codes
 1405   Ticket already active                                                             ActivateTicket (File & Real time)   Error
 1406   Ticket already used                                                               ActivateTicket (File & Real time)   Error
 1407   Invalid Item Code PLU                                                             ActivateTicket (File & Real time)   Error
 1408   PLU PLU, not available in customer's sales program                                ActivateTicket (File & Real time)   Error
 1409   Item price Price does not match Galaxy's price Price for same item                ActivateTicket (File & Real time)   Error
 1410   Customer Customer not found                                                       ActivateTicket (File & Real time)   Error
 1411   Customer CustomerID is restricted on the source eGalaxySource                     ActivateTicket (File & Real time)   Error
 1412   Customer CustomerID on ticket is different than the one in file CustomerID        ActivateTicket (File & Real time)   Error
 1413   Form of payment FOP not found                                                     ActivateTicket (File & Real time)   Error
 1414   Payment amount (Payment Amount) does not match the total price (Sale              ActivateTicket (File & Real time)   Error
        Amount) of all tickets
 1415   Credit fop FOP defined on eGalaxy configuration not found                         ActivateTicket (File & Real time)   Error
 1416   Foreign Media VisualID could not be matched up to a media definition              Activate Foreign Ticket             Error
        defined on the source
 1417   A problem was encountered trying to insert a foreign media ticket                 Activate Foreign Ticket             Error
 1418   Source is enabled for activating foreign media, but does not have any media       Activate Foreign Ticket             Error
        definitions defined
 1419   Ticket with a status different than Inactive cannot be activated                  ActivateTicket (File & Real time)   Error
 1420   Ticket with a status different than Valid (or Active) cannot be cancelled         ActivateTicket (File & Real time)   Error
 1421   Sales program SalesProgramID not found on customer CustomerID or it's             ActivateTicket (File & Real time)   Error
        category
 1422   EventID is required for the PLU PLU                                               ActivateTicket (File & Real time)   Error
 1423   Invalid EventID EventID for the PLU PLU                                           ActivateTicket                      Error
 1424   Event EventID is not on sale.                                                     This error can be configured as a   ActivateTicket
                                                                                          warning in eGalaxy
 1425   Event EventID does not have enough quantity available. This error can be          ActivateTicket                      Error /
        configured as a warning in eGalaxy                                                                                    Warning
 1426   Event EventID is over.                                                            This error can be configured as a   ActivateTicket
                                                                                          warning in eGalaxy
 1427   EventID (EventID) given on the ticket does not match Galaxy's EventID             ActivateTicket                      Error
        (EventID) for PLU PLU
 1428   Section or ResourceID (ResourceID) of the event EventID does not match            ActivateTicket                      Error
        Galaxy's ResourceID (ResourceID) for PLU PLU
 1429   EventType (EventTypeID) of the event EventID does not match Galaxy's              ActivateTicket                      Error
        EventType (EventTypeID) for PLU PLU
 1430   Auto Payment option is not allowed for activation of an inactive ticket           ActivateTicket                      Error
 1431   Sales program is not valid to use currently                                       ActivateTicket                      Error
 1432   The ticket is already in the current list of tickets to activate                  ActivateTicket                      Error
 1433   Unable to apply sales program SalesProgramID for customer CustomerID, the         ActivateTicket                      Error
        customer is NOT configured for multiple sales programs
 1434   Event is private                                                                  ActivateTicket                      Error
 1435   The specified GxKeyID does not exist                                              ActivateTicket                      Error
 1436   The GxKeyID referenced by the External Key ID does not exist                      ActivateTicket                      Error
 1437   The EventID specified in the Ticket Activation message does not match the         ActivateTicket                      Error
        EventID on the existing ticket.
 1444   The foreign media ticket ID provided is invalid.                                  Orders (Foreign media ticket        Error
                                                                                          activation)
 1445   Virtual Sales Programs not allowed for this customer                              ActivateTicket                      Error
 1446   Source specified the visual ID for tickets on an order line, but this source is   Orders (Foreign media ticket        Error
        not configured to allow specifying the visual ID for tickets.                     activation)
 1447   The product specified on the order line is not configured to require              Orders (foreign media activation)   Error
        activation, but a visual ID was specified on the order line.

                                                                                                                                         346
eGalaxy Server Interface Specification                                                         46 eGalaxy Server Error Codes
 1448   Incorrect command used for package activation.                                ActivateTicket             Error
 1449   Incorrect command used for ticket activation.                                 ActivateTicket             Error
 1450   Package detail supplied not found.                                            ActivateTicket             Error
                                                                                      (ActivatePackageDetail)
 1451   Owning pass is not active. Cannot activate package.                            ActivateTicket            Error
                                                                                       (ActivatePackageDetail)
 1452   Activating a deferred benefit is not permitted through ActivateTicket.         ActivateTicket            Error
                                                                                       (ActivatePackageDetail)
 1453   Package detail is missing for a package detail with a quantity of greater than ActivateTicket            Error
        one. If one package detail is activated, all package details which share its   (ActivatePackageDetail)
        package detail id must be activated.
 1454   Package detail has invalid EventID. All package details with the same detail ActivateTicket              Error
        id must have the same EventID.                                                 (ActivatePackageDetail)
 1455   Package detail failed validation due to time link verification.                ActivateTicket            Error
                                                                                       (ActivatePackageDetail)
 1456   Package detail has invalid TicketDate. All package details with the same       ActivateTicket            Error
        detail id must have the same TicketDate.                                       (ActivatePackageDetail)
 1457   Provided PLU for product not the same as actual PLU for product                ActivateTicket            Error
 1458   EventID is not allowed for the PLU, it is not capacity managed                 ActivateTicket            Error
 1459   Package header not provided for activating package details.                    ActivateTicket            Error
                                                                                       (ActivatePackageDetail)
 1460   Activation attempted past activate by date                                     ActivateTicket            Error
 1461   TicketActivation message sent with ticket beyond its end of life lock date     ActivateTicket            Error
 1500   UpdatePass request error                                                       UpdatePass                N/A
 1501   Source SourceID not found                                                      UpdatePass                Error
 1502   Can not process messages from source SourceID, source is inactive              UpdatePass                Error
 1503   UpdatePass messages are not permitted for source SourceID                      UpdatePass                Error
 1504   Invalid Field(s) Fields. Field(s) is unknown                                   UpdatePass                Error
 1505   VisualID is missing or empty                                                   UpdatePass                Error
 1506   VisualID VisualID of the pass not found or is invalid                          UpdatePass                Error
 1507   Invalid Field(s) Fields. Field(s) is not supported                             UpdatePass                Error
 1508   Pass status (Status) given in the request is invalid                           UpdatePass                Error
 1509   Error updating pass with visual id VisualID: AdditionalErrorMessage            UpdatePass                Error
 1510   Error saving pass with visual id VisualID: AdditionalErrorMessage              UpdatePass                Error
 1511   Error resulting from the MasterPassID element being unknown/unrelated to UpdatePass                      Error
        the master pass
 1512   Error resulting from passing a MasterPassID that doesn't refer to a pass in    UpdatePass                Error
        the database.
 1513   No pass found for the VisualID and PassAcct provided.                          UpdatePass                Error
 1514   PassAccount of the pass not found or is invalid                                UpdatePass                Error
 1515   No valid required lookup field provided                                        UpdatePass                Error
 1600   Surveys request error                                                          Surveys                   N/A
 1601   Survey ID SurveyID not found. This error can be configured as a warning in     Surveys                   Error /
        eGalaxy                                                                                                  Warning
 1602   Field SurveyQuestion, is configured to require answer but no answer is         Surveys                   Error /
        received in the message. This error can be configured as a warning in                                    Warning
        eGalaxy
 1603   Data type of the answer for field “SurveyQuestion” does not match with the Surveys                       Error /
        one configured in Galaxy. This error can be configured as a warning in                                   Warning
        eGalaxy
 1604   Order OrderID not found in Galaxy’s database                                   Surveys                   Error /
                                                                                                                 Warning
 1700   Customers request error                                                       Customers                  Error
                                                                                                                           347
eGalaxy Server Interface Specification                                                          46 eGalaxy Server Error Codes
 1701   Source SourceID not found                                                    Customers                   Error
 1702   Can not process messages from source SourceID, source is inactive            Customers                   Error
 1703   Source SourceID is not enabled to accept Customers requests                  Customers                   Error
 1704   External account for the customer with name CustomerName is empty,           Customers                   Error
        unable to insert the customer
 1705   Customer name for customer with external account ExternalAccount is          Customers                   Error
        empty, unable to insert the customer
 1706   A Customer with external account ExternalAccounts already exists             Customers                   Error
 1707   Category Category given for customer with ExternalAccount ExternalAccount    Customers                   Error
        not found
 1708   Cannot add Sales program SalesProgramName to customer with                   Customers                   Error
        ExternalAccount ExternalAccount, the sales program is unknown
 1709   Unable to Update or Delete information for customer with external account    Customers                   Error /
        ExternalAccount, customer does not exist                                                                 Warning
 1710   Cannot delete customer with external account ExternalAccount due to          Customers                   Error
        dependency
 1711   Username Username already exists, please use a different username            Customers                   Error
 1713   Password specified in the <Logon> element does not meet Galaxy's             Customers                   Error
        password policies.
 1800   Authenticate Logon request error                                             AuthenticateLogon           Error
 1801   Logon authentication error, no match found for the given username and        AuthenticateLogon           Error
        password
 1901   Source SourceID not found                                                    QueryCustomer               Error
 1902   Can not process messages from source SourceID, source is inactive            QueryCustomer               Error
 1903   Source SourceID is not enabled to accept QueryCustomer requests              QueryCustomer               Error
 1904   Unable to return customer data, customer with External Account of            QueryCustomer               Error
        ExternalAccount not found
 2000   UpdateReplenishStatus request error                                          UpdateReplenishStatus       Error
 2001   Source SourceID not found                                                    UpdateReplenishStatus       Error
 2002   Cannot process messages from source SourceID, source is inactive             UpdateReplenishStatus       Error
 2003   UpdateReplenishStatus messages are not permitted for source SourceID         UpdateReplenishStatus       Error
 2004   Unable to locate ticket VisualID                                             UpdateReplenishStatus       Error
 2005   Unable to change status from CurrentStatus to NewStatus                      UpdateReplenishStatus       Error
 2006   Unable to update ReplenishStatus for VisualID:VisualID,                      UpdateReplenishStatus       Error
        ReplenishStatus:NewStatus is invalid
 2100   Contacts request error                                                       Contacts                    Error
 2101   Source SourceID not found                                                    Contacts                    Error
 2102   Can not process messages from source SourceID, source is inactive            Contacts                    Error
 2103   Source SourceID is not enabled to accept Contacts requests                   Contacts                    Error
 2104   ExternalID for the contact with LastName LastName is empty, unable to        Contacts                    Error
        modify the contact
 2105   LastName for contact with ExternalID ExternalID is empty, unable to insert   Contacts                    Error
        the contact
 2106   A Contact with ExternalID ExternalID already exists                          Contacts                    Error
 2107   Unable to Update or Delete information for contact with external id          Contacts                    Error /
        ExternalID, contact does not exist                                                                       Warning
 2108   Username Username already exists, please use a different username            Contacts                    Error
 2109   CompanyCode CompanyCode is already used by another contact                   Contacts                    Error
 2116   Password specified in the <Logon> element does not meet Galaxy's             Contacts                    Error
        password policies.
 2117   Contact has no logon name currently, and none was provided in request.       Contacts                    Error
 2200   QueryContact request error                                                   QueryContact                Error

                                                                                                                           348
eGalaxy Server Interface Specification                                                          46 eGalaxy Server Error Codes
 2201   Source SourceID not found                                                      QueryContact              Error
 2202   Can not process messages from source SourceID, source is inactive              QueryContact              Error
 2203   Source SourceID is not enabled to accept QueryContact requests                 QueryContact              Error
 2204   Unable to return contact data, contact with ExternalID of ExternalID not       QueryContact              Error
        found
 2300   QueryContactHistory request error                                              QueryContactHistory       Error
 2301   Source SourceID not found                                                      QueryContactHistory       Error
 2302   Can not process messages from source SourceID, source is inactive              QueryContactHistory       Error
 2303   Source SourceID is not enabled to accept QueryContactHistory requests          QueryContactHistory       Error
 2304   Unable to return purchase history, contact with ExternalID of ExternalID not   QueryContactHistory       Error
        found
 2400   SendPasswordReminder request error                                             SendPasswordReminder      Error
 2401   Source SourceID not found                                                      SendPasswordReminder      Error
 2402   Can not process messages from source SourceID, source is inactive              SendPasswordReminder      Error
 2403   Unable to find the account with the given username(%s) and e-mail              SendPasswordReminder      Error
        address(%s) due to this error: %s
 2404   An unknown Mode value (%s) was specified in the request                        SendPasswordReminder      Error
 2405   The Mode=UpdatePasswordFromReset, but no Token value was provided in           SendPasswordReminder      Error
        the request to verify
 2406   The provided password reset token cannot be found                              SendPasswordReminder      Error
 2407   The provided password reset token has expired                                  SendPasswordReminder      Error
 2408   The provided token was for a different user account                            SendPasswordReminder      Error
 2409   The Token provided in the request (%s) is not in the proper GUID format        SendPasswordReminder      Error
 2410   No new password was provided for Mode=UpdatePasswordFromReset                  SendPasswordReminder      Error
 2411   The provided password does not meet current system policies                    SendPasswordReminder      Error
 2500   ReplenishTicket request error                                                  ReplenishTicket           Error
 2501   Source SourceID not found                                                      ReplenishTicket           Error
 2502   Cannot process messages from source SourceID, source is inactive               ReplenishTicket           Error
 2503   ReplenishTicket messages are not permitted for source SourceID                 ReplenishTicket           Error
 2504   Unable to replenish ticket VisualID due to an error: Error Message             ReplenishTicket           Error
 2601   Appeal ID not found in Appeals table. Item for the OrderLine has Gift option   Orders                    Error
        turned on and Order Line XML has Gift XML within it. The Appeal ID value in
        Gift XML must exist in Appeals table if the value is not zero.
 2602   Solicitation ID not found in Solicitations table Same as 2601 error for        Orders                    Error
        Solicitation ID.
 2603   Appeal ID must be numeric. Appeal ID must be numeric and it cannot be          Orders                    Error
        blank if Appeal ID element is given.
 2604   Solicitation ID must be numeric. Same as 2603 error for Solicitation ID        Orders                    Error
 2700   Ticket creation request error                                                  CreateTickets             Error
 2701   Source SourceID not found                                                      CreateTickets             Error
 2702   Source SourceID is inactive. Cannot process creation requests from an          CreateTickets             Error
        inactive source.
 2703   Source eGalaxySource is not allowed to send CreateTickets messages             CreateTickets             Error
 2704   Invalid Item Code PLU                                                          CreateTickets             Error
 2705   Item specified by PLU is not a ticket                                          CreateTickets             Error
 2706   PLU PLU, not available in customer's sales program                             CreateTickets             Error
 2707   Item price Price does not match Galaxy's price Price for same item             CreateTickets             Error
 2708   Customer Customer not found                                                    CreateTickets             Error
 2709   Customer CustomerID is restricted on the source eGalaxySource                  CreateTickets             Error
 2711   Form of payment FOP not found                                                  CreateTickets Error
 2712   Payment amount (Payment Amount) does not match the total price (Sale           CreateTickets             Error
                                                                                                                         349
eGalaxy Server Interface Specification                                                          46 eGalaxy Server Error Codes
        Amount) of all tickets
 2713   Credit fop FOP defined on eGalaxy configuration not found                       CreateTickets             Error
 2714   Invalid Sales Program                                                           CreateTickets             Error
 2715   Event ID is required for the selected item                                      CreateTickets             Error
 2716   Invalid Event ID                                                                CreateTickets             Error
 2717   The selected event is not on sale                                               CreateTickets             Error
 2718   The selected event does not have enough capacity                                CreateTickets             Error
 2719   The selected event is over                                                      CreateTickets             Error
 2720   The selected event does not match the event from the item                       CreateTickets             Error
 2721   The selected resource does not match the resource on the item                   CreateTickets             Error
 2722   The selected event type does not match the event type on the item               CreateTickets             Error
 2723   The sales program is not valid right now                                        CreateTickets             Error
 2724   Cannot apply sales program                                                      CreateTickets             Error
 2725   Access code for PLU not found                                                   CreateTickets             Error
 2726   Media Definition for PLU not found                                              CreateTickets             Error
 2727   Quantity of an order line with seat assignment cannot be greater than 1         CreateTickets             Error
 2728   Event is private                                                                CreateTickets             Error
 2729   All Items in CMS points transactions require redeemed values greater than 0.    CreateTickets             Error
 2730   A CMS transaction number (TransID2) is required for CMS points transactions     CreateTickets             Error
 2731   Only one payment is allowed in a CMS points transaction                         CreateTickets             Error
 2732   Items in a CMS points transaction cannot have a negative quantity               CreateTickets             Error
 2733   Virtual Sales Programs not allowed for this customer                            CreateTickets             Error
 2800   ImportPass request error                                                        ImportPass                Error
 2801   Source SourceID not found                                                       ImportPass                Error
 2802   Source SourceID is inactive. Cannot process ImportPass                          ImportPass                Error
 2803   Source eGalaxySource is not allowed to import passes                            ImportPass                Error
 2804   PLU not found or is empty. Cannot import pass without a valid PLU               ImportPass                Error
 2805   PLU given in the request (PLU) not found in Galaxy's Items table                ImportPass                Error
 2806   PassKind is not configured on the pass PLU given in the request (PLU).          ImportPass                Error
        Unable to import a pass without a valid PassKind
 2807   AccessCode is not configured on the pass PLU given in the request (PLU).        ImportPass                Error
        Unable to import a pass without a valid AccessCode
 2808   Pass field "FieldLabel" is configured as a required field on the pass kind      ImportPass                Error
        (PassKind), however no data exists for this field in the request
 2809   VisualID VisualID already exists in Galaxy's Passes table                       ImportPass                Error
 2810   Data for pass field "FieldLabel" is invalid                                     ImportPass                Error
 2811   Pass designated as Master Pass (ID: PassID) not found in Galaxy's Passes        ImportPass                Error
        table
 2812   Pass designated as Purchaser Pass (ID: PassID) not found in Galaxy's Passes     ImportPass                Error
        table
 2813   Ticket kind (Kind) on the pass PLU is invalid. Ticket kind of PLU PLU must be   ImportPass                Error
        PASS
 2814   Pass status (Status) given in the request is invalid                            ImportPass                Error
 2900   A PassPhrase or ExternalKey was not specified                                   EncryptionKey             Error
 2901   A KeyName was not specified                                                     EncryptionKey             Error
 2902   The specified ExternalKeyID already exists                                      EncryptionKey             Error
 2903   The specified GxKeyID already exists                                            EncryptionKey             Error
 2904   A PassPhrase AND ExternalKey cannot be defined for an encryption key            EncryptionKey             Error
 3000   GetPaymentPlanSalesData request error                                           GetPaymentPlanSalesData   Error
 3001   PaymentPlan with ID PaymentPlanID not found in Galaxy database                  GetPaymentPlanSalesData   Error

                                                                                                                          350
eGalaxy Server Interface Specification                                                       46 eGalaxy Server Error Codes
 3002   Contact with ExternalID ContactExternalID not found in Galaxy database       GetPaymentPlanSalesData   Error
 3100   CheckGroupSalesLimits request error                                          CheckGroupSalesLimits     Error
 3101   Source SourceID not found                                                    CheckGroupSalesLimits     Error
 3102   Source SourceID is inactive. Cannot process CheckGroupSalesLimits requests   CheckGroupSalesLimits     Error
        from an inactive source

 3103   Source eGalaxySource is not allowed to Check Groupsales limits               CheckGroupSalesLimits     Error
 3104   Cannot add GroupSales limit hold for invalid SessionID: SessionID            CheckGroupSalesLimits     Error
 3105   Customer category with ID CustCategoryID not found in Galaxy database        CheckGroupSalesLimits     Error
 3106   GroupSales limit enforcement is not enabled on the customer category with    CheckGroupSalesLimits     Error
        ID: CustCategoryID
 3200   User request error                                                           User                      Error
 3201   Source SourceID not found                                                    User                      Error
 3202   Source SourceID is inactive. Cannot process Node requests from an inactive   User                      Error
        source
 3203   Source eGalaxySource is not allowed to process reseller requests             User                      Error
 3204   Agency AgencyID not found in Galaxy database                                 User                      Error
 3205   User with UserName UserName already exists in Galaxy database                User                      Error
 3206   AgencyType of agency AgencyID is 'Default'. Agency of the user must have a   User                      Error
        type of 'Reseller'
 3207   User with ID UserID not found in Galaxy database                             User                      Error
 3208   Unable to generate a password due to this error: PasswordGeneratorEngine     User                      Error
        error
 3209   Password does not meet the strong password requirements.                     User                      Error
        PasswordVerificationEngine Error
 3210   User is not part of the specified agency                                     User                      Error
 3211   Requested FailedRemaining value was negative                                 User                      Error
 3212   Requested FailedRemaining value exceeds system maximum                       User                      Error
 3300   Node request error                                                           Node                      Error
 3301   Source SourceID not found                                                    Node                      Error
 3302   Source SourceID is inactive. Cannot process User requests from an inactive   Node                      Error
        source
 3303   Source eGalaxySource is not allowed to process reseller requests             Node                      Error
 3304   Agency AgencyID not found in Galaxy database                                 Node                      Error
 3305   AgencyType of agency AgencyID is ''Default''. Agency of the user must have   Node                      Error
        a type of ''Reseller''
 3306   Node NodeNo not found in Galaxy database                                     Node                      Error
 3307   Cannot add a new node. All node numbers in the node ranges for this          Node                      Error
        location (Agency) are in use
 3400   General request error                                                        CreateTransaction         Error
 3401   Source not found                                                             CreateTransaction         Error
 3402   Source is inactive                                                           CreateTransaction         Error
 3403   Source does not permit CreateTransaction messages                            CreateTransaction         Error
 3404   Customer with ID not found in Galaxy database                                CreateTransaction         Error
 3405   PLU not found in Galaxy database                                             CreateTransaction         Error
 3406   Ticket with given VisualID not found in Galaxy tickets table                 CreateTransaction         Error
 3407   Cannot return ticket with given VisualID because it has an invalid status    CreateTransaction         Error
 3408   Cannot return ticket with given VisualID because it has been used already    CreateTransaction         Error
 3409   Cannot make prepayment without payment processor configured                  CreateTransaction         Error
 3410   FOP used for prepayment must be configured to authorize                      CreateTransaction         Error
 3411   Prepaid balance update failed                                                CreateTransaction         Error
 3412   Journal update failed                                                        CreateTransaction         Error

                                                                                                                       351
eGalaxy Server Interface Specification                                                          46 eGalaxy Server Error Codes
 3413   Prepayment refund payments not supported                                        CreateTransaction        Error
 3414   Prepaid balance is insufficient                                                 CreateTransaction        Error
 3415   Account not found                                                               CreateTransaction        Error
 3416   Not enough credit available in account                                          CreateTransaction        Error
 3417   Credit payment amount cannot be negative                                        CreateTransaction        Error
 3418   Credit payments are not authorized for this Form Of Payment                     CreateTransaction        Error
 3419   Unable to process this transaction because the specified customer account       CreateTransaction        Error
        is on hold
 3420   Unable to process this prepayment because the specified customer account        CreateTransaction        Error
        is frozen
 3421   Ticket is inactive at an external site                                          CreateTransaction        Error
 3422   Ticket was already used at an external site                                     CreateTransaction        Error
 3423   The expected Price from the plugin does not match the given ExternalPrice       CreateTransaction        Error
 3424   The expected StartDate from the plugin does not match the given TicketDate      CreateTransaction        Error
 3425   The expected ExpirationDate from the plugin does not match the given            CreateTransaction        Error
        ExpirationDate
 3426   The expected UpgradeValue from the plugin does not match the given              CreateTransaction        Error
        UpgradeValue
 3427   Booking reference is required                                                   CreateTransaction        Error
 3428   Travel date is required                                                         CreateTransaction        Error
 3429   Ticket is past its end of life lock date                                        CreateTransaction        Error
 3430   The user is not part of the agency given in the request                         CreateTransaction        Error
 3431   EventID not allowed for the given PLU as it is not an RM product                CreateTransaction        Error
 3432   The CreateTransaction Sales Channel ID differs from the Session Event Hold      CreateTransaction        Error /
        Sales Channel ID                                                                                         Warning
 3500   QueryReportData request error                                                   QueryReportData          Error
 3501   Source SourceID not found                                                       QueryReportData          Error
 3502   Source SourceID is inactive. Cannot process QueryReportData requests from       QueryReportData          Error
        an inactive source.
 3503   Source eGalaxySource is not allowed to process report requests.                 QueryReportData          Error
 3504   ReportID not found in Galaxy database.                                          QueryReportData          Error
 3700   ImportDebitTransaction request error                                            ImportDebitTransaction   Error
 3701   Source SourceID not found                                                       ImportDebitTransaction   Error
 3702   Source SourceID is inactive. Cannot process ImportDebitTransaction requests     ImportDebitTransaction   Error
        from an inactive source.
 3703   Source eGalaxySource is not allowed to process debit transaction requests.      ImportDebitTransaction   Error
 3704   Card log type not supported by the ImportDebitTransaction message.              ImportDebitTransaction   Error
 3705   Serial number not found in the RFIDMaps table                                   ImportDebitTransaction   Error
 3706   DebitCard record not found for the visual ID associated with the given serial   ImportDebitTransaction   Error
        number in the ImportDebitTransaction message.
 3707   No visual ID was provided for the debit transaction                             ImportDebitTransaction   Error
 3708   The transaction (Charge or Unload) could not be completed because the card      ImportDebitTransaction   Error
        with the provided visual ID is locked out.
 3709   The transaction (Charge or Unload) could not be completed because the card      ImportDebitTransaction   Error
        with the provided visual ID has an insufficient balance.
 3900   UpdateContractStatus request error                                              UpdateContractStatus     Error
 3901   Source SourceID not found                                                       UpdateContractStatus     Error
 3902   Source SourceID is inactive. Cannot process UpdateContractStatus requests       UpdateContractStatus     Error
        from an inactive source.
 3903   Source SourceID is not allowed to process contract requests                     UpdateContractStatus     Error
 3904   PaymentContractID not found in PaymentContracts table.                          UpdateContractStatus     Error

                                                                                                                           352
eGalaxy Server Interface Specification                                                      46 eGalaxy Server Error Codes
 3905   PaymentContractStatusID not found in PaymentContractStatuses table          UpdateContractStatus     Error
 4000   QueryLockerTransaction request error                                        QueryLockerTransaction   Error
 4001   Source SourceID not found                                                   QueryLockerTransaction   Error
 4002   Source SourceID is inactive. Cannot process QueryLockerTransaction          QueryLockerTransaction   Error
        requests from an inactive source
 4003   Source SourceID is not allowed to process QueryLockerTransaction requests   QueryLockerTransaction   Error
 4004   RFID Serial number not found                                                QueryLockerTransaction   Error
 4100   EventTicketHold request error                                               EventTicketHold          Error
 4101   Provided PLU cannot be found in database                                    EventTicketHold          Error
 4102   ResourceID on PLU does not match ResourceID in request                      EventTicketHold          Error
 4103   Invalid EventID in SelectedEvent element                                    EventTicketHold          Error
 4104   Invalid PackageDetailID in CurrentEventSelection or SelectedEvent element   EventTicketHold          Error
 4105   Invalid PLU in CurrentEventSelection element                                EventTicketHold          Error
 4200   QueryRoster request error                                                   QueryRoster              Error
 4201   EventID is not valid                                                        QueryRoster              Error
 4202   Event is off sale                                                           QueryRoster              Error
 4203   Event is over                                                               QueryRoster              Error
 4300   QueryRosterContact request error                                            QueryRosterContact       Error
 4301   This contact has already been selected for this event                       QueryRosterContact       Error
 4302   EventID is not valid                                                        QueryRosterContact       Error
 4303   Event is off sale                                                           QueryRosterContact       Error
 4304   Event is over                                                               QueryRosterContact       Error
 4305   ContactID is not valid                                                      QueryRosterContact       Error
 4306   Event does not have a roster                                                QueryRosterContact       Error
 4400   PaymentAuth forwarding error                                                PaymentAuth              Error
 4401   A payment processor URL has not been defined in the eGalaxy configuration   PaymentAuth              Error
 4402   Timeout exceeded when attempting to connect to the payment processor        PaymentAuth              Error
 4403   Timeout exceeded when requesting response from the payment processor        PaymentAuth              Error
 4500   QueryGroupSalesCode request error                                           QueryGroupSalesCode      Error
 4501   Source SourceID not found                                                   QueryGroupSalesCode      Error
 4502   Source SourceID is inactive. Cannot process QueryLockerTransaction          QueryGroupSalesCode      Error
        requests from an inactive source
 4503   Source SourceID is not allowed to process QueryLockerTransaction requests   QueryGroupSalesCode      Error
 4504   GroupSales Code GroupSalesCode is invalid                                   QueryGroupSalesCode      Error
 4505   Customer CustomerID associated with the GroupSales Code GroupSalesCode      QueryGroupSalesCode      Error
        not found in the Customers table
 4506   Customer CustomerID associated with the GroupSales Code GroupSalesCode      QueryGroupSalesCode      Error
        is not valid
 4601   EventID is invalid                                                          QueryEvents              Error
 4602   PLU is invalid                                                              QueryEvents              Error
 4603   CustomerID is invalid                                                       QueryEvents              Error
 4604   Error querying events                                                       QueryEvents              Error
 4700   QueryOrder Request Error                                                    QueryOrder               Error
 4701   Source not found                                                            QueryOrder               Error
 4702   Source is inactive                                                          QueryOrder               Error
 4703   Source does not permit QueryOrder messages                                  QueryOrder               Error
 4704   OrderID not found                                                           QueryOrder               Error
 4705   Order not found                                                             QueryOrder               Error
 4706   Invalid TranslationLanguageID (non-numeric) provided                        QueryOrder               Error
 4707   Unknown TranslationLanguageID provided, could not be located in the         QueryOrder               Error

                                                                                                                     353
eGalaxy Server Interface Specification                                                               46 eGalaxy Server Error Codes
        RMEvents table
 4708   Multiple orders were found matching the endorsement value that was                   QueryOrder                      Error
        specified.
 4709   Invalid Order. Order found but not complete yet.                                     QueryOrder                      Error
 4800   QueryOrders Request Error                                                            QueryOrders                     Error
 4801   Source not found                                                                     QueryOrders                     Error

 4802   Source is inactive                                                                   QueryOrders                     Error
 4803   Source does not permit QueryOrders messages
 4804   ExternalID not found                                                                 QueryOrders                     Error
 4805   Contact not found                                                                    QueryOrders                     Error
 4806   Customer not found                                                                   QueryOrders                     Error
 5400   Upsell PLU not found in items table                                                  Upsell                          Error
 5401   Upsell type not valid                                                                Upsell                          Error
 5600   Request Error                                                                        GetPaymentContractAccountData   Error
 5601   Payment contract with given ID not found                                             GetPaymentContractAccountData   Error
 5700   GetEvents Error                                                                      GetEvents                       Error
 5701   Source Not Found                                                                     GetEvents                       Error
 5702   Source Inactive                                                                      GetEvents                       Error
 5703   Source Not Enabled                                                                   GetEvents                       Error
 5704   Invalid TranslationLanguageID (non-numeric) provided                                 GetEvents                       Error
 5705   Unknown TranslationLanguageID provided, could not be located in the                  GetEvents                       Error
        RMEvents table
 5800   Entitlement addon error                                                              Orders                          Error
 5801   Invalid entitlement addon VisualID                                                   Orders                          Error
 5802   Invalid external dynamic package ID                                                  Orders                          Error
 5900   QueryCustomerItems Error                                                             QueryCustomerItems              Error
 5901   Customer not found                                                                   QueryCustomerItems              Error
 5902   Sales program not found                                                              QueryCustomerItems              Error
 5903   Customer ID has multiple sales programs. A SalesProgramID must be                    QueryCustomerItems              Error
        provided
 5904   Sales program not found on customer                                                  QueryCustomerItems              Error
 6100   UpdateTickets Error                                                                  UpdateTickets                   Error
 6101   All of the tickets within the request failed to update                               UpdateTickets                   Error
 6102   One or more tickets within the request failed to update, and request required        UpdateTickets                   Error
        that all succeed
 6103   Unable to load one or more of the requested tickets using the provided               UpdateTickets                   Error
        VisualID
 6104   Error occurred while attempting to update the picture for one of the tickets         UpdateTickets                   Error
 6105   Failed to update ticket due to invalid exchange status, or provided only date        UpdateTickets                   Error
        for event ticket
 6106   Failed to update the capacity for the new event for one of the tickets               UpdateTickets                   Error
 6107   The pricing of one of the tickets failed validation, new date or event would         UpdateTickets                   Error
        result in a different price for the ticket
 6108   Error occurred while validated the package details for one of the tickets            UpdateTickets                   Error
 6109   A ticket date change was requested, and one or more of the tickets were part         UpdateTickets                   Error
        of an order line that had a quantity > 1, but not all of the tickets on that order
        line were being updated. All must be updated together when the option to
        update the order is requested
 6110   An event change was requested, and one or more of the tickets were part of           UpdateTickets                   Error
        an order line that had a quantity > 1, but not all of the tickets on that order
        line were being updated. All must be updated together when the option to
        update the order is requested
                                                                                                                                     354
eGalaxy Server Interface Specification                                                              46 eGalaxy Server Error Codes
 6111   An error occured while attempting to change the dates on a ticket                  UpdateTickets                 Error
 6112   An error occured while attempting to update a ticket                               UpdateTickets                 Error
 6113   An error occured while attempting to change the event on an OrderDetail            UpdateTickets                 Error
 6114   Failed to update ticket. The ticket is past its end of life lock date.             UpdateTickets                 Error
 6115   The request attempted to change the status of a ticket, but the eGalaxy            Error
        Source is not configured to allow this update.

 6116   The request attempted to change the status of a ticket, but the status             Error
        specified was not a valid status.
 6117   The event given for update is past the off sale date or the ticket date given is   Error
        in the past
 6300   Multiple transactions were found in the order, which is not supported              Orders, Cancel                Error
 6301   This order has a payment, which is not allowed when voiding an order.              Orders, Cancel                Error
 6302   One or more tickets in this order have been used.                                  Orders, Cancel                Error
 6303   There are items in the order for which voiding is not supported in eGalaxy         Orders, Cancel                Error
        Server.
 6304   One or more tickets in the order have a status which cannot be voided.             Orders, Cancel                Error
 6305   One or more tickets in the order are past their end of life date and are locked    Orders, Cancel                Error
        and therefore cannot be voided.
 7100   UpdateSystemLogon: Request Error                                                   UpdateSystemLogon             Error
 7101   PassID of (Pass ID) doesn't refer to a valid Pass                                  UpdateSystemLogon             Error
 7102   SystemLogonID of (SystemLogon ID) doesn't refer to a valid SystemLogon             UpdateSystemLogon             Error
        entry
 7103   UpdateSystemLogon: Source is disabled                                              UpdateSystemLogon             Error
 7104   UpdateSystemLogon: Source not found                                                UpdateSystemLogon             Error
 7105   UpdateSystemLogon: Source is inactive                                              UpdateSystemLogon             Error
 7106   The <PassID> element is required for the UpdateSystemLogon Message                 UpdateSystemLogon             Error
 7107   The <SystemLogonID> element is required for the UpdateSystemLogon                  UpdateSystemLogon             Error
        Message
 7108   The <UpdateSystemLogon> element is required for the UpdateSystemLogon              UpdateSystemLogon             Error
        Message
 7109   The SystemLogon.OwnerType is not of type "Contact" and therefore the new           UpdateSystemLogon             Error
        value cannot be set. Only a Contact values can be set.
 7110   Web Logon already exists for a contact (Contact ID). Please select a different     UpdateSystemLogon             Error
        contact
 7200   AddDeferredEntitlementAddOn: Request error                                         AddDeferredEntitlementAddOn   Error
 7201   The <PLU> element was missing from the request or was blank.                       AddDeferredEntitlementAddOn   Error
 7202   The <PLU> specified in the PLU element does not exist.                             AddDeferredEntitlementAddOn   Error
 7203   The <DeferredEntitlementAddOnVisualID> element was missing from the                AddDeferredEntitlementAddOn   Error
        request or was blank.
 7204   The <DeferredEntitlementAddOnVisualID> specified was not found to be a             AddDeferredEntitlementAddOn   Error
        valid ticket or pass.
 7205   The item to which the deferred entitlement add-on would be added is                AddDeferredEntitlementAddOn   Error
        configured to prevent adding entitlement add-ons.
 7206   Entitlement add-ons cannot be added to debit types.                                AddDeferredEntitlementAddOn   Error
 7207   Entitlement add-ons cannot be added to deactivated super tickets.                  AddDeferredEntitlementAddOn   Error
 7208   The status of the VisualID is not valid for adding a deferred entitlement add-     Error
        on.
 7300   An order line attempted to return an entitlement, but did not specify a visual     Orders                        Error
        ID, and validated returns are turned on.
 7301   An order line attempted to return an entitlement, but the entitlement has          Orders                        Error
        already been used and is not valid for return.
 7302   An order line attempted to return an entitlement, but the entitlement has a        Orders                        Error

                                                                                                                                 355
eGalaxy Server Interface Specification                                                              46 eGalaxy Server Error Codes
        status that is not valid for return.
 7303   An order line attempted to return an entitlement, but an error occurred which      Orders                    Error
        prevented the return. See the ErrorText for details.
 7401   A pass reissue order line neglected to provide the visual ID of the pass to        Orders                    Error
        reissue.
 7402   A pass reissue order line specified a visual ID to reissue that does not exist.    Orders                    Error
 7403   A pass reissue order line specified a visual ID to reissue that is not valid for   Orders                    Error
        reissue (it may be expired, replaced, etc.). The message text provides more
        details about why the status is invalid.
 7404   A pass reissue order line provided a visual ID to use for activation, but the      Orders                    Error
        pass kind configured on the pass is not configured to use a new visual ID on
        reissue.
 7405   A pass reissue order line specified a visual ID to reissue that is lapsed (the     Orders                    Error
        pass must use by date is in the past and pass has not been used)
 7601   A pass renewal order line specified a visual ID to renew that is pending           Orders                    Error
        activation (the pass must use by date is in the future and pass has not been
        used)
 7602   A pass renewal order line specified a visual ID to renew that is lapsed (the       Orders                    Error
        pass must use by date is in the past and pass has not been used)
 7701   A pass required product order line specified a pass visual ID to reference         Orders                    Error
        that is lapsed (the pass must use by date is in the past and pass has not
        been used)
 7702   The Must Use By date lapsed for pass associated with the benefit, benefit          Orders                    Error
        cannot be issued.
 7801   Insufficient stored value card balance.                                            StoredValuePayment        Error
 7802   Debit card with VisualID is voided.                                                StoredValuePayment        Error
 7803   Debit card with VisualID is returned.                                              StoredValuePayment        Error
 7804   Debit card with VisualID was not found.                                            StoredValuePayment        Error
 7805   Debit card with VisualID is expired.                                               StoredValuePayment        Error
 7806   Debit card with VisualID is inactive.                                              StoredValuePayment        Error
 7807   Debit card with VisualID is locked out.                                            StoredValuePayment        Error
 7900   PLU given in the request does not match the PackagePLU attached to (PLU)           Orders                    Error
 7901   PLU given in the request does not match PLU configured on detail with ID:          Orders                    Error
        (ID)
 7902   Total details given in the request exceeds the total number of optional            Orders                    Error
        details configured on the package
 7903   PLU given in the request does not match the PackagePLU attached to (Pass           Orders                    Error
        PLU)
 7904   Detail attached to package must be upgraded to (PLU)                               Orders                    Error
 7905   The Order Sales Channel ID differs from the Session Event Hold Sales               Orders                    Error /
        Channel ID                                                                                                   Warning
 7906   This package has no details to issue at the time of sale                           Orders                    Error
 7907   The pass benefit is not available due to sale limits or package configuration      Orders                    Error
 8100   Order line ticket quantity cannot be greater than 1 if only one Guest is           Orders                    Error
        provided and Guest.ApplyToFullOrderLineQty is false
 8101   Order line ticket quantity must match Guest quantity when multiple Guests          Orders                    Error
        are provided




                                                                                                                               356
